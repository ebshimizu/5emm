import{m as H,a as u,h as o,z as ne,k as W,r as N,bZ as U,aK as xe,l as bt,aa as J,aP as mt,Q as Le,aS as St,q as Z,bt as yt,d as ht,y as wt,x as _t,o as Ct,aT as qt,aO as pe,j as Ne,J as Qe,bm as Pt,L as He,bn as Ft,b_ as Fe,b$ as Me,c0 as xt,c1 as kt,bY as Pe,$ as Rt,b0 as Tt,s as Ie,B as Ot,c2 as Bt,ar as Vt,bq as jt,bs as Dt,bu as pt,c3 as Mt,bv as $e,br as $t,a$ as Et}from"./index.7cc2e6d9.js";import{a as zt,o as At,q as Lt,b as Nt,t as Ue,g as Qt,w as Ht,Q as It}from"./use-dialog-plugin-component.e99688d4.js";import{a as Ut}from"./QMarkupTable.52c59982.js";import{u as Wt,a as Kt,b as Xt}from"./use-fullscreen.418392d3.js";var xl=H({name:"QTd",props:{props:Object,autoWidth:Boolean,noHover:Boolean},setup(e,{slots:l}){const a=W(),d=u(()=>"q-td"+(e.autoWidth===!0?" q-table--col-auto-width":"")+(e.noHover===!0?" q-td--no-hover":"")+" ");return()=>{if(e.props===void 0)return o("td",{class:d.value},ne(l.default));const n=a.vnode.key,v=(e.props.colsMap!==void 0?e.props.colsMap[n]:null)||e.props.col;if(v===void 0)return;const{row:i}=e.props;return o("td",{class:d.value+v.__tdClass(i),style:v.__tdStyle(i)},ne(l.default))}}});function ae(e,l=new WeakMap){if(Object(e)!==e)return e;if(l.has(e))return l.get(e);const a=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:typeof e.constructor!="function"?Object.create(null):e.prototype!==void 0&&typeof e.prototype.constructor=="function"?e:new e.constructor;if(typeof e.constructor=="function"&&typeof e.valueOf=="function"){const d=e.valueOf();if(Object(d)!==d){const n=new e.constructor(d);return l.set(e,n),n}}return l.set(e,a),e instanceof Set?e.forEach(d=>{a.add(ae(d,l))}):e instanceof Map&&e.forEach((d,n)=>{a.set(n,ae(d,l))}),Object.assign(a,...Object.keys(e).map(d=>({[d]:ae(e[d],l)})))}var kl=H({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","beforeShow","show","beforeHide","hide"],setup(e,{slots:l,emit:a}){const{proxy:d}=W(),{$q:n}=d,v=N(null),i=N(""),s=N("");let f=!1;const w=u(()=>U({initialValue:i.value,validate:e.validate,set:r,cancel:m,updatePosition:P},"value",()=>s.value,_=>{s.value=_}));function r(){e.validate(s.value)!==!1&&(F()===!0&&(a("save",s.value,i.value),a("update:modelValue",s.value)),k())}function m(){F()===!0&&a("cancel",s.value,i.value),k()}function P(){xe(()=>{v.value.updatePosition()})}function F(){return bt(s.value,i.value)===!1}function k(){f=!0,v.value.hide()}function g(){f=!1,i.value=ae(e.modelValue),s.value=ae(e.modelValue),a("beforeShow")}function h(){a("show")}function p(){f===!1&&F()===!0&&(e.autoSave===!0&&e.validate(s.value)===!0?(a("save",s.value,i.value),a("update:modelValue",s.value)):a("cancel",s.value,i.value)),a("beforeHide")}function b(){a("hide")}function B(){const _=l.default!==void 0?[].concat(l.default(w.value)):[];return e.title&&_.unshift(o("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),e.buttons===!0&&_.push(o("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[o(J,{flat:!0,color:e.color,label:e.labelCancel||n.lang.label.cancel,onClick:m}),o(J,{flat:!0,color:e.color,label:e.labelSet||n.lang.label.set,onClick:r})])),_}return Object.assign(d,{set:r,cancel:m,show(_){var T;(T=v.value)==null||T.show(_)},hide(_){var T;(T=v.value)==null||T.hide(_)},updatePosition:P}),()=>{if(e.disable!==!0)return o(zt,{ref:v,class:"q-popup-edit",cover:e.cover,onBeforeShow:g,onShow:h,onBeforeHide:p,onHide:b,onEscapeKey:m},B)}}}),Rl=H({name:"QTr",props:{props:Object,noHover:Boolean},setup(e,{slots:l}){const a=u(()=>"q-tr"+(e.props===void 0||e.props.header===!0?"":" "+e.props.__trClass)+(e.noHover===!0?" q-tr--no-hover":""));return()=>{var d;return o("tr",{style:(d=e.props)==null?void 0:d.__trStyle,class:a.value},ne(l.default))}}}),Yt=H({name:"QTh",props:{props:Object,autoWidth:Boolean},emits:["click"],setup(e,{slots:l,emit:a}){const d=W(),{proxy:{$q:n}}=d,v=i=>{a("click",i)};return()=>{if(e.props===void 0)return o("th",{class:e.autoWidth===!0?"q-table--col-auto-width":"",onClick:v},ne(l.default));let i,s;const f=d.vnode.key;if(f){if(i=e.props.colsMap[f],i===void 0)return}else i=e.props.col;if(i.sortable===!0){const r=i.align==="right"?"unshift":"push";s=mt(l.default,[]),s[r](o(Le,{class:i.__iconClass,name:n.iconSet.table.arrowUp}))}else s=ne(l.default);const w={class:i.__thClass+(e.autoWidth===!0?" q-table--col-auto-width":""),style:i.headerStyle,onClick:r=>{i.sortable===!0&&e.props.sort(i),v(r)}};return o("th",w,s)}}});function We(e,l){return o("div",e,[o("table",{class:"q-table"},l)])}const Gt={list:Nt,table:Ut},Jt=["list","table","__qtable"];var Zt=H({name:"QVirtualScroll",props:{...At,type:{type:String,default:"list",validator:e=>Jt.includes(e)},items:{type:Array,default:()=>[]},itemsFn:Function,itemsSize:Number,scrollTarget:St},setup(e,{slots:l,attrs:a}){let d;const n=N(null),v=u(()=>e.itemsSize>=0&&e.itemsFn!==void 0?parseInt(e.itemsSize,10):Array.isArray(e.items)?e.items.length:0),{virtualScrollSliceRange:i,localResetVirtualScroll:s,padVirtualScroll:f,onVirtualScrollEvt:w}=Lt({virtualScrollLength:v,getVirtualScrollTarget:k,getVirtualScrollEl:F}),r=u(()=>{if(v.value===0)return[];const b=(B,_)=>({index:i.value.from+_,item:B});return e.itemsFn===void 0?e.items.slice(i.value.from,i.value.to).map(b):e.itemsFn(i.value.from,i.value.to-i.value.from).map(b)}),m=u(()=>"q-virtual-scroll q-virtual-scroll"+(e.virtualScrollHorizontal===!0?"--horizontal":"--vertical")+(e.scrollTarget!==void 0?"":" scroll")),P=u(()=>e.scrollTarget!==void 0?{}:{tabindex:0});Z(v,()=>{s()}),Z(()=>e.scrollTarget,()=>{h(),g()});function F(){return n.value.$el||n.value}function k(){return d}function g(){d=qt(F(),e.scrollTarget),d.addEventListener("scroll",w,pe.passive)}function h(){d!==void 0&&(d.removeEventListener("scroll",w,pe.passive),d=void 0)}function p(){let b=f(e.type==="list"?"div":"tbody",r.value.map(l.default));return l.before!==void 0&&(b=l.before().concat(b)),Ne(l.after,b)}return yt(()=>{s()}),ht(()=>{g()}),wt(()=>{g()}),_t(()=>{h()}),Ct(()=>{h()}),()=>{if(l.default===void 0){console.error("QVirtualScroll: default scoped slot is required for rendering");return}return e.type==="__qtable"?We({ref:n,class:"q-table__middle "+m.value},p()):o(Gt[e.type],{...a,ref:n,class:[a.class,m.value],...P.value},p)}}});const el={xs:2,sm:4,md:6,lg:10,xl:14};function Ee(e,l,a){return{transform:l===!0?`translateX(${a.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var tl=H({name:"QLinearProgress",props:{...Qe,...Pt,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:l}){const{proxy:a}=W(),d=He(e,a.$q),n=Ft(e,el),v=u(()=>e.indeterminate===!0||e.query===!0),i=u(()=>e.reverse!==e.query),s=u(()=>({...n.value!==null?n.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),f=u(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),w=u(()=>Ee(e.buffer!==void 0?e.buffer:1,i.value,a.$q)),r=u(()=>`with${e.instantFeedback===!0?"out":""}-transition`),m=u(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${r.value} q-linear-progress__track--${d.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),P=u(()=>Ee(v.value===!0?1:e.value,i.value,a.$q)),F=u(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${r.value} q-linear-progress__model--${v.value===!0?"in":""}determinate`),k=u(()=>({width:`${e.value*100}%`})),g=u(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${r.value}`);return()=>{const h=[o("div",{class:m.value,style:w.value}),o("div",{class:F.value,style:P.value})];return e.stripe===!0&&v.value===!1&&h.push(o("div",{class:g.value,style:k.value})),o("div",{class:f.value,style:s.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},Ne(l.default,h))}}});function ll(e,l){return new Date(e)-new Date(l)}const al={sortMethod:Function,binaryStateSort:Boolean,columnSortOrder:{type:String,validator:e=>e==="ad"||e==="da",default:"ad"}};function nl(e,l,a,d){const n=u(()=>{const{sortBy:s}=l.value;return s&&a.value.find(f=>f.name===s)||null}),v=u(()=>e.sortMethod!==void 0?e.sortMethod:(s,f,w)=>{const r=a.value.find(F=>F.name===f);if(r===void 0||r.field===void 0)return s;const m=w===!0?-1:1,P=typeof r.field=="function"?F=>r.field(F):F=>F[r.field];return s.sort((F,k)=>{let g=P(F),h=P(k);return r.rawSort!==void 0?r.rawSort(g,h,F,k)*m:g==null?-1*m:h==null?1*m:r.sort!==void 0?r.sort(g,h,F,k)*m:Fe(g)===!0&&Fe(h)===!0?(g-h)*m:Me(g)===!0&&Me(h)===!0?ll(g,h)*m:typeof g=="boolean"&&typeof h=="boolean"?(g-h)*m:([g,h]=[g,h].map(p=>(p+"").toLocaleString().toLowerCase()),g<h?-1*m:g===h?0:m)})});function i(s){let f=e.columnSortOrder;if(xt(s)===!0)s.sortOrder&&(f=s.sortOrder),s=s.name;else{const m=a.value.find(P=>P.name===s);m!=null&&m.sortOrder&&(f=m.sortOrder)}let{sortBy:w,descending:r}=l.value;w!==s?(w=s,r=f==="da"):e.binaryStateSort===!0?r=!r:r===!0?f==="ad"?w=null:r=!1:f==="ad"?r=!0:w=null,d({sortBy:w,descending:r,page:1})}return{columnToSort:n,computedSortMethod:v,sort:i}}const ol={filter:[String,Object],filterMethod:Function};function rl(e,l){const a=u(()=>e.filterMethod!==void 0?e.filterMethod:(d,n,v,i)=>{const s=n?n.toLowerCase():"";return d.filter(f=>v.some(w=>{const r=i(w,f)+"";return(r==="undefined"||r==="null"?"":r.toLowerCase()).indexOf(s)!==-1}))});return Z(()=>e.filter,()=>{xe(()=>{l({page:1},!0)})},{deep:!0}),{computedFilterMethod:a}}function il(e,l){for(const a in l)if(l[a]!==e[a])return!1;return!0}function ze(e){return e.page<1&&(e.page=1),e.rowsPerPage!==void 0&&e.rowsPerPage<1&&(e.rowsPerPage=0),e}const ul={pagination:Object,rowsPerPageOptions:{type:Array,default:()=>[5,7,10,15,20,25,50,0]},"onUpdate:pagination":[Function,Array]};function sl(e,l){const{props:a,emit:d}=e,n=N(Object.assign({sortBy:null,descending:!1,page:1,rowsPerPage:a.rowsPerPageOptions.length!==0?a.rowsPerPageOptions[0]:5},a.pagination)),v=u(()=>{const r=a["onUpdate:pagination"]!==void 0?{...n.value,...a.pagination}:n.value;return ze(r)}),i=u(()=>v.value.rowsNumber!==void 0);function s(r){f({pagination:r,filter:a.filter})}function f(r={}){xe(()=>{d("request",{pagination:r.pagination||v.value,filter:r.filter||a.filter,getCellValue:l})})}function w(r,m){const P=ze({...v.value,...r});if(il(v.value,P)===!0){i.value===!0&&m===!0&&s(P);return}if(i.value===!0){s(P);return}a.pagination!==void 0&&a["onUpdate:pagination"]!==void 0?d("update:pagination",P):n.value=P}return{innerPagination:n,computedPagination:v,isServerSide:i,requestServerInteraction:f,setPagination:w}}function cl(e,l,a,d,n,v){const{props:i,emit:s,proxy:{$q:f}}=e,w=u(()=>d.value===!0?a.value.rowsNumber||0:v.value),r=u(()=>{const{page:_,rowsPerPage:T}=a.value;return(_-1)*T}),m=u(()=>{const{page:_,rowsPerPage:T}=a.value;return _*T}),P=u(()=>a.value.page===1),F=u(()=>a.value.rowsPerPage===0?1:Math.max(1,Math.ceil(w.value/a.value.rowsPerPage))),k=u(()=>m.value===0?!0:a.value.page>=F.value),g=u(()=>(i.rowsPerPageOptions.includes(l.value.rowsPerPage)?i.rowsPerPageOptions:[l.value.rowsPerPage].concat(i.rowsPerPageOptions)).map(T=>({label:T===0?f.lang.table.allRows:""+T,value:T})));Z(F,(_,T)=>{if(_===T)return;const x=a.value.page;_&&!x?n({page:1}):_<x&&n({page:_})});function h(){n({page:1})}function p(){const{page:_}=a.value;_>1&&n({page:_-1})}function b(){const{page:_,rowsPerPage:T}=a.value;m.value>0&&_*T<w.value&&n({page:_+1})}function B(){n({page:F.value})}return i["onUpdate:pagination"]!==void 0&&s("update:pagination",{...a.value}),{firstRowIndex:r,lastRowIndex:m,isFirstPage:P,isLastPage:k,pagesNumber:F,computedRowsPerPageOptions:g,computedRowsNumber:w,firstPage:h,prevPage:p,nextPage:b,lastPage:B}}const dl={selection:{type:String,default:"none",validator:e=>["single","multiple","none"].includes(e)},selected:{type:Array,default:()=>[]}},vl=["update:selected","selection"];function fl(e,l,a,d){const n=u(()=>{const k={};return e.selected.map(d.value).forEach(g=>{k[g]=!0}),k}),v=u(()=>e.selection!=="none"),i=u(()=>e.selection==="single"),s=u(()=>e.selection==="multiple"),f=u(()=>a.value.length!==0&&a.value.every(k=>n.value[d.value(k)]===!0)),w=u(()=>f.value!==!0&&a.value.some(k=>n.value[d.value(k)]===!0)),r=u(()=>e.selected.length);function m(k){return n.value[k]===!0}function P(){l("update:selected",[])}function F(k,g,h,p){l("selection",{rows:g,added:h,keys:k,evt:p});const b=i.value===!0?h===!0?g:[]:h===!0?e.selected.concat(g):e.selected.filter(B=>k.includes(d.value(B))===!1);l("update:selected",b)}return{hasSelectionMode:v,singleSelection:i,multipleSelection:s,allRowsSelected:f,someRowsSelected:w,rowsSelectedNumber:r,isRowSelected:m,clearSelection:P,updateSelection:F}}function Ae(e){return Array.isArray(e)?e.slice():[]}const gl={expanded:Array},bl=["update:expanded"];function ml(e,l){const a=N(Ae(e.expanded));Z(()=>e.expanded,i=>{a.value=Ae(i)});function d(i){return a.value.includes(i)}function n(i){e.expanded!==void 0?l("update:expanded",i):a.value=i}function v(i,s){const f=a.value.slice(),w=f.indexOf(i);s===!0?w===-1&&(f.push(i),n(f)):w!==-1&&(f.splice(w,1),n(f))}return{isRowExpanded:d,setExpanded:n,updateExpanded:v}}const Sl={visibleColumns:Array};function yl(e,l,a){const d=u(()=>{if(e.columns!==void 0)return e.columns;const s=e.rows[0];return s!==void 0?Object.keys(s).map(f=>({name:f,label:f.toUpperCase(),field:f,align:Fe(s[f])?"right":"left",sortable:!0})):[]}),n=u(()=>{const{sortBy:s,descending:f}=l.value;return(e.visibleColumns!==void 0?d.value.filter(r=>r.required===!0||e.visibleColumns.includes(r.name)===!0):d.value).map(r=>{const m=r.align||"right",P=`text-${m}`;return{...r,align:m,__iconClass:`q-table__sort-icon q-table__sort-icon--${m}`,__thClass:P+(r.headerClasses!==void 0?" "+r.headerClasses:"")+(r.sortable===!0?" sortable":"")+(r.name===s?` sorted ${f===!0?"sort-desc":""}`:""),__tdStyle:r.style!==void 0?typeof r.style!="function"?()=>r.style:r.style:()=>null,__tdClass:r.classes!==void 0?typeof r.classes!="function"?()=>P+" "+r.classes:F=>P+" "+r.classes(F):()=>P}})}),v=u(()=>{const s={};return n.value.forEach(f=>{s[f.name]=f}),s}),i=u(()=>e.tableColspan!==void 0?e.tableColspan:n.value.length+(a.value===!0?1:0));return{colList:d,computedCols:n,computedColsMap:v,computedColspan:i}}const fe="q-table__bottom row items-center",Ke={};Ue.forEach(e=>{Ke[e]={}});var Tl=H({name:"QTable",props:{rows:{type:Array,required:!0},rowKey:{type:[String,Function],default:"id"},columns:Array,loading:Boolean,iconFirstPage:String,iconPrevPage:String,iconNextPage:String,iconLastPage:String,title:String,hideHeader:Boolean,grid:Boolean,gridHeader:Boolean,dense:Boolean,flat:Boolean,bordered:Boolean,square:Boolean,separator:{type:String,default:"horizontal",validator:e=>["horizontal","vertical","cell","none"].includes(e)},wrapCells:Boolean,virtualScroll:Boolean,virtualScrollTarget:{},...Ke,noDataLabel:String,noResultsLabel:String,loadingLabel:String,selectedRowsLabel:Function,rowsPerPageLabel:String,paginationLabel:Function,color:{type:String,default:"grey-8"},titleClass:[String,Array,Object],tableStyle:[String,Array,Object],tableClass:[String,Array,Object],tableHeaderStyle:[String,Array,Object],tableHeaderClass:[String,Array,Object],tableRowStyleFn:Function,tableRowClassFn:Function,cardContainerClass:[String,Array,Object],cardContainerStyle:[String,Array,Object],cardStyle:[String,Array,Object],cardClass:[String,Array,Object],cardStyleFn:Function,cardClassFn:Function,hideBottom:Boolean,hideSelectedBanner:Boolean,hideNoData:Boolean,hidePagination:Boolean,onRowClick:Function,onRowDblclick:Function,onRowContextmenu:Function,...Qe,...Wt,...Sl,...ol,...ul,...gl,...dl,...al},emits:["request","virtualScroll",...Kt,...bl,...vl],setup(e,{slots:l,emit:a}){const d=W(),{proxy:{$q:n}}=d,v=He(e,n),{inFullscreen:i,toggleFullscreen:s}=Xt(),f=u(()=>typeof e.rowKey=="function"?e.rowKey:t=>t[e.rowKey]),w=N(null),r=N(null),m=u(()=>e.grid!==!0&&e.virtualScroll===!0),P=u(()=>" q-table__card"+(v.value===!0?" q-table__card--dark q-dark":"")+(e.square===!0?" q-table--square":"")+(e.flat===!0?" q-table--flat":"")+(e.bordered===!0?" q-table--bordered":"")),F=u(()=>`q-table__container q-table--${e.separator}-separator column no-wrap`+(e.grid===!0?" q-table--grid":P.value)+(v.value===!0?" q-table--dark":"")+(e.dense===!0?" q-table--dense":"")+(e.wrapCells===!1?" q-table--no-wrap":"")+(i.value===!0?" fullscreen scroll":"")),k=u(()=>F.value+(e.loading===!0?" q-table--loading":""));Z(()=>e.tableStyle+e.tableClass+e.tableHeaderStyle+e.tableHeaderClass+F.value,()=>{var t;m.value===!0&&((t=r.value)==null||t.reset())});const{innerPagination:g,computedPagination:h,isServerSide:p,requestServerInteraction:b,setPagination:B}=sl(d,X),{computedFilterMethod:_}=rl(e,B),{isRowExpanded:T,setExpanded:x,updateExpanded:E}=ml(e,a),z=u(()=>{let t=e.rows;if(p.value===!0||t.length===0)return t;const{sortBy:c,descending:S}=h.value;return e.filter&&(t=_.value(t,e.filter,A.value,X)),Xe.value!==null&&(t=Ye.value(e.rows===t?t.slice():t,c,S)),t}),R=u(()=>z.value.length),O=u(()=>{let t=z.value;if(p.value===!0)return t;const{rowsPerPage:c}=h.value;return c!==0&&(ie.value===0&&e.rows!==t?t.length>ue.value&&(t=t.slice(0,ue.value)):t=t.slice(ie.value,ue.value)),t}),{hasSelectionMode:Q,singleSelection:oe,multipleSelection:ee,allRowsSelected:K,someRowsSelected:re,rowsSelectedNumber:te,isRowSelected:q,clearSelection:M,updateSelection:$}=fl(e,a,O,f),{colList:le,computedCols:A,computedColsMap:ke,computedColspan:Re}=yl(e,h,Q),{columnToSort:Xe,computedSortMethod:Ye,sort:be}=nl(e,h,le,B),{firstRowIndex:ie,lastRowIndex:ue,isFirstPage:me,isLastPage:Se,pagesNumber:se,computedRowsPerPageOptions:Ge,computedRowsNumber:ce,firstPage:ye,prevPage:he,nextPage:we,lastPage:_e}=cl(d,g,h,p,B,R),Je=u(()=>O.value.length===0),Ze=u(()=>{const t={};return Ue.forEach(c=>{t[c]=e[c]}),t.virtualScrollItemSize===void 0&&(t.virtualScrollItemSize=e.dense===!0?28:48),t});function et(){m.value===!0&&r.value.reset()}function tt(){if(e.grid===!0)return ft();const t=e.hideHeader!==!0?je:null;if(m.value===!0){const S=l["top-row"],y=l["bottom-row"],C={default:D=>Oe(D.item,l.body,D.index)};if(S!==void 0){const D=o("tbody",S({cols:A.value}));C.before=t===null?()=>D:()=>[t()].concat(D)}else t!==null&&(C.before=t);return y!==void 0&&(C.after=()=>o("tbody",y({cols:A.value}))),o(Zt,{ref:r,class:e.tableClass,style:e.tableStyle,...Ze.value,scrollTarget:e.virtualScrollTarget,items:O.value,type:"__qtable",tableColspan:Re.value,onVirtualScroll:at},C)}const c=[nt()];return t!==null&&c.unshift(t()),We({class:["q-table__middle scroll",e.tableClass],style:e.tableStyle},c)}function lt(t,c){if(r.value!==null){r.value.scrollTo(t,c);return}t=parseInt(t,10);const S=w.value.querySelector(`tbody tr:nth-of-type(${t+1})`);if(S!==null){const y=w.value.querySelector(".q-table__middle.scroll"),C=S.offsetTop-e.virtualScrollStickySizeStart,D=C<y.scrollTop?"decrease":"increase";y.scrollTop=C,a("virtualScroll",{index:t,from:0,to:g.value.rowsPerPage-1,direction:D})}}function at(t){a("virtualScroll",t)}function Te(){return[o(tl,{class:"q-table__linear-progress",color:e.color,dark:v.value,indeterminate:!0,trackColor:"transparent"})]}function Oe(t,c,S){const y=f.value(t),C=q(y);if(c!==void 0){const j={key:y,row:t,pageIndex:S,__trClass:C?"selected":""};if(e.tableRowStyleFn!==void 0&&(j.__trStyle=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const I=e.tableRowClassFn(t);I&&(j.__trClass=`${I} ${j.__trClass}`)}return c(Be(j))}const D=l["body-cell"],V=A.value.map(j=>{const I=l[`body-cell-${j.name}`],ve=I!==void 0?I:D;return ve!==void 0?ve(ot({key:y,row:t,pageIndex:S,col:j})):o("td",{class:j.__tdClass(t),style:j.__tdStyle(t)},X(j,t))});if(Q.value===!0){const j=l["body-selection"],I=j!==void 0?j(rt({key:y,row:t,pageIndex:S})):[o(Pe,{modelValue:C,color:e.color,dark:v.value,dense:e.dense,"onUpdate:modelValue":(ve,gt)=>{$([y],[t],ve,gt)}})];V.unshift(o("td",{class:"q-table--col-auto-width"},I))}const L={key:y,class:{selected:C}};if(e.onRowClick!==void 0&&(L.class["cursor-pointer"]=!0,L.onClick=j=>{a("rowClick",j,t,S)}),e.onRowDblclick!==void 0&&(L.class["cursor-pointer"]=!0,L.onDblclick=j=>{a("rowDblclick",j,t,S)}),e.onRowContextmenu!==void 0&&(L.class["cursor-pointer"]=!0,L.onContextmenu=j=>{a("rowContextmenu",j,t,S)}),e.tableRowStyleFn!==void 0&&(L.style=e.tableRowStyleFn(t)),e.tableRowClassFn!==void 0){const j=e.tableRowClassFn(t);j&&(L.class[j]=!0)}return o("tr",L,V)}function nt(){const t=l.body,c=l["top-row"],S=l["bottom-row"];let y=O.value.map((C,D)=>Oe(C,t,D));return c!==void 0&&(y=c({cols:A.value}).concat(y)),S!==void 0&&(y=y.concat(S({cols:A.value}))),o("tbody",y)}function Be(t){return Ce(t),t.cols=t.cols.map(c=>U({...c},"value",()=>X(c,t.row))),t}function ot(t){return Ce(t),U(t,"value",()=>X(t.col,t.row)),t}function rt(t){return Ce(t),t}function Ce(t){Object.assign(t,{cols:A.value,colsMap:ke.value,sort:be,rowIndex:ie.value+t.pageIndex,color:e.color,dark:v.value,dense:e.dense}),Q.value===!0&&U(t,"selected",()=>q(t.key),(c,S)=>{$([t.key],[t.row],c,S)}),U(t,"expand",()=>T(t.key),c=>{E(t.key,c)})}function X(t,c){const S=typeof t.field=="function"?t.field(c):c[t.field];return t.format!==void 0?t.format(S,c):S}const Y=u(()=>({pagination:h.value,pagesNumber:se.value,isFirstPage:me.value,isLastPage:Se.value,firstPage:ye,prevPage:he,nextPage:we,lastPage:_e,inFullscreen:i.value,toggleFullscreen:s}));function it(){const t=l.top,c=l["top-left"],S=l["top-right"],y=l["top-selection"],C=Q.value===!0&&y!==void 0&&te.value>0,D="q-table__top relative-position row items-center";if(t!==void 0)return o("div",{class:D},[t(Y.value)]);let V;if(C===!0?V=y(Y.value).slice():(V=[],c!==void 0?V.push(o("div",{class:"q-table__control"},[c(Y.value)])):e.title&&V.push(o("div",{class:"q-table__control"},[o("div",{class:["q-table__title",e.titleClass]},e.title)]))),S!==void 0&&(V.push(o("div",{class:"q-table__separator col"})),V.push(o("div",{class:"q-table__control"},[S(Y.value)]))),V.length!==0)return o("div",{class:D},V)}const Ve=u(()=>re.value===!0?null:K.value);function je(){const t=ut();return e.loading===!0&&l.loading===void 0&&t.push(o("tr",{class:"q-table__progress"},[o("th",{class:"relative-position",colspan:Re.value},Te())])),o("thead",t)}function ut(){const t=l.header,c=l["header-cell"];if(t!==void 0)return t(qe({header:!0})).slice();const S=A.value.map(y=>{const C=l[`header-cell-${y.name}`],D=C!==void 0?C:c,V=qe({col:y});return D!==void 0?D(V):o(Yt,{key:y.name,props:V},()=>y.label)});if(oe.value===!0&&e.grid!==!0)S.unshift(o("th",{class:"q-table--col-auto-width"}," "));else if(ee.value===!0){const y=l["header-selection"],C=y!==void 0?y(qe({})):[o(Pe,{color:e.color,modelValue:Ve.value,dark:v.value,dense:e.dense,"onUpdate:modelValue":De})];S.unshift(o("th",{class:"q-table--col-auto-width"},C))}return[o("tr",{class:e.tableHeaderClass,style:e.tableHeaderStyle},S)]}function qe(t){return Object.assign(t,{cols:A.value,sort:be,colsMap:ke.value,color:e.color,dark:v.value,dense:e.dense}),ee.value===!0&&U(t,"selected",()=>Ve.value,De),t}function De(t){re.value===!0&&(t=!1),$(O.value.map(f.value),O.value,t)}const de=u(()=>{const t=[e.iconFirstPage||n.iconSet.table.firstPage,e.iconPrevPage||n.iconSet.table.prevPage,e.iconNextPage||n.iconSet.table.nextPage,e.iconLastPage||n.iconSet.table.lastPage];return n.lang.rtl===!0?t.reverse():t});function st(){if(e.hideBottom===!0)return;if(Je.value===!0){if(e.hideNoData===!0)return;const S=e.loading===!0?e.loadingLabel||n.lang.table.loading:e.filter?e.noResultsLabel||n.lang.table.noResults:e.noDataLabel||n.lang.table.noData,y=l["no-data"],C=y!==void 0?[y({message:S,icon:n.iconSet.table.warning,filter:e.filter})]:[o(Le,{class:"q-table__bottom-nodata-icon",name:n.iconSet.table.warning}),S];return o("div",{class:fe+" q-table__bottom--nodata"},C)}const t=l.bottom;if(t!==void 0)return o("div",{class:fe},[t(Y.value)]);const c=e.hideSelectedBanner!==!0&&Q.value===!0&&te.value>0?[o("div",{class:"q-table__control"},[o("div",[(e.selectedRowsLabel||n.lang.table.selectedRecords)(te.value)])])]:[];if(e.hidePagination!==!0)return o("div",{class:fe+" justify-end"},dt(c));if(c.length!==0)return o("div",{class:fe},c)}function ct(t){B({page:1,rowsPerPage:t.value})}function dt(t){let c;const{rowsPerPage:S}=h.value,y=e.paginationLabel||n.lang.table.pagination,C=l.pagination,D=e.rowsPerPageOptions.length>1;if(t.push(o("div",{class:"q-table__separator col"})),D===!0&&t.push(o("div",{class:"q-table__control"},[o("span",{class:"q-table__bottom-item"},[e.rowsPerPageLabel||n.lang.table.recordsPerPage]),o(Qt,{class:"q-table__select inline q-table__bottom-item",color:e.color,modelValue:S,options:Ge.value,displayValue:S===0?n.lang.table.allRows:S,dark:v.value,borderless:!0,dense:!0,optionsDense:!0,optionsCover:!0,"onUpdate:modelValue":ct})])),C!==void 0)c=C(Y.value);else if(c=[o("span",S!==0?{class:"q-table__bottom-item"}:{},[S?y(ie.value+1,Math.min(ue.value,ce.value),ce.value):y(1,R.value,ce.value)])],S!==0&&se.value>1){const V={color:e.color,round:!0,dense:!0,flat:!0};e.dense===!0&&(V.size="sm"),se.value>2&&c.push(o(J,{key:"pgFirst",...V,icon:de.value[0],disable:me.value,"aria-label":n.lang.pagination.first,onClick:ye})),c.push(o(J,{key:"pgPrev",...V,icon:de.value[1],disable:me.value,"aria-label":n.lang.pagination.prev,onClick:he}),o(J,{key:"pgNext",...V,icon:de.value[2],disable:Se.value,"aria-label":n.lang.pagination.next,onClick:we})),se.value>2&&c.push(o(J,{key:"pgLast",...V,icon:de.value[3],disable:Se.value,"aria-label":n.lang.pagination.last,onClick:_e}))}return t.push(o("div",{class:"q-table__control"},c)),t}function vt(){const t=e.gridHeader===!0?[o("table",{class:"q-table"},[je()])]:e.loading===!0&&l.loading===void 0?Te():void 0;return o("div",{class:"q-table__middle"},t)}function ft(){const t=l.item!==void 0?l.item:c=>{const S=c.cols.map(C=>o("div",{class:"q-table__grid-item-row"},[o("div",{class:"q-table__grid-item-title"},[C.label]),o("div",{class:"q-table__grid-item-value"},[C.value])]));if(Q.value===!0){const C=l["body-selection"],D=C!==void 0?C(c):[o(Pe,{modelValue:c.selected,color:e.color,dark:v.value,dense:e.dense,"onUpdate:modelValue":(V,L)=>{$([c.key],[c.row],V,L)}})];S.unshift(o("div",{class:"q-table__grid-item-row"},D),o(Rt,{dark:v.value}))}const y={class:["q-table__grid-item-card"+P.value,e.cardClass],style:e.cardStyle};if(e.cardStyleFn!==void 0&&(y.style=[y.style,e.cardStyleFn(c.row)]),e.cardClassFn!==void 0){const C=e.cardClassFn(c.row);C&&(y.class[0]+=` ${C}`)}return(e.onRowClick!==void 0||e.onRowDblclick!==void 0||e.onRowContextmenu!==void 0)&&(y.class[0]+=" cursor-pointer",e.onRowClick!==void 0&&(y.onClick=C=>{a("RowClick",C,c.row,c.pageIndex)}),e.onRowDblclick!==void 0&&(y.onDblclick=C=>{a("RowDblclick",C,c.row,c.pageIndex)}),e.onRowContextmenu!==void 0&&(y.onContextmenu=C=>{a("rowContextmenu",C,c.row,c.pageIndex)})),o("div",{class:"q-table__grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3"+(c.selected===!0?" q-table__grid-item--selected":"")},[o("div",y,S)])};return o("div",{class:["q-table__grid-content row",e.cardContainerClass],style:e.cardContainerStyle},O.value.map((c,S)=>t(Be({key:f.value(c),row:c,pageIndex:S}))))}return Object.assign(d.proxy,{requestServerInteraction:b,setPagination:B,firstPage:ye,prevPage:he,nextPage:we,lastPage:_e,isRowSelected:q,clearSelection:M,isRowExpanded:T,setExpanded:x,sort:be,resetVirtualScroll:et,scrollTo:lt,getCellValue:X}),kt(d.proxy,{filteredSortedRows:()=>z.value,computedRows:()=>O.value,computedRowsNumber:()=>ce.value}),()=>{const t=[it()],c={ref:w,class:k.value};return e.grid===!0?t.push(vt()):Object.assign(c,{class:[c.class,e.cardClass],style:e.cardStyle}),t.push(tt(),st()),e.loading===!0&&l.loading!==void 0&&t.push(l.loading()),o("div",c,t)}}});function G(e,l,a,d){const n=[];return e.forEach(v=>{d(v)===!0?n.push(v):l.push({failedPropValidation:a,file:v})}),n}function ge(e){e!=null&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),Ie(e)}const hl={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},wl=["rejected"];function _l({editable:e,dnd:l,getFileInput:a,addFilesToQueue:d}){const{props:n,emit:v,proxy:i}=W(),s=N(null),f=u(()=>n.accept!==void 0?n.accept.split(",").map(b=>(b=b.trim(),b==="*"?"*/":(b.endsWith("/*")&&(b=b.slice(0,b.length-1)),b.toUpperCase()))):null),w=u(()=>parseInt(n.maxFiles,10)),r=u(()=>parseInt(n.maxTotalSize,10));function m(b){var B;if(e.value)if(b!==Object(b)&&(b={target:null}),((B=b.target)==null?void 0:B.matches('input[type="file"]'))===!0)b.clientX===0&&b.clientY===0&&Tt(b);else{const _=a();_!==b.target&&(_==null||_.click(b))}}function P(b){e.value&&b&&d(null,b)}function F(b,B,_,T){let x=Array.from(B||b.target.files);const E=[],z=()=>{E.length!==0&&v("rejected",E)};if(n.accept!==void 0&&f.value.indexOf("*/")===-1&&(x=G(x,E,"accept",R=>f.value.some(O=>R.type.toUpperCase().startsWith(O)||R.name.toUpperCase().endsWith(O))),x.length===0))return z();if(n.maxFileSize!==void 0){const R=parseInt(n.maxFileSize,10);if(x=G(x,E,"max-file-size",O=>O.size<=R),x.length===0)return z()}if(n.multiple!==!0&&x.length!==0&&(x=[x[0]]),x.forEach(R=>{R.__key=R.webkitRelativePath+R.lastModified+R.name+R.size}),T===!0){const R=_.map(O=>O.__key);x=G(x,E,"duplicate",O=>R.includes(O.__key)===!1)}if(x.length===0)return z();if(n.maxTotalSize!==void 0){let R=T===!0?_.reduce((O,Q)=>O+Q.size,0):0;if(x=G(x,E,"max-total-size",O=>(R+=O.size,R<=r.value)),x.length===0)return z()}if(typeof n.filter=="function"){const R=n.filter(x);x=G(x,E,"filter",O=>R.includes(O))}if(n.maxFiles!==void 0){let R=T===!0?_.length:0;if(x=G(x,E,"max-files",()=>(R++,R<=w.value)),x.length===0)return z()}if(z(),x.length!==0)return x}function k(b){ge(b),l.value!==!0&&(l.value=!0)}function g(b){Ie(b),(b.relatedTarget!==null||Ot.is.safari!==!0?b.relatedTarget!==s.value:document.elementsFromPoint(b.clientX,b.clientY).includes(s.value)===!1)===!0&&(l.value=!1)}function h(b){ge(b);const B=b.dataTransfer.files;B.length!==0&&d(null,B),l.value=!1}function p(b){if(l.value===!0)return o("div",{ref:s,class:`q-${b}__dnd absolute-full`,onDragenter:ge,onDragover:ge,onDragleave:g,onDrop:h})}return Object.assign(i,{pickFiles:m,addFiles:P}),{pickFiles:m,addFiles:P,onDragover:k,onDragleave:g,processFiles:F,getDndNode:p,maxFilesNumber:w,maxTotalSizeNumber:r}}var Ol=H({name:"QFile",inheritAttrs:!1,props:{...Bt,...Vt,...hl,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...jt,...wl],setup(e,{slots:l,emit:a,attrs:d}){const{proxy:n}=W(),v=Dt(),i=N(null),s=N(!1),f=pt(e),{pickFiles:w,onDragover:r,onDragleave:m,processFiles:P,getDndNode:F}=_l({editable:v.editable,dnd:s,getFileInput:oe,addFilesToQueue:ee}),k=Mt(e),g=u(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),h=u(()=>$e(g.value)),p=u(()=>g.value.map(q=>q.name).join(", ")),b=u(()=>Ht(g.value.reduce((q,M)=>q+M.size,0))),B=u(()=>({totalSize:b.value,filesNumber:g.value.length,maxFiles:e.maxFiles})),_=u(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:f.value,...d,id:v.targetUid.value,disabled:v.editable.value!==!0})),T=u(()=>"q-file q-field--auto-height"+(s.value===!0?" q-file--dnd":"")),x=u(()=>e.multiple===!0&&e.append===!0);function E(q){const M=g.value.slice();M.splice(q,1),R(M)}function z(q){const M=g.value.indexOf(q);M!==-1&&E(M)}function R(q){a("update:modelValue",e.multiple===!0?q:q[0])}function O(q){q.keyCode===13&&Et(q)}function Q(q){(q.keyCode===13||q.keyCode===32)&&w(q)}function oe(){return i.value}function ee(q,M){const $=P(q,M,g.value,x.value),le=oe();le!=null&&(le.value=""),$!==void 0&&((e.multiple===!0?e.modelValue&&$.every(A=>g.value.includes(A)):e.modelValue===$[0])||R(x.value===!0?g.value.concat($):$))}function K(){return[o("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function re(){if(l.file!==void 0)return g.value.length===0?K():g.value.map((M,$)=>l.file({index:$,file:M,ref:this}));if(l.selected!==void 0)return g.value.length===0?K():l.selected({files:g.value,ref:this});if(e.useChips===!0)return g.value.length===0?K():g.value.map((M,$)=>o(It,{key:"file-"+$,removable:v.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{E($)}},()=>o("span",{class:"ellipsis",textContent:M.name})));const q=e.displayValue!==void 0?e.displayValue:p.value;return q.length!==0?[o("div",{class:e.inputClass,style:e.inputStyle,textContent:q})]:K()}function te(){const q={ref:i,..._.value,...k.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:ee};return e.multiple===!0&&(q.multiple=!0),o("input",q)}return Object.assign(v,{fieldClass:T,emitValue:R,hasValue:h,inputRef:i,innerValue:g,floatingLabel:u(()=>h.value===!0||$e(e.displayValue)),computedCounter:u(()=>{if(e.counterLabel!==void 0)return e.counterLabel(B.value);const q=e.maxFiles;return`${g.value.length}${q!==void 0?" / "+q:""} (${b.value})`}),getControlChild:()=>F("file"),getControl:()=>{const q={ref:v.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return v.editable.value===!0&&Object.assign(q,{onDragover:r,onDragleave:m,onKeydown:O,onKeyup:Q}),o("div",q,[te()].concat(re()))}}),Object.assign(n,{removeAtIndex:E,removeFile:z,getNativeElement:()=>i.value}),U(n,"nativeEl",()=>i.value),$t(v)}});export{Ol as Q,Rl as a,xl as b,kl as c,Tl as d};
