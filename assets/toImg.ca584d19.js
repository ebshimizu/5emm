import{d as u}from"./chunk-ANSXOGKI.3ba326ea.js";import{l as g}from"./MainLayout.8e2af9e0.js";import"./chunk-3VYIPD3A.3bc21d00.js";import"./index.7cc2e6d9.js";import"./QLayout.eb37f156.js";import"./QMarkupTable.52c59982.js";import"./TouchPan.612a687f.js";import"./use-dialog-plugin-component.e99688d4.js";import"./QTooltip.480b07b8.js";import"./useCr.b987c8cd.js";import"./AppDrawer.50a5aad7.js";import"./NewSpellDialog.ae633432.js";import"./download.223253d2.js";import"./RECHARGE_TIME.56b4e339.js";import"./index.321d022a.js";import"./QBadge.d4d27a61.js";async function U(i,l){let{scale:m=1,width:o,height:s,meta:e={}}=l,n=Number.isFinite(o),p=Number.isFinite(s),d=Number.isFinite(m)&&m!==1||n||p;if(g()&&d)return await u(i,{...l,format:"png",quality:1,meta:e});let t=new Image;if(t.decoding="sync",t.loading="eager",t.src=i,await t.decode(),n&&p)t.style.width=`${o}px`,t.style.height=`${s}px`;else if(n){let r=Number.isFinite(e.w0)?e.w0:t.naturalWidth,a=Number.isFinite(e.h0)?e.h0:t.naturalHeight,h=o/Math.max(1,r);t.style.width=`${o}px`,t.style.height=`${Math.round(a*h)}px`}else if(p){let r=Number.isFinite(e.w0)?e.w0:t.naturalWidth,a=Number.isFinite(e.h0)?e.h0:t.naturalHeight,h=s/Math.max(1,a);t.style.height=`${s}px`,t.style.width=`${Math.round(r*h)}px`}else{let r=Math.round(t.naturalWidth*m),a=Math.round(t.naturalHeight*m);if(t.style.width=`${r}px`,t.style.height=`${a}px`,typeof i=="string"&&i.startsWith("data:image/svg+xml"))try{let h=decodeURIComponent(i.split(",")[1]).replace(/width="[^"]*"/,`width="${r}"`).replace(/height="[^"]*"/,`height="${a}"`);i=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(h)}`,t.src=i}catch{}}return t}export{U as toImg,U as toSvg};
