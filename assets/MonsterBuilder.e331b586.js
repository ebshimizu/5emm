import{d as te,f as se,e as B,g as F,a as Et,b as le,n as st,Q as it}from"./use-dialog-plugin-component.e99688d4.js";import{T as Nt,C as ye}from"./TouchPan.612a687f.js";import{m as Te,J as Ze,L as _e,r as H,a as g,q as fe,h as O,z as we,M as Mt,j as Rt,k as Ne,aK as pt,o as xe,T as Bt,bI as It,b8 as ft,b3 as Ht,b4 as zt,bJ as bt,b5 as Ft,u as jt,$ as $e,w as Q,bK as ee,Q as Ee,s as vt,P as G,_ as Y,V as m,a8 as V,a0 as o,Z as l,a2 as k,Y as d,aa as S,S as J,bL as Kt,bM as Qt,bN as Wt,bG as re,bO as gt,bP as kt,U as D,X as c,bH as C,a9 as Z,W as y,a6 as E,a5 as U,a3 as z,ac as Xt,i as Gt,aq as yt,bQ as Yt,bR as Jt,ay as Zt,ad as ie,a4 as L,aJ as oe,bS as $t,bc as _t,as as xt,d as ht,b0 as Ct,az as rt,aA as el,C as tl,g as St,a$ as dt,bT as ll,bk as ol,aE as al,au as nl,aF as sl,ap as qe,ah as Me,av as et,aH as wt,aI as At,a1 as il,O as rl,aG as Ge}from"./index.7cc2e6d9.js";import{u as dl,a as ul,b as cl,Q as ml}from"./use-fullscreen.418392d3.js";import{Q as j}from"./QTooltip.480b07b8.js";import{b as Ce,Q as Se,a as Re,u as Ue,s as tt}from"./RECHARGE_TIME.56b4e339.js";import{e as lt}from"./index.321d022a.js";import{u as De,Q as Be}from"./QBadge.d4d27a61.js";import{u as Vt,N as pl}from"./NewSpellDialog.ae633432.js";var fl=Te({name:"QSplitter",props:{...Ze,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:t,emit:n}){const{proxy:{$q:u}}=Ne(),f=_e(e,u),b=H(null),s={before:H(null),after:H(null)},a=g(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(f.value===!0?" q-splitter--dark":"")),p=g(()=>e.horizontal===!0?"height":"width"),i=g(()=>e.reverse!==!0?"before":"after"),r=g(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function w(q){return(e.unit==="%"?q:Math.round(q))+e.unit}const h=g(()=>({[i.value]:{[p.value]:w(e.modelValue)}}));let N,I,A,P,M;function W(q){if(q.isFirst===!0){const ue=b.value.getBoundingClientRect()[p.value];N=e.horizontal===!0?"up":"left",I=e.unit==="%"?100:ue,A=Math.min(I,r.value[1],Math.max(r.value[0],e.modelValue)),P=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:u.lang.rtl===!0?-1:1)*(e.unit==="%"?ue===0?0:100/ue:1),b.value.classList.add("q-splitter--active");return}if(q.isFinal===!0){M!==e.modelValue&&n("update:modelValue",M),b.value.classList.remove("q-splitter--active");return}const ne=A+P*(q.direction===N?-1:1)*q.distance[e.horizontal===!0?"y":"x"];M=Math.min(I,r.value[1],Math.max(r.value[0],ne)),s[i.value].value.style[p.value]=w(M),e.emitImmediately===!0&&e.modelValue!==M&&n("update:modelValue",M)}const _=g(()=>[[Nt,W,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function T(q,ne){q<ne[0]?n("update:modelValue",ne[0]):q>ne[1]&&n("update:modelValue",ne[1])}return fe(()=>e.modelValue,q=>{T(q,r.value)}),fe(()=>e.limits,()=>{pt(()=>{T(e.modelValue,r.value)})}),()=>{const q=[O("div",{ref:s.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:h.value.before},we(t.before)),O("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[Mt("div",{class:"q-splitter__separator-area absolute-full"},we(t.separator),"sep",e.disable!==!0,()=>_.value)]),O("div",{ref:s.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:h.value.after},we(t.after))];return O("div",{class:a.value,ref:b},Rt(t.default,q))}}}),ve=Te({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:n}){let u=!1,f,b,s=null,a=null,p,i;function r(){f==null||f(),f=null,u=!1,s!==null&&(clearTimeout(s),s=null),a!==null&&(clearTimeout(a),a=null),b==null||b.removeEventListener("transitionend",p),p=null}function w(A,P,M){P!==void 0&&(A.style.height=`${P}px`),A.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,u=!0,f=M}function h(A,P){A.style.overflowY=null,A.style.height=null,A.style.transition=null,r(),P!==i&&n(P)}function N(A,P){let M=0;b=A,u===!0?(r(),M=A.offsetHeight===A.scrollHeight?0:void 0):(i="hide",A.style.overflowY="hidden"),w(A,M,P),s=setTimeout(()=>{s=null,A.style.height=`${A.scrollHeight}px`,p=W=>{a=null,(Object(W)!==W||W.target===A)&&h(A,"show")},A.addEventListener("transitionend",p),a=setTimeout(p,e.duration*1.1)},100)}function I(A,P){let M;b=A,u===!0?r():(i="show",A.style.overflowY="hidden",M=A.scrollHeight),w(A,M,P),s=setTimeout(()=>{s=null,A.style.height=0,p=W=>{a=null,(Object(W)!==W||W.target===A)&&h(A,"hide")},A.addEventListener("transitionend",p),a=setTimeout(p,e.duration*1.1)},100)}return xe(()=>{u===!0&&r()}),()=>O(Bt,{css:!1,appear:e.appear,onEnter:N,onLeave:I},t.default)}});const he=It({}),bl=Object.keys(ft);var X=Te({name:"QExpansionItem",props:{...ft,...Ht,...Ze,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...zt,"click","afterShow","afterHide"],setup(e,{slots:t,emit:n}){const{proxy:{$q:u}}=Ne(),f=_e(e,u),b=H(e.modelValue!==null?e.modelValue:e.defaultOpened),s=H(null),a=bt(),{show:p,hide:i,toggle:r}=Ft({showing:b});let w,h;const N=g(()=>`q-expansion-item q-item-type q-expansion-item--${b.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),I=g(()=>{if(e.contentInsetLevel===void 0)return null;const R=u.lang.rtl===!0?"Right":"Left";return{["padding"+R]:e.contentInsetLevel*56+"px"}}),A=g(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),P=g(()=>{const R={};return bl.forEach(ce=>{R[ce]=e[ce]}),R}),M=g(()=>A.value===!0||e.expandIconToggle!==!0),W=g(()=>e.expandedIcon!==void 0&&b.value===!0?e.expandedIcon:e.expandIcon||u.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),_=g(()=>e.disable!==!0&&(A.value===!0||e.expandIconToggle===!0)),T=g(()=>({expanded:b.value===!0,detailsId:a.value,toggle:r,show:p,hide:i})),q=g(()=>{const R=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:u.lang.label[b.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":b.value===!0?"true":"false","aria-controls":a.value,"aria-label":R}});fe(()=>e.group,R=>{h==null||h(),R!==void 0&&Le()});function ne(R){A.value!==!0&&r(R),n("click",R)}function ue(R){R.keyCode===13&&ge(R,!0)}function ge(R,ce){var me;ce!==!0&&R.qAvoidFocus!==!0&&((me=s.value)==null||me.focus()),r(R),vt(R)}function Ve(){n("afterShow")}function x(){n("afterHide")}function Le(){w===void 0&&(w=jt()),b.value===!0&&(he[e.group]=w);const R=fe(b,me=>{me===!0?he[e.group]=w:he[e.group]===w&&delete he[e.group]}),ce=fe(()=>he[e.group],(me,Pe)=>{Pe===w&&me!==void 0&&me!==w&&i()});h=()=>{R(),ce(),he[e.group]===w&&delete he[e.group],h=void 0}}function He(){const R={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},ce=[O(Ee,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&b.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:W.value})];return _.value===!0&&(Object.assign(R,{tabindex:0,...q.value,onClick:ge,onKeyup:ue}),ce.unshift(O("div",{ref:s,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),O(B,R,()=>ce)}function ze(){let R;return t.header!==void 0?R=[].concat(t.header(T.value)):(R=[O(B,()=>[O(se,{lines:e.labelLines},()=>e.label||""),e.caption?O(se,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&R[e.switchToggleSide===!0?"push":"unshift"](O(B,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>O(Ee,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&R[e.switchToggleSide===!0?"unshift":"push"](He()),R}function Fe(){const R={ref:"item",style:e.headerStyle,class:e.headerClass,dark:f.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return M.value===!0&&(R.clickable=!0,R.onClick=ne,Object.assign(R,A.value===!0?P.value:q.value)),O(te,R,ze)}function je(){return Q(O("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:I.value,id:a.value},we(t.default)),[[ee,b.value]])}function Ke(){const R=[Fe(),O(ve,{duration:e.duration,onShow:Ve,onHide:x},je)];return e.expandSeparator===!0&&R.push(O($e,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:f.value}),O($e,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:f.value})),R}return e.group!==void 0&&Le(),xe(()=>{h==null||h()}),()=>O("div",{class:N.value},[O("div",{class:"q-expansion-item__container relative-position"},Ke())])}});const ut=["Unaligned","Lawful Good","Neutral Good","Chaotic Good","Lawful Neutral","Neutral","Chaotic Neutral","Lawful Evil","Neutral Evil","Chaotic Evil"],ct=["Aberration","Beast","Celestial","Construct","Dragon","Elemental","Fey","Fiend","Giant","Humanoid","Monstrosity","Ooze","Plant","Undead"],vl=G({name:"LockToggleButton",props:{locked:{type:Boolean,required:!0},lockTooltip:{type:String,required:!0},unlockTooltip:{type:String,required:!0}}});function gl(e,t,n,u,f,b){return m(),V(S,{push:"",icon:e.locked?"lock":"lock_open",color:e.locked?"dark":"warning",size:"md"},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.locked?e.lockTooltip:e.unlockTooltip),1)]),_:1})]),_:1},8,["icon","color"])}var Oe=Y(vl,[["render",gl]]);const kl=G({name:"BasicsEditor",components:{LockToggleButton:Oe},setup(){const e=J(),t=H(ct),n=H(ut),u=gt,f=kt,b=Object.keys(e.stats),s=Ce(ct,t),a=Ce(ut,n);return{monster:e,crValues:Kt,lairCrValues:Qt,sizeValues:Wt,typeOptions:t,typeFilter:s,alignmentOptions:n,alignmentFilter:a,diceOptions:u,diceLookup:f,statKeys:b,updateStat:function(i,r){i==="CON"?e.setHpModifier(e.HP.HD,r):e.stats[i]=parseInt(`${r}`)},validateNumber:re}}}),yl={class:"row"};function $l(e,t,n,u,f,b){const s=D("lock-toggle-button");return m(),V(X,{"expand-separator":"","default-opened":"",icon:"info",label:e.$t("editor.basics.label"),caption:e.$t("editor.basics.caption")},{default:o(()=>[l(z,null,{default:o(()=>[c("div",yl,[l(C,{modelValue:e.monster.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.monster.name=a),label:e.$t("monster.name"),class:"q-pa-sm col-6",debounce:"500"},null,8,["modelValue","label"]),e.monster.useCrDisplayOverride?(m(),V(C,{key:1,modelValue:e.monster.crOverride,"onUpdate:modelValue":t[4]||(t[4]=a=>e.monster.crOverride=a),label:e.$t("monster.cr"),class:"col-2 q-pa-sm"},{after:o(()=>[l(s,{locked:!e.monster.useCrDisplayOverride,"lock-tooltip":e.$t("editor.cr.standard"),"unlock-tooltip":e.$t("editor.cr.visualOverride"),onClick:t[3]||(t[3]=a=>e.monster.useCrDisplayOverride=!e.monster.useCrDisplayOverride)},null,8,["locked","lock-tooltip","unlock-tooltip"])]),_:1},8,["modelValue","label"])):(m(),V(F,{key:0,"model-value":e.monster.CR,options:e.crValues,"display-value":e.crValues[e.monster.CR].label,"emit-value":"",label:e.$t("monster.cr"),class:"col-3 q-pa-sm","onUpdate:modelValue":t[2]||(t[2]=a=>{a!=null?e.monster.setCR(a):e.monster.setCR(0)})},{after:o(()=>[l(s,{locked:!e.monster.useCrDisplayOverride,"lock-tooltip":e.$t("editor.cr.standard"),"unlock-tooltip":e.$t("editor.cr.visualOverride"),onClick:t[1]||(t[1]=a=>e.monster.useCrDisplayOverride=!e.monster.useCrDisplayOverride)},null,8,["locked","lock-tooltip","unlock-tooltip"])]),_:1},8,["model-value","options","display-value","label"])),l(C,{"model-value":e.monster.proficiency,type:"number",label:e.$t("monster.proficiencyBonus"),class:"col-3 q-pa-sm",disable:!e.monster.proficiencyOverride,"onUpdate:modelValue":t[5]||(t[5]=a=>e.monster.proficiency=e.validateNumber(a,0))},{after:o(()=>[l(s,{locked:!e.monster.proficiencyOverride,"lock-tooltip":e.$t("monster.proficiency.unlockFromCr"),"unlock-tooltip":e.$t("monster.proficiency.lockToCr"),onClick:e.monster.toggleProficiencyOverride},null,8,["locked","lock-tooltip","unlock-tooltip","onClick"])]),_:1},8,["model-value","label","disable"]),l(C,{modelValue:e.monster.nickname,"onUpdate:modelValue":t[6]||(t[6]=a=>e.monster.nickname=a),label:e.$t("monster.nickname"),class:"q-pa-sm col-6",debounce:"500"},null,8,["modelValue","label"]),e.monster.useCrDisplayOverride?Z("",!0):(m(),V(F,{key:2,"model-value":e.monster.lairCr,options:e.lairCrValues,"display-value":e.lairCrValues[e.monster.lairCr+1].label,"emit-value":"",label:e.$t("monster.lairCr"),class:"col-2 q-pa-sm","onUpdate:modelValue":t[7]||(t[7]=a=>{e.monster.lairCr=a!=null?a:-1})},null,8,["model-value","options","display-value","label"])),l(C,{modelValue:e.monster.lairCrNote,"onUpdate:modelValue":t[8]||(t[8]=a=>e.monster.lairCrNote=a),label:e.$t("monster.lairCrNote"),disable:e.monster.lairCr===-1,class:"q-pa-sm col-4",debounce:"500"},null,8,["modelValue","label","disable"]),l(F,{"model-value":e.monster.size,options:e.sizeValues,label:e.$t("monster.size"),class:"col-2 q-pa-sm","onUpdate:modelValue":e.monster.setSize},null,8,["model-value","options","label","onUpdate:modelValue"]),l(F,{modelValue:e.monster.type,"onUpdate:modelValue":t[9]||(t[9]=a=>e.monster.type=a),options:e.typeOptions,"use-input":"","input-debounce":"0",label:e.$t("monster.type"),class:"col-6 q-pa-sm","new-value-mode":"add-unique","bottom-slots":"",onFilter:e.typeFilter},{hint:o(()=>[k(d(e.$t("editor.customAllowed")),1)]),_:1},8,["modelValue","options","label","onFilter"]),l(F,{modelValue:e.monster.alignment,"onUpdate:modelValue":t[10]||(t[10]=a=>e.monster.alignment=a),options:e.alignmentOptions,"input-debounce":"0","use-input":"",label:e.$t("monster.alignment"),class:"col-4 q-pa-sm","new-value-mode":"add-unique","bottom-slots":"",onFilter:e.alignmentFilter},{hint:o(()=>[k(d(e.$t("editor.customAllowed")),1)]),_:1},8,["modelValue","options","label","onFilter"]),l(C,{"model-value":e.monster.AC,type:"number",label:e.$t("monster.ac"),min:"0",class:"col-2 q-pa-sm","onUpdate:modelValue":t[11]||(t[11]=a=>e.monster.AC=e.validateNumber(a,0))},{after:o(()=>[l(S,{round:"",color:"primary",size:"md",icon:"auto_fix_high",onClick:e.monster.setAcByCr},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("monster.setAcByCr")),1)]),_:1})]),_:1},8,["onClick"])]),_:1},8,["model-value","label"]),l(C,{modelValue:e.monster.ACType,"onUpdate:modelValue":t[12]||(t[12]=a=>e.monster.ACType=a),label:e.$t("monster.acType"),class:"col-4 q-pa-sm"},null,8,["modelValue","label"]),l(C,{"model-value":e.monster.HP.HD,type:"number",label:e.$t("monster.hp.hd"),min:"0",class:"col-2 q-pa-sm","onUpdate:modelValue":t[13]||(t[13]=a=>e.monster.setHpModifier(a,e.monster.stats.CON))},{after:o(()=>[l(S,{round:"",color:"primary",size:"md",icon:"auto_fix_high",onClick:e.monster.setHdByCr},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("monster.setHdByCr")),1)]),_:1})]),_:1},8,["onClick"])]),_:1},8,["model-value","label"]),l(F,{modelValue:e.monster.HP.type,"onUpdate:modelValue":t[14]||(t[14]=a=>e.monster.HP.type=a),options:e.diceOptions,"emit-value":"","display-value":e.diceLookup[e.monster.HP.type],label:e.$t("monster.hp.type"),class:"col-2 q-pa-sm",disable:!e.monster.hpDieTypeOverride},{after:o(()=>[l(s,{locked:!e.monster.hpDieTypeOverride,"lock-tooltip":e.$t("monster.hp.unlockFromSize"),"unlock-tooltip":e.$t("monster.hp.lockToSize"),onClick:e.monster.toggleDieTypeOverride},null,8,["locked","lock-tooltip","unlock-tooltip","onClick"])]),_:1},8,["modelValue","options","display-value","label","disable"]),l(C,{"model-value":e.monster.HP.modifier,disable:!e.monster.hpModifierOverride,type:"number",label:e.$t("monster.hp.modifier"),class:"col-2 q-pa-sm","onUpdate:modelValue":t[15]||(t[15]=a=>e.monster.HP.modifier=e.validateNumber(a,0))},{after:o(()=>[l(s,{locked:!e.monster.hpModifierOverride,"lock-tooltip":e.$t("monster.hp.unlockModifier"),"unlock-tooltip":e.$t("monster.hp.lockModifier"),onClick:e.monster.toggleHpModifierOverride},null,8,["locked","lock-tooltip","unlock-tooltip","onClick"])]),_:1},8,["model-value","disable","label"]),(m(!0),y(U,null,E(e.statKeys,a=>(m(),V(C,{key:a,"model-value":e.monster.stats[a],type:"number",label:e.$t(`monster.stat.${a}`),class:"col-2 q-pa-sm","onUpdate:modelValue":p=>e.updateStat(a,p)},null,8,["model-value","label","onUpdate:modelValue"]))),128)),l(C,{modelValue:e.monster.languages,"onUpdate:modelValue":t[16]||(t[16]=a=>e.monster.languages=a),label:e.$t("monster.languages"),class:"col-12 q-pa-sm"},null,8,["modelValue","label"])])]),_:1})]),_:1},8,["label","caption"])}var hl=Y(kl,[["render",$l]]);const Cl=G({name:"WebRenderer",setup(){const e=J(),{sanitizeWebString:t}=Xt(),n=Gt("textRenderer"),u=g(()=>n.traits.value.map(x=>t(x))),f=g(()=>t(n.classSpellcastingPreamble.value)),b=g(()=>t(n.innateSpellcastingPreamble.value)),s=g(()=>n.attacks.value.map(x=>t(x))),a=g(()=>n.actions.value.map(x=>t(x))),p=g(()=>n.bonusActions.value.map(x=>t(x))),i=g(()=>t(n.multiattacks.value)),r=g(()=>t(n.legendaryPreamble.value)),w=g(()=>n.legendaryActions.value.map(x=>t(x))),h=g(()=>t(n.mythicTrait.value)),N=g(()=>t(n.mythicPreamble.value)),I=g(()=>n.mythicActions.value.map(x=>t(x))),A=g(()=>n.reactions.value.map(x=>t(x))),P=g(()=>t(n.lairActionPreamble.value)),M=g(()=>n.lairActions.value.map(x=>t(x))),W=g(()=>t(n.regionalEffectPreamble.value)),_=g(()=>n.regionalEffects.value.map(x=>t(x))),T=yt(),q=g(()=>({columnCount:T.statBlockColumns})),ne=g(()=>({mm2014:T.style==="2014",mm2024:T.style==="2024",condenseImmunities:T.condenseImmunities})),ue=g(()=>t(n.cr.value)),ge=g(()=>t(n.inventory.value)),Ve=g(()=>t(n.initiative.value));return{monster:e,...n,cr:ue,sanitizedClassSpellcastingPreamble:f,sanitizedInnateSpellcastingPreamble:b,traits:u,attacks:s,actions:a,bonusActions:p,multiattacks:i,legendaryPreamble:r,legendaryActions:w,mythicTrait:h,mythicPreamble:N,mythicActions:I,reactions:A,lairActionPreamble:P,lairActions:M,regionalEffectPreamble:W,regionalEffects:_,columns:q,inventory:ge,blockStyle:ne,initiative:Ve}}}),Sl={class:"monster-name"},wl={class:"type"},Al={class:"skill ac"},Vl={key:0},Tl={class:"skill"},ql={class:"skill"},Ul={key:0,class:"row no-wrap",style:{width:"100%"}},Dl={class:"stat-name"},Ol={class:"stat"},Ll={class:"score"},Pl={class:"modifier"},El={key:1,class:"row no-wrap stats",style:{width:"100%"}},Nl={class:"stat-table"},Ml={class:"header-label mod"},Rl={class:"header-label save"},Bl={class:"stat one"},Il={class:"score one"},Hl={class:"mod one"},zl={class:"save one"},Fl={class:"stat two"},jl={class:"score two"},Kl={class:"mod two"},Ql={class:"save two"},Wl={class:"stat-table"},Xl={class:"header-label mod"},Gl={class:"header-label save"},Yl={class:"stat one"},Jl={class:"score one"},Zl={class:"mod one"},_l={class:"save one"},xl={class:"stat two"},eo={class:"score two"},to={class:"mod two"},lo={class:"save two"},oo={class:"stat-table"},ao={class:"header-label mod"},no={class:"header-label save"},so={class:"stat one"},io={class:"score one"},ro={class:"mod one"},uo={class:"save one"},co={class:"stat two"},mo={class:"score two"},po={class:"mod two"},fo={class:"save two"},bo={class:"skill"},vo={class:"name"},go={class:"skill"},ko={class:"name"},yo={class:"skill"},$o={class:"name"},ho=["innerHTML"],Co={class:"skill"},So={class:"name"},wo={class:"skill"},Ao={class:"name"},Vo={class:"skill"},To={class:"name"},qo={class:"skill"},Uo={class:"name"},Do={class:"skill"},Oo={class:"name"},Lo={class:"skill"},Po={class:"name"},Eo={class:"skill"},No={class:"name"},Mo={key:0,style:{float:"right"}},Ro={key:2,class:"section first"},Bo={class:"traits"},Io=["innerHTML"],Ho=["innerHTML"],zo={class:"section"},Fo=["innerHTML"],jo=["innerHTML"],Ko=["innerHTML"],Qo={key:4,class:"innate-spellcasting"},Wo=["innerHTML"],Xo={class:"spell-list"},Go={class:"spell-label"},Yo={class:"spell-list-entries"},Jo={key:5,class:"spellcasting"},Zo=["innerHTML"],_o={class:"spell-list"},xo={key:0,class:"spell-row"},ea={class:"spell-label"},ta={class:"spell-list-entries"},la={key:1},oa={class:"spell-row"},aa={class:"spell-label"},na={class:"spell-list-entries"},sa={class:"spell-label"},ia={class:"spell-list-entries"},ra={key:6,class:"bonus-actions"},da={class:"section"},ua=["innerHTML"],ca={key:7,class:"reactions"},ma={class:"section"},pa=["innerHTML"],fa={key:8,class:"legendary-actions"},ba={class:"section"},va=["innerHTML"],ga=["innerHTML"],ka={key:9,class:"mythic-actions"},ya={class:"section"},$a=["innerHTML"],ha=["innerHTML"],Ca={key:10,class:"reactions"},Sa={class:"section"},wa=["innerHTML"],Aa={key:11,class:"lair-actions"},Va={class:"section"},Ta=["innerHTML"],qa=["innerHTML"],Ua={key:12,class:"regional-effects"},Da={class:"section"},Oa=["innerHTML"],La=["innerHTML"],Pa={key:13,class:"inventory"},Ea={class:"section"},Na=["innerHTML"];function Ma(e,t,n,u,f,b){return m(),y("div",{id:"render",class:Yt(["statblock",e.blockStyle]),style:Jt(e.columns)},[c("h2",Sl,d(e.monster.name),1),c("div",wl,d(e.monster.size)+" "+d(e.monster.type)+", "+d(e.monster.alignment),1),t[5]||(t[5]=c("hr",null,null,-1)),c("div",Al,[c("div",null,[t[0]||(t[0]=c("span",{class:"name"},"Armor Class",-1)),k(" "+d(e.monster.AC)+d(e.monster.ACType===""?"":` (${e.monster.ACType})`),1)]),e.blockStyle.mm2024?(m(),y("span",Vl,[c("b",null,d(e.$t("skill.INITIATIVE")),1),k(" "+d(e.initiative),1)])):Z("",!0)]),c("div",Tl,[t[1]||(t[1]=c("span",{class:"name"},"Hit Points",-1)),k(" "+d(e.hp),1)]),c("div",ql,[t[2]||(t[2]=c("span",{class:"name"},"Speed",-1)),k(" "+d(e.speeds),1)]),t[6]||(t[6]=c("hr",null,null,-1)),e.blockStyle.mm2014?(m(),y("div",Ul,[(m(!0),y(U,null,E(e.stats,s=>(m(),y("div",{key:s.stat,class:"stat-container"},[c("div",Dl,d(s.stat),1),c("div",Ol,[c("div",Ll,d(s.score),1),c("div",Pl,"("+d(s.renderedModifier)+")",1)])]))),128))])):e.blockStyle.mm2024?(m(),y("div",El,[c("div",Nl,[c("div",Ml,d(e.$t("editor.mod")),1),c("div",Rl,d(e.$t("editor.save")),1),c("div",Bl,d(e.statsAndSavesByKey.STR.stat.toLowerCase()),1),c("div",Il,d(e.statsAndSavesByKey.STR.score),1),c("div",Hl,d(e.statsAndSavesByKey.STR.renderedModifier),1),c("div",zl,d(e.statsAndSavesByKey.STR.renderedSave),1),c("div",Fl,d(e.statsAndSavesByKey.INT.stat.toLowerCase()),1),c("div",jl,d(e.statsAndSavesByKey.INT.score),1),c("div",Kl,d(e.statsAndSavesByKey.INT.renderedModifier),1),c("div",Ql,d(e.statsAndSavesByKey.INT.renderedSave),1)]),c("div",Wl,[c("div",Xl,d(e.$t("editor.mod")),1),c("div",Gl,d(e.$t("editor.save")),1),c("div",Yl,d(e.statsAndSavesByKey.DEX.stat.toLowerCase()),1),c("div",Jl,d(e.statsAndSavesByKey.DEX.score),1),c("div",Zl,d(e.statsAndSavesByKey.DEX.renderedModifier),1),c("div",_l,d(e.statsAndSavesByKey.DEX.renderedSave),1),c("div",xl,d(e.statsAndSavesByKey.WIS.stat.toLowerCase()),1),c("div",eo,d(e.statsAndSavesByKey.WIS.score),1),c("div",to,d(e.statsAndSavesByKey.WIS.renderedModifier),1),c("div",lo,d(e.statsAndSavesByKey.WIS.renderedSave),1)]),c("div",oo,[c("div",ao,d(e.$t("editor.mod")),1),c("div",no,d(e.$t("editor.save")),1),c("div",so,d(e.statsAndSavesByKey.CON.stat.toLowerCase()),1),c("div",io,d(e.statsAndSavesByKey.CON.score),1),c("div",ro,d(e.statsAndSavesByKey.CON.renderedModifier),1),c("div",uo,d(e.statsAndSavesByKey.CON.renderedSave),1),c("div",co,d(e.statsAndSavesByKey.CHA.stat.toLowerCase()),1),c("div",mo,d(e.statsAndSavesByKey.CHA.score),1),c("div",po,d(e.statsAndSavesByKey.CHA.renderedModifier),1),c("div",fo,d(e.statsAndSavesByKey.CHA.renderedSave),1)])])):Z("",!0),t[7]||(t[7]=c("hr",null,null,-1)),Q(c("div",bo,[c("span",vo,d(e.$t("monster.saves")),1),k(" "+d(e.saves),1)],512),[[ee,e.blockStyle.mm2014&&e.saves!==""]]),Q(c("div",go,[c("span",ko,d(e.$t("monster.skills")),1),k(" "+d(e.skills),1)],512),[[ee,e.skills!==""]]),Q(c("div",yo,[c("span",$o,d(e.$t("monster.gear")),1),t[3]||(t[3]=k("\xA0 ",-1)),c("span",{innerHTML:e.inventory},null,8,ho)],512),[[ee,e.blockStyle.mm2024&&e.monster.inventory!==""&&e.monster.inventory!=="<br>"]]),Q(c("div",Co,[c("span",So,d(e.blockStyle.mm2024?e.$t("monster.resistances"):e.$t("monster.resistances2014")),1),k(" "+d(e.resistances),1)],512),[[ee,e.monster.resistances&&e.monster.resistances.length>0]]),Q(c("div",wo,[c("span",Ao,d(e.blockStyle.mm2024||e.blockStyle.condenseImmunities?e.$t("monster.immunities"):e.$t("monster.immunities2014")),1),k(" "+d(e.blockStyle.mm2024||e.blockStyle.condenseImmunities?e.immunitiesAndConditions:e.immunities),1)],512),[[ee,e.monster.immunities&&e.monster.immunities.length+(e.blockStyle.mm2024?e.monster.conditions.length:0)>0]]),Q(c("div",Vo,[c("span",To,d(e.blockStyle.mm2024?e.$t("monster.vulnerabilities"):e.$t("monster.vulnerabilities2014")),1),k(" "+d(e.vulnerabilities),1)],512),[[ee,e.monster.vulnerabilities&&e.monster.vulnerabilities.length>0]]),Q(c("div",qo,[c("span",Uo,d(e.$t("monster.conditionImmunities")),1),k(" "+d(e.conditions),1)],512),[[ee,e.blockStyle.mm2014&&!e.blockStyle.condenseImmunities&&e.monster.conditions&&e.monster.conditions.length>0]]),c("div",Do,[c("span",Oo,d(e.$t("monster.senses")),1),k(" "+d(e.senses),1)]),c("div",Lo,[c("span",Po,d(e.$t("monster.languages")),1),k(" "+d(e.monster.languages!==""?e.monster.languages:"\u2014"),1)]),c("div",Eo,[c("span",No,d(e.blockStyle.mm2014?"Challenge":"CR"),1),k(" "+d(e.cr)+" ",1),e.blockStyle.mm2014?(m(),y("span",Mo,[t[4]||(t[4]=c("b",null,"Proficiency Bonus",-1)),k(" +"+d(e.monster.proficiency),1)])):Z("",!0)]),t[8]||(t[8]=c("hr",null,null,-1)),e.blockStyle.mm2024&&e.traits.length>0?(m(),y("h3",Ro,d(e.$t("editor.traits.label")),1)):Z("",!0),c("div",Bo,[(m(!0),y(U,null,E(e.traits,(s,a)=>(m(),y("div",{key:a,class:"trait",innerHTML:s},null,8,Io))),128)),e.monster.mythicActions.actions.length>0?(m(),y("div",{key:0,class:"trait",innerHTML:e.mythicTrait},null,8,Ho)):Z("",!0)]),c("h3",zo,d(e.$t("editor.action.label")),1),e.monster.multiattacks.length>0?(m(),y("div",{key:3,class:"multiattack",innerHTML:e.multiattacks},null,8,Fo)):Z("",!0),(m(!0),y(U,null,E(e.attacks,(s,a)=>(m(),y("div",{key:a,class:"attack",innerHTML:s},null,8,jo))),128)),(m(!0),y(U,null,E(e.actions,(s,a)=>(m(),y("div",{key:a,class:"action",innerHTML:s},null,8,Ko))),128)),e.monster.spellcasting.atWill.length>0?(m(),y("div",Qo,[c("div",{innerHTML:e.sanitizedInnateSpellcastingPreamble},null,8,Wo),c("div",Xo,[(m(!0),y(U,null,E(e.innateSpellcastingLists,s=>(m(),y("div",{key:s.id,class:"spell-row"},[c("span",Go,d(s.renderedLabel)+": ",1),c("span",Yo,d(s.renderedSpells),1)]))),128))])])):Z("",!0),e.monster.spellcasting.standard.length>0?(m(),y("div",Jo,[c("div",{innerHTML:e.sanitizedClassSpellcastingPreamble},null,8,Zo),c("div",_o,[e.monster.knownSpellsOfLevel(0).length>0?(m(),y("div",xo,[c("span",ea,d(e.$t("editor.spellcasting.slot.cantripLabel"))+": ",1),c("span",ta,d(e.monster.knownSpellsOfLevel(0).join(", ")),1)])):Z("",!0),e.monster.spellcasting.class==="Warlock"?(m(),y("div",la,[c("div",oa,[c("span",aa,d(e.classSpellcastingWarlockLabel)+": ",1),c("span",na,d(e.monster.spellcasting.standard.join(", ")),1)])])):(m(!0),y(U,{key:2},E(e.classSpellcastingSlots,s=>(m(),y("div",{key:s.level,class:"spell-row"},[c("span",sa,d(s.renderedLabel),1),c("span",ia,d(s.renderedSpells),1)]))),128))])])):Z("",!0),e.bonusActions.length>0?(m(),y("div",ra,[c("h3",da,d(e.$t("monster.bonusActions")),1),(m(!0),y(U,null,E(e.bonusActions,(s,a)=>(m(),y("div",{key:a,class:"action",innerHTML:s},null,8,ua))),128))])):Z("",!0),e.blockStyle.mm2024&&e.monster.reactions.length>0?(m(),y("div",ca,[c("h3",ma,d(e.$t("editor.reaction.label")),1),(m(!0),y(U,null,E(e.reactions,(s,a)=>(m(),y("div",{key:a,class:"action reaction",innerHTML:s},null,8,pa))),128))])):Z("",!0),e.monster.legendaryActions.count>0?(m(),y("div",fa,[c("h3",ba,d(e.$t("editor.legendary.label")),1),c("div",{class:"preamble",innerHTML:e.legendaryPreamble},null,8,va),(m(!0),y(U,null,E(e.legendaryActions,(s,a)=>(m(),y("div",{key:a,class:"action legendary",innerHTML:s},null,8,ga))),128))])):Z("",!0),e.monster.mythicActions.actions.length>0?(m(),y("div",ka,[c("h3",ya,d(e.$t("editor.mythic.label")),1),c("div",{class:"preamble",innerHTML:e.mythicPreamble},null,8,$a),(m(!0),y(U,null,E(e.mythicActions,(s,a)=>(m(),y("div",{key:a,class:"action legendary",innerHTML:s},null,8,ha))),128))])):Z("",!0),e.blockStyle.mm2014&&e.monster.reactions.length>0?(m(),y("div",Ca,[c("h3",Sa,d(e.$t("editor.reaction.label")),1),(m(!0),y(U,null,E(e.reactions,(s,a)=>(m(),y("div",{key:a,class:"action reaction",innerHTML:s},null,8,wa))),128))])):Z("",!0),e.monster.lairActions.length>0?(m(),y("div",Aa,[c("h3",Va,d(e.$t("editor.lair.label")),1),c("div",{class:"preamble",innerHTML:e.lairActionPreamble},null,8,Ta),c("ul",null,[(m(!0),y(U,null,E(e.lairActions,(s,a)=>(m(),y("li",{key:a,class:"action lair",innerHTML:s},null,8,qa))),128))])])):Z("",!0),e.monster.regionalEffects.length>0?(m(),y("div",Ua,[c("h3",Da,d(e.$t("editor.regional.label")),1),c("div",{class:"preamble",innerHTML:e.regionalEffectPreamble},null,8,Oa),c("ul",null,[(m(!0),y(U,null,E(e.regionalEffects,(s,a)=>(m(),y("li",{key:a,class:"action regional",innerHTML:s},null,8,La))),128))])])):Z("",!0),e.blockStyle.mm2014&&e.monster.inventory!==""?(m(),y("div",Pa,[c("h3",Ea,d(e.$t("editor.inventory.label")),1),c("div",{innerHTML:e.inventory},null,8,Na)])):Z("",!0)],6)}var Ra=Y(Cl,[["render",Ma],["__scopeId","data-v-4b16983d"]]);const Ba=G({name:"SavesEditor",setup(){const e=J();return{monster:e,saves:g(()=>e.saves),saveModifierForStat:Zt,validateNumber:re}}});function Ia(e,t,n,u,f,b){return m(),V(X,{"expand-separator":"",icon:"fa-solid fa-helmet-safety",label:e.$t("editor.saves.label"),caption:e.$t("editor.saves.caption")},{default:o(()=>[l(z,{class:"row"},{default:o(()=>[(m(!0),y(U,null,E(e.saves,(s,a)=>(m(),V(C,{key:a,type:"number","model-value":e.saveModifierForStat(e.monster,a),class:"col-sm-12 col-md-4 q-pa-sm",label:e.$t(`monster.stat.${a}`),disable:!(s!=null&&s.override),"onUpdate:modelValue":p=>e.monster.saves[a].overrideValue=e.validateNumber(p,0)},{after:o(()=>[l(Se,{push:""},{default:o(()=>[l(S,{push:"",color:e.saves[a].proficient?"positive":"dark",icon:"keyboard_arrow_up",onClick:p=>e.saves[a].proficient=!e.saves[a].proficient},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.proficient")),1)]),_:1})]),_:1},8,["color","onClick"]),l(S,{push:"",color:e.saves[a].override?"warning":"dark",icon:"handyman",onClick:p=>e.saves[a].override=!e.saves[a].override},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.override")),1)]),_:1})]),_:1},8,["color","onClick"])]),_:2},1024)]),_:2},1032,["model-value","label","disable","onUpdate:modelValue"]))),128))]),_:1})]),_:1},8,["label","caption"])}var Ha=Y(Ba,[["render",Ia]]);const za=["walk","fly","burrow","climb","swim"],Fa=G({name:"SpeedsEditor",setup(){const{t:e}=ie(),t=J(),n=g(()=>za.map(b=>e(`monster.movement.type.${b}`))),u=H(Array.from(n.value)),f=Ce(n,u);return{speeds:g(()=>t.speeds),addSpeed:t.addSpeed,deleteSpeed:t.deleteSpeed,movementFilter:f,filteredMovementOptions:u,validateNumber:re}}}),ja={class:"row",style:{width:"100%"}};function Ka(e,t,n,u,f,b){return m(),V(X,{"expand-separator":"",icon:"speed",label:e.$t("editor.speeds.label"),caption:e.$t("editor.speeds.caption")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[(m(!0),y(U,null,E(e.speeds,s=>(m(),V(z,{key:s.id,flat:"",style:{width:"100%"}},{default:o(()=>[l(L,{horizontal:""},{default:o(()=>[c("div",ja,[l(F,{modelValue:s.type,"onUpdate:modelValue":a=>s.type=a,options:e.filteredMovementOptions,"use-input":"","input-debounce":"0",label:e.$t("monster.movement.type.label"),class:"col-3 q-pa-sm","new-value-mode":"add-unique",onFilter:e.movementFilter},null,8,["modelValue","onUpdate:modelValue","options","label","onFilter"]),l(C,{"model-value":s.speed,type:"number",label:e.$t("monster.movement.speed"),suffix:"ft",min:"0",step:"5",class:"col-2 q-pa-sm","onUpdate:modelValue":a=>s.speed=e.validateNumber(a,0)},null,8,["model-value","label","onUpdate:modelValue"]),l(C,{modelValue:s.note,"onUpdate:modelValue":a=>s.note=a,label:e.$t("monster.movement.note"),class:"col q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","label"])]),l(oe,{vertical:"",class:"justify-around q-px-md"},{default:o(()=>[l(S,{icon:"delete",round:"",color:"negative",onClick:()=>e.deleteSpeed(s.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),l(oe,{align:"center"},{default:o(()=>[l(S,{class:"full-width",color:"positive",label:e.$t("editor.addSpeed"),onClick:e.addSpeed},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var Qa=Y(Fa,[["render",Ka]]);const Wa=Object.keys($t);function Xa(e){return Wa.reduce((t,n)=>{const u=e[n];return u!==void 0&&(t[n]=u),t},{})}var pe=Te({name:"QBtnDropdown",props:{...$t,..._t,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,noRefocus:Boolean,noFocus:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:n}){const{proxy:u}=Ne(),f=H(e.modelValue),b=H(null),s=bt(),a=g(()=>{const T={"aria-expanded":f.value===!0?"true":"false","aria-haspopup":"true","aria-controls":s.value,"aria-label":e.toggleAriaLabel||u.$q.lang.label[f.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(T["aria-disabled"]="true"),T}),p=g(()=>"q-btn-dropdown__arrow"+(f.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),i=g(()=>xt(e)),r=g(()=>Xa(e));fe(()=>e.modelValue,T=>{var q;(q=b.value)==null||q[T?"show":"hide"]()}),fe(()=>e.split,_);function w(T){f.value=!0,n("beforeShow",T)}function h(T){n("show",T),n("update:modelValue",!0)}function N(T){f.value=!1,n("beforeHide",T)}function I(T){n("hide",T),n("update:modelValue",!1)}function A(T){n("click",T)}function P(T){Ct(T),_(),n("click",T)}function M(T){var q;(q=b.value)==null||q.toggle(T)}function W(T){var q;(q=b.value)==null||q.show(T)}function _(T){var q;(q=b.value)==null||q.hide(T)}return Object.assign(u,{show:W,hide:_,toggle:M}),ht(()=>{e.modelValue===!0&&W()}),()=>{const T=[O(Ee,{class:p.value,name:e.dropdownIcon||u.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&T.push(O(Et,{ref:b,id:s.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noEscDismiss:e.noEscDismiss,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,noFocus:e.noFocus,noRefocus:e.noRefocus,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:w,onShow:h,onBeforeHide:N,onHide:I},t.default)),e.split===!1?O(S,{class:"q-btn-dropdown q-btn-dropdown--simple",...r.value,...a.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:A},{default:()=>we(t.label,[]).concat(T),loading:t.loading}):O(Se,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...i.value,glossy:e.glossy,stretch:e.stretch},()=>[O(S,{class:"q-btn-dropdown--current",...r.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:P},{default:t.label,loading:t.loading}),O(S,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...a.value,...i.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>T)])}}});const Ga=G({name:"SkillsEditor",setup(){const e=J(),t=g(()=>Object.keys(rt).map(n=>({value:n,label:rt[n].label})).filter(n=>e.skills.find(u=>u.key===n.value)==null));return{monster:e,skills:g(()=>e.skills),addSkill:e.addSkill,deleteSkill:e.deleteSkill,availableSkills:t,bonusForSkill:el}}});function Ya(e,t,n,u,f,b){return m(),V(X,{"expand-separator":"",icon:"fa-solid fa-dice-d20",label:e.$t("editor.skills.label"),caption:e.$t("editor.skills.caption")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[(m(!0),y(U,null,E(e.skills,s=>(m(),y("div",{key:s.key,class:"row",style:{width:"100%"}},[l(C,{label:e.$t(`skill.${s.key}`),class:"col-8 q-pa-sm",type:"number","model-value":e.bonusForSkill(e.monster,s),disable:!s.override,"onUpdate:modelValue":a=>s.overrideValue=parseInt(`${a}`)},{after:o(()=>[l(Se,{push:""},{default:o(()=>[l(S,{push:"",color:s.proficient?"positive":"dark",icon:"keyboard_arrow_up",onClick:a=>s.proficient=!s.proficient},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.proficient")),1)]),_:1})]),_:1},8,["color","onClick"]),l(S,{push:"",color:s.expertise?"positive":"dark",icon:"keyboard_double_arrow_up",onClick:a=>s.expertise=!s.expertise},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.expertise")),1)]),_:1})]),_:1},8,["color","onClick"]),l(S,{push:"",color:s.override?"warning":"dark",icon:"handyman",onClick:a=>s.override=!s.override},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.override")),1)]),_:1})]),_:1},8,["color","onClick"])]),_:2},1024),l(S,{round:"",color:"negative",icon:"delete",class:"q-mx-sm",onClick:()=>e.deleteSkill(s.key)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.delete")),1)]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["label","model-value","disable","onUpdate:modelValue"]),l(C,{modelValue:s.conditional,"onUpdate:modelValue":a=>s.conditional=a,class:"col-4 q-pa-sm",label:e.$t("editor.skills.conditional")},null,8,["modelValue","onUpdate:modelValue","label"])]))),128))]),_:1}),l(oe,{align:"center"},{default:o(()=>[l(pe,{color:"positive",class:"full-width","auto-close":"",label:e.$t("editor.addSkill")},{default:o(()=>[l(le,null,{default:o(()=>[(m(!0),y(U,null,E(e.availableSkills,s=>Q((m(),V(te,{key:s.value,clickable:"",onClick:()=>e.addSkill(s.value)},{default:o(()=>[l(B,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(s.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[ye]])),128))]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var Ja=Y(Ga,[["render",Ya]]);const Za=G({name:"SavesEditor",setup(){const e=J();return{monster:e,passivePerception:g(()=>e.passivePerception),senses:Object.entries(e.senses).map(([t,n])=>({sense:t,range:n})),validateNumber:re}}});function _a(e,t,n,u,f,b){return m(),V(X,{"expand-separator":"",icon:"settings_input_antenna",label:e.$t("editor.senses.label"),caption:e.$t("editor.senses.caption")},{default:o(()=>[l(z,{class:"row"},{default:o(()=>{var s;return[(m(!0),y(U,null,E(e.monster.senses,(a,p)=>(m(),V(C,{key:p,"model-value":e.monster.senses[p],type:"number",label:e.$t(`monster.sense.${p}`),suffix:"ft",min:"0",step:"5",class:"col q-pa-sm","onUpdate:modelValue":i=>e.monster.senses[p]=e.validateNumber(i,0)},null,8,["model-value","label","onUpdate:modelValue"]))),128)),l(C,{type:"number","model-value":e.monster.computedPassivePerception,class:"col-3 q-pa-sm",label:e.$t("monster.passivePerception"),disable:!((s=e.passivePerception)!=null&&s.override),"onUpdate:modelValue":t[1]||(t[1]=a=>e.passivePerception.overrideValue=e.validateNumber(a,0))},{after:o(()=>[l(S,{push:"",color:e.passivePerception.override?"warning":"dark",icon:"handyman",onClick:t[0]||(t[0]=a=>e.passivePerception.override=!e.passivePerception.override)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.override")),1)]),_:1})]),_:1},8,["color"])]),_:1},8,["model-value","label","disable"]),l(C,{"model-value":e.monster.sensesNotes,label:e.$t("monster.sensesNotes"),class:"col-12 q-pa-sm","onUpdate:modelValue":t[2]||(t[2]=a=>e.monster.sensesNotes=`${a!=null?a:""}`)},null,8,["model-value","label"])]}),_:1})]),_:1},8,["label","caption"])}var xa=Y(Za,[["render",_a]]);function en(){const{t:e}=ie();return{conditionDefaults:g(()=>Object.keys(lt.condition).map(n=>e(`condition.${n}`)))}}function tn(){const{t:e}=ie();return{damageTypeDefaults:g(()=>Object.keys(lt.damageType).map(n=>e(`damageType.${n}`)))}}function ln(){const{t:e}=ie();return{attackTypeDefaults:g(()=>Object.keys(lt.attackType).map(n=>e(`attackType.${n}`)))}}const on=G({name:"ResistancesEditor",setup(){const e=J(),{damageTypeDefaults:t}=tn(),n=H([]),u=Ce(t,n),f=H([]),b=Ce(t,f),s=H([]),a=Ce(t,s),{conditionDefaults:p}=en(),i=H([]),r=Ce(p,i);return{monster:e,resistanceOptions:n,resistanceFilter:u,immunityOptions:f,immunityFilter:b,vulnerabilityOptions:s,vulnerabilityFilter:a,conditionOptions:i,conditionFilter:r}}});function an(e,t,n,u,f,b){return m(),V(X,{"expand-separator":"",icon:"shield",label:e.$t("editor.resistances.label"),caption:e.$t("editor.resistances.caption")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[l(F,{modelValue:e.monster.resistances,"onUpdate:modelValue":t[0]||(t[0]=s=>e.monster.resistances=s),options:e.resistanceOptions,"use-chips":"",multiple:"",clearable:"","new-value-mode":"add-unique",class:"col-12 q-pa-sm q-mb-sm","use-input":"","input-debounce":"0",label:e.$t("monster.resistances"),"bottom-slots":"",onFilter:e.resistanceFilter,onClear:t[1]||(t[1]=s=>e.monster.resistances=[])},{hint:o(()=>[k(d(e.$t("editor.customAllowed")),1)]),_:1},8,["modelValue","options","label","onFilter"]),l(F,{modelValue:e.monster.immunities,"onUpdate:modelValue":t[2]||(t[2]=s=>e.monster.immunities=s),options:e.immunityOptions,"use-chips":"",multiple:"",clearable:"","new-value-mode":"add-unique",class:"col-12 q-pa-sm q-mb-sm","use-input":"","input-debounce":"0",label:e.$t("monster.immunities"),"bottom-slots":"",onFilter:e.immunityFilter,onClear:t[3]||(t[3]=s=>e.monster.immunities=[])},{hint:o(()=>[k(d(e.$t("editor.customAllowed")),1)]),_:1},8,["modelValue","options","label","onFilter"]),l(F,{modelValue:e.monster.vulnerabilities,"onUpdate:modelValue":t[4]||(t[4]=s=>e.monster.vulnerabilities=s),options:e.vulnerabilityOptions,"use-chips":"",multiple:"",clearable:"","new-value-mode":"add-unique",class:"col-12 q-pa-sm q-mb-sm","use-input":"","input-debounce":"0",label:e.$t("monster.vulnerabilities"),"bottom-slots":"",onFilter:e.vulnerabilityFilter,onClear:t[5]||(t[5]=s=>e.monster.vulnerabilities=[])},{hint:o(()=>[k(d(e.$t("editor.customAllowed")),1)]),_:1},8,["modelValue","options","label","onFilter"]),l(F,{modelValue:e.monster.conditions,"onUpdate:modelValue":t[6]||(t[6]=s=>e.monster.conditions=s),options:e.conditionOptions,"use-chips":"",multiple:"",clearable:"","new-value-mode":"add-unique",class:"col-12 q-pa-sm q-mb-sm","use-input":"","input-debounce":"0",label:e.$t("monster.conditionImmunities"),"bottom-slots":"",onFilter:e.conditionFilter,onClear:t[7]||(t[7]=s=>e.monster.conditions=[])},{hint:o(()=>[k(d(e.$t("editor.customAllowed")),1)]),_:1},8,["modelValue","options","label","onFilter"])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var nn=Y(on,[["render",an]]);function Tt(e,t){if(t&&e===t)return null;const n=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(n)===!0)return e;const u=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,f=u.display;return f==="block"||f==="table"?e:Tt(e.parentNode)}function Ye(e,t,n){return!e||e===document.body?!1:n===!0&&e===t||(t===document?document.body:t).contains(e.parentNode)}function qt(e,t,n){if(n||(n=document.createRange(),n.selectNode(e),n.setStart(e,0)),t.count===0)n.setEnd(e,t.count);else if(t.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<t.count?t.count-=e.textContent.length:(n.setEnd(e,t.count),t.count=0);else for(let u=0;t.count!==0&&u<e.childNodes.length;u++)n=qt(e.childNodes[u],t,n);return n}const sn=/^https?:\/\//;class rn{constructor(t,n){this.el=t,this.eVm=n,this._range=null}get selection(){if(this.el){const t=document.getSelection();if(Ye(t.anchorNode,this.el,!0)&&Ye(t.focusNode,this.el,!0))return t}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const t=this.selection;return t!=null&&t.rangeCount?t.getRangeAt(0):this._range}get parent(){const t=this.range;if(t!==null){const n=t.startContainer;return n.nodeType===document.ELEMENT_NODE?n:n.parentNode}return null}get blockParent(){const t=this.parent;return t!==null?Tt(t,this.el):null}save(t=this.range){t!==null&&(this._range=t)}restore(t=this._range){const n=document.createRange(),u=document.getSelection();t!==null?(n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset),u.removeAllRanges(),u.addRange(n)):(u.selectAllChildren(this.el),u.collapseToEnd())}savePosition(){let t=-1,n;const u=document.getSelection(),f=this.el.parentNode;if(u.focusNode&&Ye(u.focusNode,f))for(n=u.focusNode,t=u.focusOffset;n&&n!==f;)n!==this.el&&n.previousSibling?(n=n.previousSibling,t+=n.textContent.length):n=n.parentNode;this.savedPos=t}restorePosition(t=0){if(this.savedPos>0&&this.savedPos<t){const n=window.getSelection(),u=qt(this.el,{count:this.savedPos});u&&(u.collapse(!1),n.removeAllRanges(),n.addRange(u))}}hasParent(t,n){const u=n?this.parent:this.blockParent;return u!==null?u.nodeName.toLowerCase()===t.toLowerCase():!1}hasParents(t,n,u=this.parent){return u===null?!1:t.includes(u.nodeName.toLowerCase())===!0?!0:n===!0?this.hasParents(t,n,u.parentNode):!1}is(t,n){if(this.selection===null)return!1;switch(t){case"formatBlock":return n==="DIV"&&this.parent===this.el||this.hasParent(n,n==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(t)===n;case"fontName":const u=document.queryCommandValue(t);return u===`"${n}"`||u===n;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const f=document.queryCommandState(t);return n!==void 0?f===n:f}}getParentAttribute(t){return this.parent!==null?this.parent.getAttribute(t):null}can(t){if(t==="outdent")return this.hasParents(["blockquote","li"],!0);if(t==="indent")return this.hasParents(["li"],!0);if(t==="link")return this.selection!==null||this.is("link")}apply(t,n,u=tl){if(t==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(n)&&this.is(t,n)&&(t="outdent",n=null),n==="PRE"&&this.is(t,"PRE")&&(n="P");else if(t==="print"){u();const f=window.open();f.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),f.print(),f.close();return}else if(t==="link"){const f=this.getParentAttribute("href");if(f===null){const b=this.selectWord(this.selection),s=b?b.toString():"";if(!s.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=sn.test(s)?s:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(b.getRangeAt(0))}else this.eVm.editLinkUrl.value=f,this.range.selectNodeContents(this.parent),this.save();return}else if(t==="fullscreen"){this.eVm.toggleFullscreen(),u();return}else if(t==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),u();return}document.execCommand(t,!1,n),u()}selectWord(t){if(t===null||t.isCollapsed!==!0||t.modify===void 0)return t;const n=document.createRange();n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset);const u=n.collapsed?["backward","forward"]:["forward","backward"];n.detach();const f=t.focusNode,b=t.focusOffset;return t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",u[0],"character"),t.modify("move",u[1],"word"),t.extend(f,b),t.modify("extend",u[1],"character"),t.modify("extend",u[0],"word"),t}}function Ut(e,t,n){t.handler?t.handler(e,n,n.caret):n.runCmd(t.cmd,t.param)}function ot(e){return O("div",{class:"q-editor__toolbar-group"},e)}function Dt(e,t,n,u=!1){const f=u||(t.type==="toggle"?t.toggled?t.toggled(e):t.cmd&&e.caret.is(t.cmd,t.param):!1),b=[];if(e.$q.platform.is.desktop&&(t.tip||t.htmlTip)){const s=t.key?O("div",[O("small",`(CTRL + ${String.fromCharCode(t.key)})`)]):null;b.push(O(j,{delay:1e3},()=>[O("div",t.htmlTip?{innerHTML:t.htmlTip}:t.tip),s]))}return O(S,{...e.buttonProps.value,icon:t.icon!==null?t.icon:void 0,color:f?t.toggleColor||e.props.toolbarToggleColor:t.color||e.props.toolbarColor,textColor:f&&!e.props.toolbarPush?null:t.textColor||e.props.toolbarTextColor,label:t.label,"aria-label":t.label==null?t.tip:void 0,disable:t.disable?typeof t.disable=="function"?t.disable(e):!0:!1,size:"sm",onClick(s){n==null||n(),Ut(s,t,e)}},()=>b)}function dn(e,t){const n=t.list==="only-icons";let u=t.label,f=t.icon!==null?t.icon:void 0,b,s;function a(){i.component.proxy.hide()}if(n)s=t.options.map(r=>{const w=r.type===void 0?e.caret.is(r.cmd,r.param):!1;return w&&(u=r.tip,f=r.icon!==null?r.icon:void 0),Dt(e,r,a,w)}),b=e.toolbarBackgroundClass.value,s=[ot(s)];else{const r=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,w=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,h=t.list==="no-icons";s=t.options.map(N=>{const I=N.disable?N.disable(e):!1,A=N.type===void 0?e.caret.is(N.cmd,N.param):!1;A&&(u=N.tip,f=N.icon!==null?N.icon:void 0);const P=N.htmlTip;return O(te,{active:A,activeClass:r,clickable:!0,disable:I,dense:!0,onClick(M){var W;a(),(M==null?void 0:M.qAvoidFocus)!==!0&&((W=e.contentRef.value)==null||W.focus()),e.caret.restore(),Ut(M,N,e)}},()=>[h===!0?null:O(B,{class:A?r:w,side:!0},()=>O(Ee,{name:N.icon!==null?N.icon:void 0})),O(B,P?()=>O("div",{class:"text-no-wrap",innerHTML:N.htmlTip}):N.tip?()=>O("div",{class:"text-no-wrap"},N.tip):void 0)])}),b=[e.toolbarBackgroundClass.value,w]}const p=t.highlight&&u!==t.label,i=O(pe,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:p?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:p&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:t.fixedLabel?t.label:u,icon:t.fixedIcon?t.icon!==null?t.icon:void 0:f,contentClass:b,onShow:r=>e.emit("dropdownShow",r),onHide:r=>e.emit("dropdownHide",r),onBeforeShow:r=>e.emit("dropdownBeforeShow",r),onBeforeHide:r=>e.emit("dropdownBeforeHide",r)},()=>s);return i}function un(e){if(e.caret)return e.buttons.value.filter(t=>!e.isViewingSource.value||t.find(n=>n.cmd==="viewsource")).map(t=>ot(t.map(n=>e.isViewingSource.value&&n.cmd!=="viewsource"?!1:n.type==="slot"?we(e.slots[n.slot]):n.type==="dropdown"?dn(e,n):Dt(e,n))))}function cn(e,t,n,u={}){const f=Object.keys(u);if(f.length===0)return{};const b={default_font:{cmd:"fontName",param:e,icon:n,tip:t}};return f.forEach(s=>{const a=u[s];b[s]={cmd:"fontName",param:a,icon:n,tip:a,htmlTip:`<font face="${a}">${a}</font>`}}),b}function mn(e){if(e.caret){const t=e.props.toolbarColor||e.props.toolbarTextColor;let n=e.editLinkUrl.value;const u=()=>{e.caret.restore(),n!==e.editLinkUrl.value&&document.execCommand("createLink",!1,n===""?" ":n),e.editLinkUrl.value=null};return[O("div",{class:`q-mx-xs text-${t}`},`${e.$q.lang.editor.url}: `),O("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:n,onInput:f=>{Ct(f),n=f.target.value},onKeydown:f=>{if(St(f)!==!0)switch(f.keyCode){case 13:return dt(f),u();case 27:dt(f),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),ot([O(S,{key:"qedt_btm_rem",...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),O(S,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:u})])]}}const pn=Object.prototype.toString,Je=Object.prototype.hasOwnProperty,fn=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function mt(e){if(e!==Object(e)||fn.has(pn.call(e))===!0||e.constructor&&Je.call(e,"constructor")===!1&&Je.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let t;for(t in e);return t===void 0||Je.call(e,t)}function Ot(){let e,t,n,u,f,b,s=arguments[0]||{},a=1,p=!1;const i=arguments.length;for(typeof s=="boolean"&&(p=s,s=arguments[1]||{},a=2),Object(s)!==s&&typeof s!="function"&&(s={}),i===a&&(s=this,a--);a<i;a++)if((e=arguments[a])!==null)for(t in e)n=s[t],u=e[t],s!==u&&(p===!0&&u&&((f=Array.isArray(u))||mt(u)===!0)?(f===!0?b=Array.isArray(n)===!0?n:[]:b=mt(n)===!0?n:{},s[t]=Ot(p,b,u)):u!==void 0&&(s[t]=u));return s}var bn=Te({name:"QEditor",props:{...Ze,...dl,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(t=>t.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...ul,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:t,emit:n}){const{proxy:u}=Ne(),{$q:f}=u,b=_e(e,f),{inFullscreen:s,toggleFullscreen:a}=cl(),p=ll(),i=H(null),r=H(null),w=H(null),h=H(!1),N=g(()=>!e.readonly&&!e.disable);let I,A,P=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),I=window.getComputedStyle(document.body).fontFamily;const M=g(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),W=g(()=>{const v=e.toolbarOutline!==!0&&e.toolbarPush!==!0;return{type:"a",flat:v,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!N.value,size:"sm"}}),_=g(()=>{const v=f.lang.editor,$=f.iconSet.editor;return{bold:{cmd:"bold",icon:$.bold,tip:v.bold,key:66},italic:{cmd:"italic",icon:$.italic,tip:v.italic,key:73},strike:{cmd:"strikeThrough",icon:$.strikethrough,tip:v.strikethrough,key:83},underline:{cmd:"underline",icon:$.underline,tip:v.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:$.unorderedList,tip:v.unorderedList},ordered:{cmd:"insertOrderedList",icon:$.orderedList,tip:v.orderedList},subscript:{cmd:"subscript",icon:$.subscript,tip:v.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:$.superscript,tip:v.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:K=>K.caret&&!K.caret.can("link"),icon:$.hyperlink,tip:v.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:$.toggleFullscreen,tip:v.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:$.viewSource,tip:v.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:$.quote,tip:v.quote,key:81},left:{cmd:"justifyLeft",icon:$.left,tip:v.left},center:{cmd:"justifyCenter",icon:$.center,tip:v.center},right:{cmd:"justifyRight",icon:$.right,tip:v.right},justify:{cmd:"justifyFull",icon:$.justify,tip:v.justify},print:{type:"no-state",cmd:"print",icon:$.print,tip:v.print,key:80},outdent:{type:"no-state",disable:K=>K.caret&&!K.caret.can("outdent"),cmd:"outdent",icon:$.outdent,tip:v.outdent},indent:{type:"no-state",disable:K=>K.caret&&!K.caret.can("indent"),cmd:"indent",icon:$.indent,tip:v.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:$.removeFormat,tip:v.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:$.hr,tip:v.hr},undo:{type:"no-state",cmd:"undo",icon:$.undo,tip:v.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:$.redo,tip:v.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:$.heading1||$.heading,tip:v.heading1,htmlTip:`<h1 class="q-ma-none">${v.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:$.heading2||$.heading,tip:v.heading2,htmlTip:`<h2 class="q-ma-none">${v.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:$.heading3||$.heading,tip:v.heading3,htmlTip:`<h3 class="q-ma-none">${v.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:$.heading4||$.heading,tip:v.heading4,htmlTip:`<h4 class="q-ma-none">${v.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:$.heading5||$.heading,tip:v.heading5,htmlTip:`<h5 class="q-ma-none">${v.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:$.heading6||$.heading,tip:v.heading6,htmlTip:`<h6 class="q-ma-none">${v.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:$.heading,tip:v.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:$.code,htmlTip:`<code>${v.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:$.size1||$.size,tip:v.size1,htmlTip:`<font size="1">${v.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:$.size2||$.size,tip:v.size2,htmlTip:`<font size="2">${v.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:$.size3||$.size,tip:v.size3,htmlTip:`<font size="3">${v.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:$.size4||$.size,tip:v.size4,htmlTip:`<font size="4">${v.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:$.size5||$.size,tip:v.size5,htmlTip:`<font size="5">${v.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:$.size6||$.size,tip:v.size6,htmlTip:`<font size="6">${v.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:$.size7||$.size,tip:v.size7,htmlTip:`<font size="7">${v.size7}</font>`}}}),T=g(()=>{const v=e.definitions||{},$=e.definitions||e.fonts?Ot(!0,{},_.value,v,cn(I,f.lang.editor.defaultFont,f.iconSet.editor.font,e.fonts)):_.value;return e.toolbar.map(K=>K.map(ae=>{if(ae.options)return{type:"dropdown",icon:ae.icon,label:ae.label,size:"sm",dense:!0,fixedLabel:ae.fixedLabel,fixedIcon:ae.fixedIcon,highlight:ae.highlight,list:ae.list,options:ae.options.map(Pt=>$[Pt])};const be=$[ae];return be?be.type==="no-state"||v[ae]&&(be.cmd===void 0||_.value[be.cmd]&&_.value[be.cmd].type==="no-state")?be:Object.assign({type:"toggle"},be):{type:"slot",slot:ae}}))}),q={$q:f,props:e,slots:t,emit:n,inFullscreen:s,toggleFullscreen:a,runCmd:We,isViewingSource:h,editLinkUrl:w,toolbarBackgroundClass:M,buttonProps:W,contentRef:r,buttons:T,setContent:Qe};fe(()=>e.modelValue,v=>{P!==v&&(P=v,Qe(v,!0))}),fe(w,v=>{n(`link${v?"Show":"Hide"}`)});const ne=g(()=>e.toolbar&&e.toolbar.length!==0),ue=g(()=>{const v={},$=K=>{K.key&&(v[K.key]={cmd:K.cmd,param:K.param})};return T.value.forEach(K=>{K.forEach(ae=>{ae.options?ae.options.forEach($):$(ae)})}),v}),ge=g(()=>s.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),Ve=g(()=>`q-editor q-editor--${h.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(s.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(b.value===!0?" q-editor--dark q-dark":"")),x=g(()=>[e.contentClass,"q-editor__content",{col:s.value,"overflow-auto":s.value||e.maxHeight}]),Le=g(()=>e.disable===!0?{"aria-disabled":"true"}:{});function He(){if(r.value!==null){const v=`inner${h.value===!0?"Text":"HTML"}`,$=r.value[v];$!==e.modelValue&&(P=$,n("update:modelValue",$))}}function ze(v){if(n("keydown",v),v.ctrlKey!==!0||St(v)===!0){ke();return}const $=v.keyCode,K=ue.value[$];if(K!==void 0){const{cmd:ae,param:be}=K;vt(v),We(ae,be,!1)}}function Fe(v){ke(),n("click",v)}function je(v){if(r.value!==null){const{scrollTop:$,scrollHeight:K}=r.value;A=K-$}q.caret.save(),n("blur",v)}function Ke(v){pt(()=>{r.value!==null&&A!==void 0&&(r.value.scrollTop=r.value.scrollHeight-A)}),n("focus",v)}function R(v){const $=i.value;if($!==null&&$.contains(v.target)===!0&&(v.relatedTarget===null||$.contains(v.relatedTarget)!==!0)){const K=`inner${h.value===!0?"Text":"HTML"}`;q.caret.restorePosition(r.value[K].length),ke()}}function ce(v){const $=i.value;$!==null&&$.contains(v.target)===!0&&(v.relatedTarget===null||$.contains(v.relatedTarget)!==!0)&&(q.caret.savePosition(),ke())}function me(){A=void 0}function Pe(v){q.caret.save()}function Qe(v,$){if(r.value!==null){$===!0&&q.caret.savePosition();const K=`inner${h.value===!0?"Text":"HTML"}`;r.value[K]=v,$===!0&&(q.caret.restorePosition(r.value[K].length),ke())}}function We(v,$,K=!0){Xe(),q.caret.restore(),q.caret.apply(v,$,()=>{Xe(),q.caret.save(),K&&ke()})}function ke(){setTimeout(()=>{w.value=null,u.$forceUpdate()},1)}function Xe(){ol(()=>{var v;(v=r.value)==null||v.focus({preventScroll:!0})})}function Lt(){return r.value}return ht(()=>{q.caret=u.caret=new rn(r.value,q),Qe(e.modelValue),ke(),document.addEventListener("selectionchange",Pe)}),xe(()=>{document.removeEventListener("selectionchange",Pe)}),Object.assign(u,{runCmd:We,refreshToolbar:ke,focus:Xe,getContentEl:Lt}),()=>{let v;if(ne.value){const $=[O("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+M.value},un(q))];w.value!==null&&$.push(O("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+M.value},mn(q))),v=O("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},$)}return O("div",{ref:i,class:Ve.value,style:{height:s.value===!0?"100%":null},...Le.value,onFocusin:R,onFocusout:ce},[v,O("div",{ref:r,style:ge.value,class:x.value,contenteditable:N.value,placeholder:e.placeholder,...p.listeners.value,onInput:He,onKeydown:ze,onClick:Fe,onBlur:je,onFocus:Ke,onMousedown:me,onTouchstartPassive:me})])}}});function vn(){const{t:e}=ie(),t=g(()=>[{label:e("monster.stat.STR"),token:"{DC:STR}"},{label:e("monster.stat.DEX"),token:"{DC:DEX}"},{label:e("monster.stat.CON"),token:"{DC:CON}"},{label:e("monster.stat.INT"),token:"{DC:INT}"},{label:e("monster.stat.WIS"),token:"{DC:WIS}"},{label:e("monster.stat.CHA"),token:"{DC:CHA}"}]),n=g(()=>[{label:e("monster.stat.STR"),token:"{A:STR}"},{label:e("monster.stat.DEX"),token:"{A:DEX}"},{label:e("monster.stat.CON"),token:"{A:CON}"},{label:e("monster.stat.INT"),token:"{A:INT}"},{label:e("monster.stat.WIS"),token:"{A:WIS}"},{label:e("monster.stat.CHA"),token:"{A:CHA}"}]),u=g(()=>[{label:e("monster.name"),token:"{monster.name}"},{label:e("monster.proficiencyBonus"),token:"{monster.proficiency}"},{label:e("monster.ac"),token:"{monster.AC}"},{label:e("monster.hp.label"),token:"{monster.hp}"}]),f=g(()=>[{label:e("monster.trait.name"),token:"{trait.name}"},{label:e("monster.trait.limitedUse.label"),token:"{trait.limitedUse}"},{label:e("monster.trait.limitedUse.count"),token:"{trait.limitedUse.count}"},{label:e("monster.trait.limitedUse.rate"),token:"{trait.limitedUse.rate}"}]),b=g(()=>[{label:e("monster.spellcasting.level"),token:"{spellcasting.level}"},{label:e("editor.spellcasting.slot.levelOrdinal"),token:"{spellcasting.ordinal}"},{label:e("monster.spellcasting.class"),token:"{spellcasting.class}"},{label:e("monster.spellcasting.ability"),token:"{spellcasting.stat}"},{label:e("monster.spellcasting.save"),token:"{spellcasting.save}"},{label:e("monster.spellcasting.attack"),token:"{spellcasting.attack}"},{label:e("monster.spellcasting.modifier"),token:"{spellcasting.modifier}"}]),s=g(()=>[{label:e("editor.attack.primary"),token:"{attack.damage}"},{label:e("editor.attack.distanceLabel"),token:"{attack.distance}"},{label:e("monster.attack.bonus"),token:"{attack.modifier}"},{label:e("monster.attack.targets"),token:"{attack.targets}"},{label:e("editor.attack.additional"),token:"{attack.additionalDamage}"},{label:e("editor.attack.conditional"),token:"{attack.conditionalDamage}"}]),a=g(()=>[{label:e("monster.trait.name"),token:"{action.name}"},{label:e("monster.trait.limitedUse.label"),token:"{action.limitedUse}"},{label:e("monster.trait.limitedUse.count"),token:"{action.limitedUse.count}"},{label:e("monster.trait.limitedUse.rate"),token:"{action.limitedUse.rate}"},{label:e("monster.action.recharge"),token:"{action.recharge}"}]),p=g(()=>[{label:e("editor.legendary.actionCount"),token:"{legendaryActions.count"},{label:e("editor.legendary.count"),token:"{legendaryActions.actions}"}]);return{attackTokens:n,saveTokens:t,monsterTokens:u,traitTokens:f,spellTokens:b,attackDamageTokens:s,actionTokens:a,legendaryTokens:p}}const gn=G({name:"MonsterTextEditor",props:{field:{required:!0,type:String},tokenCategory:{type:String,default:"none"},i18nLabelKey:{required:!0,type:String},showReset:{type:Boolean,default:!1}},emits:["update:modelValue","reset"],setup(e,t){const{t:n}=ie(),u=H(null),f=H(null),b=H(null),s=H(null),a=H(null),p=vn(),i=H([["title"],["bold","italic","underline"],["undo","redo"],["saves","attacks","monster-tokens","context-tokens"]]);e.showReset&&i.value.push(["reset"]);const r=H({reset:{tip:n("editor.resetTip"),icon:"restart_alt",handler:()=>t.emit("reset")}}),w=al.throttle(A=>{t.emit("update:modelValue",A)},500),h=A=>{var M,W,_,T;const P=u.value;(M=f.value)==null||M.hide(),(W=s.value)==null||W.hide(),(_=b.value)==null||_.hide(),(T=a.value)==null||T.hide(),P.caret.restore(),P.runCmd("insertHTML",`${A}`),P.focus()},N=g(()=>e.tokenCategory==="trait"?p.traitTokens.value:e.tokenCategory==="spell"?p.spellTokens.value:e.tokenCategory==="attack"?p.attackDamageTokens.value:e.tokenCategory==="action"?p.actionTokens.value:e.tokenCategory==="legendary"?p.legendaryTokens.value:null),I=g(()=>e.tokenCategory==="trait"?"editor.trait":e.tokenCategory==="spell"?"editor.spellcasting.label":e.tokenCategory==="attack"?"editor.attack.customRenderer":e.tokenCategory==="action"?"editor.action.tokenLabel":e.tokenCategory==="legendary"?"editor.legendary.label":"");return{monsterTokenRef:f,attackTokenRef:b,saveTokenRef:s,contextTokenRef:a,editorRef:u,add:h,...p,contextTokens:N,contextTokenLabel:I,throttledUpdate:w,toolbarOptions:i,toolbarDefinitions:r}}}),kn={class:"text-subtitle2",style:{display:"flex","align-items":"center",height:"100%"}};function yn(e,t,n,u,f,b){return m(),V(bn,{ref:"editorRef","model-value":e.$props.field,toolbar:e.toolbarOptions,definitions:e.toolbarDefinitions,class:"full-width q-ma-sm","onUpdate:modelValue":t[0]||(t[0]=s=>e.throttledUpdate(s))},{title:o(()=>[c("div",kn,d(e.$t(e.$props.i18nLabelKey)),1)]),saves:o(()=>[l(pe,{ref:"saveTokenRef",dense:"","no-caps":"","no-wrap":"",unelevated:"",label:e.$t("editor.statSave"),size:"sm"},{default:o(()=>[l(le,{dense:""},{default:o(()=>[(m(!0),y(U,null,E(e.saveTokens,s=>(m(),V(te,{key:s.token,clickable:"",onClick:a=>e.add(s.token)},{default:o(()=>[l(B,null,{default:o(()=>[k(d(s.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["label"])]),attacks:o(()=>[l(pe,{ref:"attackTokenRef",dense:"","no-caps":"","no-wrap":"",unelevated:"",label:e.$t("editor.attackMod"),size:"sm"},{default:o(()=>[l(le,{dense:""},{default:o(()=>[(m(!0),y(U,null,E(e.attackTokens,s=>(m(),V(te,{key:s.token,clickable:"",onClick:a=>e.add(s.token)},{default:o(()=>[l(B,null,{default:o(()=>[k(d(s.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["label"])]),"monster-tokens":o(()=>[l(pe,{ref:"monsterTokenRef",dense:"","no-caps":"","no-wrap":"",unelevated:"",label:e.$t("editor.monsterToken"),size:"sm"},{default:o(()=>[l(le,{dense:""},{default:o(()=>[(m(!0),y(U,null,E(e.monsterTokens,s=>(m(),V(te,{key:s.token,clickable:"",onClick:a=>e.add(s.token)},{default:o(()=>[l(B,null,{default:o(()=>[k(d(s.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["label"])]),"context-tokens":o(()=>[e.contextTokens!=null?(m(),V(pe,{key:0,ref:"contextTokenRef",dense:"","no-caps":"","no-wrap":"",unelevated:"",label:e.$t(e.contextTokenLabel),size:"sm"},{default:o(()=>[l(le,{dense:""},{default:o(()=>[(m(!0),y(U,null,E(e.contextTokens,s=>(m(),V(te,{key:s.token,clickable:"",onClick:a=>e.add(s.token)},{default:o(()=>[l(B,null,{default:o(()=>[k(d(s.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["label"])):Z("",!0)]),_:1},8,["model-value","toolbar","definitions"])}var de=Y(gn,[["render",yn]]);const $n=G({name:"CrAnnotationCard",components:{LockToggleButton:Oe},props:{field:{required:!0,type:String},index:{required:!0,type:Number}},setup(e){return{crData:J()[e.field][e.index],validateNumber:re,...Re()}}}),hn={class:"full-width"},Cn={class:"col"},Sn={class:"text-overline text-uppercase"},wn={class:"text-subtitle"},An={class:"col-2",style:{display:"flex","justify-content":"flex-end","justify-items":"flex-end","align-items":"center","align-content":"flex-end"}},Vn={class:"row"};function Tn(e,t,n,u,f,b){const s=D("lock-toggle-button");return m(),y("div",hn,[l(z,{flat:"",bordered:""},{default:o(()=>[l(L,{class:"bg-indigo-10 row"},{default:o(()=>[c("div",Cn,[c("div",Sn,d(e.$t("editor.crAnnotation.title")),1),c("div",wn,d(e.printCrSummary(e.crData.crAnnotation)),1)]),c("div",An,[l(Se,{push:""},{default:o(()=>[l(s,{locked:e.crData.crAnnotation.automatic,"lock-tooltip":e.$t("editor.crAnnotation.automatic"),"unlock-tooltip":e.$t("editor.crAnnotation.manual"),onClick:t[0]||(t[0]=()=>{e.crData.crAnnotation.automatic=!e.crData.crAnnotation.automatic,e.crData.crAnnotation.automatic&&e.autoUpdateCr(e.crData.description,e.crData.crAnnotation)})},null,8,["locked","lock-tooltip","unlock-tooltip"]),l(S,{push:"",icon:e.crData.crAnnotation.include?"code":"code_off",color:e.crData.crAnnotation.include?"positive":"dark",size:"md",onClick:t[1]||(t[1]=a=>e.crData.crAnnotation.include=!e.crData.crAnnotation.include)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.crData.crAnnotation.include?e.$t("editor.crAnnotation.include"):e.$t("editor.crAnnotation.exclude")),1)]),_:1})]),_:1},8,["icon","color"])]),_:1})])]),_:1}),l(ve,null,{default:o(()=>[Q(c("div",null,[l($e),l(L,null,{default:o(()=>[c("div",Vn,[l(C,{"model-value":e.crData.crAnnotation.maxDamage,type:"number",disable:e.crData.crAnnotation.automatic,label:e.$t("editor.crAnnotation.maxDamage"),min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[3]||(t[3]=a=>e.crData.crAnnotation.maxDamage=e.validateNumber(a,0))},{after:o(()=>[l(S,{push:"",icon:e.crData.crAnnotation.multitarget?"groups":"person",color:"primary",onClick:t[2]||(t[2]=a=>e.crData.crAnnotation.multitarget=!e.crData.crAnnotation.multitarget)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.crData.crAnnotation.multitarget?e.$t("editor.crAnnotation.multitarget"):e.$t("editor.crAnnotation.singletarget")),1)]),_:1})]),_:1},8,["icon"])]),_:1},8,["model-value","disable","label"]),l(C,{"model-value":e.crData.crAnnotation.maxSave,type:"number",label:e.$t("editor.crAnnotation.maxSave"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[4]||(t[4]=a=>e.crData.crAnnotation.maxSave=e.validateNumber(a,0))},null,8,["model-value","label","disable"]),l(C,{"model-value":e.crData.crAnnotation.maxModifier,type:"number",label:e.$t("editor.crAnnotation.maxModifier"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[5]||(t[5]=a=>e.crData.crAnnotation.maxModifier=e.validateNumber(a,0))},null,8,["model-value","label","disable"]),l(C,{"model-value":e.crData.crAnnotation.ehpModifier,type:"number",label:e.$t("editor.crAnnotation.ehpModifier"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[6]||(t[6]=a=>e.crData.crAnnotation.ehpModifier=e.validateNumber(a,0))},null,8,["model-value","label","disable"]),l(C,{"model-value":e.crData.crAnnotation.ehpMultiplier,type:"number",label:e.$t("editor.crAnnotation.ehpMultiplier"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[7]||(t[7]=a=>e.crData.crAnnotation.ehpMultiplier=e.validateNumber(a,1))},null,8,["model-value","label","disable"]),l(C,{"model-value":e.crData.crAnnotation.acModifier,type:"number",label:e.$t("editor.crAnnotation.acModifier"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[8]||(t[8]=a=>e.crData.crAnnotation.acModifier=e.validateNumber(a,0))},null,8,["model-value","label","disable"])])]),_:1})],512),[[ee,!e.crData.crAnnotation.automatic]])]),_:1})]),_:1})])}var at=Y($n,[["render",Tn]]);const qn=G({name:"NewTemplateDialog",props:{targetName:{type:String,default:""}},emits:[...st.emits],setup(e){const{dialogRef:t,onDialogHide:n,onDialogOK:u,onDialogCancel:f}=st(),b=De(),{t:s}=ie(),a=H(""),p=H(e.targetName),i=H(!1),r=H(null),w=g(()=>{var h;return i.value?((h=r.value)==null||h.resetValidation(),[]):[N=>!(N in b.allTemplates)||s("editor.template.nameValidator")]});return{dialogRef:t,onDialogHide:n,onOKClick(){u({name:p.value,icon:a.value})},onCancelClick:f,icon:a,name:p,nameInput:r,override:i,templateStore:b,rules:w}}}),Un={class:"text-h6"},Dn={class:"col-12 q-pa-sm text-subtitle1"},On={href:"https://quasar.dev/vue-components/icon#webfont-usage",target:"_blank"},Ln={href:"https://fonts.google.com/icons?selected=Material+Icons&icon.style=Filled",target:"_blank"},Pn={href:"https://materialdesignicons.com/",target:"_blank"},En={href:"https://fontawesome.com/search?m=free",target:"_blank"},Nn={class:"col-12 q-pa-sm"};function Mn(e,t,n,u,f,b){const s=D("i18n-t");return m(),V(sl,{ref:"dialogRef",onHide:e.onDialogHide},{default:o(()=>[l(z,{class:"q-dialog-plugin new-spell-dialog"},{default:o(()=>[l(L,null,{default:o(()=>[c("div",Un,d(e.$t("editor.template.create",[e.targetName])),1)]),_:1}),l($e),l(L,{class:"row"},{default:o(()=>[l(C,{ref:"nameInput",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.name=a),label:e.$t("editor.template.name"),class:"col-12 q-pa-sm","reactive-rules":"",rules:e.rules,"bottom-slots":""},{hint:o(()=>[k(d(e.$t("editor.template.nameHint")),1)]),_:1},8,["modelValue","label","rules"]),l(C,{modelValue:e.icon,"onUpdate:modelValue":t[1]||(t[1]=a=>e.icon=a),class:"col-12 q-pa-sm",label:e.$t("editor.template.icon")},null,8,["modelValue","label"]),c("div",Dn,[l(s,{keypath:"editor.template.availableIcons"},{default:o(()=>[c("a",On,d(e.$t("editor.template.link0")),1),c("a",Ln,d(e.$t("editor.template.link1")),1),c("a",Pn,d(e.$t("editor.template.link2")),1),c("a",En,d(e.$t("editor.template.link3")),1)]),_:1})]),c("div",Nn,[l(nl,{modelValue:e.override,"onUpdate:modelValue":t[2]||(t[2]=a=>e.override=a),label:e.$t("editor.template.override")},null,8,["modelValue","label"])])]),_:1}),l(oe,{align:"right"},{default:o(()=>{var a;return[l(S,{color:"green",label:e.$t("editor.save"),disabled:!e.override&&(!((a=e.nameInput)!=null&&a.validate())||e.name.length===0),onClick:e.onOKClick},null,8,["label","disabled","onClick"]),l(S,{color:"primary",label:e.$t("editor.cancel"),onClick:e.onCancelClick},null,8,["label","onClick"])]}),_:1})]),_:1})]),_:1},8,["onHide"])}var Ie=Y(qn,[["render",Mn]]);const Rn=G({name:"SwapButtons",props:{idx:{type:Number,required:!0},field:{type:String,required:!0}},setup(e){const t=J(),n=g(()=>t[e.field].length);return{monster:t,itemCount:n}}});function Bn(e,t,n,u,f,b){return m(),V(Se,{push:""},{default:o(()=>[l(S,{disabled:e.idx===0,push:"",ripple:!1,icon:"move_up",color:"primary",onClick:t[0]||(t[0]=s=>{s.stopPropagation(),e.monster.moveItemUp(e.field,e.idx)})},null,8,["disabled"]),l(S,{disabled:e.idx===e.itemCount-1,push:"",ripple:!1,icon:"move_down",color:"primary",onClick:t[1]||(t[1]=s=>{s.stopPropagation(),e.monster.moveItemDown(e.field,e.idx)})},null,8,["disabled"])]),_:1})}var Ae=Y(Rn,[["render",Bn]]);const In=G({name:"TraitsEditor",components:{MonsterTextEditor:de,CrAnnotationCard:at,SwapButtons:Ae},setup(){const e=J(),{rechargeTimeOptions:t}=Ue(),{autoUpdateCr:n,printCrSummary:u}=Re(),f=qe(),{t:b}=ie(),s=De(),a=p=>{f.dialog({component:Ie,componentProps:{targetName:p.name}}).onOk(({name:i,icon:r})=>{s.addCustomTrait(p,i,r),f.notify({message:b("editor.template.added",[i]),type:"positive"})})};return{monster:e,traits:g(()=>e.traits),rechargeTimeOptions:t,autoUpdateCr:n,printCrSummary:u,addTemplate:a,validateNumber:re}}});function Hn(e,t,n,u,f,b){const s=D("swap-buttons"),a=D("monster-text-editor"),p=D("cr-annotation-card");return m(),V(X,{"expand-separator":"",icon:"fa-solid fa-dna",label:e.$t("editor.traits.label"),caption:e.$t("editor.traits.caption")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[l(le,{bordered:"",separator:"",class:"rounded-borders bg-teal-10 full-width"},{default:o(()=>[(m(!0),y(U,null,E(e.traits,(i,r)=>(m(),V(X,{key:i.id,label:i.name,"expand-separator":""},{header:o(()=>[l(B,null,{default:o(()=>[k(d(i.name),1)]),_:2},1024),e.monster.alphaTraits?Z("",!0):(m(),V(B,{key:0,side:""},{default:o(()=>[l(s,{field:"traits",idx:r},null,8,["idx"])]),_:2},1024))]),default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[l(C,{modelValue:i.name,"onUpdate:modelValue":w=>i.name=w,label:e.$t("monster.trait.name"),class:"col-7 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","label"]),l(C,{"model-value":i.limitedUse.count,type:"number",min:"0",class:"col-2 q-pa-sm",label:e.$t("monster.trait.limitedUse.count"),"onUpdate:modelValue":w=>i.limitedUse.count=e.validateNumber(w,0)},null,8,["model-value","label","onUpdate:modelValue"]),l(F,{modelValue:i.limitedUse.rate,"onUpdate:modelValue":w=>i.limitedUse.rate=w,"display-value":e.$t(`recharge.${i.limitedUse.rate}`),options:e.rechargeTimeOptions,"emit-value":"",label:e.$t("monster.trait.limitedUse.rate"),class:"col-3 q-pa-sm"},{after:o(()=>[l(S,{round:"",icon:"save",color:"primary",onClick:w=>e.addTemplate(i)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("monster.trait.save")),1)]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","display-value","options","label"]),l(a,{field:i.description,"i18n-label-key":"monster.trait.description","token-category":"trait","onUpdate:modelValue":w=>{i.description=w,e.autoUpdateCr(i.description,i.crAnnotation)}},null,8,["field","onUpdate:modelValue"]),l(p,{field:"traits",index:r},null,8,["index"])]),_:2},1024),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"negative",class:"full-width",label:e.$t("editor.deleteTrait"),onClick:()=>e.monster.deleteTrait(i.id)},null,8,["label","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})]),_:1}),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"positive",class:"full-width",label:e.$t("editor.addTrait"),onClick:e.monster.addTrait},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var zn=Y(In,[["render",Hn]]);const Fn=G({name:"ClassCastingEditor",components:{MonsterTextEditor:de},setup(){const e=H(!1),t=H(!1),n=J(),u=Me(),{rechargeTimeOptions:f}=Ue(),b=et(),s=g(()=>t.value?u.allSpellOptions.filter(I=>I.class.find(A=>{var P;return A.toLowerCase()===((P=n.spellcasting.class)==null?void 0:P.toLowerCase())})):u.allSpellOptions),a=H([]),p=tt(s,a),{ordinalSpellLevels:i}=Vt(),r=i,w=g(()=>n.spellcasting.class==null?"":n.spellcasting.class in b.SrdClass.value?b.SrdClass.value[n.spellcasting.class]:n.spellcasting.class);return{monster:n,rechargeTimeOptions:f,updateSpellcastingClass:I=>{var A;if(I!=null&&I in b.ClassCastingStat){const P=I,M=b.ClassSpellSlots[P];n.spellcasting.class=P,n.spellcasting.stat=(A=b.ClassCastingStat[P])!=null?A:n.spellcasting.stat,n.spellcasting.slots=M!=null?M[n.spellcasting.level-1]:[0,0,0,0,0,0,0,0,0]}else n.spellcasting.class=I},updateSpellcastingSlots:I=>{if(n.spellcasting.class&&n.spellcasting.class in b.ClassCastingStat){const A=n.spellcasting.class,P=b.ClassSpellSlots[A];n.spellcasting.slots=P!=null?P[I-1]:[0,0,0,0,0,0,0,0,0]}},classDisplayValue:w,spellOptions:a,spellFilter:p,showSlots:e,classFilter:t,spellLevels:r,spellOptionsByLevel:u.spellOptionsByLevel,validateNumber:re,...b}}}),jn={class:"row"},Kn={class:"col-12 q-mt-md"},Qn={class:"row"},Wn={class:"col-1 flex flex-center"},Xn={key:0,class:"col-1 text-capitalize flex flex-center"};function Gn(e,t,n,u,f,b){const s=D("monster-text-editor");return m(),V(X,{"expand-separator":"",label:e.$t("editor.spellcasting.class.label"),caption:e.$t("editor.spellcasting.class.caption"),"header-class":"bg-purple-10"},{default:o(()=>[l(z,null,{default:o(()=>[l(L,null,{default:o(()=>[c("div",jn,[l(F,{label:e.$t("monster.spellcasting.class"),"model-value":e.monster.spellcasting.class,"display-value":e.classDisplayValue,options:e.SrdCastingClassOptions,"new-value-mode":"add-unique","use-input":"","emit-value":"",class:"col-2 q-pa-sm","onUpdate:modelValue":e.updateSpellcastingClass},null,8,["label","model-value","display-value","options","onUpdate:modelValue"]),l(C,{"model-value":e.monster.spellcasting.level,label:e.$t("monster.spellcasting.level"),type:"number",min:"1",max:"20",class:"col-2 q-pa-sm","onUpdate:modelValue":t[0]||(t[0]=a=>{e.monster.spellcasting.level=e.validateNumber(a,1),e.updateSpellcastingSlots(e.monster.spellcasting.level)})},null,8,["model-value","label"]),l(C,{modelValue:e.monster.spellcasting.notes,"onUpdate:modelValue":t[2]||(t[2]=a=>e.monster.spellcasting.notes=a),label:e.$t("monster.spellcasting.notes"),class:"col q-pa-sm","bottom-slots":""},{hint:o(()=>[k(d(e.$t("editor.plainTextNote")),1)]),after:o(()=>[l(S,{push:"",icon:e.monster.spellcasting.useCustomClassPreamble?"edit":"edit_off",color:e.monster.spellcasting.useCustomClassPreamble?"warning":"dark",size:"md",onClick:t[1]||(t[1]=a=>e.monster.spellcasting.useCustomClassPreamble=!e.monster.spellcasting.useCustomClassPreamble)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.monster.spellcasting.useCustomClassPreamble?e.$t("editor.spellcasting.slot.useCustomPreamble"):e.$t("editor.spellcasting.slot.useDefaultPreamble")),1)]),_:1})]),_:1},8,["icon","color"])]),_:1},8,["modelValue","label"]),l(ve,null,{default:o(()=>[Q(c("div",Kn,[l(s,{field:e.monster.spellcasting.customClassPreamble,"i18n-label-key":"editor.spellcasting.slot.preamble","token-category":"spell","show-reset":!0,"onUpdate:modelValue":t[3]||(t[3]=a=>e.monster.spellcasting.customClassPreamble=a),onReset:t[4]||(t[4]=a=>e.monster.spellcasting.customClassPreamble=e.$t("presets.classSpellcasting"))},null,8,["field"])],512),[[ee,e.monster.spellcasting.useCustomClassPreamble]])]),_:1}),l(F,{modelValue:e.monster.spellcasting.standard,"onUpdate:modelValue":t[7]||(t[7]=a=>e.monster.spellcasting.standard=a),label:e.$t("editor.spellcasting.slot.all"),options:e.spellOptions,"use-chips":"",multiple:"","use-input":"",clearable:"","emit-value":"","input-debounce":"0",class:"col-12 q-pa-sm",onFilter:e.spellFilter,onClear:t[8]||(t[8]=a=>e.monster.spellcasting.standard=[])},{after:o(()=>[l(S,{class:"q-mr-sm",color:e.classFilter?"positive":"dark",onClick:t[5]||(t[5]=a=>e.classFilter=!e.classFilter)},{default:o(()=>[k(d(e.classFilter?e.$t("editor.spellcasting.slot.classOnlyOn"):e.$t("editor.spellcasting.slot.classOnlyOff")),1)]),_:1},8,["color"]),l(S,{color:"primary",onClick:t[6]||(t[6]=a=>e.showSlots=!e.showSlots)},{default:o(()=>[k(d(e.showSlots?e.$t("editor.spellcasting.slot.hideSlots"):e.$t("editor.spellcasting.slot.showSlots")),1)]),_:1})]),option:o(a=>[l(te,wt(At(a.itemProps)),{default:o(()=>[l(B,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(a.opt.label),1)]),_:2},1024),l(se,{caption:""},{default:o(()=>[k(d(a.opt.classDisplay),1)]),_:2},1024)]),_:2},1024),l(B,{side:"",top:""},{default:o(()=>[l(Be,{color:"purple-8",label:a.opt.level===0?e.$t("editor.spellcasting.slot.cantrip"):e.$t("editor.spellcasting.slot.level",{ordinal:e.spellLevels[a.opt.level]})},null,8,["label"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","label","options","onFilter"])])]),_:1}),l(ve,null,{default:o(()=>[Q(c("div",null,[l($e),l(L,null,{default:o(()=>[c("div",Qn,[(m(!0),y(U,null,E(e.spellLevels,(a,p)=>(m(),y(U,{key:p},[c("div",Wn,d(p===0?e.$t("editor.spellcasting.slot.cantrip"):e.$t("editor.spellcasting.slot.level",{ordinal:a})),1),p===0?(m(),y("div",Xn,d(e.$t("recharge.AT_WILL")),1)):(m(),V(C,{key:1,"model-value":e.monster.spellcasting.slots[p-1],type:"number",class:"col-1 q-pa-sm",min:"0",label:e.$t("editor.spellcasting.slot.slots"),"onUpdate:modelValue":i=>e.monster.spellcasting.slots[p-1]=e.validateNumber(i,0)},null,8,["model-value","label","onUpdate:modelValue"])),l(F,{"model-value":e.monster.knownSpellsOfLevel(p),label:p===0?e.$t("editor.spellcasting.slot.cantrips"):e.$t("editor.spellcasting.slot.knownAtLevel",{ordinal:a}),options:e.spellOptionsByLevel(p,e.classFilter?e.monster.spellcasting.class:void 0),"use-chips":"",multiple:"","emit-value":"","input-debounce":"0",class:"col-10 q-pa-sm","onUpdate:modelValue":i=>e.monster.updateSpellsAtLevel(p,i)},{option:o(i=>[l(te,il({ref_for:!0},i.itemProps),{default:o(()=>[l(B,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(i.opt.label),1)]),_:2},1024),l(se,{caption:""},{default:o(()=>[k(d(i.opt.classDisplay),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["model-value","label","options","onUpdate:modelValue"])],64))),128))])]),_:1})],512),[[ee,e.showSlots]])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var Yn=Y(Fn,[["render",Gn]]);const Jn=G({name:"SearchableSpellSelect",props:{modelValue:{type:Object,required:!0},label:{type:String,required:!0}},emits:["update:model-value","clear"],setup(){const e=Me(),t=g(()=>e.allSpellOptions),n=H([]),u=tt(t,n),{ordinalSpellLevels:f}=Vt();return{spellOptions:n,spellFilter:u,spellLevels:f}}});function Zn(e,t,n,u,f,b){return m(),V(F,{"model-value":e.$props.modelValue,label:e.$props.label,options:e.spellOptions,"use-chips":"",multiple:"","use-input":"",clearable:"","emit-value":"","input-debounce":"0",onFilter:e.spellFilter,"onUpdate:modelValue":t[0]||(t[0]=s=>e.$emit("update:model-value",s)),onClear:t[1]||(t[1]=s=>e.$emit("clear"))},{option:o(s=>[l(te,wt(At(s.itemProps)),{default:o(()=>[l(B,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(s.opt.label),1)]),_:2},1024),l(se,{caption:""},{default:o(()=>[k(d(s.opt.classDisplay),1)]),_:2},1024)]),_:2},1024),l(B,{side:"",top:""},{default:o(()=>[l(Be,{color:"purple-8",label:s.opt.level===0?e.$t("editor.spellcasting.slot.cantrip"):e.$t("editor.spellcasting.slot.level",{ordinal:e.spellLevels[s.opt.level]})},null,8,["label"])]),_:2},1024)]),_:2},1040)]),after:o(()=>[rl(e.$slots,"after")]),_:3},8,["model-value","label","options","onFilter"])}var _n=Y(Jn,[["render",Zn]]);const xn=G({name:"AtWillCastingEditor",components:{MonsterTextEditor:de,SearchableSpellSelect:_n},setup(){const e=H(!1),t=H(!1),n=J(),u=Me(),{rechargeTimeOptions:f}=Ue(),b=et(),s=g(()=>t.value?u.allSpellOptions.filter(i=>i.class.find(r=>{var w;return r.toLowerCase()===((w=n.spellcasting.class)==null?void 0:w.toLowerCase())})):u.allSpellOptions),a=H([]),p=tt(s,a);return{monster:n,rechargeTimeOptions:f,spellOptions:a,spellFilter:p,showSlots:e,classFilter:t,spellOptionsByLevel:u.spellOptionsByLevel,validateNumber:re,...b}}}),es={class:"row"},ts={class:"col-12 q-mt-md"},ls={class:"col-12 q-py-md q-px-sm"};function os(e,t,n,u,f,b){const s=D("monster-text-editor"),a=D("searchable-spell-select");return m(),V(X,{"expand-separator":"",label:e.$t("editor.spellcasting.innate.label"),caption:e.$t("editor.spellcasting.innate.caption"),"header-class":"bg-purple-10"},{default:o(()=>[l(z,null,{default:o(()=>[l(L,null,{default:o(()=>[c("div",es,[l(C,{modelValue:e.monster.spellcasting.atWillNotes,"onUpdate:modelValue":t[1]||(t[1]=p=>e.monster.spellcasting.atWillNotes=p),class:"col-12 q-pa-sm q-mb-sm","bottom-slots":"",label:e.$t("monster.spellcasting.atWillNotes")},{hint:o(()=>[k(d(e.$t("editor.plainTextNote")),1)]),after:o(()=>[l(S,{push:"",icon:e.monster.spellcasting.useCustomInnatePreamble?"edit":"edit_off",color:e.monster.spellcasting.useCustomInnatePreamble?"warning":"dark",size:"md",onClick:t[0]||(t[0]=p=>e.monster.spellcasting.useCustomInnatePreamble=!e.monster.spellcasting.useCustomInnatePreamble)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.monster.spellcasting.useCustomInnatePreamble?e.$t("editor.spellcasting.slot.useCustomPreamble"):e.$t("editor.spellcasting.slot.useDefaultPreamble")),1)]),_:1})]),_:1},8,["icon","color"])]),_:1},8,["modelValue","label"]),l(ve,null,{default:o(()=>[Q(c("div",ts,[l(s,{field:e.monster.spellcasting.customInnatePreamble,"i18n-label-key":"editor.spellcasting.innate.preamble","token-category":"spell","show-reset":!0,"onUpdate:modelValue":t[2]||(t[2]=p=>e.monster.spellcasting.customInnatePreamble=p),onReset:t[3]||(t[3]=p=>e.monster.spellcasting.customInnatePreamble=e.$t("presets.innateSpellcasting"))},null,8,["field"])],512),[[ee,e.monster.spellcasting.useCustomInnatePreamble]])]),_:1}),(m(!0),y(U,null,E(e.monster.spellcasting.atWill,p=>(m(),y(U,{key:p.id},[l(C,{"model-value":p.count,label:e.$t("editor.spellcasting.innate.casts"),type:"number",class:"col-2 q-pa-sm","onUpdate:modelValue":i=>p.count=e.validateNumber(i,0)},null,8,["model-value","label","onUpdate:modelValue"]),l(F,{modelValue:p.rate,"onUpdate:modelValue":i=>p.rate=i,"display-value":e.$t(`recharge.${p.rate}`),options:e.rechargeTimeOptions,"emit-value":"",label:e.$t("editor.spellcasting.innate.recharge"),class:"col-3 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","display-value","options","label"]),l(a,{"model-value":p.spells,label:e.$t("editor.spellcasting.innate.list"),class:"col-7 q-pa-sm",onClear:i=>p.spells=[],"onUpdate:modelValue":i=>p.spells=i},{after:o(()=>[l(S,{round:"",color:"negative",icon:"delete",onClick:i=>e.monster.deleteInnateSpellList(p.id)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.spellcasting.innate.delete")),1)]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["model-value","label","onClear","onUpdate:modelValue"])],64))),128)),c("div",ls,[l(S,{class:"full-width",color:"positive",onClick:e.monster.addInnateSpellList},{default:o(()=>[k(d(e.$t("editor.spellcasting.innate.addNew")),1)]),_:1},8,["onClick"])])])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var as=Y(xn,[["render",os]]);function nt(){const{t:e}=ie();return{statOptions:g(()=>({STR:e("statFull.STR"),DEX:e("statFull.DEX"),CON:e("statFull.CON"),INT:e("statFull.INT"),WIS:e("statFull.WIS"),CHA:e("statFull.CHA")})),statOptionsShort:["STR","CON","DEX","INT","WIS","CHA"]}}const ns=G({name:"SpellcastingEditor",components:{LockToggleButton:Oe,ClassCastingEditor:Yn,AtWillCastingEditor:as},setup(){const e=J(),t=Me(),n=et(),{statOptionsShort:u}=nt(),f=qe(),b=g(()=>e.spellcasting.class==null?"":e.spellcasting.class in n.SrdClass.value?n.SrdClass.value[e.spellcasting.class]:e.spellcasting.class),s=g(()=>e.spellcasting.save.override?e.spellcasting.save.overrideValue:e.defaultSpellSave(e.spellcasting.stat)),a=g(()=>e.spellcasting.attack.override?e.spellcasting.attack.overrideValue:e.defaultSpellAttackModifier(e.spellcasting.stat)),p=g(()=>e.spellcasting.modifier.override?e.spellcasting.modifier.overrideValue:e.defaultSpellModifier(e.spellcasting.stat)),i=()=>{f.dialog({component:pl})};return{monster:e,statOptions:u,spellSaveValue:s,spellAttackValue:a,spellModifierValue:p,classDisplayValue:b,spellOptionsByLevel:g(()=>t.spellOptionsByLevel),addSpell:i,...n}}}),ss={class:"row"},is={class:"q-pa-sm full-width"};function rs(e,t,n,u,f,b){const s=D("lock-toggle-button"),a=D("class-casting-editor"),p=D("at-will-casting-editor");return m(),V(X,{"expand-separator":"",icon:"fa-solid fa-wand-sparkles",label:e.$t("editor.spellcasting.label"),caption:e.$t("editor.spellcasting.caption")},{default:o(()=>[l(z,null,{default:o(()=>[c("div",ss,[l(F,{modelValue:e.monster.spellcasting.stat,"onUpdate:modelValue":t[0]||(t[0]=i=>e.monster.spellcasting.stat=i),options:e.statOptions,label:e.$t("monster.spellcasting.ability"),class:"col-2 q-pa-sm"},null,8,["modelValue","options","label"]),l(C,{"model-value":e.spellSaveValue,label:e.$t("monster.spellcasting.save"),type:"number",disable:!e.monster.spellcasting.save.override,class:"col q-pa-sm","onUpdate:modelValue":t[2]||(t[2]=i=>e.monster.spellcasting.save.overrideValue=parseInt(`${i}`))},{after:o(()=>[l(s,{locked:!e.monster.spellcasting.save.override,"lock-tooltip":e.$t("monster.spellcasting.lockSave"),"unlock-tooltip":e.$t("monster.spellcasting.unlockSave"),onClick:t[1]||(t[1]=i=>e.monster.spellcasting.save.override=!e.monster.spellcasting.save.override)},null,8,["locked","lock-tooltip","unlock-tooltip"])]),_:1},8,["model-value","label","disable"]),l(C,{"model-value":e.spellAttackValue,label:e.$t("monster.spellcasting.attack"),type:"number",disable:!e.monster.spellcasting.attack.override,class:"col q-pa-sm","onUpdate:modelValue":t[4]||(t[4]=i=>e.monster.spellcasting.attack.overrideValue=parseInt(`${i}`))},{after:o(()=>[l(s,{locked:!e.monster.spellcasting.attack.override,"lock-tooltip":e.$t("monster.spellcasting.lockAttack"),"unlock-tooltip":e.$t("monster.spellcasting.unlockAttack"),onClick:t[3]||(t[3]=i=>e.monster.spellcasting.attack.override=!e.monster.spellcasting.attack.override)},null,8,["locked","lock-tooltip","unlock-tooltip"])]),_:1},8,["model-value","label","disable"]),l(C,{"model-value":e.spellModifierValue,label:e.$t("monster.spellcasting.modifier"),type:"number",disable:!e.monster.spellcasting.modifier.override,class:"col q-pa-sm","onUpdate:modelValue":t[6]||(t[6]=i=>e.monster.spellcasting.modifier.overrideValue=parseInt(`${i}`))},{after:o(()=>[l(s,{locked:!e.monster.spellcasting.modifier.override,"lock-tooltip":e.$t("monster.spellcasting.lockModifier"),"unlock-tooltip":e.$t("monster.spellcasting.unlockModifier"),onClick:t[5]||(t[5]=i=>e.monster.spellcasting.modifier.override=!e.monster.spellcasting.modifier.override)},null,8,["locked","lock-tooltip","unlock-tooltip"]),l(S,{icon:"add",round:"",color:"primary",class:"q-ml-md",onClick:e.addSpell},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.spellcasting.custom.create")),1)]),_:1})]),_:1},8,["onClick"])]),_:1},8,["model-value","label","disable"])]),c("div",is,[l(le,{bordered:"",separator:"",class:"rounded-borders"},{default:o(()=>[l(a),l(p)]),_:1})])]),_:1})]),_:1},8,["label","caption"])}var ds=Y(ns,[["render",rs]]);function us(){const{t:e}=ie(),t=g(()=>({MELEE:e("range.MELEE"),RANGED:e("range.RANGED"),BOTH:e("range.BOTH")})),n=g(()=>({WEAPON:e("kind.WEAPON"),SPELL:e("kind.SPELL")})),u=g(()=>Object.entries(t.value).map(([b,s])=>({value:b,label:s}))),f=g(()=>Object.entries(n.value).map(([b,s])=>({value:b,label:s})));return{range:t,kind:n,rangeOptions:u,kindOptions:f}}const cs=G({name:"AttackPanel",components:{LockToggleButton:Oe,MonsterTextEditor:de,SwapButtons:Ae},props:{id:{type:String,required:!0},idx:{type:Number,required:!0}},setup(e){const{t}=ie(),n=J(),u=g(()=>n.attacks.find(T=>T.id===e.id)),{statOptionsShort:f}=nt(),{rangeOptions:b,kindOptions:s}=us(),{attackTypeDefaults:a}=ln(),p=gt,i=kt,r=g(()=>n.attackModifier(e.id)),w=g(()=>n.attackDamageModifier(e.id)),h=g(()=>n.conditionalDamageModifier(e.id)),N=()=>n.addAdditionalDamage(e.id),I=T=>n.deleteAdditionalDamage(e.id,T),A=()=>{n.deleteAttack(e.id)},P=g(()=>{const T=n.expectedAttackDamage(u.value);return t("editor.attack.estimatedAttackDamage",[T])}),M=qe(),W=De(),_=T=>{M.dialog({component:Ie,componentProps:{targetName:T.name}}).onOk(({name:q,icon:ne})=>{W.addCustomAttack(T,q,ne),M.notify({message:t("editor.template.added",[q]),type:"positive"})})};return{attack:u,attackModifier:r,deleteAttack:A,statOptions:f,rangeOptions:b,kindOptions:s,diceOptions:p,diceLookup:i,attackTypeDefaults:a,attackDamageModifier:w,addAdditionalDamage:N,deleteAdditionalDamage:I,conditionalDamageModifier:h,conditionalModifierLocked:g(()=>!u.value.alternateDamage.active||!u.value.alternateDamage.modifier.override),estimatedAttackDamage:P,addTemplate:_,validateNumber:re}}}),ms={class:"row"},ps={class:"row"},fs={class:"col-12 q-mt-md"};function bs(e,t,n,u,f,b){const s=D("swap-buttons"),a=D("lock-toggle-button"),p=D("monster-text-editor");return m(),V(X,{label:e.attack.name,"expand-separator":"",caption:e.estimatedAttackDamage},{header:o(()=>[l(B,null,{default:o(()=>[k(d(e.attack.name),1)]),_:1}),l(B,{side:""},{default:o(()=>[l(s,{field:"attacks",idx:e.idx},null,8,["idx"])]),_:1})]),default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[l(C,{modelValue:e.attack.name,"onUpdate:modelValue":t[0]||(t[0]=i=>e.attack.name=i),label:e.$t("monster.attack.name"),class:"col-7 q-pa-sm"},null,8,["modelValue","label"]),l(C,{"model-value":e.attack.targets,label:e.$t("monster.attack.targets"),class:"col-1 q-pa-sm",type:"number","onUpdate:modelValue":t[1]||(t[1]=i=>e.attack.targets=e.validateNumber(i,1))},null,8,["model-value","label"]),l(C,{"model-value":e.attackModifier,label:e.$t("monster.attack.bonus"),type:"number",class:"col-4 q-pa-sm",disable:!e.attack.modifier.override,"onUpdate:modelValue":t[5]||(t[5]=i=>e.attack.modifier.overrideValue=e.validateNumber(i,0))},{after:o(()=>[l(Se,{push:""},{default:o(()=>[l(S,{push:"",color:e.attack.modifier.proficient?"positive":"dark",icon:"keyboard_arrow_up",onClick:t[2]||(t[2]=i=>e.attack.modifier.proficient=!e.attack.modifier.proficient)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.proficient")),1)]),_:1})]),_:1},8,["color"]),l(S,{push:"",color:e.attack.modifier.override?"warning":"dark",icon:"handyman",onClick:t[3]||(t[3]=i=>e.attack.modifier.override=!e.attack.modifier.override)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.override")),1)]),_:1})]),_:1},8,["color"])]),_:1}),l(S,{round:"",icon:"save",color:"primary",class:"q-ml-sm",onClick:t[4]||(t[4]=i=>e.addTemplate(e.attack))},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.attack.save")),1)]),_:1})]),_:1})]),_:1},8,["model-value","label","disable"]),l(F,{modelValue:e.attack.modifier.stat,"onUpdate:modelValue":t[6]||(t[6]=i=>e.attack.modifier.stat=i),options:e.statOptions,label:e.$t("monster.attack.stat"),class:"col-2 q-pa-sm"},null,8,["modelValue","options","label"]),l(F,{modelValue:e.attack.distance,"onUpdate:modelValue":t[7]||(t[7]=i=>e.attack.distance=i),label:e.$t("monster.attack.range"),"display-value":e.$t(`range.${e.attack.distance}`),options:e.rangeOptions,"emit-value":"",class:"col-4 q-pa-sm"},null,8,["modelValue","label","display-value","options"]),l(F,{modelValue:e.attack.kind,"onUpdate:modelValue":t[8]||(t[8]=i=>e.attack.kind=i),label:e.$t("monster.attack.kind"),"display-value":e.$t(`kind.${e.attack.kind}`),options:e.kindOptions,"emit-value":"",class:"col-2 q-pa-sm"},null,8,["modelValue","label","display-value","options"]),Q(l(C,{"model-value":e.attack.range.reach,label:e.$t("monster.attack.reach"),type:"number",min:"0",step:"5",suffix:"ft",class:"col-1 q-pa-sm","onUpdate:modelValue":t[9]||(t[9]=i=>e.attack.range.reach=e.validateNumber(i,0))},null,8,["model-value","label"]),[[ee,e.attack.distance==="MELEE"||e.attack.distance==="BOTH"]]),Q(l(C,{"model-value":e.attack.range.standard,label:e.$t("monster.attack.close"),type:"number",min:"0",step:"5",suffix:"ft",class:"col-1 q-pa-sm","onUpdate:modelValue":t[10]||(t[10]=i=>e.attack.range.standard=e.validateNumber(i,0))},null,8,["model-value","label"]),[[ee,e.attack.distance==="RANGED"||e.attack.distance==="BOTH"]]),Q(l(C,{"model-value":e.attack.range.long,label:e.$t("monster.attack.long"),type:"number",min:"0",step:"5",suffix:"ft",class:"col-1 q-pa-sm","onUpdate:modelValue":t[11]||(t[11]=i=>e.attack.range.long=e.validateNumber(i,0))},null,8,["model-value","label"]),[[ee,e.attack.distance==="RANGED"||e.attack.distance==="BOTH"]]),l(C,{"model-value":e.attack.save,label:e.$t("monster.attack.effectDc"),type:"number",class:"col-1 q-pa-sm","onUpdate:modelValue":t[12]||(t[12]=i=>e.attack.save=e.validateNumber(i,0))},null,8,["model-value","label"])]),_:1}),l(L,null,{default:o(()=>[l(le,{bordered:"",separator:"",class:"rounded-borders bg-pink-10 full-width"},{default:o(()=>[l(X,{"expand-separator":"","default-opened":"",label:e.$t("editor.attack.primary")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,null,{default:o(()=>[c("div",ms,[l(C,{"model-value":e.attack.damage.count,label:e.$t("monster.attack.count"),type:"number",min:"0",class:"col-2 q-pa-sm","onUpdate:modelValue":t[13]||(t[13]=i=>e.attack.damage.count=e.validateNumber(i,0))},null,8,["model-value","label"]),l(F,{modelValue:e.attack.damage.dice,"onUpdate:modelValue":t[14]||(t[14]=i=>e.attack.damage.dice=i),options:e.diceOptions,"emit-value":"","display-value":e.diceLookup[e.attack.damage.dice],label:e.$t("monster.attack.dieType"),class:"col-2 q-pa-sm"},null,8,["modelValue","options","display-value","label"]),l(F,{modelValue:e.attack.damage.type,"onUpdate:modelValue":t[15]||(t[15]=i=>e.attack.damage.type=i),label:e.$t("monster.attack.damageType"),options:e.attackTypeDefaults,"use-input":"","new-value-mode":"add-unique",class:"col-4 q-pa-sm"},null,8,["modelValue","label","options"]),l(C,{"model-value":e.attackDamageModifier,type:"number",label:e.$t("monster.attack.damageBonus"),disable:!e.attack.damage.modifier.override,class:"col-2 q-pa-sm","onUpdate:modelValue":t[17]||(t[17]=i=>e.attack.damage.modifier.overrideValue=e.validateNumber(i,0))},{after:o(()=>[l(a,{locked:!e.attack.damage.modifier.override,"lock-tooltip":e.$t("editor.attack.lockedToStats"),"unlock-tooltip":e.$t("editor.attack.unlockedFromStats"),onClick:t[16]||(t[16]=i=>e.attack.damage.modifier.override=!e.attack.damage.modifier.override)},null,8,["locked","lock-tooltip","unlock-tooltip"])]),_:1},8,["model-value","label","disable"]),l(F,{modelValue:e.attack.damage.modifier.stat,"onUpdate:modelValue":t[18]||(t[18]=i=>e.attack.damage.modifier.stat=i),label:e.$t("monster.attack.stat"),class:"col-2 q-pa-sm",options:e.statOptions},null,8,["modelValue","label","options"])])]),_:1})]),_:1})]),_:1},8,["label"]),l(X,{"expand-separator":"",label:e.$t("editor.attack.additional"),caption:e.$t("editor.attack.additionalCaption")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,null,{default:o(()=>[(m(!0),y(U,null,E(e.attack.additionalDamage,i=>(m(),y("div",{key:i.id,class:"row"},[l(C,{"model-value":i.count,label:e.$t("monster.attack.count"),type:"number",class:"col-2 q-pa-sm","onUpdate:modelValue":r=>i.count=e.validateNumber(r,0)},null,8,["model-value","label","onUpdate:modelValue"]),l(F,{modelValue:i.dice,"onUpdate:modelValue":r=>i.dice=r,options:e.diceOptions,"emit-value":"","display-value":e.diceLookup[i.dice],label:e.$t("monster.attack.dieType"),class:"col-2 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","options","display-value","label"]),l(F,{modelValue:i.type,"onUpdate:modelValue":r=>i.type=r,label:e.$t("monster.attack.damageType"),options:e.attackTypeDefaults,"use-input":"","new-value-mode":"add-unique",class:"col-4 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","label","options"]),l(C,{modelValue:i.note,"onUpdate:modelValue":r=>i.note=r,label:e.$t("editor.attack.additionalNote"),class:"col-4 q-pa-sm"},{after:o(()=>[l(S,{round:"",color:"negative",icon:"delete",onClick:()=>e.deleteAdditionalDamage(i.id)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.delete")),1)]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"])]))),128))]),_:1}),l(oe,null,{default:o(()=>[l(S,{color:"positive",onClick:e.addAdditionalDamage},{default:o(()=>[k(d(e.$t("editor.attack.addAdditional")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["label","caption"]),l(X,{"expand-separator":"",label:e.$t("editor.attack.conditional"),caption:e.$t("editor.attack.conditionalCaption")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,null,{default:o(()=>[c("div",ps,[l(C,{modelValue:e.attack.alternateDamage.condition,"onUpdate:modelValue":t[20]||(t[20]=i=>e.attack.alternateDamage.condition=i),disable:!e.attack.alternateDamage.active,label:e.$t("editor.attack.condition"),class:"col-12"},{before:o(()=>[l(S,{push:"",color:e.attack.alternateDamage.active?"primary":"dark",onClick:t[19]||(t[19]=i=>e.attack.alternateDamage.active=!e.attack.alternateDamage.active)},{default:o(()=>[k(d(e.attack.alternateDamage.active?e.$t("editor.attack.enableConditional"):e.$t("editor.attack.disableConditional")),1)]),_:1},8,["color"])]),_:1},8,["modelValue","disable","label"]),l(C,{"model-value":e.attack.alternateDamage.count,disable:!e.attack.alternateDamage.active,label:e.$t("monster.attack.count"),type:"number",class:"col-2 q-pa-sm","onUpdate:modelValue":t[21]||(t[21]=i=>e.attack.alternateDamage.count=e.validateNumber(i,0))},null,8,["model-value","disable","label"]),l(F,{modelValue:e.attack.alternateDamage.dice,"onUpdate:modelValue":t[22]||(t[22]=i=>e.attack.alternateDamage.dice=i),disable:!e.attack.alternateDamage.active,options:e.diceOptions,"emit-value":"","display-value":e.diceLookup[e.attack.alternateDamage.dice],label:e.$t("monster.attack.dieType"),class:"col-2 q-pa-sm"},null,8,["modelValue","disable","options","display-value","label"]),l(F,{modelValue:e.attack.alternateDamage.type,"onUpdate:modelValue":t[23]||(t[23]=i=>e.attack.alternateDamage.type=i),disable:!e.attack.alternateDamage.active,label:e.$t("monster.attack.damageType"),options:e.attackTypeDefaults,"use-input":"","new-value-mode":"add-unique",class:"col-4 q-pa-sm"},null,8,["modelValue","disable","label","options"]),l(C,{"model-value":e.conditionalDamageModifier,type:"number",label:e.$t("monster.attack.damageBonus"),disable:e.conditionalModifierLocked,class:"col-2 q-pa-sm","onUpdate:modelValue":t[25]||(t[25]=i=>e.attack.alternateDamage.modifier.overrideValue=e.validateNumber(i,0))},{after:o(()=>[l(a,{locked:!e.attack.alternateDamage.modifier.override,"lock-tooltip":e.$t("editor.attack.lockedToStats"),"unlock-tooltip":e.$t("editor.attack.unlockedFromStats"),onClick:t[24]||(t[24]=i=>e.attack.alternateDamage.modifier.override=!e.attack.alternateDamage.modifier.override)},null,8,["locked","lock-tooltip","unlock-tooltip"])]),_:1},8,["model-value","label","disable"]),l(F,{modelValue:e.attack.alternateDamage.modifier.stat,"onUpdate:modelValue":t[26]||(t[26]=i=>e.attack.alternateDamage.modifier.stat=i),disable:!e.attack.alternateDamage.active,label:e.$t("monster.attack.stat"),class:"col-2 q-pa-sm",options:e.statOptions},null,8,["modelValue","disable","label","options"])])]),_:1})]),_:1})]),_:1},8,["label","caption"])]),_:1})]),_:1}),l(L,{class:"row"},{default:o(()=>[l(C,{modelValue:e.attack.description,"onUpdate:modelValue":t[28]||(t[28]=i=>e.attack.description=i),label:e.$t("editor.attack.description"),class:"col-12"},{after:o(()=>[l(S,{push:"",icon:e.attack.useCustomRenderer?"edit":"edit_off",color:e.attack.useCustomRenderer?"warning":"dark",size:"md",onClick:t[27]||(t[27]=i=>e.attack.useCustomRenderer=!e.attack.useCustomRenderer)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.attack.useCustomRenderer?e.$t("editor.attack.useCustomRenderer"):e.$t("editor.attack.useDefaultRenderer")),1)]),_:1})]),_:1},8,["icon","color"])]),_:1},8,["modelValue","label"]),l(ve,null,{default:o(()=>[Q(c("div",fs,[l(p,{field:e.attack.customRenderer,"i18n-label-key":"editor.attack.customRenderer","token-category":"attack","show-reset":!0,"onUpdate:modelValue":t[29]||(t[29]=i=>e.attack.customRenderer=i),onReset:t[30]||(t[30]=i=>e.attack.customRenderer=e.$t("presets.attack"))},null,8,["field"])],512),[[ee,e.attack.useCustomRenderer]])]),_:1})]),_:1}),l(oe,null,{default:o(()=>[l(S,{class:"full-width",color:"negative",label:e.$t("editor.attack.delete"),onClick:e.deleteAttack},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var vs=Y(cs,[["render",bs]]);const gs=G({name:"AttacksEditor",components:{AttackPanel:vs},setup(){return{monster:J()}}});function ks(e,t,n,u,f,b){const s=D("attack-panel");return m(),V(X,{"expand-separator":"",icon:"mdi-sword",label:e.$t("editor.attack.label")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[l(le,{bordered:"",separator:"",class:"rounded-borders bg-red-10 full-width"},{default:o(()=>[(m(!0),y(U,null,E(e.monster.attacks,(a,p)=>(m(),V(s,{id:a.id,key:a.id,idx:p},null,8,["id","idx"]))),128))]),_:1})]),_:1}),l(oe,null,{default:o(()=>[l(S,{color:"positive",class:"full-width",label:e.$t("editor.attack.add"),onClick:t[0]||(t[0]=a=>e.monster.addNewAttack())},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["label"])}var ys=Y(gs,[["render",ks]]);const $s=G({name:"MultiattackEditor",components:{MonsterTextEditor:de},setup(){const e=J(),{t}=ie(),n=`<b><i>${t("editor.multiattack.label")}.</i></b> {multiattack.all}. {multiattack.postscript}`;return{monster:e,multiattacks:g(()=>e.multiattacks),defaultCustomText:n}}}),hs={class:"text-overline text-uppercase"},Cs={class:"text-caption"},Ss={class:"flex items-center",style:{"flex-wrap":"nowrap",gap:"10px"}},ws={class:"flex justify-start items-center"},As={class:"full-width",style:{"flex-shrink":"1"}},Vs={class:"flex justify-end items-center"},Ts={class:"full-width flex items-center justify-center text-h6"},qs={class:"col-12 q-mt-md"},Us={class:"text-caption full-width"};function Ds(e,t,n,u,f,b){const s=D("monster-text-editor");return m(),V(X,{"expand-separator":"",icon:"mdi-sword-cross",label:e.$t("editor.multiattack.label")},{default:o(()=>[l(z,null,{default:o(()=>[Q(l(L,null,{default:o(()=>[(m(!0),y(U,null,E(e.multiattacks,(a,p)=>(m(),V(z,{key:a.id,bordered:""},{default:o(()=>[l(L,{class:"bg-red-10"},{default:o(()=>[c("div",hs,d(e.$t("editor.multiattack.group",[p+1])),1),c("div",Cs,d(e.$t("editor.multiattack.estimatedDamage",[e.monster.expectedMultiattackDamage(a.id)])),1)]),_:2},1024),l(L,null,{default:o(()=>[c("div",Ss,[c("div",ws,[l(pe,{color:"positive",rounded:"",icon:"add"},{default:o(()=>[l(le,null,{default:o(()=>[e.monster.attacks.length>0?(m(),y(U,{key:0},[l(te,{class:"bg-blue-10"},{default:o(()=>[l(B,{class:"text-overline text-uppercase"},{default:o(()=>[k(d(e.$t("editor.multiattack.attackHeader")),1)]),_:1})]),_:1}),l($e),(m(!0),y(U,null,E(e.monster.attacks,i=>Q((m(),V(te,{key:i.id,clickable:"",onClick:r=>e.monster.addMultiattackAttack(a.id,i.id)},{default:o(()=>[l(B,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(i.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[ye]])),128))],64)):Z("",!0),e.monster.actions.length>0?(m(),y(U,{key:1},[l($e),l(te,{class:"bg-blue-10"},{default:o(()=>[l(B,{class:"text-overline text-uppercase"},{default:o(()=>[k(d(e.$t("editor.multiattack.actionHeader")),1)]),_:1})]),_:1}),l($e),(m(!0),y(U,null,E(e.monster.actions,i=>Q((m(),V(te,{key:i.id,clickable:"",onClick:r=>e.monster.addMultiattackAction(a.id,i.id)},{default:o(()=>[l(B,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(i.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[ye]])),128))],64)):Z("",!0)]),_:2},1024)]),_:2},1024)]),c("div",As,[(m(!0),y(U,null,E(a.attacks,(i,r)=>(m(),V(it,{key:r,color:"primary",removable:"",onRemove:w=>e.monster.removeMultiattackAttack(a.id,i)},{default:o(()=>[k(d(e.monster.attackName(i)),1)]),_:2},1032,["onRemove"]))),128)),(m(!0),y(U,null,E(a.actions,(i,r)=>(m(),V(it,{key:r,color:"primary",removable:"",onRemove:w=>e.monster.removeMultiattackAction(a.id,i)},{default:o(()=>[k(d(e.monster.actionName(i)),1)]),_:2},1032,["onRemove"]))),128))]),c("div",Vs,[l(S,{round:"",color:"negative",icon:"delete",onClick:i=>e.monster.deleteMultiattack(a.id)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.delete")),1)]),_:1})]),_:1},8,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1},512),[[ee,e.multiattacks.length>0]]),Q(l(L,null,{default:o(()=>[l(z,{bordered:""},{default:o(()=>[l(L,null,{default:o(()=>[c("div",Ts,d(e.$t("editor.multiattack.none")),1)]),_:1})]),_:1})]),_:1},512),[[ee,e.multiattacks.length===0]]),l(L,{class:"row"},{default:o(()=>[l(C,{modelValue:e.monster.multiattackOptions.postscript,"onUpdate:modelValue":t[1]||(t[1]=a=>e.monster.multiattackOptions.postscript=a),label:e.$t("editor.multiattack.postscript"),class:"col-12"},{after:o(()=>[l(S,{push:"",icon:e.monster.multiattackOptions.useCustomRenderer?"edit":"edit_off",color:e.monster.multiattackOptions.useCustomRenderer?"warning":"dark",size:"md",onClick:t[0]||(t[0]=()=>{e.monster.multiattackOptions.useCustomRenderer=!e.monster.multiattackOptions.useCustomRenderer,e.monster.multiattackOptions.customMultiattackRenderer===""&&(e.monster.multiattackOptions.customMultiattackRenderer=e.defaultCustomText)})},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.monster.multiattackOptions.useCustomRenderer?e.$t("editor.attack.useCustomRenderer"):e.$t("editor.attack.useDefaultRenderer")),1)]),_:1})]),_:1},8,["icon","color"])]),_:1},8,["modelValue","label"]),l(ve,null,{default:o(()=>[Q(c("div",qs,[l(s,{field:e.monster.multiattackOptions.customMultiattackRenderer,"i18n-label-key":"editor.multiattack.label","show-reset":!0,"onUpdate:modelValue":t[2]||(t[2]=a=>e.monster.multiattackOptions.customMultiattackRenderer=a),onReset:t[3]||(t[3]=a=>e.monster.multiattackOptions.customMultiattackRenderer=e.defaultCustomText)},null,8,["field"]),c("div",Us,d(e.$t("editor.multiattack.help")),1)],512),[[ee,e.monster.multiattackOptions.useCustomRenderer]])]),_:1})]),_:1}),l(oe,null,{default:o(()=>[l(S,{color:"positive",class:"full-width",label:e.$t("editor.multiattack.add"),onClick:e.monster.addMultiattack},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label"])}var Os=Y($s,[["render",Ds]]);const Ls=G({name:"ActionsEditor",components:{MonsterTextEditor:de,CrAnnotationCard:at,SwapButtons:Ae,LockToggleButton:Oe},setup(){const e=J(),{statOptionsShort:t}=nt(),{rechargeTimeOptions:n}=Ue(),{autoUpdateCr:u,printCrSummary:f}=Re(),b=qe(),{t:s}=ie(),a=De(),p=r=>{b.dialog({component:Ie,componentProps:{targetName:r.name}}).onOk(({name:w,icon:h})=>{a.addCustomAction(r,w,h),b.notify({message:s("editor.template.added",[w]),type:"positive"})})},i=r=>r.stat!=="none"?r.save.override?r.save.overrideValue:e.defaultSpellSave(r.stat):0;return{monster:e,actions:g(()=>e.actions),rechargeTimeOptions:n,autoUpdateCr:u,printCrSummary:f,addTemplate:p,statOptions:["none",...t],validateNumber:re,saveThrowValueForAction:i}}}),Ps={class:"text-overline text-uppercase"},Es={class:"text-caption"};function Ns(e,t,n,u,f,b){const s=D("swap-buttons"),a=D("lock-toggle-button"),p=D("monster-text-editor"),i=D("cr-annotation-card");return m(),V(X,{"expand-separator":"",icon:"mdi-movie-open",label:e.$t("editor.action.label")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[l(le,{bordered:"",separator:"",class:"rounded-borders bg-amber-10 full-width"},{default:o(()=>[(m(!0),y(U,null,E(e.actions,(r,w)=>(m(),V(X,{key:r.id,label:r.name,"expand-separator":""},{header:o(()=>[l(B,null,{default:o(()=>[k(d(r.name),1)]),_:2},1024),l(B,{side:""},{default:o(()=>[l(s,{field:"actions",idx:w},null,8,["idx"])]),_:2},1024)]),default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[l(C,{modelValue:r.name,"onUpdate:modelValue":h=>r.name=h,label:e.$t("monster.trait.name"),class:"col-12 q-pa-sm"},{after:o(()=>[l(Se,{push:"",class:"q-mr-sm"},{default:o(()=>[l(S,{push:"",color:r.legendaryOnly?"positive":"dark",icon:"fa-solid fa-dragon",label:r.legendaryOnly?e.$t("editor.action.legendaryOnly"):e.$t("editor.action.regular"),onClick:h=>r.legendaryOnly=!r.legendaryOnly},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.action.legendaryExplanation")),1)]),_:1})]),_:1},8,["color","label","onClick"]),l(S,{push:"",color:r.bonusAction?"positive":"dark",label:r.bonusAction?e.$t("editor.action.bonusAction"):e.$t("editor.action.fullAction"),onClick:h=>r.bonusAction=!r.bonusAction},null,8,["color","label","onClick"])]),_:2},1024),l(S,{round:"",icon:"save",color:"primary",onClick:h=>e.addTemplate(r)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.action.save")),1)]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"]),l(C,{modelValue:r.recharge,"onUpdate:modelValue":h=>r.recharge=h,class:"col-4 q-pa-sm",label:e.$t("monster.action.recharge")},null,8,["modelValue","onUpdate:modelValue","label"]),l(C,{"model-value":r.limitedUse.count,type:"number",min:"0",class:"col-4 q-pa-sm",label:e.$t("monster.trait.limitedUse.count"),"onUpdate:modelValue":h=>r.limitedUse.count=e.validateNumber(h,0)},null,8,["model-value","label","onUpdate:modelValue"]),l(F,{modelValue:r.limitedUse.rate,"onUpdate:modelValue":h=>r.limitedUse.rate=h,"display-value":e.$t(`recharge.${r.limitedUse.rate}`),options:e.rechargeTimeOptions,"emit-value":"",label:e.$t("monster.trait.limitedUse.rate"),class:"col-4 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","display-value","options","label"]),l(F,{modelValue:r.stat,"onUpdate:modelValue":[h=>r.stat=h,h=>{r.stat=h,e.autoUpdateCr(r.description,r.crAnnotation,r)}],options:e.statOptions,label:e.$t("monster.action.savingThrowStat"),class:"col-2 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","options","label"]),l(C,{"model-value":e.saveThrowValueForAction(r),label:e.$t("monster.action.saveDc"),type:"number",disable:!r.save.override,class:"col-2 q-pa-sm","onUpdate:modelValue":h=>{r.save.overrideValue=parseInt(`${h}`),e.autoUpdateCr(r.description,r.crAnnotation,r)}},{after:o(()=>[l(a,{locked:!r.save.override,"lock-tooltip":e.$t("monster.action.lockSave"),"unlock-tooltip":e.$t("monster.action.unlockSave"),onClick:()=>{r.save.override=!r.save.override,e.autoUpdateCr(r.description,r.crAnnotation,r)}},null,8,["locked","lock-tooltip","unlock-tooltip","onClick"])]),_:2},1032,["model-value","label","disable","onUpdate:modelValue"]),l(C,{modelValue:r.range,"onUpdate:modelValue":h=>r.range=h,class:"col-8 q-pa-sm",label:e.$t("monster.action.range")},{after:o(()=>[l(pe,{label:e.$t("editor.action.addEffect"),color:"green",disable:r.stat==="none"},{default:o(()=>[l(le,null,{default:o(()=>[Q((m(),V(te,{clickable:"",onClick:h=>r.effects.push({case:e.$t("editor.action.effectCase.failure"),effect:""})},{default:o(()=>[l(B,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(e.$t("editor.action.effectCase.failure")),1)]),_:1})]),_:1})]),_:1},8,["onClick"])),[[ye]]),Q((m(),V(te,{clickable:"",onClick:h=>r.effects.push({case:e.$t("editor.action.effectCase.failByFive"),effect:""})},{default:o(()=>[l(B,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(e.$t("editor.action.effectCase.failByFive")),1)]),_:1})]),_:1})]),_:1},8,["onClick"])),[[ye]]),Q((m(),V(te,{clickable:"",onClick:h=>r.effects.push({case:e.$t("editor.action.effectCase.success"),effect:e.$t("editor.action.effectTemplate.halfDamage")})},{default:o(()=>[l(B,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(e.$t("editor.action.effectCase.success"))+": "+d(e.$t("editor.action.effectTemplate.halfDamage")),1)]),_:1})]),_:1})]),_:1},8,["onClick"])),[[ye]])]),_:2},1024)]),_:2},1032,["label","disable"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"]),r.stat!=="none"?(m(),V(z,{key:0,bordered:"",class:"row q-ma-sm full-width"},{default:o(()=>[l(L,{class:"bg-orange-10 full-width"},{default:o(()=>[c("div",Ps,d(e.$t("editor.action.saveDescription")),1),c("div",Es,d(e.$t("editor.action.saveHelp")),1)]),_:1}),l(L,{class:"row full-width"},{default:o(()=>[(m(!0),y(U,null,E(r.effects,(h,N)=>(m(),y(U,{key:N},[l(C,{modelValue:h.case,"onUpdate:modelValue":I=>h.case=I,label:e.$t("editor.action.condition"),class:"col-3 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","label"]),l(C,{modelValue:h.effect,"onUpdate:modelValue":[I=>h.effect=I,I=>{h.effect=`${I}`,e.autoUpdateCr(r.description,r.crAnnotation,r)}],label:e.$t("editor.action.effect"),class:"col-9 q-pa-sm"},{after:o(()=>[l(S,{round:"",color:"negative",icon:"delete",class:"q-mx-sm",onClick:()=>{r.effects.splice(w,1),e.autoUpdateCr(r.description,r.crAnnotation,r)}},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"])],64))),128))]),_:2},1024)]),_:2},1024)):Z("",!0),l(p,{field:r.description,"i18n-label-key":"monster.trait.description","token-category":"action","onUpdate:modelValue":h=>{r.description=h,e.autoUpdateCr(r.description,r.crAnnotation,r)}},null,8,["field","onUpdate:modelValue"]),l(i,{field:"actions",index:w},null,8,["index"])]),_:2},1024),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"negative",class:"full-width",label:e.$t("editor.action.delete"),onClick:()=>e.monster.deleteAction(r.id)},null,8,["label","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})]),_:1}),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"positive",class:"full-width",label:e.$t("editor.action.add"),onClick:e.monster.addAction},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label"])}var Ms=Y(Ls,[["render",Ns]]);const Rs=G({name:"LegendaryActionsEditor",components:{MonsterTextEditor:de},setup(){const e=J(),{t}=ie(),n=f=>{e.addLegendaryAction(f)},u=g(()=>e.attacksAndActions(t).filter(s=>e.legendaryActions.actions.find(a=>a.actionId===s.id)==null));return{monster:e,filteredActions:u,addLegendary:n,validateNumber:re}}}),Bs={class:"col-9 q-pa-sm flex items-center"},Is={class:"col-12 q-mt-md"},Hs={class:"col-8 text-h6 flex items-center"},zs={class:"col-4"};function Fs(e,t,n,u,f,b){const s=D("monster-text-editor");return m(),V(X,{"expand-separator":"",icon:"fa-solid fa-dragon",label:e.$t("editor.legendary.label"),caption:e.$t("editor.legendary.caption")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[l(C,{"model-value":e.monster.legendaryActions.count,type:"number",min:"0",label:e.$t("editor.legendary.count"),class:"col-3 q-pa-sm","onUpdate:modelValue":t[1]||(t[1]=a=>e.monster.legendaryActions.count=e.validateNumber(a,0))},{after:o(()=>[l(S,{push:"",icon:e.monster.legendaryActions.useCustomPreamble?"edit":"edit_off",color:e.monster.legendaryActions.useCustomPreamble?"warning":"dark",size:"md",onClick:t[0]||(t[0]=a=>e.monster.legendaryActions.useCustomPreamble=!e.monster.legendaryActions.useCustomPreamble)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.monster.legendaryActions.useCustomPreamble?e.$t("editor.legendary.useCustomPreamble"):e.$t("editor.legendary.useDefaultPreamble")),1)]),_:1})]),_:1},8,["icon","color"])]),_:1},8,["model-value","label"]),c("div",Bs,[l(pe,{color:e.filteredActions.length===0?"dark":"positive",label:e.filteredActions.length===0?e.$t("editor.legendary.none"):e.$t("editor.legendary.add"),disable:e.filteredActions.length===0,class:"full-width"},{default:o(()=>[l(le,null,{default:o(()=>[(m(!0),y(U,null,E(e.filteredActions,a=>Q((m(),V(te,{key:a.id,clickable:"",onClick:p=>e.addLegendary(a.id)},{default:o(()=>[l(B,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(a.name),1)]),_:2},1024)]),_:2},1024),l(B,{side:"",top:""},{default:o(()=>[l(Be,{color:a.typeInternal==="attack"?"red-10":"amber-10",label:a.type},null,8,["color","label"])]),_:2},1024)]),_:2},1032,["onClick"])),[[ye]])),128))]),_:1})]),_:1},8,["color","label","disable"])]),l(ve,null,{default:o(()=>[Q(c("div",Is,[l(s,{field:e.monster.legendaryActions.customPreamble,"i18n-label-key":"editor.legendary.preamble","show-reset":!0,"token-category":"legendary","onUpdate:modelValue":t[2]||(t[2]=a=>e.monster.legendaryActions.customPreamble=a),onReset:t[3]||(t[3]=a=>e.monster.legendaryActions.customPreamble=e.$t("presets.legendaryActions"))},null,8,["field"])],512),[[ee,e.monster.legendaryActions.useCustomPreamble]])]),_:1})]),_:1}),l(L,{class:"row"},{default:o(()=>[(m(!0),y(U,null,E(e.monster.legendaryActions.actions,a=>(m(),y(U,{key:a.actionId},[c("div",Hs,d(e.monster.legendaryActionName(a.actionId)),1),c("div",zs,[l(C,{"model-value":a.cost,type:"number",min:"1",label:e.$t("editor.legendary.cost"),"onUpdate:modelValue":p=>a.cost=e.validateNumber(p,1)},{after:o(()=>[l(S,{push:"",color:"negative",icon:"delete",onClick:()=>e.monster.deleteLegendaryAction(a.actionId)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.delete")),1)]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["model-value","label","onUpdate:modelValue"])])],64))),128))]),_:1})]),_:1})]),_:1},8,["label","caption"])}var js=Y(Rs,[["render",Fs]]);const Ks=G({name:"MythicActionsEditor",components:{MonsterTextEditor:de},setup(){const e=J(),{t}=ie(),n=g(()=>e.attacksAndActions(t).filter(b=>e.mythicActions.actions.find(s=>s.actionId===b.id)==null));return{monster:e,filteredActions:n,validateNumber:re}}}),Qs={class:"col-12 q-pa-sm"},Ws={class:"col-12 q-pa-sm"},Xs={class:"col-12 q-pa-sm flex items-center"},Gs={class:"col-8 text-h6 flex items-center"},Ys={class:"col-4"};function Js(e,t,n,u,f,b){const s=D("monster-text-editor");return m(),V(X,{"expand-separator":"",icon:"fa-solid fa-building-columns",label:e.$t("editor.mythic.label"),caption:e.$t("editor.mythic.caption")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[l(C,{modelValue:e.monster.mythicActions.triggerName,"onUpdate:modelValue":t[0]||(t[0]=a=>e.monster.mythicActions.triggerName=a),label:e.$t("editor.mythic.traitName"),class:"col-6 q-pa-sm"},null,8,["modelValue","label"]),l(C,{modelValue:e.monster.mythicActions.triggerRecharge,"onUpdate:modelValue":t[1]||(t[1]=a=>e.monster.mythicActions.triggerRecharge=a),label:e.$t("editor.mythic.recharge"),class:"col-6 q-pa-sm"},null,8,["modelValue","label"]),c("div",Qs,[l(s,{field:e.monster.mythicActions.triggerDescription,"i18n-label-key":"editor.mythic.description","show-reset":!0,"onUpdate:modelValue":t[2]||(t[2]=a=>e.monster.mythicActions.triggerDescription=a),onReset:t[3]||(t[3]=a=>e.monster.mythicActions.triggerDescription=e.$t("presets.mythicDescription"))},null,8,["field"])]),c("div",Ws,[l(s,{field:e.monster.mythicActions.preamble,"i18n-label-key":"editor.mythic.preamble","show-reset":!0,"onUpdate:modelValue":t[4]||(t[4]=a=>e.monster.mythicActions.preamble=a),onReset:t[5]||(t[5]=a=>e.monster.mythicActions.preamble=e.$t("presets.mythicPreamble"))},null,8,["field"])])]),_:1}),l(L,{class:"row"},{default:o(()=>[c("div",Xs,[l(pe,{color:e.filteredActions.length===0?"dark":"positive",label:e.filteredActions.length===0?e.$t("editor.legendary.none"):e.$t("editor.mythic.add"),disable:e.filteredActions.length===0,class:"full-width"},{default:o(()=>[l(le,null,{default:o(()=>[(m(!0),y(U,null,E(e.filteredActions,a=>Q((m(),V(te,{key:a.id,clickable:"",onClick:p=>e.monster.addMythicAction(a.id)},{default:o(()=>[l(B,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(a.name),1)]),_:2},1024)]),_:2},1024),l(B,{side:"",top:""},{default:o(()=>[l(Be,{color:a.typeInternal==="attack"?"red-10":"amber-10",label:a.type},null,8,["color","label"])]),_:2},1024)]),_:2},1032,["onClick"])),[[ye]])),128))]),_:1})]),_:1},8,["color","label","disable"])]),(m(!0),y(U,null,E(e.monster.mythicActions.actions,a=>(m(),y(U,{key:a.actionId},[c("div",Gs,d(e.monster.legendaryActionName(a.actionId)),1),c("div",Ys,[l(C,{"model-value":a.cost,type:"number",min:"1",label:e.$t("editor.legendary.cost"),"onUpdate:modelValue":p=>a.cost=e.validateNumber(p,1)},{after:o(()=>[l(S,{push:"",color:"negative",icon:"delete",onClick:()=>e.monster.deleteMythicAction(a.actionId)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.delete")),1)]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["model-value","label","onUpdate:modelValue"])])],64))),128))]),_:1})]),_:1})]),_:1},8,["label","caption"])}var Zs=Y(Ks,[["render",Js]]);const _s=G({name:"ReactionsEditor",components:{MonsterTextEditor:de,SwapButtons:Ae},setup(){const e=J(),t=qe(),{t:n}=ie(),{rechargeTimeOptions:u}=Ue(),f=De();return{monster:e,addTemplate:s=>{t.dialog({component:Ie,componentProps:{targetName:s.name}}).onOk(({name:a,icon:p})=>{f.addCustomReaction(s,a,p),t.notify({message:n("editor.template.added",[a]),type:"positive"})})},validateNumber:re,rechargeTimeOptions:u}}});function xs(e,t,n,u,f,b){const s=D("swap-buttons"),a=D("monster-text-editor");return m(),V(X,{"expand-separator":"",icon:"mdi-account-reactivate",label:e.$t("editor.reaction.label")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[l(le,{bordered:"",separator:"",class:"rounded-borders bg-blue-10 full-width"},{default:o(()=>[(m(!0),y(U,null,E(e.monster.reactions,(p,i)=>(m(),V(X,{key:p.id,label:p.name,"expand-separator":""},{header:o(()=>[l(B,null,{default:o(()=>[k(d(p.name),1)]),_:2},1024),l(B,{side:""},{default:o(()=>[l(s,{field:"reactions",idx:i},null,8,["idx"])]),_:2},1024)]),default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[l(C,{modelValue:p.name,"onUpdate:modelValue":r=>p.name=r,label:e.$t("monster.trait.name"),class:"col-12 q-pa-sm"},{after:o(()=>[l(S,{round:"",icon:"save",color:"primary",onClick:r=>e.addTemplate(p)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.reaction.save")),1)]),_:1})]),_:1},8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"]),l(C,{modelValue:p.limitedUse.count,"onUpdate:modelValue":[r=>p.limitedUse.count=r,r=>p.limitedUse.count=e.validateNumber(r,0)],type:"number",min:"0",class:"col-2 q-pa-sm",label:e.$t("monster.trait.limitedUse.count")},null,8,["modelValue","onUpdate:modelValue","label"]),l(F,{modelValue:p.limitedUse.rate,"onUpdate:modelValue":r=>p.limitedUse.rate=r,"display-value":e.$t(`recharge.${p.limitedUse.rate}`),options:e.rechargeTimeOptions,"emit-value":"",label:e.$t("monster.trait.limitedUse.rate"),class:"col-2 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","display-value","options","label"]),l(C,{modelValue:p.trigger,"onUpdate:modelValue":r=>p.trigger=r,class:"col-8 q-pa-sm",label:e.$t("monster.reaction.trigger")},null,8,["modelValue","onUpdate:modelValue","label"]),l(a,{field:p.description,"i18n-label-key":"monster.reaction.response","onUpdate:modelValue":r=>{p.description=r}},null,8,["field","onUpdate:modelValue"])]),_:2},1024),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"negative",class:"full-width",label:e.$t("editor.reaction.delete"),onClick:()=>e.monster.deleteReaction(p.id)},null,8,["label","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})]),_:1}),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"positive",class:"full-width",label:e.$t("editor.reaction.add"),onClick:e.monster.addReaction},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label"])}var ei=Y(_s,[["render",xs]]);const ti=G({name:"LairActionsEditor",components:{MonsterTextEditor:de,CrAnnotationCard:at,SwapButtons:Ae},setup(){const e=J(),{autoUpdateCr:t}=Re();return{monster:e,autoUpdateCr:t}}}),li={class:"col flex justify-start items-center"},oi={class:"col-2 flex justify-end items-center"},ai={class:"col-12 q-pa-sm"},ni={class:"col-12"};function si(e,t,n,u,f,b){const s=D("monster-text-editor"),a=D("swap-buttons"),p=D("cr-annotation-card");return m(),V(X,{"expand-separator":"",icon:"home",label:e.$t("editor.lair.label"),caption:e.$t("editor.lair.caption")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[c("div",li,d(e.$t("editor.lair.help")),1),c("div",oi,[l(S,{push:"",icon:e.monster.useCustomLairActionPreamble?"edit":"edit_off",color:e.monster.useCustomLairActionPreamble?"warning":"dark",size:"md",onClick:t[0]||(t[0]=i=>e.monster.useCustomLairActionPreamble=!e.monster.useCustomLairActionPreamble)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.monster.useCustomLairActionPreamble?e.$t("editor.lair.useCustom"):e.$t("editor.lair.useDefault")),1)]),_:1})]),_:1},8,["icon","color"])]),l(ve,null,{default:o(()=>[Q(c("div",ai,[l(s,{field:e.monster.lairActionPreamble,"i18n-label-key":"editor.lair.preamble","show-reset":!0,"onUpdate:modelValue":t[1]||(t[1]=i=>e.monster.lairActionPreamble=i),onReset:t[2]||(t[2]=i=>e.monster.lairActionPreamble=e.$t("presets.lair"))},null,8,["field"])],512),[[ee,e.monster.useCustomLairActionPreamble]])]),_:1})]),_:1}),l(L,{class:"row"},{default:o(()=>[c("div",ni,[l(le,{bordered:"",separator:"",class:"rounded-borders bg-blue-10 full-width"},{default:o(()=>[(m(!0),y(U,null,E(e.monster.lairActions,(i,r)=>(m(),V(X,{key:i.id,label:e.$t("editor.lair.actionItem",[r+1]),"expand-separator":""},{header:o(()=>[l(B,null,{default:o(()=>[k(d(e.$t("editor.lair.actionItem",[r+1])),1)]),_:2},1024),l(B,{side:""},{default:o(()=>[l(a,{field:"lairActions",idx:r},null,8,["idx"])]),_:2},1024)]),default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[l(s,{field:i.description,"i18n-label-key":"monster.trait.description","onUpdate:modelValue":w=>{i.description=w,e.autoUpdateCr(i.description,i.crAnnotation)}},null,8,["field","onUpdate:modelValue"]),l(p,{field:"lairActions",index:r},null,8,["index"])]),_:2},1024),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"negative",class:"full-width",label:e.$t("editor.lair.delete"),onClick:()=>e.monster.deleteLairAction(i.id)},null,8,["label","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})])]),_:1}),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"positive",class:"full-width",label:e.$t("editor.lair.add"),onClick:e.monster.addLairAction},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var ii=Y(ti,[["render",si]]);const ri=G({name:"RegionalEffectsEditor",components:{MonsterTextEditor:de,SwapButtons:Ae},setup(){return{monster:J()}}}),di={class:"col-12 flex justify-start items-center"},ui={class:"col-12 q-pa-sm"},ci={class:"col-12"};function mi(e,t,n,u,f,b){const s=D("monster-text-editor"),a=D("swap-buttons");return m(),V(X,{"expand-separator":"",icon:"public",label:e.$t("editor.regional.label")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[c("div",di,d(e.$t("editor.regional.help")),1),c("div",ui,[l(s,{field:e.monster.regionalEffectDescription,"i18n-label-key":"editor.regional.preamble","show-reset":!0,"onUpdate:modelValue":t[0]||(t[0]=p=>e.monster.regionalEffectDescription=p),onReset:t[1]||(t[1]=p=>e.monster.regionalEffectDescription=e.$t("presets.regional"))},null,8,["field"])])]),_:1}),l(L,{class:"row"},{default:o(()=>[c("div",ci,[l(le,{bordered:"",separator:"",class:"rounded-borders bg-blue-10 full-width"},{default:o(()=>[(m(!0),y(U,null,E(e.monster.regionalEffects,(p,i)=>(m(),V(X,{key:p.id,label:e.$t("editor.regional.effectItem",[i+1]),"expand-separator":""},{header:o(()=>[l(B,null,{default:o(()=>[k(d(e.$t("editor.regional.effectItem",[i+1])),1)]),_:2},1024),l(B,{side:""},{default:o(()=>[l(a,{field:"regionalEffects",idx:i},null,8,["idx"])]),_:2},1024)]),default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[l(s,{field:p.description,"i18n-label-key":"monster.trait.description","onUpdate:modelValue":r=>{p.description=r}},null,8,["field","onUpdate:modelValue"])]),_:2},1024),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"negative",class:"full-width",label:e.$t("editor.regional.delete"),onClick:()=>e.monster.deleteRegionalEffect(p.id)},null,8,["label","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})])]),_:1}),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"positive",class:"full-width",label:e.$t("editor.regional.add"),onClick:e.monster.addRegionalEffect},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label"])}var pi=Y(ri,[["render",mi]]);const fi={class:"col-12 flex justify-start items-center"},bi={class:"col-12 q-pa-sm"},vi=G({__name:"InventoryEditor",setup(e){const t=J();return(n,u)=>(m(),V(X,{"expand-separator":"",icon:"luggage",label:n.$t("editor.inventory.label")},{default:o(()=>[l(z,null,{default:o(()=>[l(L,{class:"row"},{default:o(()=>[c("div",fi,d(n.$t("editor.inventory.help")),1),c("div",bi,[l(de,{field:Ge(t).inventory,"i18n-label-key":"editor.inventory.label","show-reset":!0,"onUpdate:modelValue":u[0]||(u[0]=f=>Ge(t).inventory=f),onReset:u[1]||(u[1]=f=>Ge(t).inventory="")},null,8,["field"])])]),_:1})]),_:1})]),_:1},8,["label"]))}}),gi=G({name:"MonsterBuilder",components:{BasicsEditor:hl,WebRenderer:Ra,SavesEditor:Ha,SpeedsEditor:Qa,SkillsEditor:Ja,SensesEditor:xa,ResistancesEditor:nn,TraitsEditor:zn,SpellcastingEditor:ds,AttacksEditor:ys,MultiattackEditor:Os,ActionsEditor:Ms,LegendaryActionsEditor:js,MythicActionsEditor:Zs,ReactionsEditor:ei,LairActionsEditor:ii,RegionalEffectsEditor:pi,InventoryEditor:vi},setup(){const e=J(),t=yt(),n=H(t.statBlockColumns===1?500:800);return fe(()=>t.statBlockColumns,(u,f)=>{u!==f&&(u===1?n.value=500:n.value=800)}),{splitterModel:n,monster:e}}}),ki={id:"editor",class:"q-pa-md",style:{width:"100%"}},yi={class:"q-pa-md"};function $i(e,t,n,u,f,b){const s=D("basics-editor"),a=D("inventory-editor"),p=D("saves-editor"),i=D("speeds-editor"),r=D("skills-editor"),w=D("senses-editor"),h=D("resistances-editor"),N=D("traits-editor"),I=D("spellcasting-editor"),A=D("attacks-editor"),P=D("actions-editor"),M=D("multiattack-editor"),W=D("reactions-editor"),_=D("legendary-actions-editor"),T=D("mythic-actions-editor"),q=D("lair-actions-editor"),ne=D("regional-effects-editor"),ue=D("web-renderer");return m(),V(ml,{class:"row items-start"},{default:o(()=>[l(fl,{id:"splitter",modelValue:e.splitterModel,"onUpdate:modelValue":t[0]||(t[0]=ge=>e.splitterModel=ge),reverse:"",unit:"px",style:{height:"calc(100vh - 177px)",width:"100%"}},{before:o(()=>[c("div",ki,[l(le,{bordered:"",separator:"",class:"rounded-borders"},{default:o(()=>[l(s),l(a),l(p),l(i),l(r),l(w),l(h),l(N),l(I),l(A),l(P),l(M),l(W),l(_),l(T),l(q),l(ne)]),_:1})])]),after:o(()=>[c("div",yi,[l(ue,{id:"renderer"})])]),_:1},8,["modelValue"])]),_:1})}var Di=Y(gi,[["render",$i]]);export{Di as default};
