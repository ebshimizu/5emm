import{i as Lr,e as Cn,r as Be,a as Ie,o as or,d as ir,t as ar,w as ut,R as Dr,h as Ye,s as an,f as Rr,g as Or,Q as ln,j as sr,k as $n,l as jr,u as Br,m as cn,n as Tn,p as Dn,q as on,v as Ur,x as Nr,y as qr,z as Sn,A as Hr,B as tn,C as Fr,D as zr,E as _n,F as xn,G as Qn,H as Mn,T as Vr,I as Wr,K as Yr,J as Qr,L as Gr,M as Jr,_ as Vt,N as Kr,O as Xr,P as Wt,S as kt,U as yt,V as Oe,W as bt,X as Se,Y as pe,Z,$ as lt,a0 as te,a1 as vt,a2 as Ee,a3 as Mt,a4 as wt,a5 as Tt,a6 as Rt,a7 as xt,a8 as We,a9 as lr,aa as mt,ab as fn,ac as dn,ad as _t,ae as ur,af as kn,ag as Pt,ah as Rn,ai as un,aj as En,ak as Zr,al as eo,am as cr,an as to,ao as Yt,ap as fr,aq as no,ar as ro,as as oo,at as Gn,au as io,av as ao,aw as nn,ax as so,ay as lo,az as Pn,aA as uo,aB as co,aC as fo,aD as sn,aE as dr,aF as po,aG as pr,aH as hr,aI as mr,aJ as ho,aK as mo,aL as Jn}from"./index.983957c9.js";import{Q as go,a as vo,b as bo,c as yo,d as wo,e as _o,f as Eo}from"./QLayout.654a5c47.js";import{Q as Kn}from"./QMarkupTable.6228698c.js";import{g as Xn,s as Zn,C as ht}from"./TouchPan.7da0a7ff.js";import{r as $o,c as So,Q as rn,a as Ot,b as zt,d as Je,e as je,f as Ze,g as gr}from"./use-dialog-plugin-component.b489df9b.js";import{Q as vr}from"./QTooltip.a0c8303d.js";import{u as ko,A as Ao}from"./useCr.3f9fd181.js";import{A as Co,G as To}from"./AppDrawer.7a6ba39a.js";import{s as xo,d as jt}from"./download.223253d2.js";import{Q as Mo,u as Po,a as Io,t as Lo}from"./RECHARGE_TIME.93febac6.js";import{u as br,D as Do,Q as Ro}from"./QBadge.83f550af.js";import"./NewSpellDialog.1a8d5e74.js";import"./index.f31b2840.js";let Oo=0;const jo=["click","keydown"],Bo={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${Oo++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function Uo(t,U,M,v){const k=Lr(ar,Cn);if(k===Cn)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Cn;const{proxy:m}=$n(),l=Be(null),p=Be(null),E=Be(null),a=Ie(()=>t.disable===!0||t.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},t.ripple===!0?{}:t.ripple)),n=Ie(()=>k.currentModel.value===t.name),i=Ie(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(n.value===!0?" q-tab--active"+(k.tabProps.value.activeClass?" "+k.tabProps.value.activeClass:"")+(k.tabProps.value.activeColor?` text-${k.tabProps.value.activeColor}`:"")+(k.tabProps.value.activeBgColor?` bg-${k.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(t.icon&&t.label&&k.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(t.noCaps===!0||k.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(t.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(v!==void 0?v.linkClass.value:"")),f=Ie(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(k.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(t.contentClass!==void 0?` ${t.contentClass}`:"")),d=Ie(()=>t.disable===!0||k.hasFocus.value===!0||n.value===!1&&k.hasActiveTab.value===!0?-1:t.tabindex||0);function A(w,h){if(h!==!0&&l.value!==null&&l.value.focus(),t.disable===!0){v!==void 0&&v.hasRouterLink.value===!0&&an(w);return}if(v===void 0){k.updateModel({name:t.name}),M("click",w);return}if(v.hasRouterLink.value===!0){const u=(T={})=>{let R;const P=T.to===void 0||jr(T.to,t.to)===!0?k.avoidRouteWatcher=Br():null;return v.navigateToRouterLink(w,{...T,returnRouterError:!0}).catch(Y=>{R=Y}).then(Y=>{if(P===k.avoidRouteWatcher&&(k.avoidRouteWatcher=!1,R===void 0&&(Y===void 0||Y.message!==void 0&&Y.message.startsWith("Avoided redundant navigation")===!0)&&k.updateModel({name:t.name})),T.returnRouterError===!0)return R!==void 0?Promise.reject(R):Y})};M("click",w,u),w.defaultPrevented!==!0&&u();return}M("click",w)}function y(w){Rr(w,[13,32])?A(w,!0):Or(w)!==!0&&w.keyCode>=35&&w.keyCode<=40&&w.altKey!==!0&&w.metaKey!==!0&&k.onKbdNavigate(w.keyCode,m.$el)===!0&&an(w),M("keydown",w)}function g(){const w=k.tabProps.value.narrowIndicator,h=[],u=Ye("div",{ref:E,class:["q-tab__indicator",k.tabProps.value.indicatorClass]});t.icon!==void 0&&h.push(Ye(ln,{class:"q-tab__icon",name:t.icon})),t.label!==void 0&&h.push(Ye("div",{class:"q-tab__label"},t.label)),t.alert!==!1&&h.push(t.alertIcon!==void 0?Ye(ln,{class:"q-tab__alert-icon",color:t.alert!==!0?t.alert:void 0,name:t.alertIcon}):Ye("div",{class:"q-tab__alert"+(t.alert!==!0?` text-${t.alert}`:"")})),w===!0&&h.push(u);const T=[Ye("div",{class:"q-focus-helper",tabindex:-1,ref:l}),Ye("div",{class:f.value},sr(U.default,h))];return w===!1&&T.push(u),T}const L={name:Ie(()=>t.name),rootRef:p,tabIndicatorRef:E,routeData:v};or(()=>{k.unregisterTab(L)}),ir(()=>{k.registerTab(L)});function C(w,h){const u={ref:p,class:i.value,tabindex:d.value,role:"tab","aria-selected":n.value===!0?"true":"false","aria-disabled":t.disable===!0?"true":void 0,onClick:A,onKeydown:y,...h};return ut(Ye(w,u,g()),[[Dr,a.value]])}return{renderTab:C,$tabs:k}}var No=cn({name:"QTab",props:Bo,emits:jo,setup(t,{slots:U,emit:M}){const{renderTab:v}=Uo(t,U,M);return()=>v("div")}});function qo(t,U,M){const v=M===!0?["left","right"]:["top","bottom"];return`absolute-${U===!0?v[0]:v[1]}${t?` text-${t}`:""}`}const Ho=["left","center","right","justify"];var Fo=cn({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:t=>Ho.includes(t)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(t,{slots:U,emit:M}){const{proxy:v}=$n(),{$q:k}=v,{registerTick:m}=Tn(),{registerTick:l}=Tn(),{registerTick:p}=Tn(),{registerTimeout:E,removeTimeout:a}=Dn(),{registerTimeout:n,removeTimeout:i}=Dn(),f=Be(null),d=Be(null),A=Be(t.modelValue),y=Be(!1),g=Be(!0),L=Be(!1),C=Be(!1),w=[],h=Be(0),u=Be(!1);let T=null,R=null,P;const Y=Ie(()=>({activeClass:t.activeClass,activeColor:t.activeColor,activeBgColor:t.activeBgColor,indicatorClass:qo(t.indicatorColor,t.switchIndicator,t.vertical),narrowIndicator:t.narrowIndicator,inlineLabel:t.inlineLabel,noCaps:t.noCaps})),O=Ie(()=>{const ue=h.value,ye=A.value;for(let _e=0;_e<ue;_e++)if(w[_e].name.value===ye)return!0;return!1}),$=Ie(()=>`q-tabs__content--align-${y.value===!0?"left":C.value===!0?"justify":t.align}`),D=Ie(()=>`q-tabs row no-wrap items-center q-tabs--${y.value===!0?"":"not-"}scrollable q-tabs--${t.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${t.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${t.mobileArrows===!0?"":"out"}-arrows`+(t.dense===!0?" q-tabs--dense":"")+(t.shrink===!0?" col-shrink":"")+(t.stretch===!0?" self-stretch":"")),c=Ie(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+$.value+(t.contentClass!==void 0?` ${t.contentClass}`:"")),q=Ie(()=>t.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),B=Ie(()=>t.vertical!==!0&&k.lang.rtl===!0),X=Ie(()=>$o===!1&&B.value===!0);on(B,x),on(()=>t.modelValue,ue=>{j({name:ue,setCurrent:!0,skipEmit:!0})}),on(()=>t.outsideArrows,J);function j({name:ue,setCurrent:ye,skipEmit:_e}){A.value!==ue&&(_e!==!0&&t["onUpdate:modelValue"]!==void 0&&M("update:modelValue",ue),(ye===!0||t["onUpdate:modelValue"]===void 0)&&(G(A.value,ue),A.value=ue))}function J(){m(()=>{N({width:f.value.offsetWidth,height:f.value.offsetHeight})})}function N(ue){if(q.value===void 0||d.value===null)return;const ye=ue[q.value.container],_e=Math.min(d.value[q.value.scroll],Array.prototype.reduce.call(d.value.children,(Fe,Le)=>Fe+(Le[q.value.content]||0),0)),xe=ye>0&&_e>ye;y.value=xe,xe===!0&&l(x),C.value=ye<parseInt(t.breakpoint,10)}function G(ue,ye){const _e=ue!=null&&ue!==""?w.find(Fe=>Fe.name.value===ue):null,xe=ye!=null&&ye!==""?w.find(Fe=>Fe.name.value===ye):null;if(et===!0)et=!1;else if(_e&&xe){const Fe=_e.tabIndicatorRef.value,Le=xe.tabIndicatorRef.value;T!==null&&(clearTimeout(T),T=null),Fe.style.transition="none",Fe.style.transform="none",Le.style.transition="none",Le.style.transform="none";const Me=Fe.getBoundingClientRect(),Ke=Le.getBoundingClientRect();Le.style.transform=t.vertical===!0?`translate3d(0,${Me.top-Ke.top}px,0) scale3d(1,${Ke.height?Me.height/Ke.height:1},1)`:`translate3d(${Me.left-Ke.left}px,0,0) scale3d(${Ke.width?Me.width/Ke.width:1},1,1)`,p(()=>{T=setTimeout(()=>{T=null,Le.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",Le.style.transform="none"},70)})}xe&&y.value===!0&&_(xe.rootRef.value)}function _(ue){const{left:ye,width:_e,top:xe,height:Fe}=d.value.getBoundingClientRect(),Le=ue.getBoundingClientRect();let Me=t.vertical===!0?Le.top-xe:Le.left-ye;if(Me<0){d.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(Me),x();return}Me+=t.vertical===!0?Le.height-Fe:Le.width-_e,Me>0&&(d.value[t.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(Me),x())}function x(){const ue=d.value;if(ue===null)return;const ye=ue.getBoundingClientRect(),_e=t.vertical===!0?ue.scrollTop:Math.abs(ue.scrollLeft);B.value===!0?(g.value=Math.ceil(_e+ye.width)<ue.scrollWidth-1,L.value=_e>0):(g.value=_e>0,L.value=t.vertical===!0?Math.ceil(_e+ye.height)<ue.scrollHeight:Math.ceil(_e+ye.width)<ue.scrollWidth)}function F(ue){R!==null&&clearInterval(R),R=setInterval(()=>{fe(ue)===!0&&me()},5)}function W(){F(X.value===!0?Number.MAX_SAFE_INTEGER:0)}function ie(){F(X.value===!0?0:Number.MAX_SAFE_INTEGER)}function me(){R!==null&&(clearInterval(R),R=null)}function ce(ue,ye){const _e=Array.prototype.filter.call(d.value.children,Ke=>Ke===ye||Ke.matches&&Ke.matches(".q-tab.q-focusable")===!0),xe=_e.length;if(xe===0)return;if(ue===36)return _(_e[0]),_e[0].focus(),!0;if(ue===35)return _(_e[xe-1]),_e[xe-1].focus(),!0;const Fe=ue===(t.vertical===!0?38:37),Le=ue===(t.vertical===!0?40:39),Me=Fe===!0?-1:Le===!0?1:void 0;if(Me!==void 0){const Ke=B.value===!0?-1:1,at=_e.indexOf(ye)+Me*Ke;return at>=0&&at<xe&&(_(_e[at]),_e[at].focus({preventScroll:!0})),!0}}const ve=Ie(()=>X.value===!0?{get:ue=>Math.abs(ue.scrollLeft),set:(ue,ye)=>{ue.scrollLeft=-ye}}:t.vertical===!0?{get:ue=>ue.scrollTop,set:(ue,ye)=>{ue.scrollTop=ye}}:{get:ue=>ue.scrollLeft,set:(ue,ye)=>{ue.scrollLeft=ye}});function fe(ue){const ye=d.value,{get:_e,set:xe}=ve.value;let Fe=!1,Le=_e(ye);const Me=ue<Le?-1:1;return Le+=Me*5,Le<0?(Fe=!0,Le=0):(Me===-1&&Le<=ue||Me===1&&Le>=ue)&&(Fe=!0,Le=ue),xe(ye,Le),x(),Fe}function r(ue,ye){for(const _e in ue)if(ue[_e]!==ye[_e])return!1;return!0}function s(){let ue=null,ye={matchedLen:0,queryDiff:9999,hrefLen:0};const _e=w.filter(Me=>Me.routeData!==void 0&&Me.routeData.hasRouterLink.value===!0),{hash:xe,query:Fe}=v.$route,Le=Object.keys(Fe).length;for(const Me of _e){const Ke=Me.routeData.exact.value===!0;if(Me.routeData[Ke===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:at,query:Bt,matched:Qt,href:pn}=Me.routeData.resolvedLink.value,ct=Object.keys(Bt).length;if(Ke===!0){if(at!==xe||ct!==Le||r(Fe,Bt)===!1)continue;ue=Me.name.value;break}if(at!==""&&at!==xe||ct!==0&&r(Bt,Fe)===!1)continue;const ft={matchedLen:Qt.length,queryDiff:Le-ct,hrefLen:pn.length-at.length};if(ft.matchedLen>ye.matchedLen){ue=Me.name.value,ye=ft;continue}else if(ft.matchedLen!==ye.matchedLen)continue;if(ft.queryDiff<ye.queryDiff)ue=Me.name.value,ye=ft;else if(ft.queryDiff!==ye.queryDiff)continue;ft.hrefLen>ye.hrefLen&&(ue=Me.name.value,ye=ft)}if(ue===null&&w.some(Me=>Me.routeData===void 0&&Me.name.value===A.value)===!0){et=!1;return}j({name:ue,setCurrent:!0})}function b(ue){if(a(),u.value!==!0&&f.value!==null&&ue.target&&typeof ue.target.closest=="function"){const ye=ue.target.closest(".q-tab");ye&&f.value.contains(ye)===!0&&(u.value=!0,y.value===!0&&_(ye))}}function H(){E(()=>{u.value=!1},30)}function V(){Ce.avoidRouteWatcher===!1?n(s):i()}function K(){if(P===void 0){const ue=on(()=>v.$route.fullPath,V);P=()=>{ue(),P=void 0}}}function ae(ue){w.push(ue),h.value++,J(),ue.routeData===void 0||v.$route===void 0?n(()=>{if(y.value===!0){const ye=A.value,_e=ye!=null&&ye!==""?w.find(xe=>xe.name.value===ye):null;_e&&_(_e.rootRef.value)}}):(K(),ue.routeData.hasRouterLink.value===!0&&V())}function be(ue){w.splice(w.indexOf(ue),1),h.value--,J(),P!==void 0&&ue.routeData!==void 0&&(w.every(ye=>ye.routeData===void 0)===!0&&P(),V())}const Ce={currentModel:A,tabProps:Y,hasFocus:u,hasActiveTab:O,registerTab:ae,unregisterTab:be,verifyRouteModel:V,updateModel:j,onKbdNavigate:ce,avoidRouteWatcher:!1};Ur(ar,Ce);function He(){T!==null&&clearTimeout(T),me(),P!==void 0&&P()}let ke,et;return or(He),Nr(()=>{ke=P!==void 0,He()}),qr(()=>{ke===!0&&(K(),et=!0,V()),J()}),()=>Ye("div",{ref:f,class:D.value,role:"tablist",onFocusin:b,onFocusout:H},[Ye(go,{onResize:N}),Ye("div",{ref:d,class:c.value,onScroll:x},Sn(U.default)),Ye(ln,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(g.value===!0?"":" q-tabs__arrow--faded"),name:t.leftIcon||k.iconSet.tabs[t.vertical===!0?"up":"left"],onMousedownPassive:W,onTouchstartPassive:W,onMouseupPassive:me,onMouseleavePassive:me,onTouchendPassive:me}),Ye(ln,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(L.value===!0?"":" q-tabs__arrow--faded"),name:t.rightIcon||k.iconSet.tabs[t.vertical===!0?"down":"right"],onMousedownPassive:ie,onTouchstartPassive:ie,onMouseupPassive:me,onMouseleavePassive:me,onTouchendPassive:me})])}});function zo(t){const U=[.06,6,50];return typeof t=="string"&&t.length&&t.split(":").forEach((M,v)=>{const k=parseFloat(M);k&&(U[v]=k)}),U}var Vo=Hr({name:"touch-swipe",beforeMount(t,{value:U,arg:M,modifiers:v}){if(v.mouse!==!0&&tn.has.touch!==!0)return;const k=v.mouseCapture===!0?"Capture":"",m={handler:U,sensitivity:zo(M),direction:Xn(v),noop:Fr,mouseStart(l){Zn(l,m)&&zr(l)&&(_n(m,"temp",[[document,"mousemove","move",`notPassive${k}`],[document,"mouseup","end","notPassiveCapture"]]),m.start(l,!0))},touchStart(l){if(Zn(l,m)){const p=l.target;_n(m,"temp",[[p,"touchmove","move","notPassiveCapture"],[p,"touchcancel","end","notPassiveCapture"],[p,"touchend","end","notPassiveCapture"]]),m.start(l)}},start(l,p){tn.is.firefox===!0&&xn(t,!0);const E=Qn(l);m.event={x:E.left,y:E.top,time:Date.now(),mouse:p===!0,dir:!1}},move(l){if(m.event===void 0)return;if(m.event.dir!==!1){an(l);return}const p=Date.now()-m.event.time;if(p===0)return;const E=Qn(l),a=E.left-m.event.x,n=Math.abs(a),i=E.top-m.event.y,f=Math.abs(i);if(m.event.mouse!==!0){if(n<m.sensitivity[1]&&f<m.sensitivity[1]){m.end(l);return}}else if(window.getSelection().toString()!==""){m.end(l);return}else if(n<m.sensitivity[2]&&f<m.sensitivity[2])return;const d=n/p,A=f/p;m.direction.vertical===!0&&n<f&&n<100&&A>m.sensitivity[0]&&(m.event.dir=i<0?"up":"down"),m.direction.horizontal===!0&&n>f&&f<100&&d>m.sensitivity[0]&&(m.event.dir=a<0?"left":"right"),m.direction.up===!0&&n<f&&i<0&&n<100&&A>m.sensitivity[0]&&(m.event.dir="up"),m.direction.down===!0&&n<f&&i>0&&n<100&&A>m.sensitivity[0]&&(m.event.dir="down"),m.direction.left===!0&&n>f&&a<0&&f<100&&d>m.sensitivity[0]&&(m.event.dir="left"),m.direction.right===!0&&n>f&&a>0&&f<100&&d>m.sensitivity[0]&&(m.event.dir="right"),m.event.dir!==!1?(an(l),m.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),So(),m.styleCleanup=y=>{m.styleCleanup=void 0,document.body.classList.remove("non-selectable");const g=()=>{document.body.classList.remove("no-pointer-events--children")};y===!0?setTimeout(g,50):g()}),m.handler({evt:l,touch:m.event.mouse!==!0,mouse:m.event.mouse,direction:m.event.dir,duration:p,distance:{x:n,y:f}})):m.end(l)},end(l){m.event!==void 0&&(Mn(m,"temp"),tn.is.firefox===!0&&xn(t,!1),m.styleCleanup!==void 0&&m.styleCleanup(!0),l!==void 0&&m.event.dir!==!1&&an(l),m.event=void 0)}};if(t.__qtouchswipe=m,v.mouse===!0){const l=v.mouseCapture===!0||v.mousecapture===!0?"Capture":"";_n(m,"main",[[t,"mousedown","mouseStart",`passive${l}`]])}tn.has.touch===!0&&_n(m,"main",[[t,"touchstart","touchStart",`passive${v.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,U){const M=t.__qtouchswipe;M!==void 0&&(U.oldValue!==U.value&&(typeof U.value!="function"&&M.end(),M.handler=U.value),M.direction=Xn(U.modifiers))},beforeUnmount(t){const U=t.__qtouchswipe;U!==void 0&&(Mn(U,"main"),Mn(U,"temp"),tn.is.firefox===!0&&xn(t,!1),U.styleCleanup!==void 0&&U.styleCleanup(),delete t.__qtouchswipe)}});function Wo(){let t=Object.create(null);return{getCache:(U,M)=>t[U]===void 0?t[U]=typeof M=="function"?M():M:t[U],setCache(U,M){t[U]=M},hasCache(U){return Object.hasOwnProperty.call(t,U)},clearCache(U){U!==void 0?delete t[U]:t=Object.create(null)}}}const Yo={name:{required:!0},disable:Boolean},er={setup(t,{slots:U}){return()=>Ye("div",{class:"q-panel scroll",role:"tabpanel"},Sn(U.default))}},Qo={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Go=["update:modelValue","beforeTransition","transition"];function Jo(){const{props:t,emit:U,proxy:M}=$n(),{getCache:v}=Wo(),{registerTimeout:k}=Dn();let m,l;const p=Be(null),E=Be(null);function a(q){const B=t.vertical===!0?"up":"left";P((M.$q.lang.rtl===!0?-1:1)*(q.direction===B?1:-1))}const n=Ie(()=>[[Vo,a,void 0,{horizontal:t.vertical!==!0,vertical:t.vertical,mouse:!0}]]),i=Ie(()=>t.transitionPrev||`slide-${t.vertical===!0?"down":"right"}`),f=Ie(()=>t.transitionNext||`slide-${t.vertical===!0?"up":"left"}`),d=Ie(()=>`--q-transition-duration: ${t.transitionDuration}ms`),A=Ie(()=>typeof t.modelValue=="string"||typeof t.modelValue=="number"?t.modelValue:String(t.modelValue)),y=Ie(()=>({include:t.keepAliveInclude,exclude:t.keepAliveExclude,max:t.keepAliveMax})),g=Ie(()=>t.keepAliveInclude!==void 0||t.keepAliveExclude!==void 0);on(()=>t.modelValue,(q,B)=>{const X=h(q)===!0?u(q):-1;l!==!0&&R(X===-1?0:X<u(B)?-1:1),p.value!==X&&(p.value=X,U("beforeTransition",q,B),k(()=>{U("transition",q,B)},t.transitionDuration))});function L(){P(1)}function C(){P(-1)}function w(q){U("update:modelValue",q)}function h(q){return q!=null&&q!==""}function u(q){return m.findIndex(B=>B.props.name===q&&B.props.disable!==""&&B.props.disable!==!0)}function T(){return m.filter(q=>q.props.disable!==""&&q.props.disable!==!0)}function R(q){const B=q!==0&&t.animated===!0&&p.value!==-1?"q-transition--"+(q===-1?i.value:f.value):null;E.value!==B&&(E.value=B)}function P(q,B=p.value){let X=B+q;for(;X!==-1&&X<m.length;){const j=m[X];if(j!==void 0&&j.props.disable!==""&&j.props.disable!==!0){R(q),l=!0,U("update:modelValue",j.props.name),setTimeout(()=>{l=!1});return}X+=q}t.infinite===!0&&m.length!==0&&B!==-1&&B!==m.length&&P(q,q===-1?m.length:-1)}function Y(){const q=u(t.modelValue);return p.value!==q&&(p.value=q),!0}function O(){const q=h(t.modelValue)===!0&&Y()&&m[p.value];return t.keepAlive===!0?[Ye(Yr,y.value,[Ye(g.value===!0?v(A.value,()=>({...er,name:A.value})):er,{key:A.value,style:d.value},()=>q)])]:[Ye("div",{class:"q-panel scroll",style:d.value,key:A.value,role:"tabpanel"},[q])]}function $(){if(m.length!==0)return t.animated===!0?[Ye(Vr,{name:E.value},O)]:O()}function D(q){return m=Wr(Sn(q.default,[])).filter(B=>B.props!==null&&B.props.slot===void 0&&h(B.props.name)===!0),m.length}function c(){return m}return Object.assign(M,{next:L,previous:C,goTo:w}),{panelIndex:p,panelDirectives:n,updatePanelsList:D,updatePanelIndex:Y,getPanelContent:$,getEnabledPanels:T,getPanels:c,isValidPanelName:h,keepAliveProps:y,needsUniqueKeepAliveWrapper:g,goToPanelByOffset:P,goToPanel:w,nextPanel:L,previousPanel:C}}var Ko=cn({name:"QTabPanel",props:Yo,setup(t,{slots:U}){return()=>Ye("div",{class:"q-tab-panel",role:"tabpanel"},Sn(U.default))}}),Xo=cn({name:"QTabPanels",props:{...Qo,...Qr},emits:Go,setup(t,{slots:U}){const M=$n(),v=Gr(t,M.proxy.$q),{updatePanelsList:k,getPanelContent:m,panelDirectives:l}=Jo(),p=Ie(()=>"q-tab-panels q-panel-parent"+(v.value===!0?" q-tab-panels--dark q-dark":""));return()=>(k(U),Jr("div",{class:p.value},m(),"pan",t.swipeable,()=>l.value))}});const Zo={name:"QMenuHover",props:{debounceTime:{type:Number,default:50}},data(){return{menu:!1,activatorHover:!1,menuHover:!1,debounceMenu:null}},computed:{activatorAttr(){return{onMouseenter:()=>this.activatorHover=!0,onMouseleave:()=>this.activatorHover=!1}},menuAttr(){return{modelValue:this.menu,onMouseenter:()=>this.menuHover=!0,onMouseleave:()=>this.menuHover=!1}}},watch:{menuHover(){this.debounceMenu()},activatorHover(){this.debounceMenu()}},created(){this.debounceMenu=Kr(this.checkMenu,this.debounceTime)},methods:{checkMenu(){this.menu=this.activatorHover||this.menuHover}}};function ei(t,U,M,v,k,m){return Xr(t.$slots,"default",{activatorAttr:m.activatorAttr,menuAttr:m.menuAttr})}var ti=Vt(Zo,[["render",ei]]);const ni=Wt({name:"CrFooter",components:{MenuHover:ti},setup(){const t=kt(),U=ko(),M=Be(!1),v=Be(0);return{crData:U,damageInfo:M,dprTab:v,monsterStore:t,avgHp:Ie(()=>t.avgHp),ac:Ie(()=>t.AC)}}}),ri={class:"cr-footer full-width q-pa-sm"},oi={class:"big text-overline text-uppercase"},ii={class:"text-h3 q-ml-sm"},ai={class:"split"},si={class:"top"},li={class:"small text-overline"},ui={class:"text-h5 q-ml-2 cr"},ci={class:"bot"},fi={class:"text-overline"},di={class:"text-h5 q-ml-2 cr"},pi={class:"split chips text-weight-bold cursor-pointer"},hi={class:"top"},mi={class:"text-h6"},gi={class:"text-subtitle2 text-grey-5"},vi={class:"text-overline text-uppercase text-white"},bi={class:"text-h6"},yi={class:"text-subtitle2 text-grey-5"},wi={class:"text-h6"},_i={class:"text-subtitle2 text-grey-5"},Ei={class:"bot"},$i={class:"text-h6"},Si={class:"text-subtitle2 text-grey-5"},ki={class:"text-h6"},Ai={class:"text-subtitle2 text-grey-5"};function Ci(t,U,M,v,k,m){const l=yt("menu-hover");return Oe(),bt("div",ri,[Se("span",oi,pe(t.$t("editor.cr.estimated")),1),Se("span",ii,pe(t.crData.estimatedCr.value.cr),1),Z(lt,{class:"q-mx-sm",vertical:""}),Se("div",ai,[Se("div",si,[Se("span",li,pe(t.$t("editor.cr.offensive")),1),Se("span",ui,pe(t.crData.offensiveCr.value.cr),1)]),Z(lt),Se("div",ci,[Se("span",fi,pe(t.$t("editor.cr.defensive")),1),Se("span",di,pe(t.crData.defensiveCr.value.cr),1)])]),Z(lt,{class:"q-mx-sm",vertical:""}),Se("div",pi,[Se("div",hi,[Z(l,null,{default:te(({activatorAttr:p,menuAttr:E})=>[Z(rn,vt(p,{color:"red-10",icon:"mdi-sword-cross"}),{default:te(()=>[Ee(pe(Math.floor(t.crData.damagePerRound.value))+" ( "+pe(t.crData.damageCr.value.cr)+" CR) ",1),Z(Ot,vt(E,{offset:[0,2]}),{default:te(()=>[Z(Mt,{style:{width:"350px"},class:"q-mx-auto",bordered:""},{default:te(()=>[Z(wt,null,{default:te(()=>[Se("div",mi,pe(t.$t("editor.cr.avgDamage",[Math.floor(t.crData.damagePerRound.value)])),1),Se("div",gi," CR "+pe(t.crData.damageCr.value.cr)+": "+pe(t.crData.damageCr.value.dprMin)+" - "+pe(t.crData.damageCr.value.dprMax),1)]),_:1}),Z(Fo,{modelValue:t.dprTab,"onUpdate:modelValue":U[0]||(U[0]=a=>t.dprTab=a),class:"bg-red-10",align:"justify"},{default:te(()=>[(Oe(!0),bt(Tt,null,Rt(t.crData.actionSequence.value,(a,n)=>(Oe(),We(No,{key:n,name:n,label:t.$t("editor.cr.round",[n+1])},null,8,["name","label"]))),128))]),_:1},8,["modelValue"]),Z(lt),Z(Xo,{modelValue:t.dprTab,"onUpdate:modelValue":U[1]||(U[1]=a=>t.dprTab=a),animated:""},{default:te(()=>[(Oe(!0),bt(Tt,null,Rt(t.crData.actionSequence.value,(a,n)=>(Oe(),We(Ko,{key:n,name:n,style:{padding:"0px"}},{default:te(()=>[Z(zt,null,{default:te(()=>[Z(Ze,{header:""},{default:te(()=>[Se("div",vi,pe(t.$t("editor.cr.totalDamage",[Math.floor(a.totalDamage)])),1)]),_:2},1024),Z(lt,{class:"q-mb-sm"}),(Oe(!0),bt(Tt,null,Rt(a.actions,(i,f)=>(Oe(),We(Je,{key:`${i.name}-${i.type}-${f}`,class:"q-pb-md q-px-md"},{default:te(()=>[Z(je,{avatar:""},{default:te(()=>[Z(xt,{color:t.crData.actionTypeColor(i.type),"font-size":"14px"},{default:te(()=>[Ee(pe(Math.floor(i.damage)),1)]),_:2},1032,["color"])]),_:2},1024),Z(je,null,{default:te(()=>[Z(Ze,null,{default:te(()=>[Ee(pe(i.name),1)]),_:2},1024),Z(Ze,{caption:"",lines:"1"},{default:te(()=>[Ee(pe(t.$t(`editor.cr.type.${i.type}`)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:2},1040)]),_:2},1040)]),_:1}),Z(l,null,{default:te(({activatorAttr:p,menuAttr:E})=>[Z(rn,vt(p,{color:t.crData.attackChipColor.value,icon:"mdi-bullseye-arrow"}),{default:te(()=>[Ee(pe(t.crData.maxAttackRender.value)+" ( "+pe(t.crData.attackCrDelta.value)+" CR) ",1),Z(Ot,vt(E,{offset:[0,2]}),{default:te(()=>[Z(Mt,{style:{width:"350px"},class:"q-mx-auto",bordered:""},{default:te(()=>[Z(wt,null,{default:te(()=>[Se("div",bi,pe(t.$t("editor.cr.maxAttack",[t.crData.maxAttackRender.value])),1),Se("div",yi,pe(t.crData.attackCrExplain.value),1)]),_:1}),Z(lt,{class:"q-mb-sm"}),Z(zt,null,{default:te(()=>[(Oe(!0),bt(Tt,null,Rt(t.crData.filteredToHitActions.value,(a,n)=>(Oe(),We(Je,{key:`${a.name}-${a.type}-${n}`,class:"q-pb-md q-px-md"},{default:te(()=>[Z(je,{avatar:""},{default:te(()=>[Z(xt,{color:t.crData.actionTypeColor(a.type),"font-size":"14px"},{default:te(()=>[Ee(pe(a.toHitRender),1)]),_:2},1032,["color"])]),_:2},1024),Z(je,null,{default:te(()=>[Z(Ze,null,{default:te(()=>[Ee(pe(a.name),1)]),_:2},1024),Z(Ze,{caption:"",lines:"1"},{default:te(()=>[Ee(pe(t.$t(`editor.cr.type.${a.type}`)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Z(Je,null,{default:te(()=>[Z(je,null,{default:te(()=>[Ee(pe(t.$t("editor.cr.attackActionsBelowThreshold",{n:t.crData.actionsBelowThreshold.value})),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},1040)]),_:2},1040,["color"])]),_:1}),Z(l,null,{default:te(({activatorAttr:p,menuAttr:E})=>[Z(rn,vt(p,{color:t.crData.dcChipColor.value,icon:"fa-solid fa-wand-sparkles"}),{default:te(()=>[Ee(pe(t.crData.maxDc.value)+" ( "+pe(t.crData.attackCrDelta.value)+" CR) ",1),Z(Ot,vt(E,{offset:[0,2]}),{default:te(()=>[Z(Mt,{style:{width:"350px"},class:"q-mx-auto",bordered:""},{default:te(()=>[Z(wt,null,{default:te(()=>[Se("div",wi,pe(t.$t("editor.cr.maxDc",[t.crData.maxDc.value])),1),Se("div",_i,pe(t.crData.dcCrExplain.value),1)]),_:1}),Z(lt,{class:"q-mb-sm"}),Z(zt,null,{default:te(()=>[(Oe(!0),bt(Tt,null,Rt(t.crData.filteredDcActions.value,(a,n)=>(Oe(),We(Je,{key:`${a.name}-${a.type}-${n}`,class:"q-pb-md q-px-md"},{default:te(()=>[Z(je,{avatar:""},{default:te(()=>[Z(xt,{color:t.crData.actionTypeColor(a.type),"font-size":"14px"},{default:te(()=>[Ee(pe(a.save),1)]),_:2},1032,["color"])]),_:2},1024),Z(je,null,{default:te(()=>[Z(Ze,null,{default:te(()=>[Ee(pe(a.name),1)]),_:2},1024),Z(Ze,{caption:"",lines:"1"},{default:te(()=>[Ee(pe(t.$t(`editor.cr.type.${a.type}`)),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),Z(Je,null,{default:te(()=>[Z(je,null,{default:te(()=>[Ee(pe(t.$t("editor.cr.dcActionsBelowThreshold",{n:t.crData.dcsBelowThreshold.value})),1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:2},1040)]),_:2},1040,["color"])]),_:1})]),Se("div",Ei,[Z(l,null,{default:te(({activatorAttr:p,menuAttr:E})=>[Z(rn,vt(p,{color:"green-8",icon:"mdi-hospital"}),{default:te(()=>[Ee(pe(Math.floor(t.crData.ehp.value))+" (CR "+pe(t.crData.hpCr.value.cr)+") ",1),Z(Ot,vt(E,{offset:[0,2]}),{default:te(()=>[Z(Mt,{style:{width:"350px"},class:"q-mx-auto",bordered:""},{default:te(()=>[Z(wt,null,{default:te(()=>[Se("div",$i,pe(t.$t("editor.cr.ehp",[Math.floor(t.crData.ehp.value)])),1),Se("div",Si," CR "+pe(t.crData.hpCr.value.cr)+": "+pe(t.crData.hpCr.value.hpMin)+" - "+pe(t.crData.hpCr.value.hpMax),1)]),_:1}),Z(lt,{class:"q-mb-sm"}),Z(zt,null,{default:te(()=>[Z(Je,{class:"q-pb-md q-px-md"},{default:te(()=>[Z(je,{avatar:""},{default:te(()=>[Z(xt,{color:t.crData.actionTypeColor("HP"),"font-size":"14px"},{default:te(()=>[Ee(pe(t.avgHp),1)]),_:1},8,["color"])]),_:1}),Z(je,null,{default:te(()=>[Z(Ze,null,{default:te(()=>[Ee(pe(t.$t("editor.cr.baseHp")),1)]),_:1})]),_:1})]),_:1}),(Oe(!0),bt(Tt,null,Rt(t.crData.ehpModifierList.value,(a,n)=>(Oe(),We(Je,{key:`${a.title}-${a.type}-${n}`,class:"q-pb-md q-px-md"},{default:te(()=>[Z(je,{avatar:""},{default:te(()=>[Z(xt,{color:t.crData.actionTypeColor(a.type),"font-size":"14px"},{default:te(()=>[Ee(pe(a.value),1)]),_:2},1032,["color"])]),_:2},1024),Z(je,null,{default:te(()=>[Z(Ze,null,{default:te(()=>[Ee(pe(a.title),1)]),_:2},1024),Z(Ze,{caption:"",lines:"1"},{default:te(()=>[Ee(pe(a.subtitle),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:2},1040)]),_:2},1040)]),_:1}),Z(l,null,{default:te(({activatorAttr:p,menuAttr:E})=>[Z(rn,vt(p,{color:"green-8",icon:"shield"}),{default:te(()=>[Ee(pe(Math.floor(t.crData.eac.value))+" ( "+pe(t.crData.acCrDelta.value)+" CR) ",1),Z(Ot,vt(E,{offset:[0,2]}),{default:te(()=>[Z(Mt,{style:{width:"350px"},class:"q-mx-auto",bordered:""},{default:te(()=>[Z(wt,null,{default:te(()=>[Se("div",ki,pe(t.$t("editor.cr.eac",[Math.floor(t.crData.eac.value)])),1),Se("div",Ai,pe(t.crData.acCrExplain.value),1)]),_:1}),Z(lt,{class:"q-mb-sm"}),Z(zt,null,{default:te(()=>[Z(Je,{class:"q-pb-md q-px-md"},{default:te(()=>[Z(je,{avatar:""},{default:te(()=>[Z(xt,{color:t.crData.actionTypeColor("HP"),"font-size":"14px"},{default:te(()=>[Ee(pe(t.ac),1)]),_:1},8,["color"])]),_:1}),Z(je,null,{default:te(()=>[Z(Ze,null,{default:te(()=>[Ee(pe(t.$t("editor.cr.baseAc")),1)]),_:1}),t.ac<12?(Oe(),We(Ze,{key:0,caption:"",lines:"1"},{default:te(()=>[Ee(pe(t.$t("editor.cr.baseAcLow")),1)]),_:1})):lr("",!0)]),_:1})]),_:1}),(Oe(!0),bt(Tt,null,Rt(t.crData.eacModifierList.value,(a,n)=>(Oe(),We(Je,{key:`${a.title}-${a.type}-${n}`,class:"q-pb-md q-px-md"},{default:te(()=>[Z(je,{avatar:""},{default:te(()=>[Z(xt,{color:t.crData.actionTypeColor(a.type),"font-size":"14px"},{default:te(()=>[Ee(pe(a.value),1)]),_:2},1032,["color"])]),_:2},1024),Z(je,null,{default:te(()=>[Z(Ze,null,{default:te(()=>[Ee(pe(a.title),1)]),_:2},1024),Z(Ze,{caption:"",lines:"1"},{default:te(()=>[Ee(pe(a.subtitle),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:2},1040)]),_:2},1040)]),_:1})])]),Z(lt,{class:"q-mx-sm",vertical:""}),Se("div",null,[Z(mt,{push:"",icon:"mdi-arrow-decision-auto",color:t.monsterStore.autoEstimateDefenseCr?"positive":"dark",onClick:U[2]||(U[2]=p=>t.monsterStore.autoEstimateDefenseCr=!t.monsterStore.autoEstimateDefenseCr)},{default:te(()=>[Z(vr,{class:"text-body2"},{default:te(()=>U[3]||(U[3]=[Ee("Automatically Estimate Defensive CR")])),_:1})]),_:1},8,["color"])])])}var Ti=Vt(ni,[["render",Ci],["__scopeId","data-v-d41e4c54"]]);function xi(){return new Promise(t=>{const U=document.createElement("input");U.type="file",U.accept=".json",U.onchange=async M=>{var v;!M.target||t((v=M.target.files)==null?void 0:v[0])},U.click()})}function Mi(){const t=kt(),U=fn(),{mdFormatter:M}=dn(),{t:v}=_t(),k=()=>{const C=U.traits.value;return t.traits.length===0?"":`${C.map(h=>`> ${M(h)}`).join(`
>
`)}
`},m=()=>{const C=`> ${M(U.innateSpellcastingPreamble.value)}`,w=U.innateSpellcastingLists.value.map(h=>`> ${h.renderedLabel} *${h.renderedSpells}*`);return`> ${C}
>
${w.join(`
`)}`},l=()=>{const C=[],w=t.knownSpellsOfLevel(0);return w.length>0&&C.push(`> ${v("editor.spellcasting.slot.cantripLabel")} *${w.join(", ")}*  `),U.classSpellcastingSlots.value.forEach(u=>{C.push(`> ${u.renderedLabel} *${u.renderedSpells}*  `)}),`
> ${M(U.classSpellcastingPreamble.value)}
>
${C.join(`
`)}`},p=()=>U.attacks.value.length===0?"":`
${U.attacks.value.map(w=>`> ${M(w)}`).join(`
>
`)}
>`,E=()=>U.actions.value.length===0?"":`
${U.actions.value.map(w=>`> ${M(w)}`).join(`
>
`)}
>`,a=()=>{if(U.bonusActions.value.length===0)return"";const C=U.bonusActions.value.map(w=>`> ${M(w)}`);return`
> ### ${v("monster.bonusActions")}
>
${C.join(`
>
`)}
>`},n=()=>{if(U.legendaryActions.value.length===0)return"";const C=`> ### ${v("editor.legendary.label")}
> ${M(U.legendaryPreamble.value)}`,w=U.legendaryActions.value.map(h=>`> ${M(h)}`);return`
${C}
>
${w.join(`
>
`)}
>`},i=()=>t.mythicActions.actions.length===0?"":`> ${M(U.mythicTrait.value)}
`,f=()=>{if(U.mythicActions.value.length===0)return"";const C=`> ### ${v("editor.mythic.label")}
> ${M(U.mythicPreamble.value)}`,h=U.mythicActions.value.map(u=>`> ${M(u)}`);return`
${C}
>
${h.join(`
>
`)}
>`},d=()=>{if(U.reactions.value.length===0)return"";const C=U.reactions.value.map(w=>`> ${M(w)}`);return`
> ### ${v("editor.reaction.label")}
${C.join(`
>
`)}
>`},A=()=>{if(t.lairActions.length===0)return"";const C=`> ### ${v("editor.lair.label")}
> ${M(U.lairActionPreamble.value)}`,w=U.lairActions.value.map(h=>`> - ${M(h)}`);return`
${C}
${w.join(`
`)}
`},y=()=>{if(t.regionalEffects.length===0)return"";const C=`> ### ${v("editor.regional.label")}
> ${U.regionalEffectPreamble.value}`,w=U.regionalEffects.value.map(h=>`> - ${M(h)}`);return`
${C}
${w.join(`
`)}`},g=()=>t.inventory===""?"":`> ### ${v("editor.inventory.label")}
> ${M(U.inventory.value)}`;return{renderMarkdown:(C=!1)=>{const w={};for(const W in t.stats)w[W]={score:t.stats[W],bonus:ur(t.stats[W])};const h=`
> - **${v("monster.saves")}** ${U.saves.value}`,u=t.skills.length===0?"":`
> - **${v("monster.skills")}** ${U.skills.value}`,T=t.vulnerabilities.length===0?"":`
> - **${v("monster.vulnerabilities")}** ${U.vulnerabilities.value}`,R=t.resistances.length===0?"":`
> - **${v("monster.resistances")}** ${U.resistances.value}`,P=t.immunities.length===0?"":`
> - **${v("monster.immunities")}** ${U.immunities.value}`,Y=t.conditions.length===0?"":`
> - **${v("monster.conditionImmunities")}** ${U.conditions.value}`,O=k(),$=i(),D=l(),c=m(),q=t.multiattacks.length===0?"":`
> ***Multiattack.*** ${M(U.multiattacks.value)}
>`,B=p(),X=E(),j=a(),J=n(),N=f(),G=d(),_=A(),x=y(),F=g();return`___${C?`
___`:""}
> ## ${t.name}
>*${t.size} ${t.type}, ${t.alignment}*
> ___
> - **${v("monster.armorClass")}** ${t.AC} ${t.ACType===""?"":`(${t.ACType})`}
> - **${v("monster.hp.full")}** ${kn(t.HP.HD,t.HP.type)+t.HP.modifier} (${t.HP.HD}d${t.HP.type}${Pt(t.HP.modifier)})
> - **${v("monster.movement.speed")}** ${t.speeds.map(W=>`${W.speed} ft. ${W.type}${W.note===""?"":W.note}`).join(", ")}
>___
>|STR|DEX|CON|INT|WIS|CHA|
>|:---:|:---:|:---:|:---:|:---:|:---:|
>|${w.STR.score} (${w.STR.bonus})|${w.DEX.score} (${w.DEX.bonus})|${w.CON.score} (${w.CON.bonus})|${w.INT.score} (${w.INT.bonus})|${w.WIS.score} (${w.WIS.bonus})|${w.CHA.score} (${w.CHA.bonus})|
>___${h!==""?h:""}${u}${T}${R}${P}${Y}
> - **${v("editor.senses.label")}** ${U.senses.value}
> - **${v("monster.languages")}** ${t.languages}
> - **${v("monster.challenge")}** ${U.cr.value}
>___
${O}${$}> ### ${v("editor.action.label")}${q}${B}${X}${t.spellcasting.standard.length===0?"":`${D}
>`}${t.spellcasting.atWill.length===0?"":`${c}
>`}${j}${J}${N}${G}${_}${x}${F}`}}}function Pi(){const t=kt(),U=fn(),{mdFormatter:M}=dn(),{t:v}=_t(),k=()=>{const C=U.traits.value;return t.traits.length===0?"":`${C.map(h=>`${M(h)}`).join(`
:
`)}
`},m=()=>{const C=M(U.innateSpellcastingPreamble.value),w=U.innateSpellcastingLists.value.map(h=>`${h.renderedLabel}: *${h.renderedSpells}*`);return`
:
${C}
:
${w.join(`
`)}`},l=()=>{const C=[],w=t.knownSpellsOfLevel(0);return w.length>0&&C.push(`${v("editor.spellcasting.slot.cantripLabel")}: *${w.join(", ")}*  `),U.classSpellcastingSlots.value.forEach(u=>{C.push(`${u.renderedLabel} *${u.renderedSpells}*  `)}),`
:
${M(U.classSpellcastingPreamble.value)}
:
${C.join(`
`)}`},p=()=>U.attacks.value.length===0?"":`
${U.attacks.value.map(w=>M(w)).join(`
:
`)}`,E=()=>U.actions.value.length===0?"":`
:
${U.actions.value.map(w=>M(w)).join(`
:
`)}`,a=()=>{if(U.bonusActions.value.length===0)return"";const C=U.bonusActions.value.map(w=>`${M(w)}`);return`
### ${v("monster.bonusActions")}
${C.join(`
:
`)}
`},n=()=>{if(U.legendaryActions.value.length===0)return"";const C=`### ${v("editor.legendary.label")}
${M(U.legendaryPreamble.value)}`,w=U.legendaryActions.value.map(h=>M(h));return`
${C}
:
${w.join(`
:
`)}
`},i=()=>t.mythicActions.actions.length===0?"":`:
${M(U.mythicTrait.value)}
`,f=()=>{if(U.mythicActions.value.length===0)return"";const C=`### ${v("editor.mythic.label")}
${M(U.mythicPreamble.value)}`,h=U.mythicActions.value.map(u=>`${M(u)}`);return`
${C}
:
${h.join(`
:
`)}
`},d=()=>{if(U.reactions.value.length===0)return"";const C=U.reactions.value.map(w=>M(w));return`
### ${v("editor.reaction.label")}
${C.join(`
:
`)}
`},A=()=>{if(t.lairActions.length===0)return"";const C=`### ${v("editor.lair.label")}
${M(U.lairActionPreamble.value)}`,w=U.lairActions.value.map(h=>`- ${M(h)}`);return`
${C}
${w.join(`
`)}
`},y=()=>{if(t.regionalEffects.length===0)return"";const C=`### ${v("editor.regional.label")}
${U.regionalEffectPreamble.value}`,w=U.regionalEffects.value.map(h=>`- ${M(h)}`);return`
${C}
${w.join(`
`)}`},g=()=>t.inventory===""?"":`
### ${v("editor.inventory.label")}
${M(U.inventory.value)}`;return{renderMarkdownV3:(C=!1)=>{const w={};for(const W in t.stats)w[W]={score:t.stats[W],bonus:ur(t.stats[W])};const h=`**${v("monster.saves")}** :: ${U.saves.value}`,u=t.skills.length===0?"":`
**${v("monster.skills")}** :: ${U.skills.value}`,T=t.vulnerabilities.length===0?"":`
**${v("monster.vulnerabilities")}** :: ${U.vulnerabilities.value}`,R=t.resistances.length===0?"":`
**${v("monster.resistances")}** :: ${U.resistances.value}`,P=t.immunities.length===0?"":`
**${v("monster.immunities")}** :: ${U.immunities.value}`,Y=t.conditions.length===0?"":`
**${v("monster.conditionImmunities")}** :: ${U.conditions.value}`,O=k(),$=i(),D=l(),c=m(),q=t.multiattacks.length===0?"":`
***Multiattack.*** ${M(U.multiattacks.value)}
:`,B=p(),X=E(),j=a(),J=n(),N=f(),G=d(),_=A(),x=y(),F=g();return`{{monster,frame${C?",wide":""}
## ${t.name}
*${t.size} ${t.type}, ${t.alignment}*
___
**${v("monster.armorClass")}** :: ${t.AC} ${t.ACType===""?"":`(${t.ACType})`}
**${v("monster.hp.full")}** :: ${kn(t.HP.HD,t.HP.type)+t.HP.modifier} (${t.HP.HD}d${t.HP.type}${Pt(t.HP.modifier)})
**${v("monster.movement.speed")}** :: ${t.speeds.map(W=>`${W.speed} ft. ${W.type}${W.note===""?"":W.note}`).join(", ")}
___
|  STR  |  DEX  |  CON  |  INT  |  WIS  |  CHA  |
|:-----:|:-----:|:-----:|:-----:|:-----:|:-----:|
|${w.STR.score} (${w.STR.bonus})|${w.DEX.score} (${w.DEX.bonus})|${w.CON.score} (${w.CON.bonus})|${w.INT.score} (${w.INT.bonus})|${w.WIS.score} (${w.WIS.bonus})|${w.CHA.score} (${w.CHA.bonus})|
___
${h!==""?h:""}${u}${T}${R}${P}${Y}
**${v("editor.senses.label")}** :: ${U.senses.value}
**${v("monster.languages")}** :: ${t.languages}
**${v("monster.challenge")}** :: ${U.cr.value}
___
${O}${$}### ${v("editor.action.label")}${q}${B}${X}${t.spellcasting.standard.length===0?"":`${D}`}${t.spellcasting.atWill.length===0?"":`${c}`}${j}${J}${N}${G}${_}${x}${F}
}}`}}}var Ii=function(){var t=document.getSelection();if(!t.rangeCount)return function(){};for(var U=document.activeElement,M=[],v=0;v<t.rangeCount;v++)M.push(t.getRangeAt(v));switch(U.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":U.blur();break;default:U=null;break}return t.removeAllRanges(),function(){t.type==="Caret"&&t.removeAllRanges(),t.rangeCount||M.forEach(function(k){t.addRange(k)}),U&&U.focus()}},Li=Ii,tr={"text/plain":"Text","text/html":"Url",default:"Text"},Di="Copy to clipboard: #{key}, Enter";function Ri(t){var U=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return t.replace(/#{\s*key\s*}/g,U)}function Oi(t,U){var M,v,k,m,l,p,E=!1;U||(U={}),M=U.debug||!1;try{k=Li(),m=document.createRange(),l=document.getSelection(),p=document.createElement("span"),p.textContent=t,p.ariaHidden="true",p.style.all="unset",p.style.position="fixed",p.style.top=0,p.style.clip="rect(0, 0, 0, 0)",p.style.whiteSpace="pre",p.style.webkitUserSelect="text",p.style.MozUserSelect="text",p.style.msUserSelect="text",p.style.userSelect="text",p.addEventListener("copy",function(n){if(n.stopPropagation(),U.format)if(n.preventDefault(),typeof n.clipboardData=="undefined"){M&&console.warn("unable to use e.clipboardData"),M&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var i=tr[U.format]||tr.default;window.clipboardData.setData(i,t)}else n.clipboardData.clearData(),n.clipboardData.setData(U.format,t);U.onCopy&&(n.preventDefault(),U.onCopy(n.clipboardData))}),document.body.appendChild(p),m.selectNodeContents(p),l.addRange(m);var a=document.execCommand("copy");if(!a)throw new Error("copy command was unsuccessful");E=!0}catch(n){M&&console.error("unable to copy using execCommand: ",n),M&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(U.format||"text",t),U.onCopy&&U.onCopy(window.clipboardData),E=!0}catch(i){M&&console.error("unable to copy using clipboardData: ",i),M&&console.error("falling back to prompt"),v=Ri("message"in U?U.message:Di),window.prompt(v,t)}}finally{l&&(typeof l.removeRange=="function"?l.removeRange(m):l.removeAllRanges()),p&&document.body.removeChild(p),k()}return E}var In=Oi;function ji(){const t=kt(),U=Rn(),M=fn(),{latexFormatter:v,processTokens:k}=dn(),{t:m}=_t(),l=()=>M.traits.value.map(T=>v(T)).join(`
`),p=()=>{const u=t.spellcasting;return`${v(M.innateSpellcastingPreamble.value)}
  \\begin{DndMonsterSpells}
    ${u.atWill.map(T=>`\\DndInnateSpellLevel${T.count>0?`[${T.count}]`:""}{${T.spells.join(", ")}}`).join(`
    `)}
  \\end{DndMonsterSpells}
  `},E=()=>{const u=t.spellcasting,T=[],R=u.standard.filter(P=>U.allSpells[P].level===0);R.length>0&&T.push(`\\DndMonsterSpellLevel{${R.join(", ")}}`);for(let P=0;P<u.slots.length;P++)if(u.slots[P]>0){const Y=P+1,O=u.standard.filter($=>U.allSpells[$].level===Y);if(O.length===0)continue;T.push(`\\DndMonsterSpellLevel[${Y}][${u.slots[P]}]{${O.join(", ")}}`)}return`${v(M.classSpellcastingPreamble.value)}
  \\begin{DndMonsterSpells}
    ${T.join(`
    `)}
  \\end{DndMonsterSpells}
  `},a=()=>{const u=[];for(const T of t.attacks){const R=T.distance!=="MELEE",P=T.distance!=="RANGED",Y=T.distance==="BOTH"?"both":T.distance.toLowerCase(),O=T.kind.toLowerCase(),$=t.attackDamageModifier(T.id),D=T.alternateDamage.modifier.override?T.alternateDamage.modifier.overrideValue:En(t.stats[T.alternateDamage.modifier.stat]),c=T.additionalDamage.map(q=>`\\DndDice{${q.count}d${q.dice}} ${q.type}${q.note}`);u.push(`\\DndMonsterAttack[
      name=${T.name},
      distance=${Y},
      type=${O},
      mod=${Pt(t.attackModifier(T.id))},
      ${P?"":"%"}reach=${T.range.reach},
      ${R?"":"%"}range=${T.range.standard}/${T.range.long},
      targets=${Zr.toWords(T.targets)} target${T.targets===1?"":"s"},
      dmg=\\DndDice{${T.damage.count}d${T.damage.dice}${Pt($)}},
      dmg-type=${T.damage.type},
      ${c.length===0?"%":""}plus-dmg={${eo(c,", ")}},
      ${T.alternateDamage.active?"":"%"}or-dmg=\\DndDice{${T.alternateDamage.count}d${T.alternateDamage.dice}${Pt(D)}},
      ${T.alternateDamage.active?"":"%"}or-dmg-when={${T.alternateDamage.condition}},
      extra={${v(k(T.description,T,t,"attack"))}}
    ]`)}return u.join(`

  `)},n=()=>v(M.multiattacks.value),i=()=>M.actions.value.map(u=>v(u)).join(`
 `),f=()=>M.bonusActions.value.length>0?`\\DndMonsterSection{${m("monster.bonusActions")}}
${M.bonusActions.value.map(u=>v(u)).join(`
 `)}`:"",d=()=>{const u=v(M.legendaryPreamble.value),T=t.legendaryActions.actions.map(R=>{const P=t.legendaryAction(R.actionId);if(P){const Y=R.cost>1?m("editor.legendary.renderedCost",[R.cost]):"";let O="";return P.type==="action"?P.action.legendaryOnly?O=k(P.action.description,P.action,t,"action"):O=k(m("presets.legendaryAction",[P.action.name]),void 0,t,"none"):P.type==="attack"&&(O=k(m("presets.legendaryAttack",[P.action.name]),void 0,t,"none")),`\\DndMonsterLegendaryAction{${P.action.name}${Y}}{${v(O)}}`}});return`\\DndMonsterSection{Legendary Actions}
  ${u}
  \\begin{DndMonsterLegendaryActions}
    ${T.join(`
  `)}
  \\end{DndMonsterLegendaryActions}`},A=()=>v(M.mythicTrait.value),y=()=>{const u=v(M.mythicPreamble.value),T=t.mythicActions.actions.map(R=>{const P=t.legendaryAction(R.actionId);if(P){const Y=R.cost>1?m("editor.legendary.renderedCost",[R.cost]):"";let O="";return P.type==="action"?P.action.legendaryOnly?O=k(P.action.description,P.action,t,"action"):O=k(m("presets.legendaryAction",[P.action.name]),void 0,t,"none"):P.type==="attack"&&(O=k(m("presets.legendaryAttack",[P.action.name]),void 0,t,"none")),`\\DndMonsterLegendaryAction{${P.action.name}${Y}}{${v(O)}}`}});return`\\DndMonsterSection{Mythic Actions}
  ${u}
  \\begin{DndMonsterLegendaryActions}
    ${T.join(`
  `)}
  \\end{DndMonsterLegendaryActions}`},g=()=>`\\DndMonsterSection{Reactions}
    ${M.reactions.value.map(T=>v(T)).join(`
  `)}
  `,L=()=>{const u=`\\DndMonsterSection{${m("editor.lair.label")}}
${v(M.lairActionPreamble.value)}`,T=M.lairActions.value.map(R=>`\\item ${v(R)}`);return`${u}
    \\begin{itemize}
      ${T.join(`
`)}
    \\end{itemize}`},C=()=>{const u=`\\DndMonsterSection{${m("editor.regional.label")}}
  ${v(M.regionalEffectPreamble.value)}`,T=M.regionalEffects.value.map(R=>`\\item ${v(R)}`);return`${u}
    \\begin{itemize}
      ${T.join(`
`)}
    \\end{itemize}`},w=()=>`\\DndMonsterSection{${m("editor.inventory.label")}}
${v(M.inventory.value)}`;return{renderLatex:(u=!1)=>{const T=M.saves.value;return`\\begin{DndMonster}[${u?"width=\\textwidth + 8pt":""}]{${t.name}}
  ${u?"\\begin{multicols}{2}":""}
  \\DndMonsterType{${t.size} ${t.type}, ${t.alignment}}
  \\DndMonsterBasics[
    armor-class = {${t.AC}${t.ACType===""?"":` (${t.ACType})`}},
    hit-points = {\\DndDice{${t.HP.HD}d${t.HP.type}${Pt(t.HP.modifier)}}},
    speed = {${M.speeds.value}}
  ]

  \\DndMonsterAbilityScores[
    str = ${t.stats.STR},
    dex = ${t.stats.DEX},
    con = ${t.stats.CON},
    int = ${t.stats.INT},
    wis = ${t.stats.WIS},
    cha = ${t.stats.CHA},
  ]

  \\DndMonsterDetails[
    ${T===""?"%":""}saving-throws = {${T}},
    ${t.skills.length===0?"%":""}skills = {${M.skills.value}},
    ${t.vulnerabilities.length===0?"%":""}damage-vulnerabilities = {${M.vulnerabilities.value}},
    ${t.resistances.length===0?"%":""}damage-resistances = {${M.resistances.value}},
    ${t.immunities.length===0?"%":""}damage-immunities = {${M.immunities.value}},
    ${t.conditions.length===0?"%":""}condition-immunities = {${M.conditions.value}},
    senses = {${M.senses.value}},
    languages = {${t.languages}},
    challenge = {${un[t.CR].cr}},
  ]

  % Traits
  ${l()}

  ${t.mythicActions.actions.length>0?A():""}

  % Actions
  \\DndMonsterSection{${m("editor.action.label")}}
  ${t.multiattacks.length>0?n():""}

  ${a()}

  ${i()}

  % Spellcasting
  ${t.spellcasting.atWill.length>0?p():""}

  ${t.spellcasting.standard.length>0?E():""}

  ${f()}

  ${t.legendaryActions.count>0?d():""}

  ${t.mythicActions.actions.length>0?y():""}

  ${t.reactions.length>0?g():""}

  ${t.lairActions.length>0?L():""}

  ${t.regionalEffects.length>0?C():""}

  ${t.inventory!==""?w():""}

  ${u?"\\end{multicols}":""}
\\end{DndMonster}`}}}const nr={STR:"strength",DEX:"dexterity",CON:"constitution",INT:"intelligence",WIS:"wisdom",CHA:"charisma"},Bi="<i>{attack.distance}:</i> {attack.modifier} to hit, {attack.range}, {attack.targets}. <i>Hit:</i> {attack.damage}{attack.conditionalDamage}{attack.additionalDamage}. {attack.description}";function Ui(){const t=kt(),U=fn(),{processTokens:M,stripTags:v}=dn(),{t:k}=_t(),m=p=>{const E=`${p.damage.count}d${p.damage.dice}`,a=p.additionalDamage.length>0?`+${p.additionalDamage.map(n=>`${n.count}d${n.dice}`).join("+")}`:"";return E+a};return{renderTarrasqueJson:()=>{const p={};p.name=t.name,p.size=t.size,p.type=t.type,p.subtype="",p.alignment=t.alignment,p.armor_class=t.AC,p.armor_type=t.ACType,p.hit_points=kn(t.HP.HD,t.HP.type)+t.HP.modifier,p.hit_dice=`${t.HP.HD}d${t.HP.type}${Pt(t.HP.modifier)}`,p.speed=t.speeds.map(i=>`${i.speed} ft. ${i.type}${i.note===""?"":i.note}`).join(", "),p.speed_json={},t.speeds.forEach(i=>{var f;p.speed_json[(f=i.type)!=null?f:"unknown"]=i.speed});for(const i in t.stats){p[nr[i]]=t.stats[i];const f=t.saves[i],d=`${nr[i]}_save`;f.override?p[d]=f.overrideValue:f.proficient&&(p[d]=t.defaultSaveBonus(i))}for(const i of t.skills){const f=i.skill.label.toLowerCase().replace(" ","_");i.override?p[f]=i.overrideValue:p[f]=t.defaultSkillBonus(i)}p.damage_vulnerabilities=U.vulnerabilities.value,p.damage_resistances=U.resistances.value,p.damage_immunities=U.immunities.value,p.condition_immunities=U.immunities.value,p.senses=U.senses.value,p.languages=t.languages,p.challenge_rating=un[t.CR].cr,p.special_abilities=[];for(const i of t.traits){const f=M("{trait.name}{trait.limitedUse}",i,t,"trait");p.special_abilities.push({name:f,desc:v(M(i.description,i,t,"trait")),attack_bonus:i.crAnnotation.maxModifier})}p.actions=[],t.multiattacks.length>0&&p.actions.push({name:"Multiattack",desc:v(M("{multiattack.all}. {multiattack.postscript}",t.multiattacks,t,"multiattack")),attack_bonus:0});for(const i of t.attacks)p.actions.push({name:i.name,desc:v(M(Bi,i,t,"attack")),attack_bonus:t.attackModifier(i.id),damage_dice:m(i),damage_bonus:t.attackDamageModifier(i.id)});const E=t.actions.filter(i=>!i.legendaryOnly);for(const i of E){const f=v(M("{action.name}{action.limitedUse}",i,t,"action"));p.actions.push({name:f,desc:v(M(i.description,i,t,"action")),attack_bonus:i.crAnnotation.maxModifier})}if(t.legendaryActions.actions.length>0){p.legendary_desc=U.legendaryPreamble.value,p.legendary_actions=[];for(const i of t.legendaryActions.actions){const f=t.legendaryAction(i.actionId);if(f){const d=i.cost>1?k("editor.legendary.renderedCost",[i.cost]):"";let A="";f.type==="action"?f.action.legendaryOnly?A=M(f.action.description,f.action,t,"action"):A=M(k("presets.legendaryAction",[f.action.name]),void 0,t,"none"):f.type==="attack"&&(A=M(k("presets.legendaryAttack",[f.action.name]),void 0,t,"none")),p.legendary_actions.push({name:f.action.name+d,desc:v(A),attack_bonus:0})}}}const a=t.spellcasting;if(a.standard.length>0){const i=[],f=t.knownSpellsOfLevel(0);f.length>0&&i.push(`> ${k("editor.spellcasting.slot.cantripLabel")} *${f.join(", ")}*  `),U.classSpellcastingSlots.value.forEach(y=>{i.push(`${y.renderedLabel} ${y.renderedSpells}`)});const A=`${U.classSpellcastingPreamble.value}
\u2022 ${i.join(`
\u2022 `)}`;p.special_abilities.push({name:k("editor.spellcasting.class.label"),desc:v(A),attack_bonus:0})}if(a.atWill.length>0){const i=U.innateSpellcastingLists.value.join(`
\u2022 `);p.special_abilities.push({name:k("editor.spellcasting.innate.label"),desc:v(`${U.innateSpellcastingPreamble.value}
\u2022 ${i}`),attack_bonus:0})}const n=Array.from(t.spellcasting.standard);for(const i of t.spellcasting.atWill)n.push(...i.spells);if(n.length>0&&(p.spellList=n),t.reactions.length>0){p.reactions=[];for(const i of t.reactions)p.reactions.push({name:i.name,desc:v(M(i.description,void 0,t,"none")),attack_bonus:0})}return p.group="Custom (5e Monster Maker)",JSON.stringify(p)}}}var yr={exports:{}};(function(t,U){(function(M,v,k){t.exports=k(),t.exports.default=k()})("slugify",cr,function(){var M=JSON.parse(`{"$":"dollar","%":"percent","&":"and","<":"less",">":"greater","|":"or","\xA2":"cent","\xA3":"pound","\xA4":"currency","\xA5":"yen","\xA9":"(c)","\xAA":"a","\xAE":"(r)","\xBA":"o","\xC0":"A","\xC1":"A","\xC2":"A","\xC3":"A","\xC4":"A","\xC5":"A","\xC6":"AE","\xC7":"C","\xC8":"E","\xC9":"E","\xCA":"E","\xCB":"E","\xCC":"I","\xCD":"I","\xCE":"I","\xCF":"I","\xD0":"D","\xD1":"N","\xD2":"O","\xD3":"O","\xD4":"O","\xD5":"O","\xD6":"O","\xD8":"O","\xD9":"U","\xDA":"U","\xDB":"U","\xDC":"U","\xDD":"Y","\xDE":"TH","\xDF":"ss","\xE0":"a","\xE1":"a","\xE2":"a","\xE3":"a","\xE4":"a","\xE5":"a","\xE6":"ae","\xE7":"c","\xE8":"e","\xE9":"e","\xEA":"e","\xEB":"e","\xEC":"i","\xED":"i","\xEE":"i","\xEF":"i","\xF0":"d","\xF1":"n","\xF2":"o","\xF3":"o","\xF4":"o","\xF5":"o","\xF6":"o","\xF8":"o","\xF9":"u","\xFA":"u","\xFB":"u","\xFC":"u","\xFD":"y","\xFE":"th","\xFF":"y","\u0100":"A","\u0101":"a","\u0102":"A","\u0103":"a","\u0104":"A","\u0105":"a","\u0106":"C","\u0107":"c","\u010C":"C","\u010D":"c","\u010E":"D","\u010F":"d","\u0110":"DJ","\u0111":"dj","\u0112":"E","\u0113":"e","\u0116":"E","\u0117":"e","\u0118":"e","\u0119":"e","\u011A":"E","\u011B":"e","\u011E":"G","\u011F":"g","\u0122":"G","\u0123":"g","\u0128":"I","\u0129":"i","\u012A":"i","\u012B":"i","\u012E":"I","\u012F":"i","\u0130":"I","\u0131":"i","\u0136":"k","\u0137":"k","\u013B":"L","\u013C":"l","\u013D":"L","\u013E":"l","\u0141":"L","\u0142":"l","\u0143":"N","\u0144":"n","\u0145":"N","\u0146":"n","\u0147":"N","\u0148":"n","\u014C":"O","\u014D":"o","\u0150":"O","\u0151":"o","\u0152":"OE","\u0153":"oe","\u0154":"R","\u0155":"r","\u0158":"R","\u0159":"r","\u015A":"S","\u015B":"s","\u015E":"S","\u015F":"s","\u0160":"S","\u0161":"s","\u0162":"T","\u0163":"t","\u0164":"T","\u0165":"t","\u0168":"U","\u0169":"u","\u016A":"u","\u016B":"u","\u016E":"U","\u016F":"u","\u0170":"U","\u0171":"u","\u0172":"U","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017A":"z","\u017B":"Z","\u017C":"z","\u017D":"Z","\u017E":"z","\u018F":"E","\u0192":"f","\u01A0":"O","\u01A1":"o","\u01AF":"U","\u01B0":"u","\u01C8":"LJ","\u01C9":"lj","\u01CB":"NJ","\u01CC":"nj","\u0218":"S","\u0219":"s","\u021A":"T","\u021B":"t","\u0259":"e","\u02DA":"o","\u0386":"A","\u0388":"E","\u0389":"H","\u038A":"I","\u038C":"O","\u038E":"Y","\u038F":"W","\u0390":"i","\u0391":"A","\u0392":"B","\u0393":"G","\u0394":"D","\u0395":"E","\u0396":"Z","\u0397":"H","\u0398":"8","\u0399":"I","\u039A":"K","\u039B":"L","\u039C":"M","\u039D":"N","\u039E":"3","\u039F":"O","\u03A0":"P","\u03A1":"R","\u03A3":"S","\u03A4":"T","\u03A5":"Y","\u03A6":"F","\u03A7":"X","\u03A8":"PS","\u03A9":"W","\u03AA":"I","\u03AB":"Y","\u03AC":"a","\u03AD":"e","\u03AE":"h","\u03AF":"i","\u03B0":"y","\u03B1":"a","\u03B2":"b","\u03B3":"g","\u03B4":"d","\u03B5":"e","\u03B6":"z","\u03B7":"h","\u03B8":"8","\u03B9":"i","\u03BA":"k","\u03BB":"l","\u03BC":"m","\u03BD":"n","\u03BE":"3","\u03BF":"o","\u03C0":"p","\u03C1":"r","\u03C2":"s","\u03C3":"s","\u03C4":"t","\u03C5":"y","\u03C6":"f","\u03C7":"x","\u03C8":"ps","\u03C9":"w","\u03CA":"i","\u03CB":"y","\u03CC":"o","\u03CD":"y","\u03CE":"w","\u0401":"Yo","\u0402":"DJ","\u0404":"Ye","\u0406":"I","\u0407":"Yi","\u0408":"J","\u0409":"LJ","\u040A":"NJ","\u040B":"C","\u040F":"DZ","\u0410":"A","\u0411":"B","\u0412":"V","\u0413":"G","\u0414":"D","\u0415":"E","\u0416":"Zh","\u0417":"Z","\u0418":"I","\u0419":"J","\u041A":"K","\u041B":"L","\u041C":"M","\u041D":"N","\u041E":"O","\u041F":"P","\u0420":"R","\u0421":"S","\u0422":"T","\u0423":"U","\u0424":"F","\u0425":"H","\u0426":"C","\u0427":"Ch","\u0428":"Sh","\u0429":"Sh","\u042A":"U","\u042B":"Y","\u042C":"","\u042D":"E","\u042E":"Yu","\u042F":"Ya","\u0430":"a","\u0431":"b","\u0432":"v","\u0433":"g","\u0434":"d","\u0435":"e","\u0436":"zh","\u0437":"z","\u0438":"i","\u0439":"j","\u043A":"k","\u043B":"l","\u043C":"m","\u043D":"n","\u043E":"o","\u043F":"p","\u0440":"r","\u0441":"s","\u0442":"t","\u0443":"u","\u0444":"f","\u0445":"h","\u0446":"c","\u0447":"ch","\u0448":"sh","\u0449":"sh","\u044A":"u","\u044B":"y","\u044C":"","\u044D":"e","\u044E":"yu","\u044F":"ya","\u0451":"yo","\u0452":"dj","\u0454":"ye","\u0456":"i","\u0457":"yi","\u0458":"j","\u0459":"lj","\u045A":"nj","\u045B":"c","\u045D":"u","\u045F":"dz","\u0490":"G","\u0491":"g","\u0492":"GH","\u0493":"gh","\u049A":"KH","\u049B":"kh","\u04A2":"NG","\u04A3":"ng","\u04AE":"UE","\u04AF":"ue","\u04B0":"U","\u04B1":"u","\u04BA":"H","\u04BB":"h","\u04D8":"AE","\u04D9":"ae","\u04E8":"OE","\u04E9":"oe","\u0531":"A","\u0532":"B","\u0533":"G","\u0534":"D","\u0535":"E","\u0536":"Z","\u0537":"E'","\u0538":"Y'","\u0539":"T'","\u053A":"JH","\u053B":"I","\u053C":"L","\u053D":"X","\u053E":"C'","\u053F":"K","\u0540":"H","\u0541":"D'","\u0542":"GH","\u0543":"TW","\u0544":"M","\u0545":"Y","\u0546":"N","\u0547":"SH","\u0549":"CH","\u054A":"P","\u054B":"J","\u054C":"R'","\u054D":"S","\u054E":"V","\u054F":"T","\u0550":"R","\u0551":"C","\u0553":"P'","\u0554":"Q'","\u0555":"O''","\u0556":"F","\u0587":"EV","\u0621":"a","\u0622":"aa","\u0623":"a","\u0624":"u","\u0625":"i","\u0626":"e","\u0627":"a","\u0628":"b","\u0629":"h","\u062A":"t","\u062B":"th","\u062C":"j","\u062D":"h","\u062E":"kh","\u062F":"d","\u0630":"th","\u0631":"r","\u0632":"z","\u0633":"s","\u0634":"sh","\u0635":"s","\u0636":"dh","\u0637":"t","\u0638":"z","\u0639":"a","\u063A":"gh","\u0641":"f","\u0642":"q","\u0643":"k","\u0644":"l","\u0645":"m","\u0646":"n","\u0647":"h","\u0648":"w","\u0649":"a","\u064A":"y","\u064B":"an","\u064C":"on","\u064D":"en","\u064E":"a","\u064F":"u","\u0650":"e","\u0652":"","\u0660":"0","\u0661":"1","\u0662":"2","\u0663":"3","\u0664":"4","\u0665":"5","\u0666":"6","\u0667":"7","\u0668":"8","\u0669":"9","\u067E":"p","\u0686":"ch","\u0698":"zh","\u06A9":"k","\u06AF":"g","\u06CC":"y","\u06F0":"0","\u06F1":"1","\u06F2":"2","\u06F3":"3","\u06F4":"4","\u06F5":"5","\u06F6":"6","\u06F7":"7","\u06F8":"8","\u06F9":"9","\u0E3F":"baht","\u10D0":"a","\u10D1":"b","\u10D2":"g","\u10D3":"d","\u10D4":"e","\u10D5":"v","\u10D6":"z","\u10D7":"t","\u10D8":"i","\u10D9":"k","\u10DA":"l","\u10DB":"m","\u10DC":"n","\u10DD":"o","\u10DE":"p","\u10DF":"zh","\u10E0":"r","\u10E1":"s","\u10E2":"t","\u10E3":"u","\u10E4":"f","\u10E5":"k","\u10E6":"gh","\u10E7":"q","\u10E8":"sh","\u10E9":"ch","\u10EA":"ts","\u10EB":"dz","\u10EC":"ts","\u10ED":"ch","\u10EE":"kh","\u10EF":"j","\u10F0":"h","\u1E62":"S","\u1E63":"s","\u1E80":"W","\u1E81":"w","\u1E82":"W","\u1E83":"w","\u1E84":"W","\u1E85":"w","\u1E9E":"SS","\u1EA0":"A","\u1EA1":"a","\u1EA2":"A","\u1EA3":"a","\u1EA4":"A","\u1EA5":"a","\u1EA6":"A","\u1EA7":"a","\u1EA8":"A","\u1EA9":"a","\u1EAA":"A","\u1EAB":"a","\u1EAC":"A","\u1EAD":"a","\u1EAE":"A","\u1EAF":"a","\u1EB0":"A","\u1EB1":"a","\u1EB2":"A","\u1EB3":"a","\u1EB4":"A","\u1EB5":"a","\u1EB6":"A","\u1EB7":"a","\u1EB8":"E","\u1EB9":"e","\u1EBA":"E","\u1EBB":"e","\u1EBC":"E","\u1EBD":"e","\u1EBE":"E","\u1EBF":"e","\u1EC0":"E","\u1EC1":"e","\u1EC2":"E","\u1EC3":"e","\u1EC4":"E","\u1EC5":"e","\u1EC6":"E","\u1EC7":"e","\u1EC8":"I","\u1EC9":"i","\u1ECA":"I","\u1ECB":"i","\u1ECC":"O","\u1ECD":"o","\u1ECE":"O","\u1ECF":"o","\u1ED0":"O","\u1ED1":"o","\u1ED2":"O","\u1ED3":"o","\u1ED4":"O","\u1ED5":"o","\u1ED6":"O","\u1ED7":"o","\u1ED8":"O","\u1ED9":"o","\u1EDA":"O","\u1EDB":"o","\u1EDC":"O","\u1EDD":"o","\u1EDE":"O","\u1EDF":"o","\u1EE0":"O","\u1EE1":"o","\u1EE2":"O","\u1EE3":"o","\u1EE4":"U","\u1EE5":"u","\u1EE6":"U","\u1EE7":"u","\u1EE8":"U","\u1EE9":"u","\u1EEA":"U","\u1EEB":"u","\u1EEC":"U","\u1EED":"u","\u1EEE":"U","\u1EEF":"u","\u1EF0":"U","\u1EF1":"u","\u1EF2":"Y","\u1EF3":"y","\u1EF4":"Y","\u1EF5":"y","\u1EF6":"Y","\u1EF7":"y","\u1EF8":"Y","\u1EF9":"y","\u2013":"-","\u2018":"'","\u2019":"'","\u201C":"\\"","\u201D":"\\"","\u201E":"\\"","\u2020":"+","\u2022":"*","\u2026":"...","\u20A0":"ecu","\u20A2":"cruzeiro","\u20A3":"french franc","\u20A4":"lira","\u20A5":"mill","\u20A6":"naira","\u20A7":"peseta","\u20A8":"rupee","\u20A9":"won","\u20AA":"new shequel","\u20AB":"dong","\u20AC":"euro","\u20AD":"kip","\u20AE":"tugrik","\u20AF":"drachma","\u20B0":"penny","\u20B1":"peso","\u20B2":"guarani","\u20B3":"austral","\u20B4":"hryvnia","\u20B5":"cedi","\u20B8":"kazakhstani tenge","\u20B9":"indian rupee","\u20BA":"turkish lira","\u20BD":"russian ruble","\u20BF":"bitcoin","\u2120":"sm","\u2122":"tm","\u2202":"d","\u2206":"delta","\u2211":"sum","\u221E":"infinity","\u2665":"love","\u5143":"yuan","\u5186":"yen","\uFDFC":"rial","\uFEF5":"laa","\uFEF7":"laa","\uFEF9":"lai","\uFEFB":"la"}`),v=JSON.parse('{"bg":{"\u0419":"Y","\u0426":"Ts","\u0429":"Sht","\u042A":"A","\u042C":"Y","\u0439":"y","\u0446":"ts","\u0449":"sht","\u044A":"a","\u044C":"y"},"de":{"\xC4":"AE","\xE4":"ae","\xD6":"OE","\xF6":"oe","\xDC":"UE","\xFC":"ue","\xDF":"ss","%":"prozent","&":"und","|":"oder","\u2211":"summe","\u221E":"unendlich","\u2665":"liebe"},"es":{"%":"por ciento","&":"y","<":"menor que",">":"mayor que","|":"o","\xA2":"centavos","\xA3":"libras","\xA4":"moneda","\u20A3":"francos","\u2211":"suma","\u221E":"infinito","\u2665":"amor"},"fr":{"%":"pourcent","&":"et","<":"plus petit",">":"plus grand","|":"ou","\xA2":"centime","\xA3":"livre","\xA4":"devise","\u20A3":"franc","\u2211":"somme","\u221E":"infini","\u2665":"amour"},"pt":{"%":"porcento","&":"e","<":"menor",">":"maior","|":"ou","\xA2":"centavo","\u2211":"soma","\xA3":"libra","\u221E":"infinito","\u2665":"amor"},"uk":{"\u0418":"Y","\u0438":"y","\u0419":"Y","\u0439":"y","\u0426":"Ts","\u0446":"ts","\u0425":"Kh","\u0445":"kh","\u0429":"Shch","\u0449":"shch","\u0413":"H","\u0433":"h"},"vi":{"\u0110":"D","\u0111":"d"},"da":{"\xD8":"OE","\xF8":"oe","\xC5":"AA","\xE5":"aa","%":"procent","&":"og","|":"eller","$":"dollar","<":"mindre end",">":"st\xF8rre end"},"nb":{"&":"og","\xC5":"AA","\xC6":"AE","\xD8":"OE","\xE5":"aa","\xE6":"ae","\xF8":"oe"},"it":{"&":"e"},"nl":{"&":"en"},"sv":{"&":"och","\xC5":"AA","\xC4":"AE","\xD6":"OE","\xE5":"aa","\xE4":"ae","\xF6":"oe"}}');function k(m,l){if(typeof m!="string")throw new Error("slugify: string argument expected");l=typeof l=="string"?{replacement:l}:l||{};var p=v[l.locale]||{},E=l.replacement===void 0?"-":l.replacement,a=l.trim===void 0?!0:l.trim,n=m.normalize().split("").reduce(function(i,f){var d=p[f];return d===void 0&&(d=M[f]),d===void 0&&(d=f),d===E&&(d=" "),i+d.replace(l.remove||/[^\w\s$*_+~.()'"!\-:@]+/g,"")},"");return l.strict&&(n=n.replace(/[^A-Za-z0-9\s]/g,"")),a&&(n=n.trim()),n=n.replace(/\s+/g,E),l.lower&&(n=n.toLowerCase()),n}return k.extend=function(m){Object.assign(M,m)},k})})(yr);var Ni=yr.exports;const Ln={STR:"Str",DEX:"Dex",CON:"Con",INT:"Int",WIS:"Wis",CHA:"Cha"},qi="<i>{attack.distance}:</i> {attack.modifier} to hit, {attack.range}, {attack.targets}. <i>Hit:</i> {attack.damage}{attack.conditionalDamage}{attack.additionalDamage}. {attack.description}";function Hi(){const t=kt(),U=fn(),{processTokens:M,stripTags:v}=dn(),{t:k}=_t();return{renderImprovedInitJson:async()=>{const l=[Ni(t.name)],p={};p.Id=l[0],p.Name=t.name,p.Path="",p.Link="https://ebshimizu.github.io/5emm/",p.SearchHint=`${t.name}
${t.type}
${t.alignment}`,p.FilterDimensions={Level:un[t.CR].cr,Source:"Homebrew (Falindrith's Monster Maker)",Type:`${t.size} ${t.type}, ${t.alignment}`},p.LastUpdateMs=0,p.Version="1.0.0",p.Source="Homebrew (Falindrith's Monster Maker)",p.Type=`${t.size} ${t.type}, ${t.alignment}`,p.HP={Value:kn(t.HP.HD,t.HP.type)+t.HP.modifier,Notes:`(${t.HP.HD}d${t.HP.type}${Pt(t.HP.modifier)})`},p.InitiativeModifier=En(t.stats.DEX),p.InitiativeAdvantage=!1,p.Speed=[],t.speeds.forEach(i=>{var f;p.Speed.push(`${(f=i.type)!=null?f:"walk"} ${i.speed} ft.`)}),p.AC={Value:t.AC,Notes:t.ACType},p.Abilities={},p.Saves=[];for(const i in t.stats){p.Abilities[Ln[i]]=t.stats[i];const f=t.saves[i];f.override?p.Saves.push({Name:Ln[i],Modifier:f.overrideValue}):f.proficient&&p.Saves.push({Name:Ln[i],Modifier:t.defaultSaveBonus(i)})}p.DamageVulnerabilities=t.vulnerabilities,p.DamageResistances=t.resistances,p.DamageImmunities=t.immunities,p.ConditionImmunities=t.conditions,p.Skills=[];for(const i of t.skills){const f=i.skill.label;i.override?p.Skills.push({Name:f,Modifier:i.overrideValue}):p.Skills.push({Name:f,Modifier:t.defaultSkillBonus(i)})}p.Senses=[],Object.entries(t.senses).forEach(([i,f])=>{f>0&&p.Senses.push(`${i} ${f} ft.`)}),p.Senses.push(`passive Perception ${t.computedPassivePerception}`),t.sensesNotes&&p.Senses.push(M(t.sensesNotes,void 0,t,"none")),p.Languages=t.languages.split(","),p.Challenge=un[t.CR].cr,p.Traits=[];for(const i of t.traits){const f=M("{trait.name}{trait.limitedUse}",i,t,"trait");p.Traits.push({Name:f,Content:v(M(i.description,i,t,"trait"))})}p.Actions=[],t.multiattacks.length>0&&p.Actions.push({Name:"Multiattack",Content:v(M("{multiattack.all}. {multiattack.postscript}",t.multiattacks,t,"multiattack"))});for(const i of t.attacks)p.Actions.push({Name:i.name,Content:v(M(qi,i,t,"attack"))});const E=t.actions.filter(i=>!i.legendaryOnly&&!i.bonusAction);for(const i of E){const f=v(M("{action.name}{action.limitedUse}",i,t,"action"));p.Actions.push({Name:f,Content:v(M(i.description,i,t,"action"))})}const a=t.actions.filter(i=>i.bonusAction);for(const i of a){const f=v(M("{action.name}{action.limitedUse}",i,t,"action"));p.Actions.push({Name:f,Content:v(M(i.description,i,t,"action"))})}if(p.LegendaryActions=[],t.legendaryActions.actions.length>0)for(const i of t.legendaryActions.actions){const f=t.legendaryAction(i.actionId);if(f){const d=i.cost>1?k("editor.legendary.renderedCost",[i.cost]):"";let A="";f.type==="action"?f.action.legendaryOnly?A=M(f.action.description,f.action,t,"action"):A=M(k("presets.legendaryAction",[f.action.name]),void 0,t,"none"):f.type==="attack"&&(A=M(k("presets.legendaryAttack",[f.action.name]),void 0,t,"none")),p.LegendaryActions.push({Name:f.action.name+d,Content:v(A)})}}if(t.mythicActions.actions.length>0)for(const i of t.mythicActions.actions){const f=t.legendaryAction(i.actionId);if(f){const d=i.cost>1?k("editor.legendary.renderedCost",[i.cost]):"";let A="";f.type==="action"?f.action.legendaryOnly?A=M(f.action.description,f.action,t,"action"):A=M(k("presets.legendaryAction",[f.action.name]),void 0,t,"none"):f.type==="attack"&&(A=M(k("presets.legendaryAttack",[f.action.name]),void 0,t,"none")),p.MythicActions.push({Name:f.action.name+d,Content:v(A)})}}const n=t.spellcasting;if(n.standard.length>0){const i=[],f=t.knownSpellsOfLevel(0);f.length>0&&i.push(`> ${k("editor.spellcasting.slot.cantripLabel")} *${f.join(", ")}*  `),U.classSpellcastingSlots.value.forEach(y=>{i.push(`${y.renderedLabel} ${y.renderedSpells}`)});const A=`${U.classSpellcastingPreamble.value}
\u2022 ${i.join(`
\u2022 `)}`;p.Actions.push({Name:k("editor.spellcasting.class.label"),Content:v(A)})}if(n.atWill.length>0){const i=U.innateSpellcastingLists.value.map(f=>`${f.renderedLabel} ${f.renderedSpells}`).join(`
\u2022 `);p.Actions.push({Name:k("editor.spellcasting.innate.label"),Content:v(`${U.innateSpellcastingPreamble.value}
\u2022 ${i}`)})}if(p.Reactions=[],t.reactions.length>0)for(const i of t.reactions)p.Reactions.push({Name:i.name,Content:v(M(i.description,void 0,t,"none"))});return p.Description="",p.Player="",p.ImageURL="",JSON.stringify({Creatures:l,[`Creatures.${l[0]}`]:p})}}}var wr={exports:{}};/*! dom-to-image-more 16-10-2024 */(function(t,U){(M=>{let v=(()=>{let R=0;return{escape:function(c){return c.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")},isDataUrl:function(c){return c.search(/^(data:)/)!==-1},canvasToBlob:function(c){return c.toBlob?new Promise(function(q){c.toBlob(q)}):(q=>new Promise(function(B){var X=d(q.toDataURL().split(",")[1]),j=X.length,J=new Uint8Array(j);for(let N=0;N<j;N++)J[N]=X.charCodeAt(N);B(new Blob([J],{type:"image/png"}))}))(c)},resolveUrl:function(c,q){var B=document.implementation.createHTMLDocument(),X=B.createElement("base"),j=(B.head.appendChild(X),B.createElement("a"));return B.body.appendChild(j),X.href=q,j.href=c,j.href},getAndEncode:function(c){let q=n.impl.urlCache.find(function(B){return B.url===c});return q||(q={url:c,promise:null},n.impl.urlCache.push(q)),q.promise===null&&(n.impl.options.cacheBust&&(c+=(/\?/.test(c)?"&":"?")+new Date().getTime()),q.promise=new Promise(function(B){let X=n.impl.options.httpTimeout,j=new XMLHttpRequest;if(j.onreadystatechange=function(){if(j.readyState===4)if(300<=j.status)N?B(N):G(`cannot fetch resource: ${c}, status: `+j.status);else{let _=new FileReader;_.onloadend=function(){B(_.result)},_.readAsDataURL(j.response)}},j.ontimeout=function(){N?B(N):G(`timeout of ${X}ms occured while fetching resource: `+c)},j.responseType="blob",j.timeout=X,0<n.impl.options.useCredentialsFilters.length&&(n.impl.options.useCredentials=0<n.impl.options.useCredentialsFilters.filter(_=>0<=c.search(_)).length),n.impl.options.useCredentials&&(j.withCredentials=!0),n.impl.options.corsImg&&c.indexOf("http")===0&&c.indexOf(window.location.origin)===-1){var J=(n.impl.options.corsImg.method||"GET").toUpperCase()==="POST"?"POST":"GET";j.open(J,(n.impl.options.corsImg.url||"").replace("#{cors}",c),!0);let _=!1,x=n.impl.options.corsImg.headers||{},F=(Object.keys(x).forEach(function(W){x[W].indexOf("application/json")!==-1&&(_=!0),j.setRequestHeader(W,x[W])}),(W=>{try{return JSON.parse(JSON.stringify(W))}catch(ie){G("corsImg.data is missing or invalid:"+ie.toString())}})(n.impl.options.corsImg.data||""));Object.keys(F).forEach(function(W){typeof F[W]=="string"&&(F[W]=F[W].replace("#{cors}",c))}),j.send(_?JSON.stringify(F):F)}else j.open("GET",c,!0),j.send();let N;function G(_){console.error(_),B("")}n.impl.options.imagePlaceholder&&(J=n.impl.options.imagePlaceholder.split(/,/))&&J[1]&&(N=J[1])})),q.promise},uid:function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+R++},delay:function(c){return function(q){return new Promise(function(B){setTimeout(function(){B(q)},c)})}},asArray:function(c){var q=[],B=c.length;for(let X=0;X<B;X++)q.push(c[X]);return q},escapeXhtml:function(c){return c.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(c){return c!=="data:,"?new Promise(function(q,B){let X=document.createElementNS("http://www.w3.org/2000/svg","svg"),j=new Image;n.impl.options.useCredentials&&(j.crossOrigin="use-credentials"),j.onload=function(){document.body.removeChild(X),window&&window.requestAnimationFrame?window.requestAnimationFrame(function(){q(j)}):q(j)},j.onerror=J=>{document.body.removeChild(X),B(J)},X.appendChild(j),j.src=c,document.body.appendChild(X)}):Promise.resolve()},width:function(c){var q=D(c,"width");if(!isNaN(q))return q;var q=D(c,"border-left-width"),B=D(c,"border-right-width");return c.scrollWidth+q+B},height:function(c){var q=D(c,"height");if(!isNaN(q))return q;var q=D(c,"border-top-width"),B=D(c,"border-bottom-width");return c.scrollHeight+q+B},getWindow:P,isElement:$,isElementHostForOpenShadowRoot:function(c){return $(c)&&c.shadowRoot!==null},isShadowRoot:Y,isInShadowRoot:O,isHTMLElement:function(c){return c instanceof P(c).HTMLElement},isHTMLCanvasElement:function(c){return c instanceof P(c).HTMLCanvasElement},isHTMLInputElement:function(c){return c instanceof P(c).HTMLInputElement},isHTMLImageElement:function(c){return c instanceof P(c).HTMLImageElement},isHTMLLinkElement:function(c){return c instanceof P(c).HTMLLinkElement},isHTMLScriptElement:function(c){return c instanceof P(c).HTMLScriptElement},isHTMLStyleElement:function(c){return c instanceof P(c).HTMLStyleElement},isHTMLTextAreaElement:function(c){return c instanceof P(c).HTMLTextAreaElement},isShadowSlotElement:function(c){return O(c)&&c instanceof P(c).HTMLSlotElement},isSVGElement:function(c){return c instanceof P(c).SVGElement},isSVGRectElement:function(c){return c instanceof P(c).SVGRectElement},isDimensionMissing:function(c){return isNaN(c)||c<=0}};function P(c){return c=c?c.ownerDocument:void 0,(c?c.defaultView:void 0)||window||M}function Y(c){return c instanceof P(c).ShadowRoot}function O(c){return c!=null&&c.getRootNode!==void 0&&Y(c.getRootNode())}function $(c){return c instanceof P(c).Element}function D(c,q){if(c.nodeType===i){let B=f(c).getPropertyValue(q);if(B.slice(-2)==="px")return B=B.slice(0,-2),parseFloat(B)}return NaN}})(),k=(()=>{let R=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function($,D,c){return P($)?Promise.resolve($).then(Y).then(function(q){let B=Promise.resolve($);return q.forEach(function(X){B=B.then(function(j){return O(j,X,D,c)})}),B}):Promise.resolve($)},shouldProcess:P,impl:{readUrls:Y,inline:O}};function P($){return $.search(R)!==-1}function Y($){for(var D,c=[];(D=R.exec($))!==null;)c.push(D[1]);return c.filter(function(q){return!v.isDataUrl(q)})}function O($,D,c,q){return Promise.resolve(D).then(function(B){return c?v.resolveUrl(B,c):B}).then(q||v.getAndEncode).then(function(B){return $.replace((X=D,new RegExp(`(url\\(['"]?)(${v.escape(X)})(['"]?\\))`,"g")),`$1${B}$3`);var X})}})(),m={resolveAll:function(){return l().then(function(R){return Promise.all(R.map(function(P){return P.resolve()}))}).then(function(R){return R.join(`
`)})},impl:{readAll:l}};function l(){return Promise.resolve(v.asArray(document.styleSheets)).then(function(P){let Y=[];return P.forEach(function(O){var $=Object.getPrototypeOf(O);if(Object.prototype.hasOwnProperty.call($,"cssRules"))try{v.asArray(O.cssRules||[]).forEach(Y.push.bind(Y))}catch(D){console.error("domtoimage: Error while reading CSS rules from "+O.href,D.toString())}}),Y}).then(function(P){return P.filter(function(Y){return Y.type===CSSRule.FONT_FACE_RULE}).filter(function(Y){return k.shouldProcess(Y.style.getPropertyValue("src"))})}).then(function(P){return P.map(R)});function R(P){return{resolve:function(){var Y=(P.parentStyleSheet||{}).href;return k.inlineAll(P.cssText,Y)},src:function(){return P.style.getPropertyValue("src")}}}}let p={inlineAll:function R(P){if(!v.isElement(P))return Promise.resolve(P);return Y(P).then(function(){return v.isHTMLImageElement(P)?E(P).inline():Promise.all(v.asArray(P.childNodes).map(function(O){return R(O)}))});function Y(O){let $=["background","background-image"],D=$.map(function(c){let q=O.style.getPropertyValue(c),B=O.style.getPropertyPriority(c);return q?k.inlineAll(q).then(function(X){O.style.setProperty(c,X,B)}):Promise.resolve()});return Promise.all(D).then(function(){return O})}},impl:{newImage:E}};function E(R){return{inline:function(P){return v.isDataUrl(R.src)?Promise.resolve():Promise.resolve(R.src).then(P||v.getAndEncode).then(function(Y){return new Promise(function(O){R.onload=O,R.onerror=O,R.src=Y})})}}}let a={copyDefaultStyles:!0,imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1,useCredentialsFilters:[],httpTimeout:3e4,styleCaching:"strict",corsImg:void 0,adjustClonedNode:void 0},n={toSvg:A,toPng:function(R,P){return y(R,P).then(function(Y){return Y.toDataURL()})},toJpeg:function(R,P){return y(R,P).then(function(Y){return Y.toDataURL("image/jpeg",(P?P.quality:void 0)||1)})},toBlob:function(R,P){return y(R,P).then(v.canvasToBlob)},toPixelData:function(R,P){return y(R,P).then(function(Y){return Y.getContext("2d").getImageData(0,0,v.width(R),v.height(R)).data})},toCanvas:y,impl:{fontFaces:m,images:p,util:v,inliner:k,urlCache:[],options:{}}},i=(t.exports=n,(typeof Node!="undefined"?Node.ELEMENT_NODE:void 0)||1),f=(M!==void 0?M.getComputedStyle:void 0)||(typeof window!="undefined"?window.getComputedStyle:void 0)||globalThis.getComputedStyle,d=(M!==void 0?M.atob:void 0)||(typeof window!="undefined"?window.atob:void 0)||globalThis.atob;function A(R,P){n.impl.util.getWindow(R);var Y=P=P||{};Y.copyDefaultStyles===void 0?n.impl.options.copyDefaultStyles=a.copyDefaultStyles:n.impl.options.copyDefaultStyles=Y.copyDefaultStyles,n.impl.options.imagePlaceholder=(Y.imagePlaceholder===void 0?a:Y).imagePlaceholder,n.impl.options.cacheBust=(Y.cacheBust===void 0?a:Y).cacheBust,n.impl.options.corsImg=(Y.corsImg===void 0?a:Y).corsImg,n.impl.options.useCredentials=(Y.useCredentials===void 0?a:Y).useCredentials,n.impl.options.useCredentialsFilters=(Y.useCredentialsFilters===void 0?a:Y).useCredentialsFilters,n.impl.options.httpTimeout=(Y.httpTimeout===void 0?a:Y).httpTimeout,n.impl.options.styleCaching=(Y.styleCaching===void 0?a:Y).styleCaching;let O=[];return Promise.resolve(R).then(function($){if($.nodeType===i)return $;var D=$,c=$.parentNode,q=document.createElement("span");return c.replaceChild(q,D),q.append($),O.push({parent:c,child:D,wrapper:q}),q}).then(function($){return function D(c,q,B,X){let j=q.filter;if(c===g||v.isHTMLScriptElement(c)||v.isHTMLStyleElement(c)||v.isHTMLLinkElement(c)||B!==null&&j&&!j(c))return Promise.resolve();return Promise.resolve(c).then(J).then(N).then(function(W){return x(W,_(c))}).then(G).then(function(W){return F(W,c)});function J(W){return v.isHTMLCanvasElement(W)?v.makeImage(W.toDataURL()):W.cloneNode(!1)}function N(W){return q.adjustClonedNode&&q.adjustClonedNode(c,W,!1),Promise.resolve(W)}function G(W){return q.adjustClonedNode&&q.adjustClonedNode(c,W,!0),Promise.resolve(W)}function _(W){return v.isElementHostForOpenShadowRoot(W)?W.shadowRoot:W}function x(W,ie){let me=fe(ie),ce=Promise.resolve();if(me.length!==0){let r=f(ve(ie));v.asArray(me).forEach(function(s){ce=ce.then(function(){return D(s,q,r).then(function(b){b&&W.appendChild(b)})})})}return ce.then(function(){return W});function ve(r){return v.isShadowRoot(r)?r.host:r}function fe(r){if(v.isShadowSlotElement(r)){let s=r.assignedNodes();if(s&&0<s.length)return s}return r.childNodes}}function F(W,ie){return!v.isElement(W)||v.isShadowSlotElement(ie)?Promise.resolve(W):Promise.resolve().then(me).then(ce).then(ve).then(fe).then(function(){return W});function me(){function r(b,H){H.font=b.font,H.fontFamily=b.fontFamily,H.fontFeatureSettings=b.fontFeatureSettings,H.fontKerning=b.fontKerning,H.fontSize=b.fontSize,H.fontStretch=b.fontStretch,H.fontStyle=b.fontStyle,H.fontVariant=b.fontVariant,H.fontVariantCaps=b.fontVariantCaps,H.fontVariantEastAsian=b.fontVariantEastAsian,H.fontVariantLigatures=b.fontVariantLigatures,H.fontVariantNumeric=b.fontVariantNumeric,H.fontVariationSettings=b.fontVariationSettings,H.fontWeight=b.fontWeight}function s(b,H){let V=f(b);V.cssText?(H.style.cssText=V.cssText,r(V,H.style)):(w(q,b,V,B,H),B===null&&(["inset-block","inset-block-start","inset-block-end"].forEach(K=>H.style.removeProperty(K)),["left","right","top","bottom"].forEach(K=>{H.style.getPropertyValue(K)&&H.style.setProperty(K,"0px")})))}s(ie,W)}function ce(){let r=v.uid();function s(b){let H=f(ie,b),V=H.getPropertyValue("content");if(V!==""&&V!=="none"){let be=function(){let Ce=`.${r}:`+b,He=(H.cssText?ke:et)();return document.createTextNode(Ce+`{${He}}`);function ke(){return`${H.cssText} content: ${V};`}function et(){return v.asArray(H).map(ye).join("; ")+";";function ye(_e){let xe=H.getPropertyValue(_e),Fe=H.getPropertyPriority(_e)?" !important":"";return _e+": "+xe+Fe}}},K=W.getAttribute("class")||"",ae=(W.setAttribute("class",K+" "+r),document.createElement("style"));ae.appendChild(be()),W.appendChild(ae)}}[":before",":after"].forEach(function(b){s(b)})}function ve(){v.isHTMLTextAreaElement(ie)&&(W.innerHTML=ie.value),v.isHTMLInputElement(ie)&&W.setAttribute("value",ie.value)}function fe(){v.isSVGElement(W)&&(W.setAttribute("xmlns","http://www.w3.org/2000/svg"),v.isSVGRectElement(W))&&["width","height"].forEach(function(r){let s=W.getAttribute(r);s&&W.style.setProperty(r,s)})}}}($,P,null)}).then(P.disableEmbedFonts?Promise.resolve(R):L).then(C).then(function($){P.bgcolor&&($.style.backgroundColor=P.bgcolor),P.width&&($.style.width=P.width+"px"),P.height&&($.style.height=P.height+"px"),P.style&&Object.keys(P.style).forEach(function(c){$.style[c]=P.style[c]});let D=null;return typeof P.onclone=="function"&&(D=P.onclone($)),Promise.resolve(D).then(function(){return $})}).then(function($){let D=P.width||v.width($),c=P.height||v.height($);return Promise.resolve($).then(function(q){return q.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(q)}).then(v.escapeXhtml).then(function(q){var B=(v.isDimensionMissing(D)?' width="100%"':` width="${D}"`)+(v.isDimensionMissing(c)?' height="100%"':` height="${c}"`);return`<svg xmlns="http://www.w3.org/2000/svg"${(v.isDimensionMissing(D)?"":` width="${D}"`)+(v.isDimensionMissing(c)?"":` height="${c}"`)}><foreignObject${B}>${q}</foreignObject></svg>`}).then(function(q){return"data:image/svg+xml;charset=utf-8,"+q})}).then(function($){for(;0<O.length;){var D=O.pop();D.parent.replaceChild(D.child,D.wrapper)}return $}).then(function($){return n.impl.urlCache=[],g&&(document.body.removeChild(g),g=null),h&&clearTimeout(h),h=setTimeout(()=>{h=null,u={}},2e4),$})}function y(R,P){return A(R,P=P||{}).then(v.makeImage).then(function(Y){var O=typeof P.scale!="number"?1:P.scale,$=((c,q)=>{let B=P.width||v.width(c),X=P.height||v.height(c);return v.isDimensionMissing(B)&&(B=v.isDimensionMissing(X)?300:2*X),v.isDimensionMissing(X)&&(X=B/2),(c=document.createElement("canvas")).width=B*q,c.height=X*q,P.bgcolor&&((q=c.getContext("2d")).fillStyle=P.bgcolor,q.fillRect(0,0,c.width,c.height)),c})(R,O),D=$.getContext("2d");return D.msImageSmoothingEnabled=!1,D.imageSmoothingEnabled=!1,Y&&(D.scale(O,O),D.drawImage(Y,0,0)),$})}let g=null;function L(R){return m.resolveAll().then(function(P){var Y;return P!==""&&(Y=document.createElement("style"),R.appendChild(Y),Y.appendChild(document.createTextNode(P))),R})}function C(R){return p.inlineAll(R).then(function(){return R})}function w(R,P,Y,O,$){let D=n.impl.options.copyDefaultStyles?((q,B)=>{var X,j=(G=>(q.styleCaching!=="relaxed"?G:G.filter((_,x,F)=>x===0||x===F.length-1)).join(">"))(B=(G=>{var _=[];do if(G.nodeType===i){var x=G.tagName;if(_.push(x),T.includes(x))break}while(G=G.parentNode);return _})(B));{if(u[j])return u[j];B=((G,_)=>{let x=G.body;do{var F=_.pop(),F=G.createElement(F);x.appendChild(F),x=F}while(0<_.length);return x.textContent="\u200B",x})((X=(()=>{if(g)return g.contentWindow;_=document.characterSet||"UTF-8",G=(G=document.doctype)?(`<!DOCTYPE ${ce(G.name)} ${ce(G.publicId)} `+ce(G.systemId)).trim()+">":"",(g=document.createElement("iframe")).id="domtoimage-sandbox-"+v.uid(),g.style.visibility="hidden",g.style.position="fixed",document.body.appendChild(g);var G,_,x=g,F="domtoimage-sandbox";try{return x.contentWindow.document.write(G+`<html><head><meta charset='${_}'><title>${F}</title></head><body></body></html>`),x.contentWindow}catch{}var W=document.createElement("meta");W.setAttribute("charset",_);try{var ie=document.implementation.createHTMLDocument(F),me=(ie.head.appendChild(W),G+ie.documentElement.outerHTML);return x.setAttribute("srcdoc",me),x.contentWindow}catch{}return x.contentDocument.head.appendChild(W),x.contentDocument.title=F,x.contentWindow;function ce(ve){var fe;return ve?((fe=document.createElement("div")).innerText=ve,fe.innerHTML):""}})()).document,B),X=((G,_)=>{let x={},F=G.getComputedStyle(_);return v.asArray(F).forEach(function(W){x[W]=W==="width"||W==="height"?"auto":F.getPropertyValue(W)}),x})(X,B);var J=B;do{var N=J.parentElement;N!==null&&N.removeChild(J),J=N}while(J&&J.tagName!=="BODY");return u[j]=X}})(R,P):{},c=$.style;v.asArray(Y).forEach(function(q){var B,X=Y.getPropertyValue(q),j=D[q],J=O?O.getPropertyValue(q):void 0;c.getPropertyValue(q)||(X!==j||O&&X!==J)&&(j=Y.getPropertyPriority(q),J=c,X=X,j=j,B=0<=["background-clip"].indexOf(q=q),j?(J.setProperty(q,X,j),B&&J.setProperty("-webkit-"+q,X,j)):(J.setProperty(q,X),B&&J.setProperty("-webkit-"+q,X)))})}let h=null,u={},T=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DETAILS","DIALOG","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","SVG","TABLE","UL","math","svg","BODY","HEAD","HTML"]})(cr)})(wr);var Fi=wr.exports,_r={exports:{}};/*! For license information please see json-url-single.js.LICENSE.txt */(function(t,U){(function(M,v){t.exports=v()})(window,function(){return function(M){function v(i){for(var f,d,A=i[0],y=i[1],g=0,L=[];g<A.length;g++)d=A[g],Object.prototype.hasOwnProperty.call(m,d)&&m[d]&&L.push(m[d][0]),m[d]=0;for(f in y)Object.prototype.hasOwnProperty.call(y,f)&&(M[f]=y[f]);for(n&&n(i);L.length;)L.shift()()}var k={},m={0:0};function l(i){if(k[i])return k[i].exports;var f=k[i]={i,l:!1,exports:{}};return M[i].call(f.exports,f,f.exports,l),f.l=!0,f.exports}l.e=function(){return Promise.resolve()},l.m=M,l.c=k,l.d=function(i,f,d){l.o(i,f)||Object.defineProperty(i,f,{enumerable:!0,get:d})},l.r=function(i){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},l.t=function(i,f){if(1&f&&(i=l(i)),8&f||4&f&&typeof i=="object"&&i&&i.__esModule)return i;var d=Object.create(null);if(l.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:i}),2&f&&typeof i!="string")for(var A in i)l.d(d,A,function(y){return i[y]}.bind(null,A));return d},l.n=function(i){var f=i&&i.__esModule?function(){return i.default}:function(){return i};return l.d(f,"a",f),f},l.o=function(i,f){return Object.prototype.hasOwnProperty.call(i,f)},l.p="",l.oe=function(i){throw console.error(i),i};var p=window.webpackJsonpJsonUrl=window.webpackJsonpJsonUrl||[],E=p.push.bind(p);p.push=v,p=p.slice();for(var a=0;a<p.length;a++)v(p[a]);var n=E;return l(l.s=50)}([function(M,v,k){var m=k(26)();M.exports=m;try{regeneratorRuntime=m}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=m:Function("r","regeneratorRuntime = r")(m)}},function(M,v){function k(m,l,p,E,a,n,i){try{var f=m[n](i),d=f.value}catch(A){return void p(A)}f.done?l(d):Promise.resolve(d).then(E,a)}M.exports=function(m){return function(){var l=this,p=arguments;return new Promise(function(E,a){var n=m.apply(l,p);function i(d){k(n,E,a,i,f,"next",d)}function f(d){k(n,E,a,i,f,"throw",d)}i(void 0)})}},M.exports.__esModule=!0,M.exports.default=M.exports},function(M,v,k){var m=k(1),l=k.n(m),p=k(0),E=k.n(p);v.a={msgpack:function(){return l()(E.a.mark(function a(){var n,i;return E.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Promise.resolve().then(k.t.bind(null,30,7));case 2:return n=f.sent,i=n.default||n,f.abrupt("return",i());case 5:case"end":return f.stop()}},a)}))()},safe64:function(){return l()(E.a.mark(function a(){return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve().then(k.t.bind(null,45,7));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},a)}))()},lzma:function(){return l()(E.a.mark(function a(){var n;return E.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Promise.resolve().then(k.t.bind(null,47,7));case 2:return n=i.sent,i.abrupt("return",n.compress?n:n.LZMA);case 4:case"end":return i.stop()}},a)}))()},lzstring:function(){return l()(E.a.mark(function a(){return E.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.resolve().then(k.t.bind(null,48,7));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},a)}))()},lzw:function(){return l()(E.a.mark(function a(){var n,i;return E.a.wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return f.next=2,Promise.resolve().then(k.t.bind(null,49,7));case 2:return n=f.sent,i=n.default||n,f.abrupt("return",i);case 5:case"end":return f.stop()}},a)}))()}}},function(M,v,k){var m=k(28),l=k(29),p=k(13);function E(){return n.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(r,s){if(E()<s)throw new RangeError("Invalid typed array length");return n.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(s)).__proto__=n.prototype:(r===null&&(r=new n(s)),r.length=s),r}function n(r,s,b){if(!(n.TYPED_ARRAY_SUPPORT||this instanceof n))return new n(r,s,b);if(typeof r=="number"){if(typeof s=="string")throw new Error("If encoding is specified then the first argument must be a string");return d(this,r)}return i(this,r,s,b)}function i(r,s,b,H){if(typeof s=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer!="undefined"&&s instanceof ArrayBuffer?function(V,K,ae,be){if(K.byteLength,ae<0||K.byteLength<ae)throw new RangeError("'offset' is out of bounds");if(K.byteLength<ae+(be||0))throw new RangeError("'length' is out of bounds");return K=ae===void 0&&be===void 0?new Uint8Array(K):be===void 0?new Uint8Array(K,ae):new Uint8Array(K,ae,be),n.TYPED_ARRAY_SUPPORT?(V=K).__proto__=n.prototype:V=A(V,K),V}(r,s,b,H):typeof s=="string"?function(V,K,ae){if(typeof ae=="string"&&ae!==""||(ae="utf8"),!n.isEncoding(ae))throw new TypeError('"encoding" must be a valid string encoding');var be=0|g(K,ae);V=a(V,be);var Ce=V.write(K,ae);return Ce!==be&&(V=V.slice(0,Ce)),V}(r,s,b):function(V,K){if(n.isBuffer(K)){var ae=0|y(K.length);return(V=a(V,ae)).length===0||K.copy(V,0,0,ae),V}if(K){if(typeof ArrayBuffer!="undefined"&&K.buffer instanceof ArrayBuffer||"length"in K)return typeof K.length!="number"||(be=K.length)!=be?a(V,0):A(V,K);if(K.type==="Buffer"&&p(K.data))return A(V,K.data)}var be;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(r,s)}function f(r){if(typeof r!="number")throw new TypeError('"size" argument must be a number');if(r<0)throw new RangeError('"size" argument must not be negative')}function d(r,s){if(f(s),r=a(r,s<0?0:0|y(s)),!n.TYPED_ARRAY_SUPPORT)for(var b=0;b<s;++b)r[b]=0;return r}function A(r,s){var b=s.length<0?0:0|y(s.length);r=a(r,b);for(var H=0;H<b;H+=1)r[H]=255&s[H];return r}function y(r){if(r>=E())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+E().toString(16)+" bytes");return 0|r}function g(r,s){if(n.isBuffer(r))return r.length;if(typeof ArrayBuffer!="undefined"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(r)||r instanceof ArrayBuffer))return r.byteLength;typeof r!="string"&&(r=""+r);var b=r.length;if(b===0)return 0;for(var H=!1;;)switch(s){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":case void 0:return ce(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*b;case"hex":return b>>>1;case"base64":return ve(r).length;default:if(H)return ce(r).length;s=(""+s).toLowerCase(),H=!0}}function L(r,s,b){var H=!1;if((s===void 0||s<0)&&(s=0),s>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0)<=(s>>>=0))return"";for(r||(r="utf8");;)switch(r){case"hex":return X(this,s,b);case"utf8":case"utf-8":return D(this,s,b);case"ascii":return q(this,s,b);case"latin1":case"binary":return B(this,s,b);case"base64":return $(this,s,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,s,b);default:if(H)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),H=!0}}function C(r,s,b){var H=r[s];r[s]=r[b],r[b]=H}function w(r,s,b,H,V){if(r.length===0)return-1;if(typeof b=="string"?(H=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,isNaN(b)&&(b=V?0:r.length-1),b<0&&(b=r.length+b),b>=r.length){if(V)return-1;b=r.length-1}else if(b<0){if(!V)return-1;b=0}if(typeof s=="string"&&(s=n.from(s,H)),n.isBuffer(s))return s.length===0?-1:h(r,s,b,H,V);if(typeof s=="number")return s&=255,n.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?V?Uint8Array.prototype.indexOf.call(r,s,b):Uint8Array.prototype.lastIndexOf.call(r,s,b):h(r,[s],b,H,V);throw new TypeError("val must be string, number or Buffer")}function h(r,s,b,H,V){var K,ae=1,be=r.length,Ce=s.length;if(H!==void 0&&((H=String(H).toLowerCase())==="ucs2"||H==="ucs-2"||H==="utf16le"||H==="utf-16le")){if(r.length<2||s.length<2)return-1;ae=2,be/=2,Ce/=2,b/=2}function He(ye,_e){return ae===1?ye[_e]:ye.readUInt16BE(_e*ae)}if(V){var ke=-1;for(K=b;K<be;K++)if(He(r,K)===He(s,ke===-1?0:K-ke)){if(ke===-1&&(ke=K),K-ke+1===Ce)return ke*ae}else ke!==-1&&(K-=K-ke),ke=-1}else for(b+Ce>be&&(b=be-Ce),K=b;K>=0;K--){for(var et=!0,ue=0;ue<Ce;ue++)if(He(r,K+ue)!==He(s,ue)){et=!1;break}if(et)return K}return-1}function u(r,s,b,H){b=Number(b)||0;var V=r.length-b;H?(H=Number(H))>V&&(H=V):H=V;var K=s.length;if(K%2!=0)throw new TypeError("Invalid hex string");H>K/2&&(H=K/2);for(var ae=0;ae<H;++ae){var be=parseInt(s.substr(2*ae,2),16);if(isNaN(be))return ae;r[b+ae]=be}return ae}function T(r,s,b,H){return fe(ce(s,r.length-b),r,b,H)}function R(r,s,b,H){return fe(function(V){for(var K=[],ae=0;ae<V.length;++ae)K.push(255&V.charCodeAt(ae));return K}(s),r,b,H)}function P(r,s,b,H){return R(r,s,b,H)}function Y(r,s,b,H){return fe(ve(s),r,b,H)}function O(r,s,b,H){return fe(function(V,K){for(var ae,be,Ce,He=[],ke=0;ke<V.length&&!((K-=2)<0);++ke)be=(ae=V.charCodeAt(ke))>>8,Ce=ae%256,He.push(Ce),He.push(be);return He}(s,r.length-b),r,b,H)}function $(r,s,b){return s===0&&b===r.length?m.fromByteArray(r):m.fromByteArray(r.slice(s,b))}function D(r,s,b){b=Math.min(r.length,b);for(var H=[],V=s;V<b;){var K,ae,be,Ce,He=r[V],ke=null,et=He>239?4:He>223?3:He>191?2:1;if(V+et<=b)switch(et){case 1:He<128&&(ke=He);break;case 2:(192&(K=r[V+1]))==128&&(Ce=(31&He)<<6|63&K)>127&&(ke=Ce);break;case 3:K=r[V+1],ae=r[V+2],(192&K)==128&&(192&ae)==128&&(Ce=(15&He)<<12|(63&K)<<6|63&ae)>2047&&(Ce<55296||Ce>57343)&&(ke=Ce);break;case 4:K=r[V+1],ae=r[V+2],be=r[V+3],(192&K)==128&&(192&ae)==128&&(192&be)==128&&(Ce=(15&He)<<18|(63&K)<<12|(63&ae)<<6|63&be)>65535&&Ce<1114112&&(ke=Ce)}ke===null?(ke=65533,et=1):ke>65535&&(ke-=65536,H.push(ke>>>10&1023|55296),ke=56320|1023&ke),H.push(ke),V+=et}return function(ue){var ye=ue.length;if(ye<=c)return String.fromCharCode.apply(String,ue);for(var _e="",xe=0;xe<ye;)_e+=String.fromCharCode.apply(String,ue.slice(xe,xe+=c));return _e}(H)}v.Buffer=n,v.SlowBuffer=function(r){return+r!=r&&(r=0),n.alloc(+r)},v.INSPECT_MAX_BYTES=50,n.TYPED_ARRAY_SUPPORT=window.TYPED_ARRAY_SUPPORT!==void 0?window.TYPED_ARRAY_SUPPORT:function(){try{var r=new Uint8Array(1);return r.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},r.foo()===42&&typeof r.subarray=="function"&&r.subarray(1,1).byteLength===0}catch{return!1}}(),v.kMaxLength=E(),n.poolSize=8192,n._augment=function(r){return r.__proto__=n.prototype,r},n.from=function(r,s,b){return i(null,r,s,b)},n.TYPED_ARRAY_SUPPORT&&(n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array,typeof Symbol!="undefined"&&Symbol.species&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0})),n.alloc=function(r,s,b){return function(H,V,K,ae){return f(V),V<=0?a(H,V):K!==void 0?typeof ae=="string"?a(H,V).fill(K,ae):a(H,V).fill(K):a(H,V)}(null,r,s,b)},n.allocUnsafe=function(r){return d(null,r)},n.allocUnsafeSlow=function(r){return d(null,r)},n.isBuffer=function(r){return!(r==null||!r._isBuffer)},n.compare=function(r,s){if(!n.isBuffer(r)||!n.isBuffer(s))throw new TypeError("Arguments must be Buffers");if(r===s)return 0;for(var b=r.length,H=s.length,V=0,K=Math.min(b,H);V<K;++V)if(r[V]!==s[V]){b=r[V],H=s[V];break}return b<H?-1:H<b?1:0},n.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(r,s){if(!p(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return n.alloc(0);var b;if(s===void 0)for(s=0,b=0;b<r.length;++b)s+=r[b].length;var H=n.allocUnsafe(s),V=0;for(b=0;b<r.length;++b){var K=r[b];if(!n.isBuffer(K))throw new TypeError('"list" argument must be an Array of Buffers');K.copy(H,V),V+=K.length}return H},n.byteLength=g,n.prototype._isBuffer=!0,n.prototype.swap16=function(){var r=this.length;if(r%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var s=0;s<r;s+=2)C(this,s,s+1);return this},n.prototype.swap32=function(){var r=this.length;if(r%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var s=0;s<r;s+=4)C(this,s,s+3),C(this,s+1,s+2);return this},n.prototype.swap64=function(){var r=this.length;if(r%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var s=0;s<r;s+=8)C(this,s,s+7),C(this,s+1,s+6),C(this,s+2,s+5),C(this,s+3,s+4);return this},n.prototype.toString=function(){var r=0|this.length;return r===0?"":arguments.length===0?D(this,0,r):L.apply(this,arguments)},n.prototype.equals=function(r){if(!n.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||n.compare(this,r)===0},n.prototype.inspect=function(){var r="",s=v.INSPECT_MAX_BYTES;return this.length>0&&(r=this.toString("hex",0,s).match(/.{2}/g).join(" "),this.length>s&&(r+=" ... ")),"<Buffer "+r+">"},n.prototype.compare=function(r,s,b,H,V){if(!n.isBuffer(r))throw new TypeError("Argument must be a Buffer");if(s===void 0&&(s=0),b===void 0&&(b=r?r.length:0),H===void 0&&(H=0),V===void 0&&(V=this.length),s<0||b>r.length||H<0||V>this.length)throw new RangeError("out of range index");if(H>=V&&s>=b)return 0;if(H>=V)return-1;if(s>=b)return 1;if(this===r)return 0;for(var K=(V>>>=0)-(H>>>=0),ae=(b>>>=0)-(s>>>=0),be=Math.min(K,ae),Ce=this.slice(H,V),He=r.slice(s,b),ke=0;ke<be;++ke)if(Ce[ke]!==He[ke]){K=Ce[ke],ae=He[ke];break}return K<ae?-1:ae<K?1:0},n.prototype.includes=function(r,s,b){return this.indexOf(r,s,b)!==-1},n.prototype.indexOf=function(r,s,b){return w(this,r,s,b,!0)},n.prototype.lastIndexOf=function(r,s,b){return w(this,r,s,b,!1)},n.prototype.write=function(r,s,b,H){if(s===void 0)H="utf8",b=this.length,s=0;else if(b===void 0&&typeof s=="string")H=s,b=this.length,s=0;else{if(!isFinite(s))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");s|=0,isFinite(b)?(b|=0,H===void 0&&(H="utf8")):(H=b,b=void 0)}var V=this.length-s;if((b===void 0||b>V)&&(b=V),r.length>0&&(b<0||s<0)||s>this.length)throw new RangeError("Attempt to write outside buffer bounds");H||(H="utf8");for(var K=!1;;)switch(H){case"hex":return u(this,r,s,b);case"utf8":case"utf-8":return T(this,r,s,b);case"ascii":return R(this,r,s,b);case"latin1":case"binary":return P(this,r,s,b);case"base64":return Y(this,r,s,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,r,s,b);default:if(K)throw new TypeError("Unknown encoding: "+H);H=(""+H).toLowerCase(),K=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var c=4096;function q(r,s,b){var H="";b=Math.min(r.length,b);for(var V=s;V<b;++V)H+=String.fromCharCode(127&r[V]);return H}function B(r,s,b){var H="";b=Math.min(r.length,b);for(var V=s;V<b;++V)H+=String.fromCharCode(r[V]);return H}function X(r,s,b){var H=r.length;(!s||s<0)&&(s=0),(!b||b<0||b>H)&&(b=H);for(var V="",K=s;K<b;++K)V+=me(r[K]);return V}function j(r,s,b){for(var H=r.slice(s,b),V="",K=0;K<H.length;K+=2)V+=String.fromCharCode(H[K]+256*H[K+1]);return V}function J(r,s,b){if(r%1!=0||r<0)throw new RangeError("offset is not uint");if(r+s>b)throw new RangeError("Trying to access beyond buffer length")}function N(r,s,b,H,V,K){if(!n.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(s>V||s<K)throw new RangeError('"value" argument is out of bounds');if(b+H>r.length)throw new RangeError("Index out of range")}function G(r,s,b,H){s<0&&(s=65535+s+1);for(var V=0,K=Math.min(r.length-b,2);V<K;++V)r[b+V]=(s&255<<8*(H?V:1-V))>>>8*(H?V:1-V)}function _(r,s,b,H){s<0&&(s=4294967295+s+1);for(var V=0,K=Math.min(r.length-b,4);V<K;++V)r[b+V]=s>>>8*(H?V:3-V)&255}function x(r,s,b,H,V,K){if(b+H>r.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function F(r,s,b,H,V){return V||x(r,0,b,4),l.write(r,s,b,H,23,4),b+4}function W(r,s,b,H,V){return V||x(r,0,b,8),l.write(r,s,b,H,52,8),b+8}n.prototype.slice=function(r,s){var b,H=this.length;if((r=~~r)<0?(r+=H)<0&&(r=0):r>H&&(r=H),(s=s===void 0?H:~~s)<0?(s+=H)<0&&(s=0):s>H&&(s=H),s<r&&(s=r),n.TYPED_ARRAY_SUPPORT)(b=this.subarray(r,s)).__proto__=n.prototype;else{var V=s-r;b=new n(V,void 0);for(var K=0;K<V;++K)b[K]=this[K+r]}return b},n.prototype.readUIntLE=function(r,s,b){r|=0,s|=0,b||J(r,s,this.length);for(var H=this[r],V=1,K=0;++K<s&&(V*=256);)H+=this[r+K]*V;return H},n.prototype.readUIntBE=function(r,s,b){r|=0,s|=0,b||J(r,s,this.length);for(var H=this[r+--s],V=1;s>0&&(V*=256);)H+=this[r+--s]*V;return H},n.prototype.readUInt8=function(r,s){return s||J(r,1,this.length),this[r]},n.prototype.readUInt16LE=function(r,s){return s||J(r,2,this.length),this[r]|this[r+1]<<8},n.prototype.readUInt16BE=function(r,s){return s||J(r,2,this.length),this[r]<<8|this[r+1]},n.prototype.readUInt32LE=function(r,s){return s||J(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},n.prototype.readUInt32BE=function(r,s){return s||J(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},n.prototype.readIntLE=function(r,s,b){r|=0,s|=0,b||J(r,s,this.length);for(var H=this[r],V=1,K=0;++K<s&&(V*=256);)H+=this[r+K]*V;return H>=(V*=128)&&(H-=Math.pow(2,8*s)),H},n.prototype.readIntBE=function(r,s,b){r|=0,s|=0,b||J(r,s,this.length);for(var H=s,V=1,K=this[r+--H];H>0&&(V*=256);)K+=this[r+--H]*V;return K>=(V*=128)&&(K-=Math.pow(2,8*s)),K},n.prototype.readInt8=function(r,s){return s||J(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},n.prototype.readInt16LE=function(r,s){s||J(r,2,this.length);var b=this[r]|this[r+1]<<8;return 32768&b?4294901760|b:b},n.prototype.readInt16BE=function(r,s){s||J(r,2,this.length);var b=this[r+1]|this[r]<<8;return 32768&b?4294901760|b:b},n.prototype.readInt32LE=function(r,s){return s||J(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},n.prototype.readInt32BE=function(r,s){return s||J(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},n.prototype.readFloatLE=function(r,s){return s||J(r,4,this.length),l.read(this,r,!0,23,4)},n.prototype.readFloatBE=function(r,s){return s||J(r,4,this.length),l.read(this,r,!1,23,4)},n.prototype.readDoubleLE=function(r,s){return s||J(r,8,this.length),l.read(this,r,!0,52,8)},n.prototype.readDoubleBE=function(r,s){return s||J(r,8,this.length),l.read(this,r,!1,52,8)},n.prototype.writeUIntLE=function(r,s,b,H){r=+r,s|=0,b|=0,H||N(this,r,s,b,Math.pow(2,8*b)-1,0);var V=1,K=0;for(this[s]=255&r;++K<b&&(V*=256);)this[s+K]=r/V&255;return s+b},n.prototype.writeUIntBE=function(r,s,b,H){r=+r,s|=0,b|=0,H||N(this,r,s,b,Math.pow(2,8*b)-1,0);var V=b-1,K=1;for(this[s+V]=255&r;--V>=0&&(K*=256);)this[s+V]=r/K&255;return s+b},n.prototype.writeUInt8=function(r,s,b){return r=+r,s|=0,b||N(this,r,s,1,255,0),n.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),this[s]=255&r,s+1},n.prototype.writeUInt16LE=function(r,s,b){return r=+r,s|=0,b||N(this,r,s,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[s]=255&r,this[s+1]=r>>>8):G(this,r,s,!0),s+2},n.prototype.writeUInt16BE=function(r,s,b){return r=+r,s|=0,b||N(this,r,s,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[s]=r>>>8,this[s+1]=255&r):G(this,r,s,!1),s+2},n.prototype.writeUInt32LE=function(r,s,b){return r=+r,s|=0,b||N(this,r,s,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[s+3]=r>>>24,this[s+2]=r>>>16,this[s+1]=r>>>8,this[s]=255&r):_(this,r,s,!0),s+4},n.prototype.writeUInt32BE=function(r,s,b){return r=+r,s|=0,b||N(this,r,s,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[s]=r>>>24,this[s+1]=r>>>16,this[s+2]=r>>>8,this[s+3]=255&r):_(this,r,s,!1),s+4},n.prototype.writeIntLE=function(r,s,b,H){if(r=+r,s|=0,!H){var V=Math.pow(2,8*b-1);N(this,r,s,b,V-1,-V)}var K=0,ae=1,be=0;for(this[s]=255&r;++K<b&&(ae*=256);)r<0&&be===0&&this[s+K-1]!==0&&(be=1),this[s+K]=(r/ae>>0)-be&255;return s+b},n.prototype.writeIntBE=function(r,s,b,H){if(r=+r,s|=0,!H){var V=Math.pow(2,8*b-1);N(this,r,s,b,V-1,-V)}var K=b-1,ae=1,be=0;for(this[s+K]=255&r;--K>=0&&(ae*=256);)r<0&&be===0&&this[s+K+1]!==0&&(be=1),this[s+K]=(r/ae>>0)-be&255;return s+b},n.prototype.writeInt8=function(r,s,b){return r=+r,s|=0,b||N(this,r,s,1,127,-128),n.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),r<0&&(r=255+r+1),this[s]=255&r,s+1},n.prototype.writeInt16LE=function(r,s,b){return r=+r,s|=0,b||N(this,r,s,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[s]=255&r,this[s+1]=r>>>8):G(this,r,s,!0),s+2},n.prototype.writeInt16BE=function(r,s,b){return r=+r,s|=0,b||N(this,r,s,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[s]=r>>>8,this[s+1]=255&r):G(this,r,s,!1),s+2},n.prototype.writeInt32LE=function(r,s,b){return r=+r,s|=0,b||N(this,r,s,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[s]=255&r,this[s+1]=r>>>8,this[s+2]=r>>>16,this[s+3]=r>>>24):_(this,r,s,!0),s+4},n.prototype.writeInt32BE=function(r,s,b){return r=+r,s|=0,b||N(this,r,s,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),n.TYPED_ARRAY_SUPPORT?(this[s]=r>>>24,this[s+1]=r>>>16,this[s+2]=r>>>8,this[s+3]=255&r):_(this,r,s,!1),s+4},n.prototype.writeFloatLE=function(r,s,b){return F(this,r,s,!0,b)},n.prototype.writeFloatBE=function(r,s,b){return F(this,r,s,!1,b)},n.prototype.writeDoubleLE=function(r,s,b){return W(this,r,s,!0,b)},n.prototype.writeDoubleBE=function(r,s,b){return W(this,r,s,!1,b)},n.prototype.copy=function(r,s,b,H){if(b||(b=0),H||H===0||(H=this.length),s>=r.length&&(s=r.length),s||(s=0),H>0&&H<b&&(H=b),H===b||r.length===0||this.length===0)return 0;if(s<0)throw new RangeError("targetStart out of bounds");if(b<0||b>=this.length)throw new RangeError("sourceStart out of bounds");if(H<0)throw new RangeError("sourceEnd out of bounds");H>this.length&&(H=this.length),r.length-s<H-b&&(H=r.length-s+b);var V,K=H-b;if(this===r&&b<s&&s<H)for(V=K-1;V>=0;--V)r[V+s]=this[V+b];else if(K<1e3||!n.TYPED_ARRAY_SUPPORT)for(V=0;V<K;++V)r[V+s]=this[V+b];else Uint8Array.prototype.set.call(r,this.subarray(b,b+K),s);return K},n.prototype.fill=function(r,s,b,H){if(typeof r=="string"){if(typeof s=="string"?(H=s,s=0,b=this.length):typeof b=="string"&&(H=b,b=this.length),r.length===1){var V=r.charCodeAt(0);V<256&&(r=V)}if(H!==void 0&&typeof H!="string")throw new TypeError("encoding must be a string");if(typeof H=="string"&&!n.isEncoding(H))throw new TypeError("Unknown encoding: "+H)}else typeof r=="number"&&(r&=255);if(s<0||this.length<s||this.length<b)throw new RangeError("Out of range index");if(b<=s)return this;var K;if(s>>>=0,b=b===void 0?this.length:b>>>0,r||(r=0),typeof r=="number")for(K=s;K<b;++K)this[K]=r;else{var ae=n.isBuffer(r)?r:ce(new n(r,H).toString()),be=ae.length;for(K=0;K<b-s;++K)this[K+s]=ae[K%be]}return this};var ie=/[^+\/0-9A-Za-z-_]/g;function me(r){return r<16?"0"+r.toString(16):r.toString(16)}function ce(r,s){var b;s=s||1/0;for(var H=r.length,V=null,K=[],ae=0;ae<H;++ae){if((b=r.charCodeAt(ae))>55295&&b<57344){if(!V){if(b>56319){(s-=3)>-1&&K.push(239,191,189);continue}if(ae+1===H){(s-=3)>-1&&K.push(239,191,189);continue}V=b;continue}if(b<56320){(s-=3)>-1&&K.push(239,191,189),V=b;continue}b=65536+(V-55296<<10|b-56320)}else V&&(s-=3)>-1&&K.push(239,191,189);if(V=null,b<128){if((s-=1)<0)break;K.push(b)}else if(b<2048){if((s-=2)<0)break;K.push(b>>6|192,63&b|128)}else if(b<65536){if((s-=3)<0)break;K.push(b>>12|224,b>>6&63|128,63&b|128)}else{if(!(b<1114112))throw new Error("Invalid code point");if((s-=4)<0)break;K.push(b>>18|240,b>>12&63|128,b>>6&63|128,63&b|128)}}return K}function ve(r){return m.toByteArray(function(s){if((s=function(b){return b.trim?b.trim():b.replace(/^\s+|\s+$/g,"")}(s).replace(ie,"")).length<2)return"";for(;s.length%4!=0;)s+="=";return s}(r))}function fe(r,s,b,H){for(var V=0;V<H&&!(V+b>=s.length||V>=r.length);++V)s[V+b]=r[V];return V}},function(M,v){typeof Object.create=="function"?M.exports=function(k,m){m&&(k.super_=m,k.prototype=Object.create(m.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}))}:M.exports=function(k,m){if(m){k.super_=m;var l=function(){};l.prototype=m.prototype,k.prototype=new l,k.prototype.constructor=k}}},function(M,v,k){var m=k(9),l=Object.keys||function(g){var L=[];for(var C in g)L.push(C);return L};M.exports=d;var p=Object.create(k(7));p.inherits=k(4);var E=k(15),a=k(19);p.inherits(d,E);for(var n=l(a.prototype),i=0;i<n.length;i++){var f=n[i];d.prototype[f]||(d.prototype[f]=a.prototype[f])}function d(g){if(!(this instanceof d))return new d(g);E.call(this,g),a.call(this,g),g&&g.readable===!1&&(this.readable=!1),g&&g.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,g&&g.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",A)}function A(){this.allowHalfOpen||this._writableState.ended||m.nextTick(y,this)}function y(g){g.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(g){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=g,this._writableState.destroyed=g)}}),d.prototype._destroy=function(g,L){this.push(null),this.end(),m.nextTick(L,g)}},function(M,v){var k,m,l=M.exports={};function p(){throw new Error("setTimeout has not been defined")}function E(){throw new Error("clearTimeout has not been defined")}function a(C){if(k===setTimeout)return setTimeout(C,0);if((k===p||!k)&&setTimeout)return k=setTimeout,setTimeout(C,0);try{return k(C,0)}catch{try{return k.call(null,C,0)}catch{return k.call(this,C,0)}}}(function(){try{k=typeof setTimeout=="function"?setTimeout:p}catch{k=p}try{m=typeof clearTimeout=="function"?clearTimeout:E}catch{m=E}})();var n,i=[],f=!1,d=-1;function A(){f&&n&&(f=!1,n.length?i=n.concat(i):d=-1,i.length&&y())}function y(){if(!f){var C=a(A);f=!0;for(var w=i.length;w;){for(n=i,i=[];++d<w;)n&&n[d].run();d=-1,w=i.length}n=null,f=!1,function(h){if(m===clearTimeout)return clearTimeout(h);if((m===E||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(h);try{return m(h)}catch{try{return m.call(null,h)}catch{return m.call(this,h)}}}(C)}}function g(C,w){this.fun=C,this.array=w}function L(){}l.nextTick=function(C){var w=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)w[h-1]=arguments[h];i.push(new g(C,w)),i.length!==1||f||a(y)},g.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=L,l.addListener=L,l.once=L,l.off=L,l.removeListener=L,l.removeAllListeners=L,l.emit=L,l.prependListener=L,l.prependOnceListener=L,l.listeners=function(C){return[]},l.binding=function(C){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(C){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(M,v,k){function m(l){return Object.prototype.toString.call(l)}v.isArray=function(l){return Array.isArray?Array.isArray(l):m(l)==="[object Array]"},v.isBoolean=function(l){return typeof l=="boolean"},v.isNull=function(l){return l===null},v.isNullOrUndefined=function(l){return l==null},v.isNumber=function(l){return typeof l=="number"},v.isString=function(l){return typeof l=="string"},v.isSymbol=function(l){return typeof l=="symbol"},v.isUndefined=function(l){return l===void 0},v.isRegExp=function(l){return m(l)==="[object RegExp]"},v.isObject=function(l){return typeof l=="object"&&l!==null},v.isDate=function(l){return m(l)==="[object Date]"},v.isError=function(l){return m(l)==="[object Error]"||l instanceof Error},v.isFunction=function(l){return typeof l=="function"},v.isPrimitive=function(l){return l===null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||typeof l=="symbol"||l===void 0},v.isBuffer=k(3).Buffer.isBuffer},function(M,v,k){var m=k(14).Duplex,l=k(11),p=k(10).Buffer;function E(a){if(!(this instanceof E))return new E(a);if(this._bufs=[],this.length=0,typeof a=="function"){this._callback=a;var n=function(i){this._callback&&(this._callback(i),this._callback=null)}.bind(this);this.on("pipe",function(i){i.on("error",n)}),this.on("unpipe",function(i){i.removeListener("error",n)})}else this.append(a);m.call(this)}l.inherits(E,m),E.prototype._offset=function(a){var n,i=0,f=0;if(a===0)return[0,0];for(;f<this._bufs.length;f++){if(a<(n=i+this._bufs[f].length)||f==this._bufs.length-1)return[f,a-i];i=n}},E.prototype._reverseOffset=function(a){for(var n=a[0],i=a[1],f=0;f<n;f++)i+=this._bufs[f].length;return i},E.prototype.append=function(a){var n=0;if(p.isBuffer(a))this._appendBuffer(a);else if(Array.isArray(a))for(;n<a.length;n++)this.append(a[n]);else if(a instanceof E)for(;n<a._bufs.length;n++)this.append(a._bufs[n]);else a!=null&&(typeof a=="number"&&(a=a.toString()),this._appendBuffer(p.from(a)));return this},E.prototype._appendBuffer=function(a){this._bufs.push(a),this.length+=a.length},E.prototype._write=function(a,n,i){this._appendBuffer(a),typeof i=="function"&&i()},E.prototype._read=function(a){if(!this.length)return this.push(null);a=Math.min(a,this.length),this.push(this.slice(0,a)),this.consume(a)},E.prototype.end=function(a){m.prototype.end.call(this,a),this._callback&&(this._callback(null,this.slice()),this._callback=null)},E.prototype.get=function(a){if(!(a>this.length||a<0)){var n=this._offset(a);return this._bufs[n[0]][n[1]]}},E.prototype.slice=function(a,n){return typeof a=="number"&&a<0&&(a+=this.length),typeof n=="number"&&n<0&&(n+=this.length),this.copy(null,0,a,n)},E.prototype.copy=function(a,n,i,f){if((typeof i!="number"||i<0)&&(i=0),(typeof f!="number"||f>this.length)&&(f=this.length),i>=this.length||f<=0)return a||p.alloc(0);var d,A,y=!!a,g=this._offset(i),L=f-i,C=L,w=y&&n||0,h=g[1];if(i===0&&f==this.length){if(!y)return this._bufs.length===1?this._bufs[0]:p.concat(this._bufs,this.length);for(A=0;A<this._bufs.length;A++)this._bufs[A].copy(a,w),w+=this._bufs[A].length;return a}if(C<=this._bufs[g[0]].length-h)return y?this._bufs[g[0]].copy(a,n,h,h+C):this._bufs[g[0]].slice(h,h+C);for(y||(a=p.allocUnsafe(L)),A=g[0];A<this._bufs.length;A++){if(!(C>(d=this._bufs[A].length-h))){this._bufs[A].copy(a,w,h,h+C),w+=d;break}this._bufs[A].copy(a,w,h),w+=d,C-=d,h&&(h=0)}return a.length>w?a.slice(0,w):a},E.prototype.shallowSlice=function(a,n){if(a=a||0,n=typeof n!="number"?this.length:n,a<0&&(a+=this.length),n<0&&(n+=this.length),a===n)return new E;var i=this._offset(a),f=this._offset(n),d=this._bufs.slice(i[0],f[0]+1);return f[1]==0?d.pop():d[d.length-1]=d[d.length-1].slice(0,f[1]),i[1]!=0&&(d[0]=d[0].slice(i[1])),new E(d)},E.prototype.toString=function(a,n,i){return this.slice(n,i).toString(a)},E.prototype.consume=function(a){if(a=Math.trunc(a),Number.isNaN(a)||a<=0)return this;for(;this._bufs.length;){if(!(a>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(a),this.length-=a;break}a-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},E.prototype.duplicate=function(){for(var a=0,n=new E;a<this._bufs.length;a++)n.append(this._bufs[a]);return n},E.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},E.prototype.indexOf=function(a,n,i){if(i===void 0&&typeof n=="string"&&(i=n,n=void 0),typeof a=="function"||Array.isArray(a))throw new TypeError('The "value" argument must be one of type string, Buffer, BufferList, or Uint8Array.');if(typeof a=="number"?a=p.from([a]):typeof a=="string"?a=p.from(a,i):a instanceof E?a=a.slice():p.isBuffer(a)||(a=p.from(a)),n=Number(n||0),isNaN(n)&&(n=0),n<0&&(n=this.length+n),n<0&&(n=0),a.length===0)return n>this.length?this.length:n;for(var f=this._offset(n),d=f[0],A=f[1];d<this._bufs.length;d++){for(var y=this._bufs[d];A<y.length;)if(y.length-A>=a.length){var g=y.indexOf(a,A);if(g!==-1)return this._reverseOffset([d,g]);A=y.length-a.length+1}else{var L=this._reverseOffset([d,A]);if(this._match(L,a))return L;A++}A=0}return-1},E.prototype._match=function(a,n){if(this.length-a<n.length)return!1;for(var i=0;i<n.length;i++)if(this.get(a+i)!==n[i])return!1;return!0},function(){var a={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(var n in a)(function(i){E.prototype[i]=a[i]===null?function(f,d){return this.slice(f,f+d)[i](0,d)}:function(f){return this.slice(f,f+a[i])[i](0)}})(n)}(),M.exports=E},function(M,v,k){(function(m){m===void 0||!m.version||m.version.indexOf("v0.")===0||m.version.indexOf("v1.")===0&&m.version.indexOf("v1.8.")!==0?M.exports={nextTick:function(l,p,E,a){if(typeof l!="function")throw new TypeError('"callback" argument must be a function');var n,i,f=arguments.length;switch(f){case 0:case 1:return m.nextTick(l);case 2:return m.nextTick(function(){l.call(null,p)});case 3:return m.nextTick(function(){l.call(null,p,E)});case 4:return m.nextTick(function(){l.call(null,p,E,a)});default:for(n=new Array(f-1),i=0;i<n.length;)n[i++]=arguments[i];return m.nextTick(function(){l.apply(null,n)})}}}:M.exports=m}).call(this,k(6))},function(M,v,k){var m=k(3),l=m.Buffer;function p(a,n){for(var i in a)n[i]=a[i]}function E(a,n,i){return l(a,n,i)}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?M.exports=m:(p(m,v),v.Buffer=E),E.prototype=Object.create(l.prototype),p(l,E),E.from=function(a,n,i){if(typeof a=="number")throw new TypeError("Argument must not be a number");return l(a,n,i)},E.alloc=function(a,n,i){if(typeof a!="number")throw new TypeError("Argument must be a number");var f=l(a);return n!==void 0?typeof i=="string"?f.fill(n,i):f.fill(n):f.fill(0),f},E.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return l(a)},E.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return m.SlowBuffer(a)}},function(M,v,k){(function(m){var l=Object.getOwnPropertyDescriptors||function(j){for(var J=Object.keys(j),N={},G=0;G<J.length;G++)N[J[G]]=Object.getOwnPropertyDescriptor(j,J[G]);return N},p=/%[sdj%]/g;v.format=function(j){if(!h(j)){for(var J=[],N=0;N<arguments.length;N++)J.push(n(arguments[N]));return J.join(" ")}N=1;for(var G=arguments,_=G.length,x=String(j).replace(p,function(W){if(W==="%%")return"%";if(N>=_)return W;switch(W){case"%s":return String(G[N++]);case"%d":return Number(G[N++]);case"%j":try{return JSON.stringify(G[N++])}catch{return"[Circular]"}default:return W}}),F=G[N];N<_;F=G[++N])C(F)||!R(F)?x+=" "+F:x+=" "+n(F);return x},v.deprecate=function(j,J){if(m!==void 0&&m.noDeprecation===!0)return j;if(m===void 0)return function(){return v.deprecate(j,J).apply(this,arguments)};var N=!1;return function(){if(!N){if(m.throwDeprecation)throw new Error(J);m.traceDeprecation?console.trace(J):console.error(J),N=!0}return j.apply(this,arguments)}};var E,a={};function n(j,J){var N={seen:[],stylize:f};return arguments.length>=3&&(N.depth=arguments[2]),arguments.length>=4&&(N.colors=arguments[3]),L(J)?N.showHidden=J:J&&v._extend(N,J),u(N.showHidden)&&(N.showHidden=!1),u(N.depth)&&(N.depth=2),u(N.colors)&&(N.colors=!1),u(N.customInspect)&&(N.customInspect=!0),N.colors&&(N.stylize=i),d(N,j,N.depth)}function i(j,J){var N=n.styles[J];return N?"\x1B["+n.colors[N][0]+"m"+j+"\x1B["+n.colors[N][1]+"m":j}function f(j,J){return j}function d(j,J,N){if(j.customInspect&&J&&O(J.inspect)&&J.inspect!==v.inspect&&(!J.constructor||J.constructor.prototype!==J)){var G=J.inspect(N,j);return h(G)||(G=d(j,G,N)),G}var _=function(fe,r){if(u(r))return fe.stylize("undefined","undefined");if(h(r)){var s="'"+JSON.stringify(r).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return fe.stylize(s,"string")}if(w(r))return fe.stylize(""+r,"number");if(L(r))return fe.stylize(""+r,"boolean");if(C(r))return fe.stylize("null","null")}(j,J);if(_)return _;var x=Object.keys(J),F=function(fe){var r={};return fe.forEach(function(s,b){r[s]=!0}),r}(x);if(j.showHidden&&(x=Object.getOwnPropertyNames(J)),Y(J)&&(x.indexOf("message")>=0||x.indexOf("description")>=0))return A(J);if(x.length===0){if(O(J)){var W=J.name?": "+J.name:"";return j.stylize("[Function"+W+"]","special")}if(T(J))return j.stylize(RegExp.prototype.toString.call(J),"regexp");if(P(J))return j.stylize(Date.prototype.toString.call(J),"date");if(Y(J))return A(J)}var ie,me="",ce=!1,ve=["{","}"];return g(J)&&(ce=!0,ve=["[","]"]),O(J)&&(me=" [Function"+(J.name?": "+J.name:"")+"]"),T(J)&&(me=" "+RegExp.prototype.toString.call(J)),P(J)&&(me=" "+Date.prototype.toUTCString.call(J)),Y(J)&&(me=" "+A(J)),x.length!==0||ce&&J.length!=0?N<0?T(J)?j.stylize(RegExp.prototype.toString.call(J),"regexp"):j.stylize("[Object]","special"):(j.seen.push(J),ie=ce?function(fe,r,s,b,H){for(var V=[],K=0,ae=r.length;K<ae;++K)q(r,String(K))?V.push(y(fe,r,s,b,String(K),!0)):V.push("");return H.forEach(function(be){be.match(/^\d+$/)||V.push(y(fe,r,s,b,be,!0))}),V}(j,J,N,F,x):x.map(function(fe){return y(j,J,N,F,fe,ce)}),j.seen.pop(),function(fe,r,s){var b=fe.reduce(function(H,V){return V.indexOf(`
`)>=0,H+V.replace(/\u001b\[\d\d?m/g,"").length+1},0);return b>60?s[0]+(r===""?"":r+`
 `)+" "+fe.join(`,
  `)+" "+s[1]:s[0]+r+" "+fe.join(", ")+" "+s[1]}(ie,me,ve)):ve[0]+me+ve[1]}function A(j){return"["+Error.prototype.toString.call(j)+"]"}function y(j,J,N,G,_,x){var F,W,ie;if((ie=Object.getOwnPropertyDescriptor(J,_)||{value:J[_]}).get?W=ie.set?j.stylize("[Getter/Setter]","special"):j.stylize("[Getter]","special"):ie.set&&(W=j.stylize("[Setter]","special")),q(G,_)||(F="["+_+"]"),W||(j.seen.indexOf(ie.value)<0?(W=C(N)?d(j,ie.value,null):d(j,ie.value,N-1)).indexOf(`
`)>-1&&(W=x?W.split(`
`).map(function(me){return"  "+me}).join(`
`).substr(2):`
`+W.split(`
`).map(function(me){return"   "+me}).join(`
`)):W=j.stylize("[Circular]","special")),u(F)){if(x&&_.match(/^\d+$/))return W;(F=JSON.stringify(""+_)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(F=F.substr(1,F.length-2),F=j.stylize(F,"name")):(F=F.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),F=j.stylize(F,"string"))}return F+": "+W}function g(j){return Array.isArray(j)}function L(j){return typeof j=="boolean"}function C(j){return j===null}function w(j){return typeof j=="number"}function h(j){return typeof j=="string"}function u(j){return j===void 0}function T(j){return R(j)&&$(j)==="[object RegExp]"}function R(j){return typeof j=="object"&&j!==null}function P(j){return R(j)&&$(j)==="[object Date]"}function Y(j){return R(j)&&($(j)==="[object Error]"||j instanceof Error)}function O(j){return typeof j=="function"}function $(j){return Object.prototype.toString.call(j)}function D(j){return j<10?"0"+j.toString(10):j.toString(10)}v.debuglog=function(j){if(u(E)&&(E=m.env.NODE_DEBUG||""),j=j.toUpperCase(),!a[j])if(new RegExp("\\b"+j+"\\b","i").test(E)){var J=m.pid;a[j]=function(){var N=v.format.apply(v,arguments);console.error("%s %d: %s",j,J,N)}}else a[j]=function(){};return a[j]},v.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},v.isArray=g,v.isBoolean=L,v.isNull=C,v.isNullOrUndefined=function(j){return j==null},v.isNumber=w,v.isString=h,v.isSymbol=function(j){return typeof j=="symbol"},v.isUndefined=u,v.isRegExp=T,v.isObject=R,v.isDate=P,v.isError=Y,v.isFunction=O,v.isPrimitive=function(j){return j===null||typeof j=="boolean"||typeof j=="number"||typeof j=="string"||typeof j=="symbol"||j===void 0},v.isBuffer=k(33);var c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function q(j,J){return Object.prototype.hasOwnProperty.call(j,J)}v.log=function(){var j,J;console.log("%s - %s",(j=new Date,J=[D(j.getHours()),D(j.getMinutes()),D(j.getSeconds())].join(":"),[j.getDate(),c[j.getMonth()],J].join(" ")),v.format.apply(v,arguments))},v.inherits=k(34),v._extend=function(j,J){if(!J||!R(J))return j;for(var N=Object.keys(J),G=N.length;G--;)j[N[G]]=J[N[G]];return j};var B=typeof Symbol!="undefined"?Symbol("util.promisify.custom"):void 0;function X(j,J){if(!j){var N=new Error("Promise was rejected with a falsy value");N.reason=j,j=N}return J(j)}v.promisify=function(j){if(typeof j!="function")throw new TypeError('The "original" argument must be of type Function');if(B&&j[B]){var J;if(typeof(J=j[B])!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(J,B,{value:J,enumerable:!1,writable:!1,configurable:!0}),J}function J(){for(var N,G,_=new Promise(function(W,ie){N=W,G=ie}),x=[],F=0;F<arguments.length;F++)x.push(arguments[F]);x.push(function(W,ie){W?G(W):N(ie)});try{j.apply(this,x)}catch(W){G(W)}return _}return Object.setPrototypeOf(J,Object.getPrototypeOf(j)),B&&Object.defineProperty(J,B,{value:J,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(J,l(j))},v.promisify.custom=B,v.callbackify=function(j){if(typeof j!="function")throw new TypeError('The "original" argument must be of type Function');function J(){for(var N=[],G=0;G<arguments.length;G++)N.push(arguments[G]);var _=N.pop();if(typeof _!="function")throw new TypeError("The last argument must be of type Function");var x=this,F=function(){return _.apply(x,arguments)};j.apply(this,N).then(function(W){m.nextTick(F,null,W)},function(W){m.nextTick(X,W,F)})}return Object.setPrototypeOf(J,Object.getPrototypeOf(j)),Object.defineProperties(J,l(j)),J}}).call(this,k(6))},function(M,v,k){var m=k(3),l=m.Buffer;function p(a,n){for(var i in a)n[i]=a[i]}function E(a,n,i){return l(a,n,i)}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?M.exports=m:(p(m,v),v.Buffer=E),p(l,E),E.from=function(a,n,i){if(typeof a=="number")throw new TypeError("Argument must not be a number");return l(a,n,i)},E.alloc=function(a,n,i){if(typeof a!="number")throw new TypeError("Argument must be a number");var f=l(a);return n!==void 0?typeof i=="string"?f.fill(n,i):f.fill(n):f.fill(0),f},E.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return l(a)},E.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return m.SlowBuffer(a)}},function(M,v){var k={}.toString;M.exports=Array.isArray||function(m){return k.call(m)=="[object Array]"}},function(M,v,k){(v=M.exports=k(15)).Stream=v,v.Readable=v,v.Writable=k(19),v.Duplex=k(5),v.Transform=k(22),v.PassThrough=k(41)},function(M,v,k){(function(m){var l=k(9);M.exports=u;var p,E=k(13);u.ReadableState=h,k(16).EventEmitter;var a=function(_,x){return _.listeners(x).length},n=k(17),i=k(12).Buffer,f=window.Uint8Array||function(){},d=Object.create(k(7));d.inherits=k(4);var A=k(35),y=void 0;y=A&&A.debuglog?A.debuglog("stream"):function(){};var g,L=k(36),C=k(18);d.inherits(u,n);var w=["error","close","destroy","pause","resume"];function h(_,x){_=_||{};var F=x instanceof(p=p||k(5));this.objectMode=!!_.objectMode,F&&(this.objectMode=this.objectMode||!!_.readableObjectMode);var W=_.highWaterMark,ie=_.readableHighWaterMark,me=this.objectMode?16:16384;this.highWaterMark=W||W===0?W:F&&(ie||ie===0)?ie:me,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new L,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=_.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,_.encoding&&(g||(g=k(21).StringDecoder),this.decoder=new g(_.encoding),this.encoding=_.encoding)}function u(_){if(p=p||k(5),!(this instanceof u))return new u(_);this._readableState=new h(_,this),this.readable=!0,_&&(typeof _.read=="function"&&(this._read=_.read),typeof _.destroy=="function"&&(this._destroy=_.destroy)),n.call(this)}function T(_,x,F,W,ie){var me,ce=_._readableState;return x===null?(ce.reading=!1,function(ve,fe){if(!fe.ended){if(fe.decoder){var r=fe.decoder.end();r&&r.length&&(fe.buffer.push(r),fe.length+=fe.objectMode?1:r.length)}fe.ended=!0,O(ve)}}(_,ce)):(ie||(me=function(ve,fe){var r;s=fe,i.isBuffer(s)||s instanceof f||typeof fe=="string"||fe===void 0||ve.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var s;return r}(ce,x)),me?_.emit("error",me):ce.objectMode||x&&x.length>0?(typeof x=="string"||ce.objectMode||Object.getPrototypeOf(x)===i.prototype||(x=function(ve){return i.from(ve)}(x)),W?ce.endEmitted?_.emit("error",new Error("stream.unshift() after end event")):R(_,ce,x,!0):ce.ended?_.emit("error",new Error("stream.push() after EOF")):(ce.reading=!1,ce.decoder&&!F?(x=ce.decoder.write(x),ce.objectMode||x.length!==0?R(_,ce,x,!1):D(_,ce)):R(_,ce,x,!1))):W||(ce.reading=!1)),function(ve){return!ve.ended&&(ve.needReadable||ve.length<ve.highWaterMark||ve.length===0)}(ce)}function R(_,x,F,W){x.flowing&&x.length===0&&!x.sync?(_.emit("data",F),_.read(0)):(x.length+=x.objectMode?1:F.length,W?x.buffer.unshift(F):x.buffer.push(F),x.needReadable&&O(_)),D(_,x)}Object.defineProperty(u.prototype,"destroyed",{get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(_){this._readableState&&(this._readableState.destroyed=_)}}),u.prototype.destroy=C.destroy,u.prototype._undestroy=C.undestroy,u.prototype._destroy=function(_,x){this.push(null),x(_)},u.prototype.push=function(_,x){var F,W=this._readableState;return W.objectMode?F=!0:typeof _=="string"&&((x=x||W.defaultEncoding)!==W.encoding&&(_=i.from(_,x),x=""),F=!0),T(this,_,x,!1,F)},u.prototype.unshift=function(_){return T(this,_,null,!0,!1)},u.prototype.isPaused=function(){return this._readableState.flowing===!1},u.prototype.setEncoding=function(_){return g||(g=k(21).StringDecoder),this._readableState.decoder=new g(_),this._readableState.encoding=_,this};var P=8388608;function Y(_,x){return _<=0||x.length===0&&x.ended?0:x.objectMode?1:_!=_?x.flowing&&x.length?x.buffer.head.data.length:x.length:(_>x.highWaterMark&&(x.highWaterMark=function(F){return F>=P?F=P:(F--,F|=F>>>1,F|=F>>>2,F|=F>>>4,F|=F>>>8,F|=F>>>16,F++),F}(_)),_<=x.length?_:x.ended?x.length:(x.needReadable=!0,0))}function O(_){var x=_._readableState;x.needReadable=!1,x.emittedReadable||(y("emitReadable",x.flowing),x.emittedReadable=!0,x.sync?l.nextTick($,_):$(_))}function $(_){y("emit readable"),_.emit("readable"),X(_)}function D(_,x){x.readingMore||(x.readingMore=!0,l.nextTick(c,_,x))}function c(_,x){for(var F=x.length;!x.reading&&!x.flowing&&!x.ended&&x.length<x.highWaterMark&&(y("maybeReadMore read 0"),_.read(0),F!==x.length);)F=x.length;x.readingMore=!1}function q(_){y("readable nexttick read 0"),_.read(0)}function B(_,x){x.reading||(y("resume read 0"),_.read(0)),x.resumeScheduled=!1,x.awaitDrain=0,_.emit("resume"),X(_),x.flowing&&!x.reading&&_.read(0)}function X(_){var x=_._readableState;for(y("flow",x.flowing);x.flowing&&_.read()!==null;);}function j(_,x){return x.length===0?null:(x.objectMode?F=x.buffer.shift():!_||_>=x.length?(F=x.decoder?x.buffer.join(""):x.buffer.length===1?x.buffer.head.data:x.buffer.concat(x.length),x.buffer.clear()):F=function(W,ie,me){var ce;return W<ie.head.data.length?(ce=ie.head.data.slice(0,W),ie.head.data=ie.head.data.slice(W)):ce=W===ie.head.data.length?ie.shift():me?function(ve,fe){var r=fe.head,s=1,b=r.data;for(ve-=b.length;r=r.next;){var H=r.data,V=ve>H.length?H.length:ve;if(V===H.length?b+=H:b+=H.slice(0,ve),(ve-=V)===0){V===H.length?(++s,r.next?fe.head=r.next:fe.head=fe.tail=null):(fe.head=r,r.data=H.slice(V));break}++s}return fe.length-=s,b}(W,ie):function(ve,fe){var r=i.allocUnsafe(ve),s=fe.head,b=1;for(s.data.copy(r),ve-=s.data.length;s=s.next;){var H=s.data,V=ve>H.length?H.length:ve;if(H.copy(r,r.length-ve,0,V),(ve-=V)===0){V===H.length?(++b,s.next?fe.head=s.next:fe.head=fe.tail=null):(fe.head=s,s.data=H.slice(V));break}++b}return fe.length-=b,r}(W,ie),ce}(_,x.buffer,x.decoder),F);var F}function J(_){var x=_._readableState;if(x.length>0)throw new Error('"endReadable()" called on non-empty stream');x.endEmitted||(x.ended=!0,l.nextTick(N,x,_))}function N(_,x){_.endEmitted||_.length!==0||(_.endEmitted=!0,x.readable=!1,x.emit("end"))}function G(_,x){for(var F=0,W=_.length;F<W;F++)if(_[F]===x)return F;return-1}u.prototype.read=function(_){y("read",_),_=parseInt(_,10);var x=this._readableState,F=_;if(_!==0&&(x.emittedReadable=!1),_===0&&x.needReadable&&(x.length>=x.highWaterMark||x.ended))return y("read: emitReadable",x.length,x.ended),x.length===0&&x.ended?J(this):O(this),null;if((_=Y(_,x))===0&&x.ended)return x.length===0&&J(this),null;var W,ie=x.needReadable;return y("need readable",ie),(x.length===0||x.length-_<x.highWaterMark)&&y("length less than watermark",ie=!0),x.ended||x.reading?y("reading or ended",ie=!1):ie&&(y("do read"),x.reading=!0,x.sync=!0,x.length===0&&(x.needReadable=!0),this._read(x.highWaterMark),x.sync=!1,x.reading||(_=Y(F,x))),(W=_>0?j(_,x):null)===null?(x.needReadable=!0,_=0):x.length-=_,x.length===0&&(x.ended||(x.needReadable=!0),F!==_&&x.ended&&J(this)),W!==null&&this.emit("data",W),W},u.prototype._read=function(_){this.emit("error",new Error("_read() is not implemented"))},u.prototype.pipe=function(_,x){var F=this,W=this._readableState;switch(W.pipesCount){case 0:W.pipes=_;break;case 1:W.pipes=[W.pipes,_];break;default:W.pipes.push(_)}W.pipesCount+=1,y("pipe count=%d opts=%j",W.pipesCount,x);var ie=(!x||x.end!==!1)&&_!==m.stdout&&_!==m.stderr?ce:K;function me(ae,be){y("onunpipe"),ae===F&&be&&be.hasUnpiped===!1&&(be.hasUnpiped=!0,y("cleanup"),_.removeListener("close",H),_.removeListener("finish",V),_.removeListener("drain",ve),_.removeListener("error",b),_.removeListener("unpipe",me),F.removeListener("end",ce),F.removeListener("end",K),F.removeListener("data",s),fe=!0,!W.awaitDrain||_._writableState&&!_._writableState.needDrain||ve())}function ce(){y("onend"),_.end()}W.endEmitted?l.nextTick(ie):F.once("end",ie),_.on("unpipe",me);var ve=function(ae){return function(){var be=ae._readableState;y("pipeOnDrain",be.awaitDrain),be.awaitDrain&&be.awaitDrain--,be.awaitDrain===0&&a(ae,"data")&&(be.flowing=!0,X(ae))}}(F);_.on("drain",ve);var fe=!1,r=!1;function s(ae){y("ondata"),r=!1,_.write(ae)!==!1||r||((W.pipesCount===1&&W.pipes===_||W.pipesCount>1&&G(W.pipes,_)!==-1)&&!fe&&(y("false write response, pause",F._readableState.awaitDrain),F._readableState.awaitDrain++,r=!0),F.pause())}function b(ae){y("onerror",ae),K(),_.removeListener("error",b),a(_,"error")===0&&_.emit("error",ae)}function H(){_.removeListener("finish",V),K()}function V(){y("onfinish"),_.removeListener("close",H),K()}function K(){y("unpipe"),F.unpipe(_)}return F.on("data",s),function(ae,be,Ce){if(typeof ae.prependListener=="function")return ae.prependListener(be,Ce);ae._events&&ae._events[be]?E(ae._events[be])?ae._events[be].unshift(Ce):ae._events[be]=[Ce,ae._events[be]]:ae.on(be,Ce)}(_,"error",b),_.once("close",H),_.once("finish",V),_.emit("pipe",F),W.flowing||(y("pipe resume"),F.resume()),_},u.prototype.unpipe=function(_){var x=this._readableState,F={hasUnpiped:!1};if(x.pipesCount===0)return this;if(x.pipesCount===1)return _&&_!==x.pipes||(_||(_=x.pipes),x.pipes=null,x.pipesCount=0,x.flowing=!1,_&&_.emit("unpipe",this,F)),this;if(!_){var W=x.pipes,ie=x.pipesCount;x.pipes=null,x.pipesCount=0,x.flowing=!1;for(var me=0;me<ie;me++)W[me].emit("unpipe",this,F);return this}var ce=G(x.pipes,_);return ce===-1||(x.pipes.splice(ce,1),x.pipesCount-=1,x.pipesCount===1&&(x.pipes=x.pipes[0]),_.emit("unpipe",this,F)),this},u.prototype.on=function(_,x){var F=n.prototype.on.call(this,_,x);if(_==="data")this._readableState.flowing!==!1&&this.resume();else if(_==="readable"){var W=this._readableState;W.endEmitted||W.readableListening||(W.readableListening=W.needReadable=!0,W.emittedReadable=!1,W.reading?W.length&&O(this):l.nextTick(q,this))}return F},u.prototype.addListener=u.prototype.on,u.prototype.resume=function(){var _=this._readableState;return _.flowing||(y("resume"),_.flowing=!0,function(x,F){F.resumeScheduled||(F.resumeScheduled=!0,l.nextTick(B,x,F))}(this,_)),this},u.prototype.pause=function(){return y("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(y("pause"),this._readableState.flowing=!1,this.emit("pause")),this},u.prototype.wrap=function(_){var x=this,F=this._readableState,W=!1;for(var ie in _.on("end",function(){if(y("wrapped end"),F.decoder&&!F.ended){var ce=F.decoder.end();ce&&ce.length&&x.push(ce)}x.push(null)}),_.on("data",function(ce){y("wrapped data"),F.decoder&&(ce=F.decoder.write(ce)),F.objectMode&&ce==null||(F.objectMode||ce&&ce.length)&&(x.push(ce)||(W=!0,_.pause()))}),_)this[ie]===void 0&&typeof _[ie]=="function"&&(this[ie]=function(ce){return function(){return _[ce].apply(_,arguments)}}(ie));for(var me=0;me<w.length;me++)_.on(w[me],this.emit.bind(this,w[me]));return this._read=function(ce){y("wrapped _read",ce),W&&(W=!1,_.resume())},this},Object.defineProperty(u.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),u._fromList=j}).call(this,k(6))},function(M,v,k){var m,l=typeof Reflect=="object"?Reflect:null,p=l&&typeof l.apply=="function"?l.apply:function(h,u,T){return Function.prototype.apply.call(h,u,T)};m=l&&typeof l.ownKeys=="function"?l.ownKeys:Object.getOwnPropertySymbols?function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:function(h){return Object.getOwnPropertyNames(h)};var E=Number.isNaN||function(h){return h!=h};function a(){a.init.call(this)}M.exports=a,M.exports.once=function(h,u){return new Promise(function(T,R){function P(O){h.removeListener(u,Y),R(O)}function Y(){typeof h.removeListener=="function"&&h.removeListener("error",P),T([].slice.call(arguments))}w(h,u,Y,{once:!0}),u!=="error"&&function(O,$,D){typeof O.on=="function"&&w(O,"error",$,D)}(h,P,{once:!0})})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var n=10;function i(h){if(typeof h!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof h)}function f(h){return h._maxListeners===void 0?a.defaultMaxListeners:h._maxListeners}function d(h,u,T,R){var P,Y,O,$;if(i(T),(Y=h._events)===void 0?(Y=h._events=Object.create(null),h._eventsCount=0):(Y.newListener!==void 0&&(h.emit("newListener",u,T.listener?T.listener:T),Y=h._events),O=Y[u]),O===void 0)O=Y[u]=T,++h._eventsCount;else if(typeof O=="function"?O=Y[u]=R?[T,O]:[O,T]:R?O.unshift(T):O.push(T),(P=f(h))>0&&O.length>P&&!O.warned){O.warned=!0;var D=new Error("Possible EventEmitter memory leak detected. "+O.length+" "+String(u)+" listeners added. Use emitter.setMaxListeners() to increase limit");D.name="MaxListenersExceededWarning",D.emitter=h,D.type=u,D.count=O.length,$=D,console&&console.warn&&console.warn($)}return h}function A(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function y(h,u,T){var R={fired:!1,wrapFn:void 0,target:h,type:u,listener:T},P=A.bind(R);return P.listener=T,R.wrapFn=P,P}function g(h,u,T){var R=h._events;if(R===void 0)return[];var P=R[u];return P===void 0?[]:typeof P=="function"?T?[P.listener||P]:[P]:T?function(Y){for(var O=new Array(Y.length),$=0;$<O.length;++$)O[$]=Y[$].listener||Y[$];return O}(P):C(P,P.length)}function L(h){var u=this._events;if(u!==void 0){var T=u[h];if(typeof T=="function")return 1;if(T!==void 0)return T.length}return 0}function C(h,u){for(var T=new Array(u),R=0;R<u;++R)T[R]=h[R];return T}function w(h,u,T,R){if(typeof h.on=="function")R.once?h.once(u,T):h.on(u,T);else{if(typeof h.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof h);h.addEventListener(u,function P(Y){R.once&&h.removeEventListener(u,P),T(Y)})}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(h){if(typeof h!="number"||h<0||E(h))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+h+".");n=h}}),a.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(h){if(typeof h!="number"||h<0||E(h))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+h+".");return this._maxListeners=h,this},a.prototype.getMaxListeners=function(){return f(this)},a.prototype.emit=function(h){for(var u=[],T=1;T<arguments.length;T++)u.push(arguments[T]);var R=h==="error",P=this._events;if(P!==void 0)R=R&&P.error===void 0;else if(!R)return!1;if(R){var Y;if(u.length>0&&(Y=u[0]),Y instanceof Error)throw Y;var O=new Error("Unhandled error."+(Y?" ("+Y.message+")":""));throw O.context=Y,O}var $=P[h];if($===void 0)return!1;if(typeof $=="function")p($,this,u);else{var D=$.length,c=C($,D);for(T=0;T<D;++T)p(c[T],this,u)}return!0},a.prototype.addListener=function(h,u){return d(this,h,u,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(h,u){return d(this,h,u,!0)},a.prototype.once=function(h,u){return i(u),this.on(h,y(this,h,u)),this},a.prototype.prependOnceListener=function(h,u){return i(u),this.prependListener(h,y(this,h,u)),this},a.prototype.removeListener=function(h,u){var T,R,P,Y,O;if(i(u),(R=this._events)===void 0)return this;if((T=R[h])===void 0)return this;if(T===u||T.listener===u)--this._eventsCount==0?this._events=Object.create(null):(delete R[h],R.removeListener&&this.emit("removeListener",h,T.listener||u));else if(typeof T!="function"){for(P=-1,Y=T.length-1;Y>=0;Y--)if(T[Y]===u||T[Y].listener===u){O=T[Y].listener,P=Y;break}if(P<0)return this;P===0?T.shift():function($,D){for(;D+1<$.length;D++)$[D]=$[D+1];$.pop()}(T,P),T.length===1&&(R[h]=T[0]),R.removeListener!==void 0&&this.emit("removeListener",h,O||u)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(h){var u,T,R;if((T=this._events)===void 0)return this;if(T.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):T[h]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete T[h]),this;if(arguments.length===0){var P,Y=Object.keys(T);for(R=0;R<Y.length;++R)(P=Y[R])!=="removeListener"&&this.removeAllListeners(P);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(u=T[h])=="function")this.removeListener(h,u);else if(u!==void 0)for(R=u.length-1;R>=0;R--)this.removeListener(h,u[R]);return this},a.prototype.listeners=function(h){return g(this,h,!0)},a.prototype.rawListeners=function(h){return g(this,h,!1)},a.listenerCount=function(h,u){return typeof h.listenerCount=="function"?h.listenerCount(u):L.call(h,u)},a.prototype.listenerCount=L,a.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},function(M,v,k){M.exports=k(16).EventEmitter},function(M,v,k){var m=k(9);function l(p,E){p.emit("error",E)}M.exports={destroy:function(p,E){var a=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(E?E(p):!p||this._writableState&&this._writableState.errorEmitted||m.nextTick(l,this,p),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(p||null,function(f){!E&&f?(m.nextTick(l,a,f),a._writableState&&(a._writableState.errorEmitted=!0)):E&&E(f)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(M,v,k){(function(m,l){var p=k(9);function E($){var D=this;this.next=null,this.entry=null,this.finish=function(){(function(c,q,B){var X=c.entry;for(c.entry=null;X;){var j=X.callback;q.pendingcb--,j(B),X=X.next}q.corkedRequestsFree?q.corkedRequestsFree.next=c:q.corkedRequestsFree=c})(D,$)}}M.exports=h;var a,n=!m.browser&&["v0.10","v0.9."].indexOf(m.version.slice(0,5))>-1?l:p.nextTick;h.WritableState=w;var i=Object.create(k(7));i.inherits=k(4);var f={deprecate:k(39)},d=k(17),A=k(12).Buffer,y=window.Uint8Array||function(){},g,L=k(18);function C(){}function w($,D){a=a||k(5),$=$||{};var c=D instanceof a;this.objectMode=!!$.objectMode,c&&(this.objectMode=this.objectMode||!!$.writableObjectMode);var q=$.highWaterMark,B=$.writableHighWaterMark,X=this.objectMode?16:16384;this.highWaterMark=q||q===0?q:c&&(B||B===0)?B:X,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var j=$.decodeStrings===!1;this.decodeStrings=!j,this.defaultEncoding=$.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(J){(function(N,G){var _=N._writableState,x=_.sync,F=_.writecb;if(function(ie){ie.writing=!1,ie.writecb=null,ie.length-=ie.writelen,ie.writelen=0}(_),G)(function(ie,me,ce,ve,fe){--me.pendingcb,ce?(p.nextTick(fe,ve),p.nextTick(O,ie,me),ie._writableState.errorEmitted=!0,ie.emit("error",ve)):(fe(ve),ie._writableState.errorEmitted=!0,ie.emit("error",ve),O(ie,me))})(N,_,x,G,F);else{var W=P(_);W||_.corked||_.bufferProcessing||!_.bufferedRequest||R(N,_),x?n(T,N,_,W,F):T(N,_,W,F)}})(D,J)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new E(this)}function h($){if(a=a||k(5),!(g.call(h,this)||this instanceof a))return new h($);this._writableState=new w($,this),this.writable=!0,$&&(typeof $.write=="function"&&(this._write=$.write),typeof $.writev=="function"&&(this._writev=$.writev),typeof $.destroy=="function"&&(this._destroy=$.destroy),typeof $.final=="function"&&(this._final=$.final)),d.call(this)}function u($,D,c,q,B,X,j){D.writelen=q,D.writecb=j,D.writing=!0,D.sync=!0,c?$._writev(B,D.onwrite):$._write(B,X,D.onwrite),D.sync=!1}function T($,D,c,q){c||function(B,X){X.length===0&&X.needDrain&&(X.needDrain=!1,B.emit("drain"))}($,D),D.pendingcb--,q(),O($,D)}function R($,D){D.bufferProcessing=!0;var c=D.bufferedRequest;if($._writev&&c&&c.next){var q=D.bufferedRequestCount,B=new Array(q),X=D.corkedRequestsFree;X.entry=c;for(var j=0,J=!0;c;)B[j]=c,c.isBuf||(J=!1),c=c.next,j+=1;B.allBuffers=J,u($,D,!0,D.length,B,"",X.finish),D.pendingcb++,D.lastBufferedRequest=null,X.next?(D.corkedRequestsFree=X.next,X.next=null):D.corkedRequestsFree=new E(D),D.bufferedRequestCount=0}else{for(;c;){var N=c.chunk,G=c.encoding,_=c.callback;if(u($,D,!1,D.objectMode?1:N.length,N,G,_),c=c.next,D.bufferedRequestCount--,D.writing)break}c===null&&(D.lastBufferedRequest=null)}D.bufferedRequest=c,D.bufferProcessing=!1}function P($){return $.ending&&$.length===0&&$.bufferedRequest===null&&!$.finished&&!$.writing}function Y($,D){$._final(function(c){D.pendingcb--,c&&$.emit("error",c),D.prefinished=!0,$.emit("prefinish"),O($,D)})}function O($,D){var c=P(D);return c&&(function(q,B){B.prefinished||B.finalCalled||(typeof q._final=="function"?(B.pendingcb++,B.finalCalled=!0,p.nextTick(Y,q,B)):(B.prefinished=!0,q.emit("prefinish")))}($,D),D.pendingcb===0&&(D.finished=!0,$.emit("finish"))),c}i.inherits(h,d),w.prototype.getBuffer=function(){for(var $=this.bufferedRequest,D=[];$;)D.push($),$=$.next;return D},function(){try{Object.defineProperty(w.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(h,Symbol.hasInstance,{value:function($){return!!g.call(this,$)||this===h&&$&&$._writableState instanceof w}})):g=function($){return $ instanceof this},h.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},h.prototype.write=function($,D,c){var q,B=this._writableState,X=!1,j=!B.objectMode&&(q=$,A.isBuffer(q)||q instanceof y);return j&&!A.isBuffer($)&&($=function(J){return A.from(J)}($)),typeof D=="function"&&(c=D,D=null),j?D="buffer":D||(D=B.defaultEncoding),typeof c!="function"&&(c=C),B.ended?function(J,N){var G=new Error("write after end");J.emit("error",G),p.nextTick(N,G)}(this,c):(j||function(J,N,G,_){var x=!0,F=!1;return G===null?F=new TypeError("May not write null values to stream"):typeof G=="string"||G===void 0||N.objectMode||(F=new TypeError("Invalid non-string/buffer chunk")),F&&(J.emit("error",F),p.nextTick(_,F),x=!1),x}(this,B,$,c))&&(B.pendingcb++,X=function(J,N,G,_,x,F){if(!G){var W=function(ve,fe,r){return ve.objectMode||ve.decodeStrings===!1||typeof fe!="string"||(fe=A.from(fe,r)),fe}(N,_,x);_!==W&&(G=!0,x="buffer",_=W)}var ie=N.objectMode?1:_.length;N.length+=ie;var me=N.length<N.highWaterMark;if(me||(N.needDrain=!0),N.writing||N.corked){var ce=N.lastBufferedRequest;N.lastBufferedRequest={chunk:_,encoding:x,isBuf:G,callback:F,next:null},ce?ce.next=N.lastBufferedRequest:N.bufferedRequest=N.lastBufferedRequest,N.bufferedRequestCount+=1}else u(J,N,!1,ie,_,x,F);return me}(this,B,j,$,D,c)),X},h.prototype.cork=function(){this._writableState.corked++},h.prototype.uncork=function(){var $=this._writableState;$.corked&&($.corked--,$.writing||$.corked||$.finished||$.bufferProcessing||!$.bufferedRequest||R(this,$))},h.prototype.setDefaultEncoding=function($){if(typeof $=="string"&&($=$.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf(($+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+$);return this._writableState.defaultEncoding=$,this},Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),h.prototype._write=function($,D,c){c(new Error("_write() is not implemented"))},h.prototype._writev=null,h.prototype.end=function($,D,c){var q=this._writableState;typeof $=="function"?(c=$,$=null,D=null):typeof D=="function"&&(c=D,D=null),$!=null&&this.write($,D),q.corked&&(q.corked=1,this.uncork()),q.ending||q.finished||function(B,X,j){X.ending=!0,O(B,X),j&&(X.finished?p.nextTick(j):B.once("finish",j)),X.ended=!0,B.writable=!1}(this,q,c)},Object.defineProperty(h.prototype,"destroyed",{get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function($){this._writableState&&(this._writableState.destroyed=$)}}),h.prototype.destroy=L.destroy,h.prototype._undestroy=L.undestroy,h.prototype._destroy=function($,D){this.end(),D($)}}).call(this,k(6),k(20).setImmediate)},function(M,v,k){var m=typeof window!="undefined"&&window||typeof self!="undefined"&&self||window,l=Function.prototype.apply;function p(E,a){this._id=E,this._clearFn=a}v.setTimeout=function(){return new p(l.call(setTimeout,m,arguments),clearTimeout)},v.setInterval=function(){return new p(l.call(setInterval,m,arguments),clearInterval)},v.clearTimeout=v.clearInterval=function(E){E&&E.close()},p.prototype.unref=p.prototype.ref=function(){},p.prototype.close=function(){this._clearFn.call(m,this._id)},v.enroll=function(E,a){clearTimeout(E._idleTimeoutId),E._idleTimeout=a},v.unenroll=function(E){clearTimeout(E._idleTimeoutId),E._idleTimeout=-1},v._unrefActive=v.active=function(E){clearTimeout(E._idleTimeoutId);var a=E._idleTimeout;a>=0&&(E._idleTimeoutId=setTimeout(function(){E._onTimeout&&E._onTimeout()},a))},k(38),v.setImmediate=typeof self!="undefined"&&self.setImmediate||typeof window!="undefined"&&window.setImmediate||this&&this.setImmediate,v.clearImmediate=typeof self!="undefined"&&self.clearImmediate||typeof window!="undefined"&&window.clearImmediate||this&&this.clearImmediate},function(M,v,k){var m=k(40).Buffer,l=m.isEncoding||function(g){switch((g=""+g)&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function p(g){var L;switch(this.encoding=function(C){var w=function(h){if(!h)return"utf8";for(var u;;)switch(h){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return h;default:if(u)return;h=(""+h).toLowerCase(),u=!0}}(C);if(typeof w!="string"&&(m.isEncoding===l||!l(C)))throw new Error("Unknown encoding: "+C);return w||C}(g),this.encoding){case"utf16le":this.text=n,this.end=i,L=4;break;case"utf8":this.fillLast=a,L=4;break;case"base64":this.text=f,this.end=d,L=3;break;default:return this.write=A,void(this.end=y)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(L)}function E(g){return g<=127?0:g>>5==6?2:g>>4==14?3:g>>3==30?4:g>>6==2?-1:-2}function a(g){var L=this.lastTotal-this.lastNeed,C=function(w,h,u){if((192&h[0])!=128)return w.lastNeed=0,"\uFFFD";if(w.lastNeed>1&&h.length>1){if((192&h[1])!=128)return w.lastNeed=1,"\uFFFD";if(w.lastNeed>2&&h.length>2&&(192&h[2])!=128)return w.lastNeed=2,"\uFFFD"}}(this,g);return C!==void 0?C:this.lastNeed<=g.length?(g.copy(this.lastChar,L,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(g.copy(this.lastChar,L,0,g.length),void(this.lastNeed-=g.length))}function n(g,L){if((g.length-L)%2==0){var C=g.toString("utf16le",L);if(C){var w=C.charCodeAt(C.length-1);if(w>=55296&&w<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],C.slice(0,-1)}return C}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",L,g.length-1)}function i(g){var L=g&&g.length?this.write(g):"";if(this.lastNeed){var C=this.lastTotal-this.lastNeed;return L+this.lastChar.toString("utf16le",0,C)}return L}function f(g,L){var C=(g.length-L)%3;return C===0?g.toString("base64",L):(this.lastNeed=3-C,this.lastTotal=3,C===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",L,g.length-C))}function d(g){var L=g&&g.length?this.write(g):"";return this.lastNeed?L+this.lastChar.toString("base64",0,3-this.lastNeed):L}function A(g){return g.toString(this.encoding)}function y(g){return g&&g.length?this.write(g):""}v.StringDecoder=p,p.prototype.write=function(g){if(g.length===0)return"";var L,C;if(this.lastNeed){if((L=this.fillLast(g))===void 0)return"";C=this.lastNeed,this.lastNeed=0}else C=0;return C<g.length?L?L+this.text(g,C):this.text(g,C):L||""},p.prototype.end=function(g){var L=g&&g.length?this.write(g):"";return this.lastNeed?L+"\uFFFD":L},p.prototype.text=function(g,L){var C=function(h,u,T){var R=u.length-1;if(R<T)return 0;var P=E(u[R]);return P>=0?(P>0&&(h.lastNeed=P-1),P):--R<T||P===-2?0:(P=E(u[R]),P>=0?(P>0&&(h.lastNeed=P-2),P):--R<T||P===-2?0:(P=E(u[R]),P>=0?(P>0&&(P===2?P=0:h.lastNeed=P-3),P):0))}(this,g,L);if(!this.lastNeed)return g.toString("utf8",L);this.lastTotal=C;var w=g.length-(C-this.lastNeed);return g.copy(this.lastChar,0,w),g.toString("utf8",L,w)},p.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length}},function(M,v,k){M.exports=E;var m=k(5),l=Object.create(k(7));function p(i,f){var d=this._transformState;d.transforming=!1;var A=d.writecb;if(!A)return this.emit("error",new Error("write callback called multiple times"));d.writechunk=null,d.writecb=null,f!=null&&this.push(f),A(i);var y=this._readableState;y.reading=!1,(y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}function E(i){if(!(this instanceof E))return new E(i);m.call(this,i),this._transformState={afterTransform:p.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,i&&(typeof i.transform=="function"&&(this._transform=i.transform),typeof i.flush=="function"&&(this._flush=i.flush)),this.on("prefinish",a)}function a(){var i=this;typeof this._flush=="function"?this._flush(function(f,d){n(i,f,d)}):n(this,null,null)}function n(i,f,d){if(f)return i.emit("error",f);if(d!=null&&i.push(d),i._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(i._transformState.transforming)throw new Error("Calling transform done when still transforming");return i.push(null)}l.inherits=k(4),l.inherits(E,m),E.prototype.push=function(i,f){return this._transformState.needTransform=!1,m.prototype.push.call(this,i,f)},E.prototype._transform=function(i,f,d){throw new Error("_transform() is not implemented")},E.prototype._write=function(i,f,d){var A=this._transformState;if(A.writecb=d,A.writechunk=i,A.writeencoding=f,!A.transforming){var y=this._readableState;(A.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},E.prototype._read=function(i){var f=this._transformState;f.writechunk!==null&&f.writecb&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},E.prototype._destroy=function(i,f){var d=this;m.prototype._destroy.call(this,i,function(A){f(A),d.emit("close")})}},function(M,v,k){(function(m){var l,p,E=k(1),a=k.n(E),n=k(0),i=k.n(n),f=k(2);v.a={pack:!0,encode:!0,compress:(p=a()(i.a.mark(function d(A){var y;return i.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,f.a.lzma();case 2:return y=g.sent,g.abrupt("return",new Promise(function(L,C){return y.compress(A,9,function(w,h){return h?C(h):L(m.from(w))})}));case 4:case"end":return g.stop()}},d)})),function(d){return p.apply(this,arguments)}),decompress:(l=a()(i.a.mark(function d(A){var y;return i.a.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,f.a.lzma();case 2:return y=g.sent,g.abrupt("return",new Promise(function(L,C){return y.decompress(A,function(w,h){return h?C(h):L(m.from(w))})}));case 4:case"end":return g.stop()}},d)})),function(d){return l.apply(this,arguments)})}}).call(this,k(3).Buffer)},function(M,v,k){(function(m){var l,p,E=k(1),a=k.n(E),n=k(0),i=k.n(n),f=k(2);v.a={pack:!1,encode:!0,compress:(p=a()(i.a.mark(function d(A){return i.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.t0=m,y.next=3,f.a.lzstring();case 3:return y.t1=y.sent.compressToUint8Array(A),y.abrupt("return",y.t0.from.call(y.t0,y.t1));case 5:case"end":return y.stop()}},d)})),function(d){return p.apply(this,arguments)}),decompress:(l=a()(i.a.mark(function d(A){return i.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,f.a.lzstring();case 2:return y.abrupt("return",y.sent.decompressFromUint8Array(A));case 3:case"end":return y.stop()}},d)})),function(d){return l.apply(this,arguments)})}}).call(this,k(3).Buffer)},function(M,v,k){(function(m){var l,p,E=k(1),a=k.n(E),n=k(0),i=k.n(n),f=k(2);v.a={pack:!0,encode:!0,compress:(p=a()(i.a.mark(function d(A){return i.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.t0=m,y.next=3,f.a.lzw();case 3:return y.t1=y.sent.encode(A.toString("binary")),y.abrupt("return",y.t0.from.call(y.t0,y.t1));case 5:case"end":return y.stop()}},d)})),function(d){return p.apply(this,arguments)}),decompress:(l=a()(i.a.mark(function d(A){return i.a.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.t0=m,y.next=3,f.a.lzw();case 3:return y.t1=y.sent.decode(A),y.abrupt("return",y.t0.from.call(y.t0,y.t1,"binary"));case 5:case"end":return y.stop()}},d)})),function(d){return l.apply(this,arguments)})}}).call(this,k(3).Buffer)},function(M,v,k){var m=k(27).default;function l(){M.exports=l=function(){return p},M.exports.__esModule=!0,M.exports.default=M.exports;var p={},E=Object.prototype,a=E.hasOwnProperty,n=Object.defineProperty||function(N,G,_){N[G]=_.value},i=typeof Symbol=="function"?Symbol:{},f=i.iterator||"@@iterator",d=i.asyncIterator||"@@asyncIterator",A=i.toStringTag||"@@toStringTag";function y(N,G,_){return Object.defineProperty(N,G,{value:_,enumerable:!0,configurable:!0,writable:!0}),N[G]}try{y({},"")}catch{y=function(G,_,x){return G[_]=x}}function g(N,G,_,x){var F=G&&G.prototype instanceof w?G:w,W=Object.create(F.prototype),ie=new X(x||[]);return n(W,"_invoke",{value:D(N,_,ie)}),W}function L(N,G,_){try{return{type:"normal",arg:N.call(G,_)}}catch(x){return{type:"throw",arg:x}}}p.wrap=g;var C={};function w(){}function h(){}function u(){}var T={};y(T,f,function(){return this});var R=Object.getPrototypeOf,P=R&&R(R(j([])));P&&P!==E&&a.call(P,f)&&(T=P);var Y=u.prototype=w.prototype=Object.create(T);function O(N){["next","throw","return"].forEach(function(G){y(N,G,function(_){return this._invoke(G,_)})})}function $(N,G){function _(F,W,ie,me){var ce=L(N[F],N,W);if(ce.type!=="throw"){var ve=ce.arg,fe=ve.value;return fe&&m(fe)=="object"&&a.call(fe,"__await")?G.resolve(fe.__await).then(function(r){_("next",r,ie,me)},function(r){_("throw",r,ie,me)}):G.resolve(fe).then(function(r){ve.value=r,ie(ve)},function(r){return _("throw",r,ie,me)})}me(ce.arg)}var x;n(this,"_invoke",{value:function(F,W){function ie(){return new G(function(me,ce){_(F,W,me,ce)})}return x=x?x.then(ie,ie):ie()}})}function D(N,G,_){var x="suspendedStart";return function(F,W){if(x==="executing")throw new Error("Generator is already running");if(x==="completed"){if(F==="throw")throw W;return J()}for(_.method=F,_.arg=W;;){var ie=_.delegate;if(ie){var me=c(ie,_);if(me){if(me===C)continue;return me}}if(_.method==="next")_.sent=_._sent=_.arg;else if(_.method==="throw"){if(x==="suspendedStart")throw x="completed",_.arg;_.dispatchException(_.arg)}else _.method==="return"&&_.abrupt("return",_.arg);x="executing";var ce=L(N,G,_);if(ce.type==="normal"){if(x=_.done?"completed":"suspendedYield",ce.arg===C)continue;return{value:ce.arg,done:_.done}}ce.type==="throw"&&(x="completed",_.method="throw",_.arg=ce.arg)}}}function c(N,G){var _=G.method,x=N.iterator[_];if(x===void 0)return G.delegate=null,_==="throw"&&N.iterator.return&&(G.method="return",G.arg=void 0,c(N,G),G.method==="throw")||_!=="return"&&(G.method="throw",G.arg=new TypeError("The iterator does not provide a '"+_+"' method")),C;var F=L(x,N.iterator,G.arg);if(F.type==="throw")return G.method="throw",G.arg=F.arg,G.delegate=null,C;var W=F.arg;return W?W.done?(G[N.resultName]=W.value,G.next=N.nextLoc,G.method!=="return"&&(G.method="next",G.arg=void 0),G.delegate=null,C):W:(G.method="throw",G.arg=new TypeError("iterator result is not an object"),G.delegate=null,C)}function q(N){var G={tryLoc:N[0]};1 in N&&(G.catchLoc=N[1]),2 in N&&(G.finallyLoc=N[2],G.afterLoc=N[3]),this.tryEntries.push(G)}function B(N){var G=N.completion||{};G.type="normal",delete G.arg,N.completion=G}function X(N){this.tryEntries=[{tryLoc:"root"}],N.forEach(q,this),this.reset(!0)}function j(N){if(N){var G=N[f];if(G)return G.call(N);if(typeof N.next=="function")return N;if(!isNaN(N.length)){var _=-1,x=function F(){for(;++_<N.length;)if(a.call(N,_))return F.value=N[_],F.done=!1,F;return F.value=void 0,F.done=!0,F};return x.next=x}}return{next:J}}function J(){return{value:void 0,done:!0}}return h.prototype=u,n(Y,"constructor",{value:u,configurable:!0}),n(u,"constructor",{value:h,configurable:!0}),h.displayName=y(u,A,"GeneratorFunction"),p.isGeneratorFunction=function(N){var G=typeof N=="function"&&N.constructor;return!!G&&(G===h||(G.displayName||G.name)==="GeneratorFunction")},p.mark=function(N){return Object.setPrototypeOf?Object.setPrototypeOf(N,u):(N.__proto__=u,y(N,A,"GeneratorFunction")),N.prototype=Object.create(Y),N},p.awrap=function(N){return{__await:N}},O($.prototype),y($.prototype,d,function(){return this}),p.AsyncIterator=$,p.async=function(N,G,_,x,F){F===void 0&&(F=Promise);var W=new $(g(N,G,_,x),F);return p.isGeneratorFunction(G)?W:W.next().then(function(ie){return ie.done?ie.value:W.next()})},O(Y),y(Y,A,"Generator"),y(Y,f,function(){return this}),y(Y,"toString",function(){return"[object Generator]"}),p.keys=function(N){var G=Object(N),_=[];for(var x in G)_.push(x);return _.reverse(),function F(){for(;_.length;){var W=_.pop();if(W in G)return F.value=W,F.done=!1,F}return F.done=!0,F}},p.values=j,X.prototype={constructor:X,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(B),!N)for(var G in this)G.charAt(0)==="t"&&a.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=void 0)},stop:function(){this.done=!0;var N=this.tryEntries[0].completion;if(N.type==="throw")throw N.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var G=this;function _(ce,ve){return W.type="throw",W.arg=N,G.next=ce,ve&&(G.method="next",G.arg=void 0),!!ve}for(var x=this.tryEntries.length-1;x>=0;--x){var F=this.tryEntries[x],W=F.completion;if(F.tryLoc==="root")return _("end");if(F.tryLoc<=this.prev){var ie=a.call(F,"catchLoc"),me=a.call(F,"finallyLoc");if(ie&&me){if(this.prev<F.catchLoc)return _(F.catchLoc,!0);if(this.prev<F.finallyLoc)return _(F.finallyLoc)}else if(ie){if(this.prev<F.catchLoc)return _(F.catchLoc,!0)}else{if(!me)throw new Error("try statement without catch or finally");if(this.prev<F.finallyLoc)return _(F.finallyLoc)}}}},abrupt:function(N,G){for(var _=this.tryEntries.length-1;_>=0;--_){var x=this.tryEntries[_];if(x.tryLoc<=this.prev&&a.call(x,"finallyLoc")&&this.prev<x.finallyLoc){var F=x;break}}F&&(N==="break"||N==="continue")&&F.tryLoc<=G&&G<=F.finallyLoc&&(F=null);var W=F?F.completion:{};return W.type=N,W.arg=G,F?(this.method="next",this.next=F.finallyLoc,C):this.complete(W)},complete:function(N,G){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&G&&(this.next=G),C},finish:function(N){for(var G=this.tryEntries.length-1;G>=0;--G){var _=this.tryEntries[G];if(_.finallyLoc===N)return this.complete(_.completion,_.afterLoc),B(_),C}},catch:function(N){for(var G=this.tryEntries.length-1;G>=0;--G){var _=this.tryEntries[G];if(_.tryLoc===N){var x=_.completion;if(x.type==="throw"){var F=x.arg;B(_)}return F}}throw new Error("illegal catch attempt")},delegateYield:function(N,G,_){return this.delegate={iterator:j(N),resultName:G,nextLoc:_},this.method==="next"&&(this.arg=void 0),C}},p}M.exports=l,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,v){function k(m){return M.exports=k=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},M.exports.__esModule=!0,M.exports.default=M.exports,k(m)}M.exports=k,M.exports.__esModule=!0,M.exports.default=M.exports},function(M,v,k){v.byteLength=function(f){var d=n(f),A=d[0],y=d[1];return 3*(A+y)/4-y},v.toByteArray=function(f){var d,A,y=n(f),g=y[0],L=y[1],C=new p(function(u,T,R){return 3*(T+R)/4-R}(0,g,L)),w=0,h=L>0?g-4:g;for(A=0;A<h;A+=4)d=l[f.charCodeAt(A)]<<18|l[f.charCodeAt(A+1)]<<12|l[f.charCodeAt(A+2)]<<6|l[f.charCodeAt(A+3)],C[w++]=d>>16&255,C[w++]=d>>8&255,C[w++]=255&d;return L===2&&(d=l[f.charCodeAt(A)]<<2|l[f.charCodeAt(A+1)]>>4,C[w++]=255&d),L===1&&(d=l[f.charCodeAt(A)]<<10|l[f.charCodeAt(A+1)]<<4|l[f.charCodeAt(A+2)]>>2,C[w++]=d>>8&255,C[w++]=255&d),C},v.fromByteArray=function(f){for(var d,A=f.length,y=A%3,g=[],L=16383,C=0,w=A-y;C<w;C+=L)g.push(i(f,C,C+L>w?w:C+L));return y===1?(d=f[A-1],g.push(m[d>>2]+m[d<<4&63]+"==")):y===2&&(d=(f[A-2]<<8)+f[A-1],g.push(m[d>>10]+m[d>>4&63]+m[d<<2&63]+"=")),g.join("")};for(var m=[],l=[],p=typeof Uint8Array!="undefined"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)m[a]=E[a],l[E.charCodeAt(a)]=a;function n(f){var d=f.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var A=f.indexOf("=");return A===-1&&(A=d),[A,A===d?0:4-A%4]}function i(f,d,A){for(var y,g,L=[],C=d;C<A;C+=3)y=(f[C]<<16&16711680)+(f[C+1]<<8&65280)+(255&f[C+2]),L.push(m[(g=y)>>18&63]+m[g>>12&63]+m[g>>6&63]+m[63&g]);return L.join("")}l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(M,v){v.read=function(k,m,l,p,E){var a,n,i=8*E-p-1,f=(1<<i)-1,d=f>>1,A=-7,y=l?E-1:0,g=l?-1:1,L=k[m+y];for(y+=g,a=L&(1<<-A)-1,L>>=-A,A+=i;A>0;a=256*a+k[m+y],y+=g,A-=8);for(n=a&(1<<-A)-1,a>>=-A,A+=p;A>0;n=256*n+k[m+y],y+=g,A-=8);if(a===0)a=1-d;else{if(a===f)return n?NaN:1/0*(L?-1:1);n+=Math.pow(2,p),a-=d}return(L?-1:1)*n*Math.pow(2,a-p)},v.write=function(k,m,l,p,E,a){var n,i,f,d=8*a-E-1,A=(1<<d)-1,y=A>>1,g=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,L=p?0:a-1,C=p?1:-1,w=m<0||m===0&&1/m<0?1:0;for(m=Math.abs(m),isNaN(m)||m===1/0?(i=isNaN(m)?1:0,n=A):(n=Math.floor(Math.log(m)/Math.LN2),m*(f=Math.pow(2,-n))<1&&(n--,f*=2),(m+=n+y>=1?g/f:g*Math.pow(2,1-y))*f>=2&&(n++,f/=2),n+y>=A?(i=0,n=A):n+y>=1?(i=(m*f-1)*Math.pow(2,E),n+=y):(i=m*Math.pow(2,y-1)*Math.pow(2,E),n=0));E>=8;k[l+L]=255&i,L+=C,i/=256,E-=8);for(n=n<<E|i,d+=E;d>0;k[l+L]=255&n,L+=C,n/=256,d-=8);k[l+L-C]|=128*w}},function(M,v,k){var m=k(10).Buffer,l=k(31),p=k(8),E=k(42),a=k(43),n=k(44);M.exports=function(i){var f=[],d=[];return{encode:n(f,(i=i||{forceFloat64:!1,compatibilityMode:!1,disableTimestampEncoding:!1,protoAction:"error"}).forceFloat64,i.compatibilityMode,i.disableTimestampEncoding),decode:a(d,i),register:function(A,y,g,L){return l(y,"must have a constructor"),l(g,"must have an encode function"),l(A>=0,"must have a non-negative type"),l(L,"must have a decode function"),this.registerEncoder(function(C){return C instanceof y},function(C){var w=p(),h=m.allocUnsafe(1);return h.writeInt8(A,0),w.append(h),w.append(g(C)),w}),this.registerDecoder(A,L),this},registerEncoder:function(A,y){return l(A,"must have an encode function"),l(y,"must have an encode function"),f.push({check:A,encode:y}),this},registerDecoder:function(A,y){return l(A>=0,"must have a non-negative type"),l(y,"must have a decode function"),d.push({type:A,decode:y}),this},encoder:E.encoder,decoder:E.decoder,buffer:!0,type:"msgpack5",IncompleteBufferError:a.IncompleteBufferError}}},function(M,v,k){var m=k(32);function l(O,$){if(O===$)return 0;for(var D=O.length,c=$.length,q=0,B=Math.min(D,c);q<B;++q)if(O[q]!==$[q]){D=O[q],c=$[q];break}return D<c?-1:c<D?1:0}function p(O){return window.Buffer&&typeof window.Buffer.isBuffer=="function"?window.Buffer.isBuffer(O):!(O==null||!O._isBuffer)}var E=k(11),a=Object.prototype.hasOwnProperty,n=Array.prototype.slice,i=function(){}.name==="foo";function f(O){return Object.prototype.toString.call(O)}function d(O){return!p(O)&&typeof window.ArrayBuffer=="function"&&(typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(O):!!O&&(O instanceof DataView||!!(O.buffer&&O.buffer instanceof ArrayBuffer)))}var A=M.exports=h,y=/\s*function\s+([^\(\s]*)\s*/;function g(O){if(E.isFunction(O)){if(i)return O.name;var $=O.toString().match(y);return $&&$[1]}}function L(O,$){return typeof O=="string"?O.length<$?O:O.slice(0,$):O}function C(O){if(i||!E.isFunction(O))return E.inspect(O);var $=g(O);return"[Function"+($?": "+$:"")+"]"}function w(O,$,D,c,q){throw new A.AssertionError({message:D,actual:O,expected:$,operator:c,stackStartFunction:q})}function h(O,$){O||w(O,!0,$,"==",A.ok)}function u(O,$,D,c){if(O===$)return!0;if(p(O)&&p($))return l(O,$)===0;if(E.isDate(O)&&E.isDate($))return O.getTime()===$.getTime();if(E.isRegExp(O)&&E.isRegExp($))return O.source===$.source&&O.global===$.global&&O.multiline===$.multiline&&O.lastIndex===$.lastIndex&&O.ignoreCase===$.ignoreCase;if(O!==null&&typeof O=="object"||$!==null&&typeof $=="object"){if(d(O)&&d($)&&f(O)===f($)&&!(O instanceof Float32Array||O instanceof Float64Array))return l(new Uint8Array(O.buffer),new Uint8Array($.buffer))===0;if(p(O)!==p($))return!1;var q=(c=c||{actual:[],expected:[]}).actual.indexOf(O);return q!==-1&&q===c.expected.indexOf($)||(c.actual.push(O),c.expected.push($),function(B,X,j,J){if(B==null||X==null)return!1;if(E.isPrimitive(B)||E.isPrimitive(X))return B===X;if(j&&Object.getPrototypeOf(B)!==Object.getPrototypeOf(X))return!1;var N=T(B),G=T(X);if(N&&!G||!N&&G)return!1;if(N)return u(B=n.call(B),X=n.call(X),j);var _,x,F=Y(B),W=Y(X);if(F.length!==W.length)return!1;for(F.sort(),W.sort(),x=F.length-1;x>=0;x--)if(F[x]!==W[x])return!1;for(x=F.length-1;x>=0;x--)if(!u(B[_=F[x]],X[_],j,J))return!1;return!0}(O,$,D,c))}return D?O===$:O==$}function T(O){return Object.prototype.toString.call(O)=="[object Arguments]"}function R(O,$){if(!O||!$)return!1;if(Object.prototype.toString.call($)=="[object RegExp]")return $.test(O);try{if(O instanceof $)return!0}catch{}return!Error.isPrototypeOf($)&&$.call({},O)===!0}function P(O,$,D,c){var q;if(typeof $!="function")throw new TypeError('"block" argument must be a function');typeof D=="string"&&(c=D,D=null),q=function(j){var J;try{j()}catch(N){J=N}return J}($),c=(D&&D.name?" ("+D.name+").":".")+(c?" "+c:"."),O&&!q&&w(q,D,"Missing expected exception"+c);var B=typeof c=="string",X=!O&&q&&!D;if((!O&&E.isError(q)&&B&&R(q,D)||X)&&w(q,D,"Got unwanted exception"+c),O&&q&&D&&!R(q,D)||!O&&q)throw q}A.AssertionError=function(O){this.name="AssertionError",this.actual=O.actual,this.expected=O.expected,this.operator=O.operator,O.message?(this.message=O.message,this.generatedMessage=!1):(this.message=function(j){return L(C(j.actual),128)+" "+j.operator+" "+L(C(j.expected),128)}(this),this.generatedMessage=!0);var $=O.stackStartFunction||w;if(Error.captureStackTrace)Error.captureStackTrace(this,$);else{var D=new Error;if(D.stack){var c=D.stack,q=g($),B=c.indexOf(`
`+q);if(B>=0){var X=c.indexOf(`
`,B+1);c=c.substring(X+1)}this.stack=c}}},E.inherits(A.AssertionError,Error),A.fail=w,A.ok=h,A.equal=function(O,$,D){O!=$&&w(O,$,D,"==",A.equal)},A.notEqual=function(O,$,D){O==$&&w(O,$,D,"!=",A.notEqual)},A.deepEqual=function(O,$,D){u(O,$,!1)||w(O,$,D,"deepEqual",A.deepEqual)},A.deepStrictEqual=function(O,$,D){u(O,$,!0)||w(O,$,D,"deepStrictEqual",A.deepStrictEqual)},A.notDeepEqual=function(O,$,D){u(O,$,!1)&&w(O,$,D,"notDeepEqual",A.notDeepEqual)},A.notDeepStrictEqual=function O($,D,c){u($,D,!0)&&w($,D,c,"notDeepStrictEqual",O)},A.strictEqual=function(O,$,D){O!==$&&w(O,$,D,"===",A.strictEqual)},A.notStrictEqual=function(O,$,D){O===$&&w(O,$,D,"!==",A.notStrictEqual)},A.throws=function(O,$,D){P(!0,O,$,D)},A.doesNotThrow=function(O,$,D){P(!1,O,$,D)},A.ifError=function(O){if(O)throw O},A.strict=m(function O($,D){$||w($,!0,D,"==",O)},A,{equal:A.strictEqual,deepEqual:A.deepStrictEqual,notEqual:A.notStrictEqual,notDeepEqual:A.notDeepStrictEqual}),A.strict.strict=A.strict;var Y=Object.keys||function(O){var $=[];for(var D in O)a.call(O,D)&&$.push(D);return $}},function(M,v,k){var m=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;M.exports=function(){try{if(!Object.assign)return!1;var E=new String("abc");if(E[5]="de",Object.getOwnPropertyNames(E)[0]==="5")return!1;for(var a={},n=0;n<10;n++)a["_"+String.fromCharCode(n)]=n;if(Object.getOwnPropertyNames(a).map(function(f){return a[f]}).join("")!=="0123456789")return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(f){i[f]=f}),Object.keys(Object.assign({},i)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}()?Object.assign:function(E,a){for(var n,i,f=function(g){if(g==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(g)}(E),d=1;d<arguments.length;d++){for(var A in n=Object(arguments[d]))l.call(n,A)&&(f[A]=n[A]);if(m){i=m(n);for(var y=0;y<i.length;y++)p.call(n,i[y])&&(f[i[y]]=n[i[y]])}}return f}},function(M,v){M.exports=function(k){return k&&typeof k=="object"&&typeof k.copy=="function"&&typeof k.fill=="function"&&typeof k.readUInt8=="function"}},function(M,v){typeof Object.create=="function"?M.exports=function(k,m){k.super_=m,k.prototype=Object.create(m.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}})}:M.exports=function(k,m){k.super_=m;var l=function(){};l.prototype=m.prototype,k.prototype=new l,k.prototype.constructor=k}},function(M,v){},function(M,v,k){var m=k(12).Buffer,l=k(37);M.exports=function(){function p(){(function(E,a){if(!(E instanceof a))throw new TypeError("Cannot call a class as a function")})(this,p),this.head=null,this.tail=null,this.length=0}return p.prototype.push=function(E){var a={data:E,next:null};this.length>0?this.tail.next=a:this.head=a,this.tail=a,++this.length},p.prototype.unshift=function(E){var a={data:E,next:this.head};this.length===0&&(this.tail=a),this.head=a,++this.length},p.prototype.shift=function(){if(this.length!==0){var E=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,E}},p.prototype.clear=function(){this.head=this.tail=null,this.length=0},p.prototype.join=function(E){if(this.length===0)return"";for(var a=this.head,n=""+a.data;a=a.next;)n+=E+a.data;return n},p.prototype.concat=function(E){if(this.length===0)return m.alloc(0);if(this.length===1)return this.head.data;for(var a,n,i,f=m.allocUnsafe(E>>>0),d=this.head,A=0;d;)a=d.data,n=f,i=A,a.copy(n,i),A+=d.data.length,d=d.next;return f},p}(),l&&l.inspect&&l.inspect.custom&&(M.exports.prototype[l.inspect.custom]=function(){var p=l.inspect({length:this.length});return this.constructor.name+" "+p})},function(M,v){},function(M,v,k){(function(m){(function(l,p){if(!l.setImmediate){var E,a,n,i,f,d=1,A={},y=!1,g=l.document,L=Object.getPrototypeOf&&Object.getPrototypeOf(l);L=L&&L.setTimeout?L:l,{}.toString.call(l.process)==="[object process]"?E=function(h){m.nextTick(function(){w(h)})}:function(){if(l.postMessage&&!l.importScripts){var h=!0,u=l.onmessage;return l.onmessage=function(){h=!1},l.postMessage("","*"),l.onmessage=u,h}}()?(i="setImmediate$"+Math.random()+"$",f=function(h){h.source===l&&typeof h.data=="string"&&h.data.indexOf(i)===0&&w(+h.data.slice(i.length))},l.addEventListener?l.addEventListener("message",f,!1):l.attachEvent("onmessage",f),E=function(h){l.postMessage(i+h,"*")}):l.MessageChannel?((n=new MessageChannel).port1.onmessage=function(h){w(h.data)},E=function(h){n.port2.postMessage(h)}):g&&"onreadystatechange"in g.createElement("script")?(a=g.documentElement,E=function(h){var u=g.createElement("script");u.onreadystatechange=function(){w(h),u.onreadystatechange=null,a.removeChild(u),u=null},a.appendChild(u)}):E=function(h){setTimeout(w,0,h)},L.setImmediate=function(h){typeof h!="function"&&(h=new Function(""+h));for(var u=new Array(arguments.length-1),T=0;T<u.length;T++)u[T]=arguments[T+1];var R={callback:h,args:u};return A[d]=R,E(d),d++},L.clearImmediate=C}function C(h){delete A[h]}function w(h){if(y)setTimeout(w,0,h);else{var u=A[h];if(u){y=!0;try{(function(T){var R=T.callback,P=T.args;switch(P.length){case 0:R();break;case 1:R(P[0]);break;case 2:R(P[0],P[1]);break;case 3:R(P[0],P[1],P[2]);break;default:R.apply(p,P)}})(u)}finally{C(h),y=!1}}}}})(typeof self=="undefined"?typeof window=="undefined"?this:window:self)}).call(this,k(6))},function(M,v){function k(m){try{if(!window.localStorage)return!1}catch{return!1}var l=window.localStorage[m];return l!=null&&String(l).toLowerCase()==="true"}M.exports=function(m,l){if(k("noDeprecation"))return m;var p=!1;return function(){if(!p){if(k("throwDeprecation"))throw new Error(l);k("traceDeprecation")?console.trace(l):console.warn(l),p=!0}return m.apply(this,arguments)}}},function(M,v,k){var m=k(3),l=m.Buffer;function p(a,n){for(var i in a)n[i]=a[i]}function E(a,n,i){return l(a,n,i)}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?M.exports=m:(p(m,v),v.Buffer=E),p(l,E),E.from=function(a,n,i){if(typeof a=="number")throw new TypeError("Argument must not be a number");return l(a,n,i)},E.alloc=function(a,n,i){if(typeof a!="number")throw new TypeError("Argument must be a number");var f=l(a);return n!==void 0?typeof i=="string"?f.fill(n,i):f.fill(n):f.fill(0),f},E.allocUnsafe=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return l(a)},E.allocUnsafeSlow=function(a){if(typeof a!="number")throw new TypeError("Argument must be a number");return m.SlowBuffer(a)}},function(M,v,k){M.exports=p;var m=k(22),l=Object.create(k(7));function p(E){if(!(this instanceof p))return new p(E);m.call(this,E)}l.inherits=k(4),l.inherits(p,m),p.prototype._transform=function(E,a,n){n(null,E)}},function(M,v,k){var m=k(14).Transform,l=k(4),p=k(8);function E(i){(i=i||{}).objectMode=!0,i.highWaterMark=16,m.call(this,i),this._msgpack=i.msgpack}function a(i){if(!(this instanceof a))return(i=i||{}).msgpack=this,new a(i);E.call(this,i),this._wrap="wrap"in i&&i.wrap}function n(i){if(!(this instanceof n))return(i=i||{}).msgpack=this,new n(i);E.call(this,i),this._chunks=p(),this._wrap="wrap"in i&&i.wrap}l(E,m),l(a,E),a.prototype._transform=function(i,f,d){var A=null;try{A=this._msgpack.encode(this._wrap?i.value:i).slice(0)}catch(y){return this.emit("error",y),d()}this.push(A),d()},l(n,E),n.prototype._transform=function(i,f,d){i&&this._chunks.append(i);try{var A=this._msgpack.decode(this._chunks);this._wrap&&(A={value:A}),this.push(A)}catch(y){return void(y instanceof this._msgpack.IncompleteBufferError?d():this.emit("error",y))}this._chunks.length>0?this._transform(null,f,d):d()},M.exports.decoder=n,M.exports.encoder=a},function(M,v,k){var m=k(8);function l(p){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=p||"unable to decode"}k(11).inherits(l,Error),M.exports=function(p,E){return function(g){g instanceof m||(g=m().append(g));var L=i(g);if(L)return g.consume(L.bytesConsumed),L.value;throw new l};function a(g,L,C){return L>=C+g}function n(g,L){return{value:g,bytesConsumed:L}}function i(g,L){L=L===void 0?0:L;var C=g.length-L;if(C<=0)return null;var w,h,u,T=g.readUInt8(L),R=0;if(!function(P,Y){var O=function($){switch($){case 196:case 204:case 208:case 217:return 2;case 197:case 199:case 205:case 209:case 212:case 218:case 222:return 3;case 198:case 202:case 206:case 210:case 219:return 5;case 200:case 213:return 4;case 201:case 214:return 6;case 203:case 207:case 211:return 9;case 215:return 10;case 216:return 18;default:return-1}}(P);return!(O!==-1&&Y<O)}(T,C))return null;switch(T){case 192:return n(null,1);case 194:return n(!1,1);case 195:return n(!0,1);case 204:return n(R=g.readUInt8(L+1),2);case 205:return n(R=g.readUInt16BE(L+1),3);case 206:return n(R=g.readUInt32BE(L+1),5);case 207:for(u=7;u>=0;u--)R+=g.readUInt8(L+u+1)*Math.pow(2,8*(7-u));return n(R,9);case 208:return n(R=g.readInt8(L+1),2);case 209:return n(R=g.readInt16BE(L+1),3);case 210:return n(R=g.readInt32BE(L+1),5);case 211:return R=function(P,Y){var O=(128&P[Y])==128;if(O)for(var $=1,D=Y+7;D>=Y;D--){var c=(255^P[D])+$;P[D]=255&c,$=c>>8}var q=P.readUInt32BE(Y+0),B=P.readUInt32BE(Y+4);return(4294967296*q+B)*(O?-1:1)}(g.slice(L+1,L+9),0),n(R,9);case 202:return n(R=g.readFloatBE(L+1),5);case 203:return n(R=g.readDoubleBE(L+1),9);case 217:return a(w=g.readUInt8(L+1),C,2)?n(R=g.toString("utf8",L+2,L+2+w),2+w):null;case 218:return a(w=g.readUInt16BE(L+1),C,3)?n(R=g.toString("utf8",L+3,L+3+w),3+w):null;case 219:return a(w=g.readUInt32BE(L+1),C,5)?n(R=g.toString("utf8",L+5,L+5+w),5+w):null;case 196:return a(w=g.readUInt8(L+1),C,2)?n(R=g.slice(L+2,L+2+w),2+w):null;case 197:return a(w=g.readUInt16BE(L+1),C,3)?n(R=g.slice(L+3,L+3+w),3+w):null;case 198:return a(w=g.readUInt32BE(L+1),C,5)?n(R=g.slice(L+5,L+5+w),5+w):null;case 220:return C<3?null:(w=g.readUInt16BE(L+1),f(g,L,w,3));case 221:return C<5?null:(w=g.readUInt32BE(L+1),f(g,L,w,5));case 222:return w=g.readUInt16BE(L+1),d(g,L,w,3);case 223:return w=g.readUInt32BE(L+1),d(g,L,w,5);case 212:return A(g,L,1);case 213:return A(g,L,2);case 214:return A(g,L,4);case 215:return A(g,L,8);case 216:return A(g,L,16);case 199:return w=g.readUInt8(L+1),h=g.readUInt8(L+2),a(w,C,3)?y(g,L,h,w,3):null;case 200:return w=g.readUInt16BE(L+1),h=g.readUInt8(L+3),a(w,C,4)?y(g,L,h,w,4):null;case 201:return w=g.readUInt32BE(L+1),h=g.readUInt8(L+5),a(w,C,6)?y(g,L,h,w,6):null}if((240&T)==144)return f(g,L,w=15&T,1);if((240&T)==128)return d(g,L,w=15&T,1);if((224&T)==160)return a(w=31&T,C,1)?n(R=g.toString("utf8",L+1,L+w+1),w+1):null;if(T>=224)return n(R=T-256,1);if(T<128)return n(T,1);throw new Error("not implemented yet")}function f(g,L,C,w){var h,u=[],T=0;for(L+=w,h=0;h<C;h++){var R=i(g,L);if(!R)return null;u.push(R.value),L+=R.bytesConsumed,T+=R.bytesConsumed}return n(u,w+T)}function d(g,L,C,w){var h,u,T={},R=0;for(L+=w,u=0;u<C;u++){var P=i(g,L);if(!P)return null;var Y=i(g,L+=P.bytesConsumed);if(!Y)return null;if((h=P.value)==="__proto__"){if(E.protoAction==="error")throw new SyntaxError("Object contains forbidden prototype property");if(E.protoAction==="remove")continue}T[h]=Y.value,L+=Y.bytesConsumed,R+=P.bytesConsumed+Y.bytesConsumed}return n(T,w+R)}function A(g,L,C){var w=g.readInt8(L+1);return y(g,L,w,C,2)}function y(g,L,C,w,h){var u,T;if(L+=h,C<0&&C===-1)return function(R,P,Y){var O,$=0;switch(P){case 4:O=R.readUInt32BE(0);break;case 8:var D=R.readUInt32BE(0),c=R.readUInt32BE(4);$=D/4,O=(3&D)*Math.pow(2,32)+c;break;case 12:throw new Error("timestamp 96 is not yet implemented")}var q=1e3*O+Math.round($/1e6);return n(new Date(q),P+Y)}(T=g.slice(L,L+w),w,h);for(u=0;u<p.length;u++)if(C===p[u].type)return T=g.slice(L,L+w),n(p[u].decode(T),h+w);throw new Error("unable to find ext type "+C)}},M.exports.IncompleteBufferError=l},function(M,v,k){var m=k(10).Buffer,l=k(8);function p(E,a){var n,i=!0;return Math.fround&&(i=Math.fround(E)!==E),a&&(i=!0),i?((n=m.allocUnsafe(9))[0]=203,n.writeDoubleBE(E,1)):((n=m.allocUnsafe(5))[0]=202,n.writeFloatBE(E,1)),n}M.exports=function(E,a,n,i){function f(d,A){var y,g,L;if(d===void 0)throw new Error("undefined is not encodable in msgpack!");if((L=d)!=L&&typeof L=="number")throw new Error("NaN is not encodable in msgpack!");if(d===null)(y=m.allocUnsafe(1))[0]=192;else if(d===!0)(y=m.allocUnsafe(1))[0]=195;else if(d===!1)(y=m.allocUnsafe(1))[0]=194;else if(typeof d=="string")(g=m.byteLength(d))<32?((y=m.allocUnsafe(1+g))[0]=160|g,g>0&&y.write(d,1)):g<=255&&!n?((y=m.allocUnsafe(2+g))[0]=217,y[1]=g,y.write(d,2)):g<=65535?((y=m.allocUnsafe(3+g))[0]=218,y.writeUInt16BE(g,1),y.write(d,3)):((y=m.allocUnsafe(5+g))[0]=219,y.writeUInt32BE(g,1),y.write(d,5));else if(d&&(d.readUInt32LE||d instanceof Uint8Array))d instanceof Uint8Array&&(d=m.from(d)),d.length<=255?((y=m.allocUnsafe(2))[0]=196,y[1]=d.length):d.length<=65535?((y=m.allocUnsafe(3))[0]=197,y.writeUInt16BE(d.length,1)):((y=m.allocUnsafe(5))[0]=198,y.writeUInt32BE(d.length,1)),y=l([y,d]);else if(Array.isArray(d))d.length<16?(y=m.allocUnsafe(1))[0]=144|d.length:d.length<65536?((y=m.allocUnsafe(3))[0]=220,y.writeUInt16BE(d.length,1)):((y=m.allocUnsafe(5))[0]=221,y.writeUInt32BE(d.length,1)),y=d.reduce(function(C,w){return C.append(f(w,!0)),C},l().append(y));else{if(!i&&typeof d.getDate=="function")return function(C){var w,h=1*C,u=Math.floor(h/1e3),T=1e6*(h-1e3*u);if(T||u>4294967295){(w=m.allocUnsafe(10))[0]=215,w[1]=-1;var R=4*T+u/Math.pow(2,32)&4294967295,P=4294967295&u;w.writeInt32BE(R,2),w.writeInt32BE(P,6)}else(w=m.allocUnsafe(6))[0]=214,w[1]=-1,w.writeUInt32BE(Math.floor(h/1e3),2);return l().append(w)}(d);if(typeof d=="object")y=function(C){var w,h,u=-1,T=[];for(w=0;w<E.length;w++)if(E[w].check(C)){h=E[w].encode(C);break}return h?((u=h.length-1)===1?T.push(212):u===2?T.push(213):u===4?T.push(214):u===8?T.push(215):u===16?T.push(216):u<256?(T.push(199),T.push(u)):u<65536?(T.push(200),T.push(u>>8),T.push(255&u)):(T.push(201),T.push(u>>24),T.push(u>>16&255),T.push(u>>8&255),T.push(255&u)),l().append(m.from(T)).append(h)):null}(d)||function(C){var w,h,u=[],T=0;for(w in C)C.hasOwnProperty(w)&&C[w]!==void 0&&typeof C[w]!="function"&&(++T,u.push(f(w,!0)),u.push(f(C[w],!0)));T<16?(h=m.allocUnsafe(1))[0]=128|T:T<65535?((h=m.allocUnsafe(3))[0]=222,h.writeUInt16BE(T,1)):((h=m.allocUnsafe(5))[0]=223,h.writeUInt32BE(T,1)),u.unshift(h);var R=u.reduce(function(P,Y){return P.append(Y)},l());return R}(d);else if(typeof d=="number"){if(function(C){return C%1!=0}(d))return p(d,a);if(d>=0)if(d<128)(y=m.allocUnsafe(1))[0]=d;else if(d<256)(y=m.allocUnsafe(2))[0]=204,y[1]=d;else if(d<65536)(y=m.allocUnsafe(3))[0]=205,y.writeUInt16BE(d,1);else if(d<=4294967295)(y=m.allocUnsafe(5))[0]=206,y.writeUInt32BE(d,1);else{if(!(d<=9007199254740991))return p(d,!0);(y=m.allocUnsafe(9))[0]=207,function(C,w){for(var h=7;h>=0;h--)C[h+1]=255&w,w/=256}(y,d)}else if(d>=-32)(y=m.allocUnsafe(1))[0]=256+d;else if(d>=-128)(y=m.allocUnsafe(2))[0]=208,y.writeInt8(d,1);else if(d>=-32768)(y=m.allocUnsafe(3))[0]=209,y.writeInt16BE(d,1);else if(d>-214748365)(y=m.allocUnsafe(5))[0]=210,y.writeInt32BE(d,1);else{if(!(d>=-9007199254740991))return p(d,!0);(y=m.allocUnsafe(9))[0]=211,function(C,w,h){var u=h<0;u&&(h=Math.abs(h));var T=h%4294967296,R=h/4294967296;if(C.writeUInt32BE(Math.floor(R),w+0),C.writeUInt32BE(T,w+4),u)for(var P=1,Y=w+7;Y>=w;Y--){var O=(255^C[Y])+P;C[Y]=255&O,P=O>>8}}(y,1,d)}}}if(!y)throw new Error("not implemented yet");return A?y:y.slice()}return f}},function(M,v,k){M.exports=k(46)},function(M,v,k){(function(m){v.version="1.0.0",v.encode=function(l){return l.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},v.decode=function(l){return l=(l+=Array(5-l.length%4).join("=")).replace(/\-/g,"+").replace(/\_/g,"/"),new m(l,"base64")},v.validate=function(l){return/^[A-Za-z0-9\-_]+$/.test(l)}}).call(this,k(3).Buffer)},function(M,v,k){(function(m){var l=function(){function p(e,S){postMessage({action:Mr,cbn:S,result:e})}function E(e){var S=[];return S[e-1]=void 0,S}function a(e,S){return f(e[0]+S[0],e[1]+S[1])}function n(e,S){return function(o,I){var Q,z;return Q=o*tt,z=I,0>I&&(z+=tt),[z,Q]}(~~Math.max(Math.min(e[1]/tt,2147483647),-2147483648)&~~Math.max(Math.min(S[1]/tt,2147483647),-2147483648),y(e)&y(S))}function i(e,S){var o,I;return e[0]==S[0]&&e[1]==S[1]?0:(o=0>e[1],I=0>S[1],o&&!I?-1:!o&&I?1:w(e,S)[1]<0?-1:1)}function f(e,S){var o,I;for(e%=18446744073709552e3,S=(S%=18446744073709552e3)-(o=S%tt)+(I=Math.floor(e/tt)*tt),e=e-I+o;0>e;)e+=tt,S-=tt;for(;e>4294967295;)e-=tt,S+=tt;for(S%=18446744073709552e3;S>9223372032559809e3;)S-=18446744073709552e3;for(;-9223372036854776e3>S;)S+=18446744073709552e3;return[e,S]}function d(e,S){return e[0]==S[0]&&e[1]==S[1]}function A(e){return e>=0?[e,0]:[e+tt,-tt]}function y(e){return e[0]>=2147483648?~~Math.max(Math.min(e[0]-tt,2147483647),-2147483648):~~Math.max(Math.min(e[0],2147483647),-2147483648)}function g(e){return 30>=e?1<<e:g(30)*g(e-30)}function L(e,S){var o,I,Q,z;if(S&=63,d(e,Pr))return S?dt:e;if(0>e[1])throw Error("Neg");return z=g(S),I=e[1]*z%18446744073709552e3,(I+=o=(Q=e[0]*z)-Q%tt)>=9223372036854776e3&&(I-=18446744073709552e3),[Q-=o,I]}function C(e,S){var o;return o=g(S&=63),f(Math.floor(e[0]/o),e[1]/o)}function w(e,S){return f(e[0]-S[0],e[1]-S[1])}function h(e,S){return e.Mc=S,e.Lc=0,e.Yb=S.length,e}function u(e){return e.Lc>=e.Yb?-1:255&e.Mc[e.Lc++]}function T(e,S,o,I){return e.Lc>=e.Yb?-1:(I=Math.min(I,e.Yb-e.Lc),$(e.Mc,e.Lc,S,o,I),e.Lc+=I,I)}function R(e){return e.Mc=E(32),e.Yb=0,e}function P(e){var S=e.Mc;return S.length=e.Yb,S}function Y(e,S){e.Mc[e.Yb++]=S<<24>>24}function O(e,S,o,I){$(S,o,e.Mc,e.Yb,I),e.Yb+=I}function $(e,S,o,I,Q){for(var z=0;Q>z;++z)o[I+z]=e[S+z]}function D(e,S,o,I,Q){var z,ne;if(i(I,bn)<0)throw Error("invalid length "+I);for(e.Tb=I,function(ee,se){(function(re,oe){re.ab=oe;for(var he=0;oe>1<<he;++he);re.$b=2*he})(se,1<<ee.s),se.n=ee.f,function(re,oe){var he=re.X;re.X=oe,re.b&&he!=re.X&&(re.wb=-1,re.b=null)}(se,ee.m),se.eb=0,se.fb=3,se.Y=2,se.y=3}(Q,z=He({})),z.Gc=l.disableEndMark===void 0,function(ee,se){ee.fc[0]=9*(5*ee.Y+ee.eb)+ee.fb<<24>>24;for(var re=0;4>re;++re)ee.fc[1+re]=ee.ab>>8*re<<24>>24;O(se,ee.fc,0,5)}(z,o),ne=0;64>ne;ne+=8)Y(o,255&y(C(I,ne)));e.yb=(z.W=0,z.oc=S,z.pc=0,function(ee){var se,re;ee.b||(se={},re=4,ee.X||(re=2),function(oe,he){oe.qb=he>2,oe.qb?(oe.w=0,oe.xb=4,oe.R=66560):(oe.w=2,oe.xb=3,oe.R=0)}(se,re),ee.b=se),$r(ee.A,ee.eb,ee.fb),(ee.ab!=ee.wb||ee.Hb!=ee.n)&&(_(ee.b,ee.ab,4096,ee.n,274),ee.wb=ee.ab,ee.Hb=ee.n)}(z),z.d.Ab=o,function(ee){(function(re){re.l=0,re.J=0;for(var oe=0;4>oe;++oe)re.v[oe]=0})(ee),function(re){re.mc=dt,re.xc=dt,re.E=-1,re.Jb=1,re.Oc=0}(ee.d),qe(ee.C),qe(ee._),qe(ee.bb),qe(ee.hb),qe(ee.Ub),qe(ee.vc),qe(ee.Sb),function(re){var oe,he=1<<re.u+re.I;for(oe=0;he>oe;++oe)qe(re.V[oe].tb)}(ee.A);for(var se=0;4>se;++se)qe(ee.K[se].G);at(ee.$,1<<ee.Y),at(ee.i,1<<ee.Y),qe(ee.S.G),ee.N=0,ee.jb=0,ee.q=0,ee.s=0}(z),et(z),ke(z),z.$.rb=z.n+1-2,ft(z.$,1<<z.Y),z.i.rb=z.n+1-2,ft(z.i,1<<z.Y),z.g=dt,function(ee,se){return ee.cb=se,ee.Z=null,ee.zc=1,ee}({},z))}function c(e,S,o){return e.Nb=R({}),D(e,h({},S),e.Nb,A(S.length),o),e}function q(e,S,o){var I,Q,z,ne,ee="",se=[];for(Q=0;5>Q;++Q){if((z=u(S))==-1)throw Error("truncated input");se[Q]=z<<24>>24}if(!function(re,oe){var he,de,ge,we,le,Te,Re;if(5>oe.length)return 0;for(Re=255&oe[0],ge=Re%9,we=(Te=~~(Re/9))%5,le=~~(Te/5),he=0,de=0;4>de;++de)he+=(255&oe[1+de])<<8*de;return he>99999999||!function(Ae,Ue,Pe,Qe){if(Ue>8||Pe>4||Qe>4)return 0;ae(Ae.gb,Pe,Ue);var ze=1<<Qe;return b(Ae.Rb,ze),b(Ae.sb,ze),Ae.Dc=ze-1,1}(re,ge,we,le)?0:function(Ae,Ue){return 0>Ue?0:(Ae.Ob!=Ue&&(Ae.Ob=Ue,Ae.nb=Math.max(Ae.Ob,1),W(Ae.B,Math.max(Ae.nb,4096))),1)}(re,he)}(I=s({}),se))throw Error("corrupted input");for(Q=0;64>Q;Q+=8){if((z=u(S))==-1)throw Error("truncated input");(z=z.toString(16)).length==1&&(z="0"+z),ee=z+""+ee}/^0+$|^f+$/i.test(ee)?e.Tb=bn:(ne=parseInt(ee,16),e.Tb=ne>4294967295?bn:A(ne)),e.yb=function(re,oe,he,de){return re.e.Ab=oe,ce(re.B),re.B.cc=he,function(ge){ge.B.h=0,ge.B.o=0,qe(ge.Gb),qe(ge.pb),qe(ge.Zb),qe(ge.Cb),qe(ge.Db),qe(ge.Eb),qe(ge.kc),function(le){var Te,Re;for(Re=1<<le.u+le.I,Te=0;Re>Te;++Te)qe(le.V[Te].Ib)}(ge.gb);for(var we=0;4>we;++we)qe(ge.kb[we].G);K(ge.Rb),K(ge.sb),qe(ge.Fb.G),function(le){le.Bb=0,le.E=-1;for(var Te=0;5>Te;++Te)le.Bb=le.Bb<<8|u(le.Ab)}(ge.e)}(re),re.U=0,re.ib=0,re.Jc=0,re.Ic=0,re.Qc=0,re.Nc=de,re.g=dt,re.jc=0,function(ge,we){return ge.Z=we,ge.cb=null,ge.zc=1,ge}({},re)}(I,S,o,e.Tb)}function B(e,S){return e.Nb=R({}),q(e,h({},S),e.Nb),e}function X(e,S){return e.c[e.f+e.o+S]}function j(e,S,o,I){var Q,z;for(e.T&&e.o+S+I>e.h&&(I=e.h-(e.o+S)),++o,z=e.f+e.o+S,Q=0;I>Q&&e.c[z+Q]==e.c[z+Q-o];++Q);return Q}function J(e){return e.h-e.o}function N(e){var S,o;if(!e.T)for(;;){if(!(o=-e.f+e.Kb-e.h))return;if((S=T(e.cc,e.c,e.f+e.h,o))==-1)return e.zb=e.h,e.f+e.zb>e.H&&(e.zb=e.H-e.f),void(e.T=1);e.h+=S,e.h>=e.o+e._b&&(e.zb=e.h-e._b)}}function G(e,S){e.f+=S,e.zb-=S,e.o-=S,e.h-=S}function _(e,S,o,I,Q){var z,ne;1073741567>S&&(e.Fc=16+(I>>1),function(ee,se,re,oe){var he;ee.Bc=se,ee._b=re,he=se+re+oe,(ee.c==null||ee.Kb!=he)&&(ee.c=null,ee.Kb=he,ee.c=E(ee.Kb)),ee.H=ee.Kb-re}(e,S+o,I+Q,256+~~((S+o+I+Q)/2)),e.ob=I,z=S+1,e.p!=z&&(e.L=E(2*(e.p=z))),ne=65536,e.qb&&(ne=S-1,ne|=ne>>1,ne|=ne>>2,ne|=ne>>4,ne|=ne>>8,ne>>=1,(ne|=65535)>16777216&&(ne>>=1),e.Ec=ne,++ne,ne+=e.R),ne!=e.rc&&(e.ub=E(e.rc=ne)))}function x(e){var S;++e.k>=e.p&&(e.k=0),function(o){++o.o,o.o>o.zb&&(o.f+o.o>o.H&&function(I){var Q,z,ne;for((ne=I.f+I.o-I.Bc)>0&&--ne,z=I.f+I.h-ne,Q=0;z>Q;++Q)I.c[Q]=I.c[ne+Q];I.f-=ne}(o),N(o))}(e),e.o==1073741823&&(S=e.o-e.p,F(e.L,2*e.p,S),F(e.ub,e.rc,S),G(e,S))}function F(e,S,o){var I,Q;for(I=0;S>I;++I)o>=(Q=e[I]||0)?Q=0:Q-=o,e[I]=Q}function W(e,S){(e.Lb==null||e.M!=S)&&(e.Lb=E(S)),e.M=S,e.o=0,e.h=0}function ie(e){var S=e.o-e.h;S&&(O(e.cc,e.Lb,e.h,S),e.o>=e.M&&(e.o=0),e.h=e.o)}function me(e,S){var o=e.o-S-1;return 0>o&&(o+=e.M),e.Lb[o]}function ce(e){ie(e),e.cc=null}function ve(e){return 4>(e-=2)?e:3}function fe(e){return 4>e?0:10>e?e-3:e-6}function r(e){if(!e.zc)throw Error("bad state");return e.cb?function(S){(function(o,I,Q,z){var ne,ee,se,re,oe,he,de,ge,we,le,Te,Re,Ae,Ue,Pe;if(I[0]=dt,Q[0]=dt,z[0]=1,o.oc&&(o.b.cc=o.oc,function(Qe){Qe.f=0,Qe.o=0,Qe.h=0,Qe.T=0,N(Qe),Qe.k=0,G(Qe,-1)}(o.b),o.W=1,o.oc=null),!o.pc){if(o.pc=1,Ue=o.g,d(o.g,dt)){if(!J(o.b))return void ue(o,y(o.g));Le(o),Ae=y(o.g)&o.y,Ve(o.d,o.C,(o.l<<4)+Ae,0),o.l=fe(o.l),se=X(o.b,-o.s),On(Ut(o.A,y(o.g),o.J),o.d,se),o.J=se,--o.s,o.g=a(o.g,zn)}if(!J(o.b))return void ue(o,y(o.g));for(;;){if(de=ye(o,y(o.g)),le=o.mb,Ae=y(o.g)&o.y,ee=(o.l<<4)+Ae,de==1&&le==-1)Ve(o.d,o.C,ee,0),se=X(o.b,-o.s),Pe=Ut(o.A,y(o.g),o.J),7>o.l?On(Pe,o.d,se):(we=X(o.b,-o.v[0]-1-o.s),Sr(Pe,o.d,we,se)),o.J=se,o.l=fe(o.l);else{if(Ve(o.d,o.C,ee,1),4>le){if(Ve(o.d,o.bb,o.l,1),le?(Ve(o.d,o.hb,o.l,1),le==1?Ve(o.d,o.Ub,o.l,0):(Ve(o.d,o.Ub,o.l,1),Ve(o.d,o.vc,o.l,le-2))):(Ve(o.d,o.hb,o.l,0),Ve(o.d,o._,ee,de==1?0:1)),de==1?o.l=7>o.l?9:11:(Qt(o.i,o.d,de-2,Ae),o.l=7>o.l?8:11),re=o.v[le],le!=0){for(he=le;he>=1;--he)o.v[he]=o.v[he-1];o.v[0]=re}}else{for(Ve(o.d,o.bb,o.l,0),o.l=7>o.l?7:10,Qt(o.$,o.d,de-2,Ae),Re=Ke(le-=4),ge=ve(de),Kt(o.K[ge],o.d,Re),Re>=4&&(Te=le-(ne=(2|1&Re)<<(oe=(Re>>1)-1)),14>Re?Cr(o.Sb,ne-Re-1,o.d,oe,Te):(Un(o.d,Te>>4,oe-4),Bn(o.S,o.d,15&Te),++o.Qb)),re=le,he=3;he>=1;--he)o.v[he]=o.v[he-1];o.v[0]=re,++o.Mb}o.J=X(o.b,de-1-o.s)}if(o.s-=de,o.g=a(o.g,A(de)),!o.s){if(o.Mb>=128&&et(o),o.Qb>=16&&ke(o),I[0]=o.g,Q[0]=xr(o.d),!J(o.b))return void ue(o,y(o.g));if(i(w(o.g,Ue),[4096,0])>=0)return o.pc=0,void(z[0]=0)}}}})(S.cb,S.cb.Xb,S.cb.uc,S.cb.Kc),S.Pb=S.cb.Xb[0],S.cb.Kc[0]&&(function(o){Me(o),o.d.Ab=null}(S.cb),S.zc=0)}(e):function(S){var o=function(I){var Q,z,ne,ee,se,re;if(re=y(I.g)&I.Dc,ot(I.e,I.Gb,(I.U<<4)+re)){if(ot(I.e,I.Zb,I.U))ne=0,ot(I.e,I.Cb,I.U)?(ot(I.e,I.Db,I.U)?(ot(I.e,I.Eb,I.U)?(z=I.Qc,I.Qc=I.Ic):z=I.Ic,I.Ic=I.Jc):z=I.Jc,I.Jc=I.ib,I.ib=z):ot(I.e,I.pb,(I.U<<4)+re)||(I.U=7>I.U?9:11,ne=1),ne||(ne=H(I.sb,I.e,re)+2,I.U=7>I.U?8:11);else if(I.Qc=I.Ic,I.Ic=I.Jc,I.Jc=I.ib,ne=2+H(I.Rb,I.e,re),I.U=7>I.U?7:10,(se=mn(I.kb[ve(ne)],I.e))>=4){if(ee=(se>>1)-1,I.ib=(2|1&se)<<ee,14>se)I.ib+=function(oe,he,de,ge){var we,le,Te=1,Re=0;for(le=0;ge>le;++le)we=ot(de,oe,he+Te),Te<<=1,Te+=we,Re|=we<<le;return Re}(I.kc,I.ib-se-1,I.e,ee);else if(I.ib+=function(oe,he){var de,ge,we=0;for(de=he;de!=0;--de)oe.E>>>=1,ge=oe.Bb-oe.E>>>31,oe.Bb-=oe.E&ge-1,we=we<<1|1-ge,-16777216&oe.E||(oe.Bb=oe.Bb<<8|u(oe.Ab),oe.E<<=8);return we}(I.e,ee-4)<<4,I.ib+=function(oe,he){var de,ge,we=1,le=0;for(ge=0;oe.F>ge;++ge)de=ot(he,oe.G,we),we<<=1,we+=de,le|=de<<ge;return le}(I.Fb,I.e),0>I.ib)return I.ib==-1?1:-1}else I.ib=se;if(i(A(I.ib),I.g)>=0||I.ib>=I.nb)return-1;(function(oe,he,de){var ge=oe.o-he-1;for(0>ge&&(ge+=oe.M);de!=0;--de)ge>=oe.M&&(ge=0),oe.Lb[oe.o++]=oe.Lb[ge++],oe.o>=oe.M&&ie(oe)})(I.B,I.ib,ne),I.g=a(I.g,A(ne)),I.jc=me(I.B,0)}else Q=function(oe,he,de){return oe.V[((he&oe.qc)<<oe.u)+((255&de)>>>8-oe.u)]}(I.gb,y(I.g),I.jc),I.jc=7>I.U?function(oe,he){var de=1;do de=de<<1|ot(he,oe.Ib,de);while(256>de);return de<<24>>24}(Q,I.e):function(oe,he,de){var ge,we,le=1;do if(we=de>>7&1,de<<=1,ge=ot(he,oe.Ib,(1+we<<8)+le),le=le<<1|ge,we!=ge){for(;256>le;)le=le<<1|ot(he,oe.Ib,le);break}while(256>le);return le<<24>>24}(Q,I.e,me(I.B,I.ib)),function(oe,he){oe.Lb[oe.o++]=he,oe.o>=oe.M&&ie(oe)}(I.B,I.jc),I.U=fe(I.U),I.g=a(I.g,zn);return 0}(S.Z);if(o==-1)throw Error("corrupted input");S.Pb=bn,S.Pc=S.Z.g,(o||i(S.Z.Nc,dt)>=0&&i(S.Z.g,S.Z.Nc)>=0)&&(ie(S.Z.B),ce(S.Z.B),S.Z.e.Ab=null,S.zc=0)}(e),e.zc}function s(e){e.B={},e.e={},e.Gb=E(192),e.Zb=E(12),e.Cb=E(12),e.Db=E(12),e.Eb=E(12),e.pb=E(192),e.kb=E(4),e.kc=E(114),e.Fb=Gt({},4),e.Rb=V({}),e.sb=V({}),e.gb={};for(var S=0;4>S;++S)e.kb[S]=Gt({},6);return e}function b(e,S){for(;S>e.O;++e.O)e.ec[e.O]=Gt({},3),e.hc[e.O]=Gt({},3)}function H(e,S,o){return ot(S,e.wc,0)?8+(ot(S,e.wc,1)?8+mn(e.tc,S):mn(e.hc[o],S)):mn(e.ec[o],S)}function V(e){return e.wc=E(2),e.ec=E(16),e.hc=E(16),e.tc=Gt({},8),e.O=0,e}function K(e){qe(e.wc);for(var S=0;e.O>S;++S)qe(e.ec[S].G),qe(e.hc[S].G);qe(e.tc.G)}function ae(e,S,o){var I,Q;if(e.V==null||e.u!=o||e.I!=S)for(e.I=S,e.qc=(1<<S)-1,e.u=o,Q=1<<e.u+e.I,e.V=E(Q),I=0;Q>I;++I)e.V[I]=be({})}function be(e){return e.Ib=E(768),e}function Ce(e,S){var o,I,Q,z;e.jb=S,Q=e.a[S].r,I=e.a[S].j;do e.a[S].t&&(jn(e.a[Q]),e.a[Q].r=Q-1,e.a[S].Ac&&(e.a[Q-1].t=0,e.a[Q-1].r=e.a[S].r2,e.a[Q-1].j=e.a[S].j2)),z=Q,o=I,I=e.a[z].j,Q=e.a[z].r,e.a[z].j=o,e.a[z].r=S,S=z;while(S>0);return e.mb=e.a[0].j,e.q=e.a[0].r}function He(e){var S;for(e.v=E(4),e.a=[],e.d={},e.C=E(192),e.bb=E(12),e.hb=E(12),e.Ub=E(12),e.vc=E(12),e._=E(192),e.K=[],e.Sb=E(114),e.S=Jt({},4),e.$=pn({}),e.i=pn({}),e.A={},e.m=[],e.P=[],e.lb=[],e.nc=E(16),e.x=E(4),e.Q=E(4),e.Xb=[dt],e.uc=[dt],e.Kc=[0],e.fc=E(5),e.yc=E(128),e.vb=0,e.X=1,e.D=0,e.Hb=-1,e.mb=0,S=0;4096>S;++S)e.a[S]={};for(S=0;4>S;++S)e.K[S]=Jt({},6);return e}function ke(e){for(var S=0;16>S;++S)e.nc[S]=Ar(e.S,S);e.Qb=0}function et(e){var S,o,I,Q,z,ne,ee,se;for(Q=4;128>Q;++Q)S=(2|1&(ne=Ke(Q)))<<(I=(ne>>1)-1),e.yc[Q]=Tr(e.Sb,S-ne-1,I,Q-S);for(z=0;4>z;++z){for(o=e.K[z],ee=z<<6,ne=0;e.$b>ne;++ne)e.P[ee+ne]=gn(o,ne);for(ne=14;e.$b>ne;++ne)e.P[ee+ne]+=(ne>>1)-1-4<<6;for(se=128*z,Q=0;4>Q;++Q)e.lb[se+Q]=e.P[ee+Q];for(;128>Q;++Q)e.lb[se+Q]=e.P[ee+Ke(Q)]+e.yc[Q]}e.Mb=0}function ue(e,S){Me(e),function(I,Q){if(I.Gc){Ve(I.d,I.C,(I.l<<4)+Q,1),Ve(I.d,I.bb,I.l,0),I.l=7>I.l?7:10,Qt(I.$,I.d,0,Q);var z=ve(2);Kt(I.K[z],I.d,63),Un(I.d,67108863,26),Bn(I.S,I.d,15)}}(e,S&e.y);for(var o=0;5>o;++o)An(e.d)}function ye(e,S){var o,I,Q,z,ne,ee,se,re,oe,he,de,ge,we,le,Te,Re,Ae,Ue,Pe,Qe,ze,it,At,Et,Ct,gt,st,$t,Ge,$e,It,Lt,nt,rt,Wn,pt,wn,Dt,St,Ht,Zt,Ne,Xe,Ft;if(e.jb!=e.q)return we=e.a[e.q].r-e.q,e.mb=e.a[e.q].j,e.q=e.a[e.q].r,we;if(e.q=e.jb=0,e.N?(ge=e.vb,e.N=0):ge=Le(e),gt=e.D,2>(Et=J(e.b)+1))return e.mb=-1,1;for(Et>273&&(Et=273),St=0,oe=0;4>oe;++oe)e.x[oe]=e.v[oe],e.Q[oe]=j(e.b,-1,e.x[oe],273),e.Q[oe]>e.Q[St]&&(St=oe);if(e.Q[St]>=e.n)return e.mb=St,Fe(e,(we=e.Q[St])-1),we;if(ge>=e.n)return e.mb=e.m[gt-1]+4,Fe(e,ge-1),ge;if(se=X(e.b,-1),Ae=X(e.b,-e.v[0]-1-1),2>ge&&se!=Ae&&2>e.Q[St])return e.mb=-1,1;if(e.a[0].Hc=e.l,nt=S&e.y,e.a[1].z=De[e.C[(e.l<<4)+nt]>>>2]+hn(Ut(e.A,S,e.J),e.l>=7,Ae,se),jn(e.a[1]),Dt=(Ue=De[2048-e.C[(e.l<<4)+nt]>>>2])+De[2048-e.bb[e.l]>>>2],Ae==se&&(Ht=Dt+function(en,Yn,Ir){return De[en.hb[Yn]>>>2]+De[en._[(Yn<<4)+Ir]>>>2]}(e,e.l,nt),e.a[1].z>Ht&&(e.a[1].z=Ht,function(en){en.j=0,en.t=0}(e.a[1]))),2>(de=ge>=e.Q[St]?ge:e.Q[St]))return e.mb=e.a[1].j,1;e.a[1].r=0,e.a[0].bc=e.x[0],e.a[0].ac=e.x[1],e.a[0].dc=e.x[2],e.a[0].lc=e.x[3],he=de;do e.a[he--].z=268435455;while(he>=2);for(oe=0;4>oe;++oe)if(!(2>(wn=e.Q[oe]))){Wn=Dt+xe(e,oe,e.l,nt);do z=Wn+ct(e.i,wn-2,nt),($e=e.a[wn]).z>z&&($e.z=z,$e.r=0,$e.j=oe,$e.t=0);while(--wn>=2)}if(At=Ue+De[e.bb[e.l]>>>2],ge>=(he=e.Q[0]>=2?e.Q[0]+1:2)){for(st=0;he>e.m[st];)st+=2;for(;z=At+_e(e,re=e.m[st+1],he,nt),($e=e.a[he]).z>z&&($e.z=z,$e.r=0,$e.j=re+4,$e.t=0),he!=e.m[st]||(st+=2)!=gt;++he);}for(o=0;;){if(++o==de)return Ce(e,o);if(Pe=Le(e),gt=e.D,Pe>=e.n)return e.vb=Pe,e.N=1,Ce(e,o);if(++S,Lt=e.a[o].r,e.a[o].t?(--Lt,e.a[o].Ac?(Ne=e.a[e.a[o].r2].Hc,Ne=4>e.a[o].j2?7>Ne?8:11:7>Ne?7:10):Ne=e.a[Lt].Hc,Ne=fe(Ne)):Ne=e.a[Lt].Hc,Lt==o-1?Ne=e.a[o].j?fe(Ne):7>Ne?9:11:(e.a[o].t&&e.a[o].Ac?(Lt=e.a[o].r2,It=e.a[o].j2,Ne=7>Ne?8:11):Ne=4>(It=e.a[o].j)?7>Ne?8:11:7>Ne?7:10,Ge=e.a[Lt],4>It?It?It==1?(e.x[0]=Ge.ac,e.x[1]=Ge.bc,e.x[2]=Ge.dc,e.x[3]=Ge.lc):It==2?(e.x[0]=Ge.dc,e.x[1]=Ge.bc,e.x[2]=Ge.ac,e.x[3]=Ge.lc):(e.x[0]=Ge.lc,e.x[1]=Ge.bc,e.x[2]=Ge.ac,e.x[3]=Ge.dc):(e.x[0]=Ge.bc,e.x[1]=Ge.ac,e.x[2]=Ge.dc,e.x[3]=Ge.lc):(e.x[0]=It-4,e.x[1]=Ge.bc,e.x[2]=Ge.ac,e.x[3]=Ge.dc)),e.a[o].Hc=Ne,e.a[o].bc=e.x[0],e.a[o].ac=e.x[1],e.a[o].dc=e.x[2],e.a[o].lc=e.x[3],ee=e.a[o].z,se=X(e.b,-1),Ae=X(e.b,-e.x[0]-1-1),nt=S&e.y,I=ee+De[e.C[(Ne<<4)+nt]>>>2]+hn(Ut(e.A,S,X(e.b,-2)),Ne>=7,Ae,se),Qe=0,(ze=e.a[o+1]).z>I&&(ze.z=I,ze.r=o,ze.j=-1,ze.t=0,Qe=1),Dt=(Ue=ee+De[2048-e.C[(Ne<<4)+nt]>>>2])+De[2048-e.bb[Ne]>>>2],Ae!=se||o>ze.r&&!ze.j||(Ht=Dt+(De[e.hb[Ne]>>>2]+De[e._[(Ne<<4)+nt]>>>2]),ze.z>=Ht&&(ze.z=Ht,ze.r=o,ze.j=0,ze.t=0,Qe=1)),!(2>(Et=Ct=(Ct=J(e.b)+1)>4095-o?4095-o:Ct))){if(Et>e.n&&(Et=e.n),!Qe&&Ae!=se&&(Ft=Math.min(Ct-1,e.n),(Te=j(e.b,0,e.x[0],Ft))>=2)){for(Xe=fe(Ne),rt=S+1&e.y,it=I+De[2048-e.C[(Xe<<4)+rt]>>>2]+De[2048-e.bb[Xe]>>>2],$t=o+1+Te;$t>de;)e.a[++de].z=268435455;z=it+(ct(e.i,Te-2,rt)+xe(e,0,Xe,rt)),($e=e.a[$t]).z>z&&($e.z=z,$e.r=o+1,$e.j=0,$e.t=1,$e.Ac=0)}for(Zt=2,pt=0;4>pt;++pt)if(!(2>(le=j(e.b,-1,e.x[pt],Et)))){Re=le;do{for(;o+le>de;)e.a[++de].z=268435455;z=Dt+(ct(e.i,le-2,nt)+xe(e,pt,Ne,nt)),($e=e.a[o+le]).z>z&&($e.z=z,$e.r=o,$e.j=pt,$e.t=0)}while(--le>=2);if(le=Re,pt||(Zt=le+1),Ct>le&&(Ft=Math.min(Ct-1-le,e.n),(Te=j(e.b,le,e.x[pt],Ft))>=2)){for(Xe=7>Ne?8:11,rt=S+le&e.y,Q=Dt+(ct(e.i,le-2,nt)+xe(e,pt,Ne,nt))+De[e.C[(Xe<<4)+rt]>>>2]+hn(Ut(e.A,S+le,X(e.b,le-1-1)),1,X(e.b,le-1-(e.x[pt]+1)),X(e.b,le-1)),Xe=fe(Xe),rt=S+le+1&e.y,it=Q+De[2048-e.C[(Xe<<4)+rt]>>>2]+De[2048-e.bb[Xe]>>>2],$t=le+1+Te;o+$t>de;)e.a[++de].z=268435455;z=it+(ct(e.i,Te-2,rt)+xe(e,0,Xe,rt)),($e=e.a[o+$t]).z>z&&($e.z=z,$e.r=o+le+1,$e.j=0,$e.t=1,$e.Ac=1,$e.r2=o,$e.j2=pt)}}if(Pe>Et){for(Pe=Et,gt=0;Pe>e.m[gt];gt+=2);e.m[gt]=Pe,gt+=2}if(Pe>=Zt){for(At=Ue+De[e.bb[Ne]>>>2];o+Pe>de;)e.a[++de].z=268435455;for(st=0;Zt>e.m[st];)st+=2;for(le=Zt;;++le)if(z=At+_e(e,ne=e.m[st+1],le,nt),($e=e.a[o+le]).z>z&&($e.z=z,$e.r=o,$e.j=ne+4,$e.t=0),le==e.m[st]){if(Ct>le&&(Ft=Math.min(Ct-1-le,e.n),(Te=j(e.b,le,ne,Ft))>=2)){for(Xe=7>Ne?7:10,rt=S+le&e.y,Q=z+De[e.C[(Xe<<4)+rt]>>>2]+hn(Ut(e.A,S+le,X(e.b,le-1-1)),1,X(e.b,le-(ne+1)-1),X(e.b,le-1)),Xe=fe(Xe),rt=S+le+1&e.y,it=Q+De[2048-e.C[(Xe<<4)+rt]>>>2]+De[2048-e.bb[Xe]>>>2],$t=le+1+Te;o+$t>de;)e.a[++de].z=268435455;z=it+(ct(e.i,Te-2,rt)+xe(e,0,Xe,rt)),($e=e.a[o+$t]).z>z&&($e.z=z,$e.r=o+le+1,$e.j=0,$e.t=1,$e.Ac=1,$e.r2=o,$e.j2=ne+4)}if((st+=2)==gt)break}}}}}function _e(e,S,o,I){var Q=ve(o);return(128>S?e.lb[128*Q+S]:e.P[(Q<<6)+function(z){return 131072>z?qt[z>>6]+12:134217728>z?qt[z>>16]+32:qt[z>>26]+52}(S)]+e.nc[15&S])+ct(e.$,o-2,I)}function xe(e,S,o,I){var Q;return S?(Q=De[2048-e.hb[o]>>>2],S==1?Q+=De[e.Ub[o]>>>2]:(Q+=De[2048-e.Ub[o]>>>2],Q+=Xt(e.vc[o],S-2))):(Q=De[e.hb[o]>>>2],Q+=De[2048-e._[(o<<4)+I]>>>2]),Q}function Fe(e,S){S>0&&(function(o,I){var Q,z,ne,ee,se,re,oe,he,de,ge,we,le,Te,Re,Ae,Ue,Pe;do{if(o.h>=o.o+o.ob)le=o.ob;else if(le=o.h-o.o,o.xb>le){x(o);continue}for(Te=o.o>o.p?o.o-o.p:0,z=o.f+o.o,o.qb?(re=1023&(Pe=yn[255&o.c[z]]^255&o.c[z+1]),o.ub[re]=o.o,oe=65535&(Pe^=(255&o.c[z+2])<<8),o.ub[1024+oe]=o.o,he=(Pe^yn[255&o.c[z+3]]<<5)&o.Ec):he=255&o.c[z]^(255&o.c[z+1])<<8,ne=o.ub[o.R+he],o.ub[o.R+he]=o.o,Ae=1+(o.k<<1),Ue=o.k<<1,ge=we=o.w,Q=o.Fc;;){if(Te>=ne||Q--==0){o.L[Ae]=o.L[Ue]=0;break}if(se=o.o-ne,ee=(o.k>=se?o.k-se:o.k-se+o.p)<<1,Re=o.f+ne,de=we>ge?ge:we,o.c[Re+de]==o.c[z+de]){for(;++de!=le&&o.c[Re+de]==o.c[z+de];);if(de==le){o.L[Ue]=o.L[ee],o.L[Ae]=o.L[ee+1];break}}(255&o.c[z+de])>(255&o.c[Re+de])?(o.L[Ue]=ne,Ue=ee+1,ne=o.L[Ue],we=de):(o.L[Ae]=ne,Ae=ee,ne=o.L[Ae],ge=de)}x(o)}while(--I!=0)}(e.b,S),e.s+=S)}function Le(e){var S=0;return e.D=function(o,I){var Q,z,ne,ee,se,re,oe,he,de,ge,we,le,Te,Re,Ae,Ue,Pe,Qe,ze,it,At;if(o.h>=o.o+o.ob)Re=o.ob;else if(Re=o.h-o.o,o.xb>Re)return x(o),0;for(Pe=0,Ae=o.o>o.p?o.o-o.p:0,z=o.f+o.o,Ue=1,he=0,de=0,o.qb?(he=1023&(At=yn[255&o.c[z]]^255&o.c[z+1]),de=65535&(At^=(255&o.c[z+2])<<8),ge=(At^yn[255&o.c[z+3]]<<5)&o.Ec):ge=255&o.c[z]^(255&o.c[z+1])<<8,ne=o.ub[o.R+ge]||0,o.qb&&(ee=o.ub[he]||0,se=o.ub[1024+de]||0,o.ub[he]=o.o,o.ub[1024+de]=o.o,ee>Ae&&o.c[o.f+ee]==o.c[z]&&(I[Pe++]=Ue=2,I[Pe++]=o.o-ee-1),se>Ae&&o.c[o.f+se]==o.c[z]&&(se==ee&&(Pe-=2),I[Pe++]=Ue=3,I[Pe++]=o.o-se-1,ee=se),Pe!=0&&ee==ne&&(Pe-=2,Ue=1)),o.ub[o.R+ge]=o.o,ze=1+(o.k<<1),it=o.k<<1,le=Te=o.w,o.w!=0&&ne>Ae&&o.c[o.f+ne+o.w]!=o.c[z+o.w]&&(I[Pe++]=Ue=o.w,I[Pe++]=o.o-ne-1),Q=o.Fc;;){if(Ae>=ne||Q--==0){o.L[ze]=o.L[it]=0;break}if(oe=o.o-ne,re=(o.k>=oe?o.k-oe:o.k-oe+o.p)<<1,Qe=o.f+ne,we=Te>le?le:Te,o.c[Qe+we]==o.c[z+we]){for(;++we!=Re&&o.c[Qe+we]==o.c[z+we];);if(we>Ue&&(I[Pe++]=Ue=we,I[Pe++]=oe-1,we==Re)){o.L[it]=o.L[re],o.L[ze]=o.L[re+1];break}}(255&o.c[z+we])>(255&o.c[Qe+we])?(o.L[it]=ne,it=re+1,ne=o.L[it],Te=we):(o.L[ze]=ne,ze=re,ne=o.L[ze],le=we)}return x(o),Pe}(e.b,e.m),e.D>0&&(S=e.m[e.D-2])==e.n&&(S+=j(e.b,S-1,e.m[e.D-1],273-S)),++e.s,S}function Me(e){e.b&&e.W&&(e.b.cc=null,e.W=0)}function Ke(e){return 2048>e?qt[e]:2097152>e?qt[e>>10]+20:qt[e>>20]+40}function at(e,S){qe(e.db);for(var o=0;S>o;++o)qe(e.Vb[o].G),qe(e.Wb[o].G);qe(e.ic.G)}function Bt(e,S,o,I,Q){var z,ne,ee,se,re;for(z=De[e.db[0]>>>2],ee=(ne=De[2048-e.db[0]>>>2])+De[e.db[1]>>>2],se=ne+De[2048-e.db[1]>>>2],re=0,re=0;8>re;++re){if(re>=o)return;I[Q+re]=z+gn(e.Vb[S],re)}for(;16>re;++re){if(re>=o)return;I[Q+re]=ee+gn(e.Wb[S],re-8)}for(;o>re;++re)I[Q+re]=se+gn(e.ic,re-8-8)}function Qt(e,S,o,I){(function(Q,z,ne,ee){8>ne?(Ve(z,Q.db,0,0),Kt(Q.Vb[ee],z,ne)):(ne-=8,Ve(z,Q.db,0,1),8>ne?(Ve(z,Q.db,1,0),Kt(Q.Wb[ee],z,ne)):(Ve(z,Q.db,1,1),Kt(Q.ic,z,ne-8)))})(e,S,o,I),--e.sc[I]==0&&(Bt(e,I,e.rb,e.Cc,272*I),e.sc[I]=e.rb)}function pn(e){return function(S){S.db=E(2),S.Vb=E(16),S.Wb=E(16),S.ic=Jt({},8);for(var o=0;16>o;++o)S.Vb[o]=Jt({},3),S.Wb[o]=Jt({},3)}(e),e.Cc=[],e.sc=[],e}function ct(e,S,o){return e.Cc[272*o+S]}function ft(e,S){for(var o=0;S>o;++o)Bt(e,o,e.rb,e.Cc,272*o),e.sc[o]=e.rb}function $r(e,S,o){var I,Q;if(e.V==null||e.u!=o||e.I!=S)for(e.I=S,e.qc=(1<<S)-1,e.u=o,Q=1<<e.u+e.I,e.V=E(Q),I=0;Q>I;++I)e.V[I]=kr({})}function Ut(e,S,o){return e.V[((S&e.qc)<<e.u)+((255&o)>>>8-e.u)]}function On(e,S,o){var I,Q,z=1;for(Q=7;Q>=0;--Q)I=o>>Q&1,Ve(S,e.tb,z,I),z=z<<1|I}function Sr(e,S,o,I){var Q,z,ne,ee,se=1,re=1;for(z=7;z>=0;--z)Q=I>>z&1,ee=re,se&&(ee+=1+(ne=o>>z&1)<<8,se=ne==Q),Ve(S,e.tb,ee,Q),re=re<<1|Q}function kr(e){return e.tb=E(768),e}function hn(e,S,o,I){var Q,z,ne=1,ee=7,se=0;if(S){for(;ee>=0;--ee)if(z=o>>ee&1,Q=I>>ee&1,se+=Xt(e.tb[(1+z<<8)+ne],Q),ne=ne<<1|Q,z!=Q){--ee;break}}for(;ee>=0;--ee)Q=I>>ee&1,se+=Xt(e.tb[ne],Q),ne=ne<<1|Q;return se}function jn(e){e.j=-1,e.t=0}function Gt(e,S){return e.F=S,e.G=E(1<<S),e}function mn(e,S){var o,I=1;for(o=e.F;o!=0;--o)I=(I<<1)+ot(S,e.G,I);return I-(1<<e.F)}function Jt(e,S){return e.F=S,e.G=E(1<<S),e}function Kt(e,S,o){var I,Q,z=1;for(Q=e.F;Q!=0;)I=o>>>--Q&1,Ve(S,e.G,z,I),z=z<<1|I}function gn(e,S){var o,I,Q=1,z=0;for(I=e.F;I!=0;)o=S>>>--I&1,z+=Xt(e.G[Q],o),Q=(Q<<1)+o;return z}function Bn(e,S,o){var I,Q,z=1;for(Q=0;e.F>Q;++Q)I=1&o,Ve(S,e.G,z,I),z=z<<1|I,o>>=1}function Ar(e,S){var o,I,Q=1,z=0;for(I=e.F;I!=0;--I)o=1&S,S>>>=1,z+=Xt(e.G[Q],o),Q=Q<<1|o;return z}function Cr(e,S,o,I,Q){var z,ne,ee=1;for(ne=0;I>ne;++ne)Ve(o,e,S+ee,z=1&Q),ee=ee<<1|z,Q>>=1}function Tr(e,S,o,I){var Q,z,ne=1,ee=0;for(z=o;z!=0;--z)Q=1&I,I>>>=1,ee+=De[(2047&(e[S+ne]-Q^-Q))>>>2],ne=ne<<1|Q;return ee}function ot(e,S,o){var I,Q=S[o];return(-2147483648^(I=(e.E>>>11)*Q))>(-2147483648^e.Bb)?(e.E=I,S[o]=Q+(2048-Q>>>5)<<16>>16,-16777216&e.E||(e.Bb=e.Bb<<8|u(e.Ab),e.E<<=8),0):(e.E-=I,e.Bb-=I,S[o]=Q-(Q>>>5)<<16>>16,-16777216&e.E||(e.Bb=e.Bb<<8|u(e.Ab),e.E<<=8),1)}function qe(e){for(var S=e.length-1;S>=0;--S)e[S]=1024}function Ve(e,S,o,I){var Q,z=S[o];Q=(e.E>>>11)*z,I?(e.xc=a(e.xc,n(A(Q),[4294967295,0])),e.E-=Q,S[o]=z-(z>>>5)<<16>>16):(e.E=Q,S[o]=z+(2048-z>>>5)<<16>>16),-16777216&e.E||(e.E<<=8,An(e))}function Un(e,S,o){for(var I=o-1;I>=0;--I)e.E>>>=1,(S>>>I&1)==1&&(e.xc=a(e.xc,A(e.E))),-16777216&e.E||(e.E<<=8,An(e))}function xr(e){return a(a(A(e.Jb),e.mc),[4,0])}function An(e){var S,o=y(function(I,Q){var z;return z=C(I,Q&=63),0>I[1]&&(z=a(z,L([2,0],63-Q))),z}(e.xc,32));if(o!=0||i(e.xc,[4278190080,0])<0){e.mc=a(e.mc,A(e.Jb)),S=e.Oc;do Y(e.Ab,S+o),S=255;while(--e.Jb!=0);e.Oc=y(e.xc)>>>24}++e.Jb,e.xc=L(n(e.xc,[16777215,0]),8)}function Xt(e,S){return De[(2047&(e-S^-S))>>>2]}function Nn(e){for(var S,o,I,Q=0,z=0,ne=e.length,ee=[],se=[];ne>Q;++Q,++z){if(128&(S=255&e[Q]))if((224&S)==192){if(Q+1>=ne||(192&(o=255&e[++Q]))!=128)return e;se[z]=(31&S)<<6|63&o}else{if((240&S)!=224||Q+2>=ne||(192&(o=255&e[++Q]))!=128||(192&(I=255&e[++Q]))!=128)return e;se[z]=(15&S)<<12|(63&o)<<6|63&I}else{if(!S)return e;se[z]=S}z==16383&&(ee.push(String.fromCharCode.apply(String,se)),z=-1)}return z>0&&(se.length=z,ee.push(String.fromCharCode.apply(String,se))),ee.join("")}function qn(e){var S,o,I,Q=[],z=0,ne=e.length;if(typeof e=="object")return e;for(function(ee,se,re,oe,he){var de;for(de=se;re>de;++de)oe[he++]=ee.charCodeAt(de)}(e,0,ne,Q,0),I=0;ne>I;++I)(S=Q[I])>=1&&127>=S?++z:z+=!S||S>=128&&2047>=S?2:3;for(o=[],z=0,I=0;ne>I;++I)(S=Q[I])>=1&&127>=S?o[z++]=S<<24>>24:!S||S>=128&&2047>=S?(o[z++]=(192|S>>6&31)<<24>>24,o[z++]=(128|63&S)<<24>>24):(o[z++]=(224|S>>12&15)<<24>>24,o[z++]=(128|S>>6&63)<<24>>24,o[z++]=(128|63&S)<<24>>24);return o}function vn(e){return e[1]+e[0]}var Hn=1,Fn=2,Mr=3,Nt=typeof m=="function"?m:setTimeout,tt=4294967296,bn=[4294967295,-tt],Pr=[0,-9223372036854776e3],dt=[0,0],zn=[1,0],yn=function(){var e,S,o,I=[];for(e=0;256>e;++e){for(o=e,S=0;8>S;++S)(1&o)!=0?o=o>>>1^-306674912:o>>>=1;I[e]=o}return I}(),qt=function(){var e,S,o,I=2,Q=[0,1];for(o=2;22>o;++o)for(S=1<<(o>>1)-1,e=0;S>e;++e,++I)Q[I]=o<<24>>24;return Q}(),De=function(){var e,S,o,I=[];for(S=8;S>=0;--S)for(e=1<<9-S,o=1<<9-S-1;e>o;++o)I[o]=(S<<6)+(e-o<<6>>>9-S-1);return I}(),Vn=function(){var e=[{s:16,f:64,m:0},{s:20,f:64,m:0},{s:19,f:64,m:1},{s:20,f:64,m:1},{s:21,f:128,m:1},{s:22,f:128,m:1},{s:23,f:128,m:1},{s:24,f:255,m:1},{s:25,f:255,m:1}];return function(S){return e[S-1]||e[6]}}();return typeof onmessage=="undefined"||typeof window!="undefined"&&window.document!==void 0||(onmessage=function(e){e&&e.gc&&(e.gc.action==Fn?l.decompress(e.gc.gc,e.gc.cbn):e.gc.action==Hn&&l.compress(e.gc.gc,e.gc.Rc,e.gc.cbn))}),{compress:function(e,S,o,I){var Q,z,ne={},ee=o===void 0&&I===void 0;if(typeof o!="function"&&(z=o,o=I=0),I=I||function(se){return z!==void 0?p(se,z):void 0},o=o||function(se,re){return z!==void 0?postMessage({action:Hn,cbn:z,result:se,error:re}):void 0},ee){for(ne.c=c({},qn(e),Vn(S));r(ne.c.yb););return P(ne.c.Nb)}try{ne.c=c({},qn(e),Vn(S)),I(0)}catch(se){return o(null,se)}Nt(function se(){try{for(var re,oe=new Date().getTime();r(ne.c.yb);)if(Q=vn(ne.c.yb.Pb)/vn(ne.c.Tb),new Date().getTime()-oe>200)return I(Q),Nt(se,0),0;I(1),re=P(ne.c.Nb),Nt(o.bind(null,re),0)}catch(he){o(null,he)}},0)},decompress:function(e,S,o){var I,Q,z,ne,ee={},se=S===void 0&&o===void 0;if(typeof S!="function"&&(Q=S,S=o=0),o=o||function(re){return Q!==void 0?p(z?re:-1,Q):void 0},S=S||function(re,oe){return Q!==void 0?postMessage({action:Fn,cbn:Q,result:re,error:oe}):void 0},se){for(ee.d=B({},e);r(ee.d.yb););return Nn(P(ee.d.Nb))}try{ee.d=B({},e),ne=vn(ee.d.Tb),z=ne>-1,o(0)}catch(re){return S(null,re)}Nt(function re(){try{for(var oe,he=0,de=new Date().getTime();r(ee.d.yb);)if(++he%1e3==0&&new Date().getTime()-de>200)return z&&(I=vn(ee.d.yb.Z.g)/ne,o(I)),Nt(re,0),0;o(1),oe=Nn(P(ee.d.Nb)),Nt(S.bind(null,oe),0)}catch(ge){S(null,ge)}},0)}}}();this.LZMA=this.LZMA_WORKER=l}).call(this,k(20).setImmediate)},function(M,v,k){var m,l=function(){var p=String.fromCharCode,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};function i(d,A){if(!n[d]){n[d]={};for(var y=0;y<d.length;y++)n[d][d.charAt(y)]=y}return n[d][A]}var f={compressToBase64:function(d){if(d==null)return"";var A=f._compress(d,6,function(y){return E.charAt(y)});switch(A.length%4){default:case 0:return A;case 1:return A+"===";case 2:return A+"==";case 3:return A+"="}},decompressFromBase64:function(d){return d==null?"":d==""?null:f._decompress(d.length,32,function(A){return i(E,d.charAt(A))})},compressToUTF16:function(d){return d==null?"":f._compress(d,15,function(A){return p(A+32)})+" "},decompressFromUTF16:function(d){return d==null?"":d==""?null:f._decompress(d.length,16384,function(A){return d.charCodeAt(A)-32})},compressToUint8Array:function(d){for(var A=f.compress(d),y=new Uint8Array(2*A.length),g=0,L=A.length;g<L;g++){var C=A.charCodeAt(g);y[2*g]=C>>>8,y[2*g+1]=C%256}return y},decompressFromUint8Array:function(d){if(d==null)return f.decompress(d);for(var A=new Array(d.length/2),y=0,g=A.length;y<g;y++)A[y]=256*d[2*y]+d[2*y+1];var L=[];return A.forEach(function(C){L.push(p(C))}),f.decompress(L.join(""))},compressToEncodedURIComponent:function(d){return d==null?"":f._compress(d,6,function(A){return a.charAt(A)})},decompressFromEncodedURIComponent:function(d){return d==null?"":d==""?null:(d=d.replace(/ /g,"+"),f._decompress(d.length,32,function(A){return i(a,d.charAt(A))}))},compress:function(d){return f._compress(d,16,function(A){return p(A)})},_compress:function(d,A,y){if(d==null)return"";var g,L,C,w={},h={},u="",T="",R="",P=2,Y=3,O=2,$=[],D=0,c=0;for(C=0;C<d.length;C+=1)if(u=d.charAt(C),Object.prototype.hasOwnProperty.call(w,u)||(w[u]=Y++,h[u]=!0),T=R+u,Object.prototype.hasOwnProperty.call(w,T))R=T;else{if(Object.prototype.hasOwnProperty.call(h,R)){if(R.charCodeAt(0)<256){for(g=0;g<O;g++)D<<=1,c==A-1?(c=0,$.push(y(D)),D=0):c++;for(L=R.charCodeAt(0),g=0;g<8;g++)D=D<<1|1&L,c==A-1?(c=0,$.push(y(D)),D=0):c++,L>>=1}else{for(L=1,g=0;g<O;g++)D=D<<1|L,c==A-1?(c=0,$.push(y(D)),D=0):c++,L=0;for(L=R.charCodeAt(0),g=0;g<16;g++)D=D<<1|1&L,c==A-1?(c=0,$.push(y(D)),D=0):c++,L>>=1}--P==0&&(P=Math.pow(2,O),O++),delete h[R]}else for(L=w[R],g=0;g<O;g++)D=D<<1|1&L,c==A-1?(c=0,$.push(y(D)),D=0):c++,L>>=1;--P==0&&(P=Math.pow(2,O),O++),w[T]=Y++,R=String(u)}if(R!==""){if(Object.prototype.hasOwnProperty.call(h,R)){if(R.charCodeAt(0)<256){for(g=0;g<O;g++)D<<=1,c==A-1?(c=0,$.push(y(D)),D=0):c++;for(L=R.charCodeAt(0),g=0;g<8;g++)D=D<<1|1&L,c==A-1?(c=0,$.push(y(D)),D=0):c++,L>>=1}else{for(L=1,g=0;g<O;g++)D=D<<1|L,c==A-1?(c=0,$.push(y(D)),D=0):c++,L=0;for(L=R.charCodeAt(0),g=0;g<16;g++)D=D<<1|1&L,c==A-1?(c=0,$.push(y(D)),D=0):c++,L>>=1}--P==0&&(P=Math.pow(2,O),O++),delete h[R]}else for(L=w[R],g=0;g<O;g++)D=D<<1|1&L,c==A-1?(c=0,$.push(y(D)),D=0):c++,L>>=1;--P==0&&(P=Math.pow(2,O),O++)}for(L=2,g=0;g<O;g++)D=D<<1|1&L,c==A-1?(c=0,$.push(y(D)),D=0):c++,L>>=1;for(;;){if(D<<=1,c==A-1){$.push(y(D));break}c++}return $.join("")},decompress:function(d){return d==null?"":d==""?null:f._decompress(d.length,32768,function(A){return d.charCodeAt(A)})},_decompress:function(d,A,y){var g,L,C,w,h,u,T,R=[],P=4,Y=4,O=3,$="",D=[],c={val:y(0),position:A,index:1};for(g=0;g<3;g+=1)R[g]=g;for(C=0,h=Math.pow(2,2),u=1;u!=h;)w=c.val&c.position,c.position>>=1,c.position==0&&(c.position=A,c.val=y(c.index++)),C|=(w>0?1:0)*u,u<<=1;switch(C){case 0:for(C=0,h=Math.pow(2,8),u=1;u!=h;)w=c.val&c.position,c.position>>=1,c.position==0&&(c.position=A,c.val=y(c.index++)),C|=(w>0?1:0)*u,u<<=1;T=p(C);break;case 1:for(C=0,h=Math.pow(2,16),u=1;u!=h;)w=c.val&c.position,c.position>>=1,c.position==0&&(c.position=A,c.val=y(c.index++)),C|=(w>0?1:0)*u,u<<=1;T=p(C);break;case 2:return""}for(R[3]=T,L=T,D.push(T);;){if(c.index>d)return"";for(C=0,h=Math.pow(2,O),u=1;u!=h;)w=c.val&c.position,c.position>>=1,c.position==0&&(c.position=A,c.val=y(c.index++)),C|=(w>0?1:0)*u,u<<=1;switch(T=C){case 0:for(C=0,h=Math.pow(2,8),u=1;u!=h;)w=c.val&c.position,c.position>>=1,c.position==0&&(c.position=A,c.val=y(c.index++)),C|=(w>0?1:0)*u,u<<=1;R[Y++]=p(C),T=Y-1,P--;break;case 1:for(C=0,h=Math.pow(2,16),u=1;u!=h;)w=c.val&c.position,c.position>>=1,c.position==0&&(c.position=A,c.val=y(c.index++)),C|=(w>0?1:0)*u,u<<=1;R[Y++]=p(C),T=Y-1,P--;break;case 2:return D.join("")}if(P==0&&(P=Math.pow(2,O),O++),R[T])$=R[T];else{if(T!==Y)return null;$=L+L.charAt(0)}D.push($),R[Y++]=L+$.charAt(0),L=$,--P==0&&(P=Math.pow(2,O),O++)}}};return f}();(m=function(){return l}.call(v,k,v,M))===void 0||(M.exports=m)},function(M,v,k){var m=function(){};m.prototype.encode=function(l){for(var p,E={},a=(l+"").split(""),n=[],i=a[0],f=256,d=1;d<a.length;d++)E[i+(p=a[d])]!=null?i+=p:(n.push(i.length>1?E[i]:i.charCodeAt(0)),E[i+p]=f,f++,i=p);for(n.push(i.length>1?E[i]:i.charCodeAt(0)),d=0;d<n.length;d++)n[d]=String.fromCharCode(n[d]);return n.join("")},m.prototype.decode=function(l){for(var p,E={},a=(l+"").split(""),n=a[0],i=n,f=[n],d=256,A=1;A<a.length;A++){var y=a[A].charCodeAt(0);p=y<256?a[A]:E[y]?E[y]:i+n,f.push(p),n=p.charAt(0),E[d]=i+n,d++,i=p}return f.join("")},M.exports=new m},function(M,v,k){k.r(v);var m,l,p,E=k(1),a=k.n(E),n=k(0),i=k.n(n),f=k(23),d=k(24),A=k(25),y={pack:!0,encode:!0,compress:(l=a()(i.a.mark(function C(w){return i.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",w);case 1:case"end":return h.stop()}},C)})),function(C){return l.apply(this,arguments)}),decompress:(m=a()(i.a.mark(function C(w){return i.a.wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",w);case 1:case"end":return h.stop()}},C)})),function(C){return m.apply(this,arguments)})},g={lzma:f.a,lzstring:d.a,lzw:A.a,pack:y},L=k(2);k.p=(p=function(){if(document.currentScript)return document.currentScript.src;var C=document.getElementsByTagName("script");return C[C.length-1].src}()).substring(0,p.lastIndexOf("/"))+"/",v.default=function(C){if(!Object.prototype.hasOwnProperty.call(g,C))throw new Error("No such algorithm ".concat(C));var w=g[C],h=w.pack,u=w.encode;function T(O){return R.apply(this,arguments)}function R(){return(R=a()(i.a.mark(function O($){var D,c,q;return i.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!h){B.next=6;break}return B.next=3,L.a.msgpack();case 3:B.t0=B.sent.encode($),B.next=7;break;case 6:B.t0=JSON.stringify($);case 7:return D=B.t0,B.next=10,g[C].compress(D);case 10:if(c=B.sent,!u){B.next=17;break}return B.next=14,L.a.safe64();case 14:B.t1=B.sent.encode(c),B.next=18;break;case 17:B.t1=c;case 18:return q=B.t1,B.abrupt("return",q);case 20:case"end":return B.stop()}},O)}))).apply(this,arguments)}function P(){return(P=a()(i.a.mark(function O($){var D,c,q;return i.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!u){B.next=6;break}return B.next=3,L.a.safe64();case 3:B.t0=B.sent.decode($),B.next=7;break;case 6:B.t0=$;case 7:return D=B.t0,B.next=10,g[C].decompress(D);case 10:if(c=B.sent,!h){B.next=17;break}return B.next=14,L.a.msgpack();case 14:B.t1=B.sent.decode(c),B.next=18;break;case 17:B.t1=JSON.parse(c);case 18:return q=B.t1,B.abrupt("return",q);case 20:case"end":return B.stop()}},O)}))).apply(this,arguments)}function Y(){return(Y=a()(i.a.mark(function O($){var D,c,q;return i.a.wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return D=JSON.stringify($),c=encodeURIComponent(D),B.next=4,T($);case 4:return q=B.sent,B.abrupt("return",{raw:D.length,rawencoded:c.length,compressedencoded:q.length,compression:(X=c.length/q.length,Math.floor(1e4*X)/1e4)});case 6:case"end":return B.stop()}var X},O)}))).apply(this,arguments)}return{compress:T,decompress:function(O){return P.apply(this,arguments)},stats:function(O){return Y.apply(this,arguments)}}}}]).default})})(_r);var Er=to(_r.exports);const zi=Wt({name:"DownloadButton",setup(){const t=kt(),U=Yt(),{t:M}=_t(),{renderMarkdown:v}=Mi(),{renderMarkdownV3:k}=Pi(),{renderLatex:m}=ji(),{renderTarrasqueJson:l}=Ui(),{renderImprovedInitJson:p}=Hi(),E=Er("lzma"),a=fr(),n=async h=>await(await fetch("https://tinyurl.com/api-create.php?url="+encodeURIComponent(h))).text();return{save5emm:()=>{try{xo(t.$state,`${t.name}.5emm.json`)}catch(h){console.error(h),U.notify({message:M("io.error.json",[h]),type:"negative"})}},saveMd:()=>{try{jt(v(a.statBlockColumns===2),`${t.name}.md`,"text/markdown")}catch(h){console.error(h),U.notify({message:M("io.error.md",[h]),type:"negative"})}},saveMd3:()=>{try{jt(k(a.statBlockColumns===2),`${t.name}.md`,"text/markdown")}catch(h){console.error(h),U.notify({message:M("io.error.md",[h]),type:"negative"})}},copyMd:()=>{try{In(k(a.statBlockColumns===2)),U.notify({message:M("io.copyMd"),type:"positive"})}catch(h){console.error(h),U.notify({message:M("io.error.md",[h]),type:"negative"})}},saveLatex:()=>{jt(m(a.statBlockColumns===2),`${t.name}.tex`,"text/latex")},saveTio:()=>{jt(l(),`${t.name}.tio.json`,"application/json")},savePng:()=>{const h=document.getElementById("renderer");h!=null&&(a.statBlockColumns>1&&window.navigator.userAgent.includes("Mozilla")&&U.notify({message:M("editor.ffMulticolPngWarning"),type:"warning"}),Fi.toPng(h,{height:h.clientHeight,width:h.clientWidth,scale:2,copyDefaultStyles:!1}).then(function(u){const T=document.createElement("a");T.download=`${t.name}.png`,T.href=u,T.click()}))},saveImprovedInit:async()=>{jt(await p(),`${t.name}.improved-initiative.json`,"application/json")},copyLink:async()=>{try{const h=await E.compress(JSON.stringify(t.$state)),u=`${window.location.origin}${window.location.pathname}#/?data=${h}`;try{const T=await n(u);In(T),U.notify({message:"Copied Sharable Link to Clipboard",type:"positive"})}catch(T){U.notify({message:"Copied long link to Clipboard (unable to shorten)",type:"warning"}),console.log(T),In(u)}}catch(h){U.notify({message:"Error encoding url. Check console for details.",type:"negative"}),console.log(h)}}}}});function Vi(t,U,M,v,k,m){return Oe(),We(mt,{round:"",flat:"",icon:"download"},{default:te(()=>[Z(Ot,null,{default:te(()=>[Z(zt,null,{default:te(()=>[ut((Oe(),We(Je,{clickable:"",onClick:U[0]||(U[0]=l=>t.save5emm())},{default:te(()=>[Z(je,null,{default:te(()=>[Ee(pe(t.$t("io.export.default")),1)]),_:1})]),_:1})),[[ht]]),ut((Oe(),We(Je,{clickable:"",onClick:U[1]||(U[1]=l=>t.saveMd3())},{default:te(()=>[Z(je,null,{default:te(()=>[Ee(pe(t.$t("io.export.md3")),1)]),_:1})]),_:1})),[[ht]]),ut((Oe(),We(Je,{clickable:"",onClick:U[2]||(U[2]=l=>t.saveImprovedInit())},{default:te(()=>[Z(je,null,{default:te(()=>[Ee(pe(t.$t("io.export.improvedInit")),1)]),_:1})]),_:1})),[[ht]]),ut((Oe(),We(Je,{clickable:"",onClick:U[3]||(U[3]=l=>t.saveLatex())},{default:te(()=>[Z(je,null,{default:te(()=>[Ee(pe(t.$t("io.export.latex")),1)]),_:1})]),_:1})),[[ht]]),ut((Oe(),We(Je,{clickable:"",onClick:U[4]||(U[4]=l=>t.saveTio())},{default:te(()=>[Z(je,null,{default:te(()=>[Ee(pe(t.$t("io.export.tarrasque")),1)]),_:1})]),_:1})),[[ht]]),ut((Oe(),We(Je,{clickable:"",onClick:U[5]||(U[5]=l=>t.saveMd())},{default:te(()=>[Z(je,null,{default:te(()=>[Ee(pe(t.$t("io.export.md")),1)]),_:1})]),_:1})),[[ht]]),Z(lt),ut((Oe(),We(Je,{clickable:"",onClick:U[6]||(U[6]=l=>t.savePng())},{default:te(()=>[Z(je,null,{default:te(()=>[Ee(pe(t.$t("io.export.png")),1)]),_:1})]),_:1})),[[ht]]),ut((Oe(),We(Je,{clickable:"",onClick:U[7]||(U[7]=l=>t.copyMd())},{default:te(()=>[Z(je,null,{default:te(()=>[Ee(pe(t.$t("io.export.mdClip")),1)]),_:1})]),_:1})),[[ht]]),ut((Oe(),We(Je,{clickable:"",onClick:U[8]||(U[8]=l=>t.copyLink())},{default:te(()=>[Z(je,null,{default:te(()=>[Ee(pe(t.$t("io.export.link")),1)]),_:1})]),_:1})),[[ht]])]),_:1})]),_:1})]),_:1})}var Wi=Vt(zi,[["render",Vi]]),rr=cn({name:"QBtnToggle",props:{...no,modelValue:{required:!0},options:{type:Array,required:!0,validator:t=>t.every(U=>("label"in U||"icon"in U||"slot"in U)&&"value"in U)},color:String,textColor:String,toggleColor:{type:String,default:"primary"},toggleTextColor:String,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,padding:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,readonly:Boolean,disable:Boolean,stack:Boolean,stretch:Boolean,spread:Boolean,clearable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","clear","click"],setup(t,{slots:U,emit:M}){const v=Ie(()=>t.options.find(f=>f.value===t.modelValue)!==void 0),k=Ie(()=>({type:"hidden",name:t.name,value:t.modelValue})),m=oo(k),l=Ie(()=>ro(t)),p=Ie(()=>({rounded:t.rounded,dense:t.dense,...l.value})),E=Ie(()=>t.options.map((f,d)=>{const{attrs:A,value:y,slot:g,...L}=f;return{slot:g,props:{key:d,"aria-pressed":y===t.modelValue?"true":"false",...A,...L,...p.value,disable:t.disable===!0||L.disable===!0,color:y===t.modelValue?n(L,"toggleColor"):n(L,"color"),textColor:y===t.modelValue?n(L,"toggleTextColor"):n(L,"textColor"),noCaps:n(L,"noCaps")===!0,noWrap:n(L,"noWrap")===!0,size:n(L,"size"),padding:n(L,"padding"),ripple:n(L,"ripple"),stack:n(L,"stack")===!0,stretch:n(L,"stretch")===!0,onClick(C){a(y,f,C)}}}}));function a(f,d,A){t.readonly!==!0&&(t.modelValue===f?t.clearable===!0&&(M("update:modelValue",null,null),M("clear")):M("update:modelValue",f,d),M("click",A))}function n(f,d){return f[d]===void 0?t[d]:f[d]}function i(){const f=E.value.map(d=>Ye(mt,d.props,d.slot!==void 0?U[d.slot]:void 0));return t.name!==void 0&&t.disable!==!0&&v.value===!0&&m(f,"push"),sr(U.default,f)}return()=>Ye(Mo,{class:"q-btn-toggle",...l.value,rounded:t.rounded,stretch:t.stretch,glossy:t.glossy,spread:t.spread},i)}});const Yi=Wt({name:"WebRendererSettingsButton",setup(){const t=kt(),U=fr();return{monsterStore:t,editorStore:U}}}),Qi={class:"row no-wrap q-pa-md"},Gi={class:"row"},Ji={class:"text-h6 q-mb-md col-12"},Ki={class:"col-12 flex items-center justify-between"},Xi={class:"text-body1 q-mr-md"},Zi={class:"col-12 flex items-center justify-between q-my-sm"},ea={class:"text-body1 q-mr-md"};function ta(t,U,M,v,k,m){return Oe(),We(mt,{round:"",flat:"",icon:"settings"},{default:te(()=>[Z(Ot,{style:{width:"300px"}},{default:te(()=>[Se("div",Qi,[Se("div",Gi,[Se("div",Ji,pe(t.$t("editor.renderSettings")),1),Se("div",Ki,[Se("div",Xi,pe(t.$t("editor.columns")),1),Z(rr,{modelValue:t.editorStore.statBlockColumns,"onUpdate:modelValue":U[0]||(U[0]=l=>t.editorStore.statBlockColumns=l),label:t.$t("editor.settings.cols"),options:[{label:t.$t("editor.settings.one"),value:1},{label:t.$t("editor.settings.two"),value:2}]},null,8,["modelValue","label","options"])]),Se("div",Zi,[Se("div",ea,pe(t.$t("editor.settings.style")),1),Z(rr,{modelValue:t.editorStore.style,"onUpdate:modelValue":U[1]||(U[1]=l=>t.editorStore.style=l),label:t.$t("editor.settings.style"),options:[{label:t.$t("editor.settings.2014"),value:"2014"},{label:t.$t("editor.settings.2024"),value:"2024"}]},null,8,["modelValue","label","options"])]),Z(Gn,{modelValue:t.monsterStore.useArticleInToken,"onUpdate:modelValue":U[2]||(U[2]=l=>t.monsterStore.useArticleInToken=l),class:"col-12",label:t.$t("editor.settings.article")},null,8,["modelValue","label"]),Z(Gn,{modelValue:t.monsterStore.alphaTraits,"onUpdate:modelValue":U[3]||(U[3]=l=>t.monsterStore.alphaTraits=l),class:"col-12",label:t.$t("editor.settings.alphaTrait")},null,8,["modelValue","label"])])])]),_:1})]),_:1})}var na=Vt(Yi,[["render",ta]]);function ra(){const{t}=_t(),U=Yt(),M=Rn();if(localStorage.getItem("app.customSpells")!=null&&U.notify({message:t("io.update.v1Spells"),multiLine:!0,group:!1,icon:"update",color:"dark",timeout:0,actions:[{label:t("io.update.v1SpellsDownload"),color:"white",noDismiss:!0,handler:()=>{jt(localStorage.getItem("app.customSpells"),"v1-spells.5emms.json","application/json")}},{label:"Update",color:"green",handler:()=>{try{M.updateFromV1(),U.notify({message:t("io.update.v1SpellsOk"),type:"positive"})}catch(v){U.notify({message:t("io.update.v1SpellsError",[v]),type:"negative",timeout:0,multiLine:!0,actions:[{label:t("editor.ok"),color:"white"}]})}}}]}),localStorage.getItem("app.customTemplates")!=null){const v=br();U.notify({message:t("io.update.v1Templates"),multiLine:!0,group:!1,icon:"update",color:"dark",timeout:0,actions:[{label:t("io.update.v1TemplatesDownload"),color:"white",noDismiss:!0,handler:()=>{jt(localStorage.getItem("app.customTemplates"),"v1-templates.5emmt.json","application/json")}},{label:"Update",color:"green",handler:()=>{try{v.updateFromV1(),U.notify({message:t("io.update.v1TemplatesOk"),type:"positive"})}catch(k){U.notify({message:t("io.update.v1TemplatesError",[k]),type:"negative",timeout:0,multiLine:!0,actions:[{label:t("editor.ok"),color:"white"}]})}}}]})}}function oa(){const t=kt(),U=Rn(),{SrdClass:M}=io(),{rechargeTimeKeys:v}=Po(),{autoUpdateCr:k}=Io(),m=Yt(),{t:l}=_t(),p={STR:"strength",DEX:"dexterity",CON:"constitution",INT:"intelligence",WIS:"wisdom",CHA:"charisma"},E={strength:"STR",dexterity:"DEX",constitution:"CON",intelligence:"INT",wisdom:"WIS",charisma:"CHA"},a={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9},n=u=>{m.notify({message:u,type:"warning",timeout:0,multiLine:!0,actions:[{label:l("editor.ok"),color:"white"}]})},i=u=>{const T=RegExp(/\*\*([^\*]+)\*\*/gi);let R=u.replace(T,(P,Y)=>`<b>${Y}</b>`);return R=R.replaceAll(`
`,"<br>"),R},f=u=>{const T=RegExp(/\d+\s\((\d+)d(\d+)[ ]*([+-][ ]*\d+)?\)/gi),R=u.replace(T,(P,Y,O,$)=>`{${Y}d${O}${$||""}}`);return i(R)},d=(u,T=!1)=>{const R=uo();R.name=u.name,R.description=u.desc;const Y=RegExp(/[\w\d\s]*\(recharge (\d-\d)\)/gi).exec(u.name);Y!=null&&(R.recharge=Y[1],R.name=u.name.substring(0,u.name.indexOf("(")-1));const $=RegExp(/\((\d+)\/(\w+)\)/gi).exec(u.name);return $!=null&&(R.limitedUse.count=parseInt($[1]),R.limitedUse.rate=$[2].toUpperCase(),R.name=u.name.substring(0,u.name.indexOf("(")-1)),R.description=f(R.description),R.legendaryOnly=T,k(R.description,R.crAnnotation),R.description.match(/^as a bonus action/gi)!=null&&(R.bonusAction=!0),t.actions.push(R),R.id},A=u=>{const T=new RegExp(/is an? (\d+)(?:st|nd|th)-level/gi),R=new RegExp(/spellcasting ability is (\w+)/gi),P=new RegExp(/following (\w+) spells?/gi),Y=new RegExp(/spell save DC (\d+)/gi),O=new RegExp(/\+(\d+) to hit/gi),$=T.exec(u);$!=null?t.spellcasting.level=parseInt($[1]):n(l("import.error.spellcasterLevel",[u]));const D=P.exec(u);D!=null&&(t.spellcasting.class=D[1].toUpperCase()in M?D[1].toUpperCase():D[1]);const c=R.exec(u);if(c!=null){const J=E[c[1].toLowerCase()];t.spellcasting.stat=J;const N=Y.exec(u),G=O.exec(u);if(N!=null){const _=parseInt(N[1]);t.spellSave!==_&&(t.spellcasting.save.override=!0,t.spellcasting.save.overrideValue=_)}if(G!=null){const _=parseInt(G[1]);t.spellAttackModifier!==_&&(t.spellcasting.attack.override=!0,t.spellcasting.attack.overrideValue=_)}}else n(l("import.error.spellcasterStat",[u]));const q=[...u.matchAll(/(cantrips?)(?= \(at will\): ([^\n$]+))|(\d+)(?:st|nd|th) level \((\d+) slots?\): ([^\n$]+)/gi)],B=[],X=Object.keys(U.allSpells),j=[];q.forEach(J=>{if(console.log(`[Import] Processing spell list ${J[0]}`),J[1]!=null)J[2].split(",").map(G=>sn.trim(G).replaceAll("*","")).forEach(G=>{const _=X.find(x=>x.toLowerCase()===G);_!=null?j.push(_):B.push(G)});else{const N=parseInt(J[3]),G=parseInt(J[4]),_=J[5].split(",").map(x=>sn.trim(x).replaceAll("*",""));t.spellcasting.slots[N-1]=G,_.forEach(x=>{const F=X.find(W=>W.toLowerCase()===x);F!=null?j.push(F):B.push(x)})}}),t.spellcasting.standard=j,B.length>0&&n(l("import.error.spells",[B.join(", ")]))},y=u=>{const T=new RegExp(/spellcasting ability is (\w+)/gi),R=new RegExp(/spell save DC (\d+)/gi),P=new RegExp(/\+(\d+) to hit/gi),Y=T.exec(u);if(Y!=null){const c=E[Y[1].toLowerCase()];t.spellcasting.stat=c;const q=R.exec(u),B=P.exec(u);if(q!=null){const X=parseInt(q[1]);t.spellSave!==X&&(t.spellcasting.save.override=!0,t.spellcasting.save.overrideValue=X)}if(B!=null){const X=parseInt(B[1]);t.spellAttackModifier!==X&&(t.spellcasting.attack.override=!0,t.spellcasting.attack.overrideValue=X)}}else n(l("import.error.innateSpellcasting",[u]));const O=[...u.matchAll(/(?:(at will)|(\d+)\/([^:]+)): ([^\n]+)/gi)],$=[],D=Object.keys(U.allSpells);O.forEach(c=>{const q=[];console.log(`[Import] Processing spell list ${c[0]}`);const B={id:nn(),count:0,rate:"",spells:[]};if(c[1]!=null){B.rate=c[1];const j=B.rate.toUpperCase().replaceAll(" ","_");v.includes(j)?B.rate=j:n(l("import.error.innateRate",[c[0]]))}else if(c[2]!=null){B.rate=c[3];const j=B.rate.toUpperCase().replaceAll(" ","_");v.includes(j)?B.rate=j:n(l("import.error.innateRate",[c[0]])),B.count=parseInt(c[2])}else n(l("import.error.innateSpellList",[c[0]]));c[4].split(",").map(j=>sn.trim(j).replaceAll("*","")).forEach(j=>{const J=D.find(N=>N.toLowerCase()===j);J!=null?q.push(J):$.push(j)}),B.spells=q,t.spellcasting.atWill.push(B)}),$.length>0&&n(l("import.error.spells",[$.join(", ")]))},g=u=>{if(console.log(`[Import] Processing trait ${u.name}`),u.desc.match(/^as a bonus action/gi)!=null)d(u,!1);else if(u.name.toLowerCase()==="innate spellcasting")y(u.desc);else if(u.name.toLowerCase()==="spellcasting")A(u.desc);else{const R=co();R.name=u.name,R.description=u.desc;const Y=RegExp(/\((\d+)\/(\w+)\)/gi).exec(u.name);Y!=null&&(R.limitedUse.count=parseInt(Y[1]),R.limitedUse.rate=Y[2].toUpperCase(),R.name=u.name.substring(0,u.name.indexOf("(")-1)),R.description=f(R.description),k(R.description,R.crAnnotation),t.traits.push(R)}},L=(u,T)=>{const R=T==="WEAPON"?["STR","DEX","CON","CHA","WIS","INT"]:["CHA","WIS","INT","STR","DEX","CON"];for(const P of R)if(En(t.stats[P])+t.proficiency===u)return console.log(`[Import] guessing ${P} for modifier ${u}`),P},C=u=>{const T=fo(),P=RegExp(/(Melee|Ranged|Melee or Ranged) (Weapon|Spell) Attack: ([+-]\d+) to hit, (?:reach|range) (\d+|\d+\/\d+) ft\.(?: or (?:reach|range) (\d+)\/(\d+) ft\.)?, (\w+) (?:targets?|creatures?)\./gi).exec(u.desc);if(P!=null){console.log(`[Import] Attack parsing stage 1, info string "${P[0]}"`);const Y=P[1].toUpperCase();T.distance=Y==="MELEE OR RANGED"?"BOTH":Y;const O=P[2].toUpperCase();T.kind=O;const $=L(parseInt(P[3]),T.kind);$!=null?(T.modifier.stat=$,T.modifier.proficient=!0):(T.modifier.stat=T.kind==="SPELL"?"WIS":"STR",T.modifier.override=!0,T.modifier.overrideValue=parseInt(P[3]));const D=P[4];if(D.includes("/")){const X=D.split("/"),j=parseInt(X[0]),J=parseInt(X[1]);T.range.reach=j,T.range.standard=j,T.range.long=J}else T.range.standard=parseInt(D),T.range.reach=parseInt(D);P[5]!=null&&P[6]!=null&&(T.range.standard=parseInt(P[5]),T.range.long=parseInt(P[6]));const c=a[P[7]];c!=null?T.targets=c:n(l("import.error.targets",[u.name,P[7]]));const B=RegExp(/Hit: \d+ \((\d+)d(\d+)\s*([+-]\s*\d+)?\) (\w+) damage\.?(\s?,?\s?plus [^\.]+\.)?(?:,\s?(and [^\.]+\.?))?(.*)/gi).exec(u.desc);if(B!=null){if(console.log(`[Import] Attack parsing stage 2, damage string "${B[0]}"`),T.damage.count=parseInt(B[1]),T.damage.dice=parseInt(B[2]),B[3]!=null){T.damage.modifier.stat=T.modifier.stat;const X=parseInt(B[3].replaceAll(" ",""));En(t.stats[T.damage.modifier.stat])!==X&&(T.damage.modifier.override=!0,T.damage.modifier.overrideValue=X)}else T.damage.modifier.override=!0,T.damage.modifier.overrideValue=0;T.damage.type=B[4],B[5]!=null&&(console.log(`[Import] parsing additional damage ${B[5]}`),[...B[5].matchAll(/\((\d+)d(\d+)\) (\w+) damage/gi)].forEach(j=>{T.additionalDamage.push({id:nn(),dice:parseInt(j[2]),count:parseInt(j[1]),type:j[3],note:""})})),B[6]!=null&&(T.description=T.description+`, ${B[6]}`),B[7]!=null&&(T.description+=T.description+" "+B[7])}else n(l("import.error.attackDamageFail",[u.name,u.desc]));T.name=u.name,T.description=f(T.description),t.attacks.push(T)}else{n(l("import.error.attackFail",[u.name,u.desc]));return}},w=(u,T)=>{const P=new RegExp(/can take (\d+) legendary actions?/gi).exec(u);t.legendaryActions.useCustomPreamble=!0,t.legendaryActions.customPreamble=u,P!=null?t.legendaryActions.count=parseInt(P[1]):(console.log(`Legendary action error. Unable to find action count. ${u}`),n(l("import.error.legendaryCount",[u]))),T.forEach(Y=>{const $=new RegExp(/\(costs (\d+) actions?\)/gi).exec(Y.name),D=$!=null?parseInt($[1]):1,c=$!=null?Y.name.substring(0,Y.name.indexOf("(")-1):Y.name,q=t.attacks.find(B=>B.name.toLowerCase().indexOf(Y.name)!==-1);if(q!=null)t.addLegendaryAction(q.id,D);else{const B=d({name:c,desc:Y.desc},!0);t.addLegendaryAction(B)}})};return{importOpen5eMonster:u=>{var $,D;t.$reset(),t.name=u.name,t.size=u.size,t.type=`${u.type}${u.subtype===""?"":` ${u.subtype}`}`,t.alignment=u.alignment,t.AC=u.armor_class,t.ACType=($=u.armor_desc)!=null?$:"",t.languages=u.languages;const T=(D=ao(u.challenge_rating))!=null?D:un[0];t.CR=T.index,t.proficiency=T.proficiency,Object.entries(p).forEach(([c,q])=>{t.stats[c]=u[q]});const P=RegExp(/(\d+)d(\d+)[ ]*([+-][ ]*\d+)?/gi).exec(u.hit_dice);P?(t.HP.HD=parseInt(P[1]),t.HP.type=parseInt(P[2]),t.HP.modifier=P[3]==null?0:parseInt(P[3])):n(l("import.error.hp",[u.hit_dice])),t.speeds=[];for(const c of Object.entries(u.speed))t.speeds.push({id:nn(),type:c[0],speed:c[1],note:""});return Object.entries(p).forEach(([c,q])=>{const B=`${q}_save`,X=u[B];if(X!=null){t.saves[c].proficient=!0;const j=so(t,c);j!==X&&(console.log(`[Import] Save different than proficiency expected, overriding. ${c} expected ${j} got ${X}`),t.saves[c].override=!0,t.saves[c].overrideValue=X)}}),t.computedPassivePerception!==u.perception&&(t.passivePerception.override=!0,t.passivePerception.overrideValue=u.perception),Object.entries(u.skills).forEach(([c,q])=>{const B=c.toUpperCase().replaceAll(" ","_"),X=lo[B];if(X!=null){const j={key:B,skill:X,proficient:!1,expertise:!1,override:!1,overrideValue:q},J=Pn(t,j);j.proficient=!0;const N=Pn(t,j);j.expertise=!0;const G=Pn(t,j);q===J?(j.proficient=!1,j.expertise=!1):q===N?(j.proficient=!0,j.expertise=!1):q===G?(j.expertise=!0,j.proficient=!1):(j.proficient=!1,j.expertise=!1,j.override=!0),t.skills.push(j)}else console.log(`[Import] Failed to resolve skill for key ${B}. Raw value: ${c}`),n(l("import.error.skill",[B,c]))}),u.senses.split(",").forEach(c=>{const q=c.split(" ").filter(X=>X!==""),B=q[0].toLowerCase();B in t.senses?t.senses[B]=parseInt(q[1]):B!=="passive"&&(console.log(`[Import] Unknown sense: ${B}`),n(l("import.error.sense",[B])))}),t.vulnerabilities=u.damage_vulnerabilities.split(", ").filter(c=>c!==""),t.resistances=u.damage_resistances.split(", ").filter(c=>c!==""),t.immunities=u.damage_immunities.split(", ").filter(c=>c!==""),t.conditions=u.condition_immunities.split(", ").filter(c=>c!==""),u.actions!==""&&u.actions.forEach(c=>{c.desc.startsWith("Melee")||c.desc.startsWith("Ranged")?(console.log(`[Import] Processing attack ${c.name}`),C(c)):(console.log(`[Import] Processing action ${c.name}`),c.name==="Multiattack"?(n(l("import.multiattack")),t.multiattacks.push({id:nn(),attacks:[],actions:[]}),t.multiattackOptions.useCustomRenderer=!0,t.multiattackOptions.customMultiattackRenderer=f(c.desc)):d(c))}),u.special_abilities!==""&&u.special_abilities.forEach(c=>{g(c)}),u.reactions!=null&&u.reactions!==""&&u.reactions.forEach(c=>{t.reactions.push({id:nn(),name:c.name,description:f(c.desc),limitedUse:{count:0,rate:"DAY"},trigger:""})}),u.legendary_desc!==""&&u.legendary_actions!=""&&w(u.legendary_desc,u.legendary_actions),t.$persist(),!0}}}const ia={class:"text-h6"},aa={class:"q-mb-md"},sa={href:"https://open5e.com/",target:"_blank"},la={class:"q-pt-md text-caption"},ua="https://api.open5e.com/monsters/",ca=Wt({__name:"ImportButton",setup(t){const{t:U}=_t(),M=Be([]),v=Be(""),k=Be(null),m=Be(null),l=Be(0),p=Be(!1),E=Be(!1),a=Ie(()=>M.value.map(C=>({value:C.name,label:C.name,source:C.document__title,cr:C.challenge_rating,description:`${C.size} ${C.type}${C.subtype===""?"":` ${C.subtype}`}, ${C.alignment}`}))),n=Be(!1),i=Ie(()=>a.value.findIndex(C=>C.value===v.value)===-1),f=Ie(()=>M.value.length===0?U("import.results",0):U("import.description",[M.value.length,U("import.results",l.value)])),d=async(C,w,h)=>{p.value=!0;try{const u=`${ua}?search=${C.toLowerCase()}`,R=await(await fetch(u)).json();k.value=R.next,m.value=R.previous,l.value=R.count,w(()=>{M.value=R.results})}catch(u){console.error(u),h(),w(()=>M.value=[])}p.value=!1},A=async({to:C,ref:w})=>{const h=M.value.length-1;if(p.value!==!0&&C===h&&k.value){p.value=!0;const u=k.value,R=await(await fetch(u)).json();k.value=R.next,m.value=R.previous,l.value=R.count,M.value.push(...R.results),ho(()=>{w.refresh(),p.value=!1})}},{importOpen5eMonster:y}=oa(),g=Yt(),L=async()=>{E.value=!0,setTimeout(()=>{const C=M.value.find(w=>w.name===v.value);C?y(C)&&(n.value=!1):g.notify({message:U("import.error.notFound"),type:"negative"}),E.value=!1},100)};return(C,w)=>{const h=yt("i18n-t");return Oe(),bt(Tt,null,[Z(mt,{round:"",flat:"",icon:"cloud_upload",onClick:w[0]||(w[0]=u=>n.value=!0)},{default:te(()=>[Z(vr,{class:"text-body2"},{default:te(()=>[Ee(pe(C.$t("import.tooltip")),1)]),_:1})]),_:1}),Z(dr,{modelValue:n.value,"onUpdate:modelValue":w[2]||(w[2]=u=>n.value=u)},{default:te(()=>[Z(Mt,{class:"q-dialog-plugin",style:{width:"50vw"}},{default:te(()=>[Z(wt,null,{default:te(()=>[Se("div",ia,pe(C.$t("import.title")),1)]),_:1}),Z(lt),Z(wt,{class:"q-pt-md"},{default:te(()=>[Se("div",aa,[Z(h,{keypath:"import.help"},{default:te(()=>[Se("a",sa,pe(C.$t("import.open5eLink")),1)]),_:1})]),Z(po(gr),{modelValue:v.value,"onUpdate:modelValue":w[1]||(w[1]=u=>v.value=u),filled:"","use-input":"","hide-selected":"","fill-input":"","emit-value":"",hint:f.value,label:C.$t("import.label"),options:a.value,disable:E.value,style:{width:"100%"},onFilter:d,onVirtualScroll:A},{after:te(()=>[Z(mt,{color:"positive",disable:i.value||E.value,loading:E.value,onClick:L},{default:te(()=>[Ee(pe(C.$t("import.import")),1)]),_:1},8,["disable","loading"])]),option:te(u=>[Z(Je,pr(hr(u.itemProps)),{default:te(()=>[Z(je,{avatar:""},{default:te(()=>[Z(xt,{color:"primary"},{default:te(()=>[Ee(pe(u.opt.cr),1)]),_:2},1024)]),_:2},1024),Z(je,null,{default:te(()=>[Z(Ze,null,{default:te(()=>[Ee(pe(u.opt.label),1)]),_:2},1024),Z(Ze,{caption:""},{default:te(()=>[Ee(pe(u.opt.description),1),w[3]||(w[3]=Se("br",null,null,-1)),Ee(pe(u.opt.source),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","hint","label","options","disable"]),Se("div",la,pe(C.$t("import.additional")),1)]),_:1}),Z(mr,{align:"right"},{default:te(()=>[ut(Z(mt,{flat:"",label:C.$t("editor.cancel"),color:"primary"},null,8,["label"]),[[ht]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}});const fa=Wt({name:"TemplateSearch",components:{ImportButton:ca},setup(){const t=Be(""),{t:U}=_t(),M=Yt(),v=Be(),k=br(),m=Ie(()=>k.allTemplateOptions),l=Be(m.value),p=Lo(m,l);return{search:t,templateStore:k,addTemplate:n=>{n!=null&&(k.applyTemplate(n)?M.notify({message:U("editor.template.applied",[sn.capitalize(n)]),type:"positive"}):M.notify({message:U("editor.template.failed",[sn.capitalize(n)]),type:"negative"}))},filteredTemplateOptions:l,templateFilter:p,templateRef:v,actionColor:Ao,checkPopupStatus:()=>{v.value&&v.value.showPopup()},defaultIcon:Do}}}),da={style:{display:"flex"}},pa={class:"q-ml-sm"};function ha(t,U,M,v,k,m){const l=yt("import-button");return Oe(),bt("div",da,[Z(gr,{ref:"templateRef","model-value":t.search,options:t.filteredTemplateOptions,class:"template-search",dense:"",standout:"","option-value":"templateName","option-label":"templateName","emit-value":"",clearable:"","use-input":"","hide-selected":"","input-debounce":"0",behavior:"dialog",placeholder:"Search for Actions, Traits, and Attacks",onFilter:t.templateFilter,"onUpdate:modelValue":t.addTemplate,onInputValue:t.checkPopupStatus},{option:te(p=>[Z(Je,pr(hr(p.itemProps)),{default:te(()=>[Z(je,{avatar:""},{default:te(()=>[Z(ln,{name:p.opt.icon===""?t.defaultIcon[p.opt.type]:p.opt.icon},null,8,["name"])]),_:2},1024),Z(je,null,{default:te(()=>[Z(Ze,null,{default:te(()=>[Ee(pe(p.opt.templateName),1)]),_:2},1024),Z(Ze,{lines:"1",caption:""},{default:te(()=>[Ee(pe(t.templateStore.allTemplateSubtitles[p.opt.templateName]),1)]),_:2},1024)]),_:2},1024),Z(je,{side:"",top:""},{default:te(()=>[Z(Ro,{color:t.actionColor[p.opt.type]},{default:te(()=>[Ee(pe(t.$t(`editor.template.type.${p.opt.type}`)),1)]),_:2},1032,["color"])]),_:2},1024)]),_:2},1040)]),_:1},8,["model-value","options","onFilter","onUpdate:modelValue","onInputValue"]),Se("div",pa,[Z(l)])])}var ma=Vt(fa,[["render",ha],["__scopeId","data-v-403d5648"]]);const ga=Wt({name:"MainLayout",components:{AppDrawer:Co,CrFooter:Ti,GenericFooter:To,DownloadButton:Wi,WebRendererSettingsButton:na,TemplateSearch:ma},setup(){const t=Be(!1),U=mo(),M=Er("lzma"),v=Yt(),{loadMonster:k}=Jn();ra();const{loadFile:m}=Jn(),l=async()=>{const d=await xi();d&&m(d)},p=U.query.data!=null,E=Be(!1),a=Be({});p&&(async()=>{try{const d=await M.decompress(U.query.data),A=JSON.parse(d);a.value=A,E.value=!0}catch{v.notify({message:"Invalid data parameter",type:"negative"}),U.query.data=""}})();const i=()=>{p&&k(a.value),E.value=!1},f=()=>{window.open("https://opendnd.games")};return ir(()=>{if(!p&&window.location.search.startsWith("?data")){const d=window.location.search;window.location.search="",window.location.href=`${window.location.origin}${window.location.pathname}#/${d}`}}),{toggleLeftDrawer(){t.value=!t.value},loadFileDialog:l,dataParamFound:p,showDataLoad:E,queryData:a,loadFromDataParam:i,leftDrawerOpen:t,openDnd:f}}}),va={class:"q-ml-sm"},ba={class:"template-bar"},ya={class:"q-gutter-sm row items-center no-wrap"},wa={class:"text-h6"},_a={class:"q-my-sm"};function Ea(t,U,M,v,k,m){const l=yt("template-search"),p=yt("web-renderer-settings-button"),E=yt("download-button"),a=yt("app-drawer"),n=yt("router-view"),i=yt("cr-footer"),f=yt("generic-footer");return Oe(),We(vo,{view:"hHh lpR fFf"},{default:te(()=>[Z(wo,{id:"main-nav",elevated:"","height-hint":"64"},{default:te(()=>[Z(bo,null,{default:te(()=>[Z(mt,{flat:"",dense:"",round:"","aria-label":"Menu",icon:"menu",class:"q-mr-sm",onClick:t.toggleLeftDrawer},null,8,["onClick"]),t.$q.screen.gt.xs?(Oe(),We(yo,{key:0,shrink:"",class:"row items-center no-wrap"},{default:te(()=>[Se("span",va,pe(t.$t("app.name")),1)]),_:1})):lr("",!0),Z(Kn),Se("div",ba,[Z(l)]),Z(Kn),Se("div",ya,[Z(p),Z(mt,{round:"",flat:"",icon:"mdi-folder-open",onClick:U[0]||(U[0]=d=>t.loadFileDialog())}),Z(E)])]),_:1})]),_:1}),Z(a,{"left-drawer-open":t.leftDrawerOpen},null,8,["left-drawer-open"]),Z(_o,null,{default:te(()=>[Z(n)]),_:1}),Z(Eo,{id:"footer",elevated:""},{default:te(()=>[Z(Mt,{class:"full-width"},{default:te(()=>[Z(wt,{class:"bg-blue-grey-7 no-padding"},{default:te(()=>[Z(i)]),_:1}),Z(wt,{class:"bg-grey-10 no-padding"},{default:te(()=>[Z(f)]),_:1})]),_:1})]),_:1}),Z(dr,{modelValue:t.showDataLoad,"onUpdate:modelValue":U[1]||(U[1]=d=>t.showDataLoad=d),persistent:""},{default:te(()=>[Z(Mt,null,{default:te(()=>[Z(wt,null,{default:te(()=>[Se("div",wa,pe(t.$t("io.dataUrl.title")),1),Se("div",_a,pe(t.$t("io.dataUrl.loadText",[t.queryData.name])),1)]),_:1}),Z(mr,{align:"right"},{default:te(()=>[Z(mt,{flat:"",label:t.$t("editor.load"),color:"positive",onClick:t.loadFromDataParam},null,8,["label","onClick"]),ut(Z(mt,{flat:"",label:t.$t("editor.cancel"),color:"negative"},null,8,["label"]),[[ht]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var Oa=Vt(ga,[["render",Ea]]);export{Oa as default};
