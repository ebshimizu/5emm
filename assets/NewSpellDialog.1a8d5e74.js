import{ad as D,ak as N,a as O,P as Q,ah as w,au as q,r as n,aD as I,bF as y,_ as U,V as B,a8 as H,a0 as i,Z as s,a3 as K,a4 as v,X as b,Y as L,$ as P,bG as C,at as R,aI as z,aa as f,aE as A}from"./index.983957c9.js";import{n as S,g as V}from"./use-dialog-plugin-component.b489df9b.js";function E(){const{t:l}=D(),e=[0,1,2,3,4,5,6,7,8,9],t=e.map(o=>N.toOrdinal(o)),u=O(()=>e.map(o=>({label:o===0?l("editor.spellcasting.slot.cantrip"):l("editor.spellcasting.slot.level",{ordinal:t[o]}),value:o})));return{spellLevels:e,ordinalSpellLevels:t,spellOptions:u}}const F=Q({name:"NewSpellDialog",emits:[...S.emits],setup(){const{dialogRef:l,onDialogHide:e,onDialogOK:t,onDialogCancel:u}=S(),o=w(),{spellOptions:d}=E(),{SrdCastingClassOptions:a}=q(),r=n(""),p=n(0),m=n([]),g=n(0),c=n(!1),$=n(null);return{dialogRef:l,onDialogHide:e,onOKClick(){o.addSpell({name:r.value,level:p.value,class:m.value.map(k=>I.capitalize(k)),damage:g.value,multitarget:c.value,srd:!1,custom:!0}),t()},onCancelClick:u,spellStore:o,spellOptions:d,SrdCastingClassOptions:a,name:r,level:p,classes:m,damage:g,multitarget:c,nameInput:$,validateNumber:y}}}),G={class:"text-h6"},T={class:"col-6 flex items-center"};function W(l,e,t,u,o,d){return B(),H(A,{ref:"dialogRef",onHide:l.onDialogHide},{default:i(()=>[s(K,{class:"q-dialog-plugin new-spell-dialog"},{default:i(()=>[s(v,null,{default:i(()=>[b("div",G,L(l.$t("editor.spellcasting.custom.create")),1)]),_:1}),s(P),s(v,{class:"row"},{default:i(()=>[s(C,{ref:"nameInput",modelValue:l.name,"onUpdate:modelValue":e[0]||(e[0]=a=>l.name=a),label:l.$t("editor.spellcasting.custom.name"),class:"col-12 q-pa-sm",rules:[a=>!(a in l.spellStore.allSpells)||l.$t("editor.spellcasting.custom.nameValidator")]},null,8,["modelValue","label","rules"]),s(V,{modelValue:l.level,"onUpdate:modelValue":e[1]||(e[1]=a=>l.level=a),class:"col-6 q-pa-sm",options:l.spellOptions,"emit-value":"","map-options":"",label:l.$t("editor.spellcasting.custom.level")},null,8,["modelValue","options","label"]),s(V,{modelValue:l.classes,"onUpdate:modelValue":e[2]||(e[2]=a=>l.classes=a),class:"col-6 q-pa-sm",options:l.SrdCastingClassOptions,multiple:"",clearable:"","emit-value":"","map-options":"","new-value-mode":"add-unique","use-input":"",label:l.$t("editor.spellcasting.custom.classes"),onClear:e[3]||(e[3]=a=>l.classes=[])},null,8,["modelValue","options","label"]),s(C,{"model-value":l.damage,class:"col-6 q-pa-sm",type:"number",min:"0",label:l.$t("editor.spellcasting.custom.damage"),"onUpdate:modelValue":e[4]||(e[4]=a=>l.damage=l.validateNumber(a,0))},null,8,["model-value","label"]),b("div",T,[s(R,{modelValue:l.multitarget,"onUpdate:modelValue":e[5]||(e[5]=a=>l.multitarget=a),label:l.$t("editor.spellcasting.custom.multitarget")},null,8,["modelValue","label"])])]),_:1}),s(z,{align:"right"},{default:i(()=>{var a;return[s(f,{color:"green",label:l.$t("editor.save"),disabled:!((a=l.nameInput)!=null&&a.validate())||l.name.length===0,onClick:l.onOKClick},null,8,["label","disabled","onClick"]),s(f,{color:"primary",label:l.$t("editor.cancel"),onClick:l.onCancelClick},null,8,["label","onClick"])]}),_:1})]),_:1})]),_:1},8,["onHide"])}var Z=U(F,[["render",W]]);export{Z as N,E as u};
