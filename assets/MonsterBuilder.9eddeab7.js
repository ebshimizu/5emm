import{d as te,f as se,e as R,g as F,a as Nt,b as le,n as st,Q as it}from"./use-dialog-plugin-component.b489df9b.js";import{T as Et,C as ke}from"./TouchPan.7da0a7ff.js";import{m as Te,J as Ze,L as _e,r as H,a as v,q as pe,h as U,z as we,M as Mt,j as Rt,k as Ee,aJ as pt,o as xe,T as Bt,bH as It,b7 as ft,b2 as Ht,b3 as zt,bI as bt,b4 as Ft,u as jt,$ as ye,w as Q,bJ as ee,Q as Ne,s as vt,P as X,_ as G,V as p,a8 as V,a0 as o,Z as l,a2 as k,Y as d,aa as S,S as J,bK as Kt,bL as Qt,bM as Wt,bF as re,bN as gt,bO as kt,U as q,X as c,bG as h,a9 as Z,W as y,a6 as P,a5 as D,a3 as z,ac as Xt,i as Gt,ap as yt,bP as Yt,bQ as Jt,ax as Zt,ad as ie,a4 as O,aI as oe,bR as $t,bb as _t,ar as xt,d as ht,a$ as Ct,ay as rt,az as el,C as tl,g as St,a_ as dt,bS as ll,bj as ol,aD as al,at as nl,aE as sl,ao as qe,ah as Me,au as et,aG as wt,aH as At,a1 as il,O as rl,aF as Ge}from"./index.983957c9.js";import{u as dl,a as ul,b as cl,Q as ml}from"./use-fullscreen.d8e60070.js";import{Q as j}from"./QTooltip.a0c8303d.js";import{b as Ce,Q as Se,a as Re,u as Ue,s as tt}from"./RECHARGE_TIME.93febac6.js";import{e as lt}from"./index.f31b2840.js";import{u as De,Q as Be}from"./QBadge.83f550af.js";import{u as Vt,N as pl}from"./NewSpellDialog.1a8d5e74.js";var fl=Te({name:"QSplitter",props:{...Ze,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:t,emit:n}){const{proxy:{$q:u}}=Ee(),f=_e(e,u),b=H(null),s={before:H(null),after:H(null)},a=v(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(f.value===!0?" q-splitter--dark":"")),m=v(()=>e.horizontal===!0?"height":"width"),i=v(()=>e.reverse!==!0?"before":"after"),r=v(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function w(E){return(e.unit==="%"?E:Math.round(E))+e.unit}const C=v(()=>({[i.value]:{[m.value]:w(e.modelValue)}}));let N,B,A,L,I;function Y(E){if(E.isFirst===!0){const ue=b.value.getBoundingClientRect()[m.value];N=e.horizontal===!0?"up":"left",B=e.unit==="%"?100:ue,A=Math.min(B,r.value[1],Math.max(r.value[0],e.modelValue)),L=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:u.lang.rtl===!0?-1:1)*(e.unit==="%"?ue===0?0:100/ue:1),b.value.classList.add("q-splitter--active");return}if(E.isFinal===!0){I!==e.modelValue&&n("update:modelValue",I),b.value.classList.remove("q-splitter--active");return}const ne=A+L*(E.direction===N?-1:1)*E.distance[e.horizontal===!0?"y":"x"];I=Math.min(B,r.value[1],Math.max(r.value[0],ne)),s[i.value].value.style[m.value]=w(I),e.emitImmediately===!0&&e.modelValue!==I&&n("update:modelValue",I)}const _=v(()=>[[Et,Y,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function T(E,ne){E<ne[0]?n("update:modelValue",ne[0]):E>ne[1]&&n("update:modelValue",ne[1])}return pe(()=>e.modelValue,E=>{T(E,r.value)}),pe(()=>e.limits,()=>{pt(()=>{T(e.modelValue,r.value)})}),()=>{const E=[U("div",{ref:s.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:C.value.before},we(t.before)),U("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[Mt("div",{class:"q-splitter__separator-area absolute-full"},we(t.separator),"sep",e.disable!==!0,()=>_.value)]),U("div",{ref:s.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:C.value.after},we(t.after))];return U("div",{class:a.value,ref:b},Rt(t.default,E))}}}),be=Te({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:t,emit:n}){let u=!1,f,b,s=null,a=null,m,i;function r(){f&&f(),f=null,u=!1,s!==null&&(clearTimeout(s),s=null),a!==null&&(clearTimeout(a),a=null),b!==void 0&&b.removeEventListener("transitionend",m),m=null}function w(A,L,I){L!==void 0&&(A.style.height=`${L}px`),A.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,u=!0,f=I}function C(A,L){A.style.overflowY=null,A.style.height=null,A.style.transition=null,r(),L!==i&&n(L)}function N(A,L){let I=0;b=A,u===!0?(r(),I=A.offsetHeight===A.scrollHeight?0:void 0):(i="hide",A.style.overflowY="hidden"),w(A,I,L),s=setTimeout(()=>{s=null,A.style.height=`${A.scrollHeight}px`,m=Y=>{a=null,(Object(Y)!==Y||Y.target===A)&&C(A,"show")},A.addEventListener("transitionend",m),a=setTimeout(m,e.duration*1.1)},100)}function B(A,L){let I;b=A,u===!0?r():(i="show",A.style.overflowY="hidden",I=A.scrollHeight),w(A,I,L),s=setTimeout(()=>{s=null,A.style.height=0,m=Y=>{a=null,(Object(Y)!==Y||Y.target===A)&&C(A,"hide")},A.addEventListener("transitionend",m),a=setTimeout(m,e.duration*1.1)},100)}return xe(()=>{u===!0&&r()}),()=>U(Bt,{css:!1,appear:e.appear,onEnter:N,onLeave:B},t.default)}});const he=It({}),bl=Object.keys(ft);var W=Te({name:"QExpansionItem",props:{...ft,...Ht,...Ze,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...zt,"click","afterShow","afterHide"],setup(e,{slots:t,emit:n}){const{proxy:{$q:u}}=Ee(),f=_e(e,u),b=H(e.modelValue!==null?e.modelValue:e.defaultOpened),s=H(null),a=bt(),{show:m,hide:i,toggle:r}=Ft({showing:b});let w,C;const N=v(()=>`q-expansion-item q-item-type q-expansion-item--${b.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),B=v(()=>{if(e.contentInsetLevel===void 0)return null;const M=u.lang.rtl===!0?"Right":"Left";return{["padding"+M]:e.contentInsetLevel*56+"px"}}),A=v(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),L=v(()=>{const M={};return bl.forEach(ce=>{M[ce]=e[ce]}),M}),I=v(()=>A.value===!0||e.expandIconToggle!==!0),Y=v(()=>e.expandedIcon!==void 0&&b.value===!0?e.expandedIcon:e.expandIcon||u.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),_=v(()=>e.disable!==!0&&(A.value===!0||e.expandIconToggle===!0)),T=v(()=>({expanded:b.value===!0,detailsId:a.value,toggle:r,show:m,hide:i})),E=v(()=>{const M=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:u.lang.label[b.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":b.value===!0?"true":"false","aria-controls":a.value,"aria-label":M}});pe(()=>e.group,M=>{C!==void 0&&C(),M!==void 0&&Le()});function ne(M){A.value!==!0&&r(M),n("click",M)}function ue(M){M.keyCode===13&&ve(M,!0)}function ve(M,ce){ce!==!0&&s.value!==null&&s.value.focus(),r(M),vt(M)}function Ve(){n("afterShow")}function x(){n("afterHide")}function Le(){w===void 0&&(w=jt()),b.value===!0&&(he[e.group]=w);const M=pe(b,$e=>{$e===!0?he[e.group]=w:he[e.group]===w&&delete he[e.group]}),ce=pe(()=>he[e.group],($e,Pe)=>{Pe===w&&$e!==void 0&&$e!==w&&i()});C=()=>{M(),ce(),he[e.group]===w&&delete he[e.group],C=void 0}}function He(){const M={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},ce=[U(Ne,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&b.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:Y.value})];return _.value===!0&&(Object.assign(M,{tabindex:0,...E.value,onClick:ve,onKeyup:ue}),ce.unshift(U("div",{ref:s,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),U(R,M,()=>ce)}function ze(){let M;return t.header!==void 0?M=[].concat(t.header(T.value)):(M=[U(R,()=>[U(se,{lines:e.labelLines},()=>e.label||""),e.caption?U(se,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&M[e.switchToggleSide===!0?"push":"unshift"](U(R,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>U(Ne,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&M[e.switchToggleSide===!0?"unshift":"push"](He()),M}function Fe(){const M={ref:"item",style:e.headerStyle,class:e.headerClass,dark:f.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return I.value===!0&&(M.clickable=!0,M.onClick=ne,Object.assign(M,A.value===!0?L.value:E.value)),U(te,M,ze)}function je(){return Q(U("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:B.value,id:a.value},we(t.default)),[[ee,b.value]])}function Ke(){const M=[Fe(),U(be,{duration:e.duration,onShow:Ve,onHide:x},je)];return e.expandSeparator===!0&&M.push(U(ye,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:f.value}),U(ye,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:f.value})),M}return e.group!==void 0&&Le(),xe(()=>{C!==void 0&&C()}),()=>U("div",{class:N.value},[U("div",{class:"q-expansion-item__container relative-position"},Ke())])}});const ut=["unaligned","lawful good","neutral good","chaotic good","lawful neutral","neutral","chaotic neutral","lawful evil","neutral evil","chaotic evil"],ct=["aberration","beast","celestial","construct","dragon","elemental","fey","fiend","giant","humanoid","monstrosity","ooze","plant","undead"],vl=X({name:"LockToggleButton",props:{locked:{type:Boolean,required:!0},lockTooltip:{type:String,required:!0},unlockTooltip:{type:String,required:!0}}});function gl(e,t,n,u,f,b){return p(),V(S,{push:"",icon:e.locked?"lock":"lock_open",color:e.locked?"dark":"warning",size:"md"},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.locked?e.lockTooltip:e.unlockTooltip),1)]),_:1})]),_:1},8,["icon","color"])}var Oe=G(vl,[["render",gl]]);const kl=X({name:"BasicsEditor",components:{LockToggleButton:Oe},setup(){const e=J(),t=H(ct),n=H(ut),u=gt,f=kt,b=Object.keys(e.stats),s=Ce(ct,t),a=Ce(ut,n);return{monster:e,crValues:Kt,lairCrValues:Qt,sizeValues:Wt,typeOptions:t,typeFilter:s,alignmentOptions:n,alignmentFilter:a,diceOptions:u,diceLookup:f,statKeys:b,updateStat:function(i,r){i==="CON"?e.setHpModifier(e.HP.HD,r):e.stats[i]=parseInt(`${r}`)},validateNumber:re}}}),yl={class:"row"};function $l(e,t,n,u,f,b){const s=q("lock-toggle-button");return p(),V(W,{"expand-separator":"","default-opened":"",icon:"info",label:e.$t("editor.basics.label"),caption:e.$t("editor.basics.caption")},{default:o(()=>[l(z,null,{default:o(()=>[c("div",yl,[l(h,{modelValue:e.monster.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.monster.name=a),label:e.$t("monster.name"),class:"q-pa-sm col-6",debounce:"500"},null,8,["modelValue","label"]),e.monster.useCrDisplayOverride?(p(),V(h,{key:1,modelValue:e.monster.crOverride,"onUpdate:modelValue":t[4]||(t[4]=a=>e.monster.crOverride=a),label:e.$t("monster.cr"),class:"col-2 q-pa-sm"},{after:o(()=>[l(s,{locked:!e.monster.useCrDisplayOverride,"lock-tooltip":e.$t("editor.cr.standard"),"unlock-tooltip":e.$t("editor.cr.visualOverride"),onClick:t[3]||(t[3]=a=>e.monster.useCrDisplayOverride=!e.monster.useCrDisplayOverride)},null,8,["locked","lock-tooltip","unlock-tooltip"])]),_:1},8,["modelValue","label"])):(p(),V(F,{key:0,"model-value":e.monster.CR,options:e.crValues,"display-value":e.crValues[e.monster.CR].label,"emit-value":"",label:e.$t("monster.cr"),class:"col-3 q-pa-sm","onUpdate:modelValue":t[2]||(t[2]=a=>{a!=null?e.monster.setCR(a):e.monster.setCR(0)})},{after:o(()=>[l(s,{locked:!e.monster.useCrDisplayOverride,"lock-tooltip":e.$t("editor.cr.standard"),"unlock-tooltip":e.$t("editor.cr.visualOverride"),onClick:t[1]||(t[1]=a=>e.monster.useCrDisplayOverride=!e.monster.useCrDisplayOverride)},null,8,["locked","lock-tooltip","unlock-tooltip"])]),_:1},8,["model-value","options","display-value","label"])),l(h,{"model-value":e.monster.proficiency,type:"number",label:e.$t("monster.proficiencyBonus"),class:"col-3 q-pa-sm",disable:!e.monster.proficiencyOverride,"onUpdate:modelValue":t[5]||(t[5]=a=>e.monster.proficiency=e.validateNumber(a,0))},{after:o(()=>[l(s,{locked:!e.monster.proficiencyOverride,"lock-tooltip":e.$t("monster.proficiency.unlockFromCr"),"unlock-tooltip":e.$t("monster.proficiency.lockToCr"),onClick:e.monster.toggleProficiencyOverride},null,8,["locked","lock-tooltip","unlock-tooltip","onClick"])]),_:1},8,["model-value","label","disable"]),l(h,{modelValue:e.monster.nickname,"onUpdate:modelValue":t[6]||(t[6]=a=>e.monster.nickname=a),label:e.$t("monster.nickname"),class:"q-pa-sm col-6",debounce:"500"},null,8,["modelValue","label"]),e.monster.useCrDisplayOverride?Z("",!0):(p(),V(F,{key:2,"model-value":e.monster.lairCr,options:e.lairCrValues,"display-value":e.lairCrValues[e.monster.lairCr+1].label,"emit-value":"",label:e.$t("monster.lairCr"),class:"col-2 q-pa-sm","onUpdate:modelValue":t[7]||(t[7]=a=>{e.monster.lairCr=a!=null?a:-1})},null,8,["model-value","options","display-value","label"])),l(h,{modelValue:e.monster.lairCrNote,"onUpdate:modelValue":t[8]||(t[8]=a=>e.monster.lairCrNote=a),label:e.$t("monster.lairCrNote"),disable:e.monster.lairCr===-1,class:"q-pa-sm col-4",debounce:"500"},null,8,["modelValue","label","disable"]),l(F,{"model-value":e.monster.size,options:e.sizeValues,label:e.$t("monster.size"),class:"col-2 q-pa-sm","onUpdate:modelValue":e.monster.setSize},null,8,["model-value","options","label","onUpdate:modelValue"]),l(F,{modelValue:e.monster.type,"onUpdate:modelValue":t[9]||(t[9]=a=>e.monster.type=a),options:e.typeOptions,"use-input":"","input-debounce":"0",label:e.$t("monster.type"),class:"col-6 q-pa-sm","new-value-mode":"add-unique","bottom-slots":"",onFilter:e.typeFilter},{hint:o(()=>[k(d(e.$t("editor.customAllowed")),1)]),_:1},8,["modelValue","options","label","onFilter"]),l(F,{modelValue:e.monster.alignment,"onUpdate:modelValue":t[10]||(t[10]=a=>e.monster.alignment=a),options:e.alignmentOptions,"input-debounce":"0","use-input":"",label:e.$t("monster.alignment"),class:"col-4 q-pa-sm","new-value-mode":"add-unique","bottom-slots":"",onFilter:e.alignmentFilter},{hint:o(()=>[k(d(e.$t("editor.customAllowed")),1)]),_:1},8,["modelValue","options","label","onFilter"]),l(h,{"model-value":e.monster.AC,type:"number",label:e.$t("monster.ac"),min:"0",class:"col-2 q-pa-sm","onUpdate:modelValue":t[11]||(t[11]=a=>e.monster.AC=e.validateNumber(a,0))},{after:o(()=>[l(S,{round:"",color:"primary",size:"md",icon:"auto_fix_high",onClick:e.monster.setAcByCr},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("monster.setAcByCr")),1)]),_:1})]),_:1},8,["onClick"])]),_:1},8,["model-value","label"]),l(h,{modelValue:e.monster.ACType,"onUpdate:modelValue":t[12]||(t[12]=a=>e.monster.ACType=a),label:e.$t("monster.acType"),class:"col-4 q-pa-sm"},null,8,["modelValue","label"]),l(h,{"model-value":e.monster.HP.HD,type:"number",label:e.$t("monster.hp.hd"),min:"0",class:"col-2 q-pa-sm","onUpdate:modelValue":t[13]||(t[13]=a=>e.monster.setHpModifier(a,e.monster.stats.CON))},{after:o(()=>[l(S,{round:"",color:"primary",size:"md",icon:"auto_fix_high",onClick:e.monster.setHdByCr},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("monster.setHdByCr")),1)]),_:1})]),_:1},8,["onClick"])]),_:1},8,["model-value","label"]),l(F,{modelValue:e.monster.HP.type,"onUpdate:modelValue":t[14]||(t[14]=a=>e.monster.HP.type=a),options:e.diceOptions,"emit-value":"","display-value":e.diceLookup[e.monster.HP.type],label:e.$t("monster.hp.type"),class:"col-2 q-pa-sm",disable:!e.monster.hpDieTypeOverride},{after:o(()=>[l(s,{locked:!e.monster.hpDieTypeOverride,"lock-tooltip":e.$t("monster.hp.unlockFromSize"),"unlock-tooltip":e.$t("monster.hp.lockToSize"),onClick:e.monster.toggleDieTypeOverride},null,8,["locked","lock-tooltip","unlock-tooltip","onClick"])]),_:1},8,["modelValue","options","display-value","label","disable"]),l(h,{"model-value":e.monster.HP.modifier,disable:!e.monster.hpModifierOverride,type:"number",label:e.$t("monster.hp.modifier"),class:"col-2 q-pa-sm","onUpdate:modelValue":t[15]||(t[15]=a=>e.monster.HP.modifier=e.validateNumber(a,0))},{after:o(()=>[l(s,{locked:!e.monster.hpModifierOverride,"lock-tooltip":e.$t("monster.hp.unlockModifier"),"unlock-tooltip":e.$t("monster.hp.lockModifier"),onClick:e.monster.toggleHpModifierOverride},null,8,["locked","lock-tooltip","unlock-tooltip","onClick"])]),_:1},8,["model-value","disable","label"]),(p(!0),y(D,null,P(e.statKeys,a=>(p(),V(h,{key:a,"model-value":e.monster.stats[a],type:"number",label:e.$t(`monster.stat.${a}`),class:"col-2 q-pa-sm","onUpdate:modelValue":m=>e.updateStat(a,m)},null,8,["model-value","label","onUpdate:modelValue"]))),128)),l(h,{modelValue:e.monster.languages,"onUpdate:modelValue":t[16]||(t[16]=a=>e.monster.languages=a),label:e.$t("monster.languages"),class:"col-12 q-pa-sm"},null,8,["modelValue","label"])])]),_:1})]),_:1},8,["label","caption"])}var hl=G(kl,[["render",$l]]);const Cl=X({name:"WebRenderer",setup(){const e=J(),{sanitizeWebString:t}=Xt(),n=Gt("textRenderer"),u=v(()=>n.traits.value.map(x=>t(x))),f=v(()=>t(n.classSpellcastingPreamble.value)),b=v(()=>t(n.innateSpellcastingPreamble.value)),s=v(()=>n.attacks.value.map(x=>t(x))),a=v(()=>n.actions.value.map(x=>t(x))),m=v(()=>n.bonusActions.value.map(x=>t(x))),i=v(()=>t(n.multiattacks.value)),r=v(()=>t(n.legendaryPreamble.value)),w=v(()=>n.legendaryActions.value.map(x=>t(x))),C=v(()=>t(n.mythicTrait.value)),N=v(()=>t(n.mythicPreamble.value)),B=v(()=>n.mythicActions.value.map(x=>t(x))),A=v(()=>n.reactions.value.map(x=>t(x))),L=v(()=>t(n.lairActionPreamble.value)),I=v(()=>n.lairActions.value.map(x=>t(x))),Y=v(()=>t(n.regionalEffectPreamble.value)),_=v(()=>n.regionalEffects.value.map(x=>t(x))),T=yt(),E=v(()=>({columnCount:T.statBlockColumns})),ne=v(()=>({mm2014:T.style==="2014",mm2024:T.style==="2024"})),ue=v(()=>t(n.cr.value)),ve=v(()=>t(n.inventory.value)),Ve=v(()=>t(n.initiative.value));return{monster:e,...n,cr:ue,sanitizedClassSpellcastingPreamble:f,sanitizedInnateSpellcastingPreamble:b,traits:u,attacks:s,actions:a,bonusActions:m,multiattacks:i,legendaryPreamble:r,legendaryActions:w,mythicTrait:C,mythicPreamble:N,mythicActions:B,reactions:A,lairActionPreamble:L,lairActions:I,regionalEffectPreamble:Y,regionalEffects:_,columns:E,inventory:ve,blockStyle:ne,initiative:Ve}}}),Sl={class:"monster-name"},wl={class:"type"},Al={class:"skill ac"},Vl={key:0},Tl={class:"skill"},ql={class:"skill"},Ul={key:0,class:"row no-wrap",style:{width:"100%"}},Dl={class:"stat-name"},Ol={class:"stat"},Ll={class:"score"},Pl={class:"modifier"},Nl={key:1,class:"row no-wrap stats",style:{width:"100%"}},El={class:"stat-table"},Ml={class:"header-label mod"},Rl={class:"header-label save"},Bl={class:"stat one"},Il={class:"score one"},Hl={class:"mod one"},zl={class:"save one"},Fl={class:"stat two"},jl={class:"score two"},Kl={class:"mod two"},Ql={class:"save two"},Wl={class:"stat-table"},Xl={class:"header-label mod"},Gl={class:"header-label save"},Yl={class:"stat one"},Jl={class:"score one"},Zl={class:"mod one"},_l={class:"save one"},xl={class:"stat two"},eo={class:"score two"},to={class:"mod two"},lo={class:"save two"},oo={class:"stat-table"},ao={class:"header-label mod"},no={class:"header-label save"},so={class:"stat one"},io={class:"score one"},ro={class:"mod one"},uo={class:"save one"},co={class:"stat two"},mo={class:"score two"},po={class:"mod two"},fo={class:"save two"},bo={class:"skill"},vo={class:"name"},go={class:"skill"},ko={class:"name"},yo={class:"skill"},$o={class:"name"},ho=["innerHTML"],Co={class:"skill"},So={class:"name"},wo={class:"skill"},Ao={class:"name"},Vo={class:"skill"},To={class:"name"},qo={class:"skill"},Uo={class:"name"},Do={class:"skill"},Oo={class:"name"},Lo={class:"skill"},Po={class:"name"},No={class:"skill"},Eo={key:0,style:{float:"right"}},Mo={key:2,class:"section first"},Ro={class:"traits"},Bo=["innerHTML"],Io=["innerHTML"],Ho={class:"section"},zo=["innerHTML"],Fo=["innerHTML"],jo=["innerHTML"],Ko={key:4,class:"innate-spellcasting"},Qo=["innerHTML"],Wo={class:"spell-list"},Xo={class:"spell-label"},Go={class:"spell-list-entries"},Yo={key:5,class:"spellcasting"},Jo=["innerHTML"],Zo={class:"spell-list"},_o={key:0,class:"spell-row"},xo={class:"spell-label"},ea={class:"spell-list-entries"},ta={key:1},la={class:"spell-row"},oa={class:"spell-label"},aa={class:"spell-list-entries"},na={class:"spell-label"},sa={class:"spell-list-entries"},ia={key:6,class:"bonus-actions"},ra={class:"section"},da=["innerHTML"],ua={key:7,class:"legendary-actions"},ca={class:"section"},ma=["innerHTML"],pa=["innerHTML"],fa={key:8,class:"mythic-actions"},ba={class:"section"},va=["innerHTML"],ga=["innerHTML"],ka={key:9,class:"reactions"},ya={class:"section"},$a=["innerHTML"],ha={key:10,class:"lair-actions"},Ca={class:"section"},Sa=["innerHTML"],wa=["innerHTML"],Aa={key:11,class:"regional-effects"},Va={class:"section"},Ta=["innerHTML"],qa=["innerHTML"],Ua={key:12,class:"inventory"},Da={class:"section"},Oa=["innerHTML"];function La(e,t,n,u,f,b){return p(),y("div",{id:"render",class:Yt(["statblock",e.blockStyle]),style:Jt(e.columns)},[c("h2",Sl,d(e.monster.name),1),c("div",wl,d(e.monster.size)+" "+d(e.monster.type)+", "+d(e.monster.alignment),1),t[6]||(t[6]=c("hr",null,null,-1)),c("div",Al,[c("div",null,[t[0]||(t[0]=c("span",{class:"name"},"Armor Class",-1)),k(" "+d(e.monster.AC)+d(e.monster.ACType===""?"":` (${e.monster.ACType})`),1)]),e.blockStyle.mm2024?(p(),y("span",Vl,[c("b",null,d(e.$t("skill.INITIATIVE")),1),k(" "+d(e.initiative),1)])):Z("",!0)]),c("div",Tl,[t[1]||(t[1]=c("span",{class:"name"},"Hit Points",-1)),k(" "+d(e.hp),1)]),c("div",ql,[t[2]||(t[2]=c("span",{class:"name"},"Speed",-1)),k(" "+d(e.speeds),1)]),t[7]||(t[7]=c("hr",null,null,-1)),e.blockStyle.mm2014?(p(),y("div",Ul,[(p(!0),y(D,null,P(e.stats,s=>(p(),y("div",{key:s.stat,class:"stat-container"},[c("div",Dl,d(s.stat),1),c("div",Ol,[c("div",Ll,d(s.score),1),c("div",Pl,"("+d(s.renderedModifier)+")",1)])]))),128))])):e.blockStyle.mm2024?(p(),y("div",Nl,[c("div",El,[c("div",Ml,d(e.$t("editor.mod")),1),c("div",Rl,d(e.$t("editor.save")),1),c("div",Bl,d(e.statsAndSavesByKey.STR.stat.toLowerCase()),1),c("div",Il,d(e.statsAndSavesByKey.STR.score),1),c("div",Hl,d(e.statsAndSavesByKey.STR.renderedModifier),1),c("div",zl,d(e.statsAndSavesByKey.STR.renderedSave),1),c("div",Fl,d(e.statsAndSavesByKey.INT.stat.toLowerCase()),1),c("div",jl,d(e.statsAndSavesByKey.INT.score),1),c("div",Kl,d(e.statsAndSavesByKey.INT.renderedModifier),1),c("div",Ql,d(e.statsAndSavesByKey.INT.renderedSave),1)]),c("div",Wl,[c("div",Xl,d(e.$t("editor.mod")),1),c("div",Gl,d(e.$t("editor.save")),1),c("div",Yl,d(e.statsAndSavesByKey.DEX.stat.toLowerCase()),1),c("div",Jl,d(e.statsAndSavesByKey.DEX.score),1),c("div",Zl,d(e.statsAndSavesByKey.DEX.renderedModifier),1),c("div",_l,d(e.statsAndSavesByKey.DEX.renderedSave),1),c("div",xl,d(e.statsAndSavesByKey.WIS.stat.toLowerCase()),1),c("div",eo,d(e.statsAndSavesByKey.WIS.score),1),c("div",to,d(e.statsAndSavesByKey.WIS.renderedModifier),1),c("div",lo,d(e.statsAndSavesByKey.WIS.renderedSave),1)]),c("div",oo,[c("div",ao,d(e.$t("editor.mod")),1),c("div",no,d(e.$t("editor.save")),1),c("div",so,d(e.statsAndSavesByKey.CON.stat.toLowerCase()),1),c("div",io,d(e.statsAndSavesByKey.CON.score),1),c("div",ro,d(e.statsAndSavesByKey.CON.renderedModifier),1),c("div",uo,d(e.statsAndSavesByKey.CON.renderedSave),1),c("div",co,d(e.statsAndSavesByKey.CHA.stat.toLowerCase()),1),c("div",mo,d(e.statsAndSavesByKey.CHA.score),1),c("div",po,d(e.statsAndSavesByKey.CHA.renderedModifier),1),c("div",fo,d(e.statsAndSavesByKey.CHA.renderedSave),1)])])):Z("",!0),t[8]||(t[8]=c("hr",null,null,-1)),Q(c("div",bo,[c("span",vo,d(e.$t("monster.saves")),1),k(" "+d(e.saves),1)],512),[[ee,e.blockStyle.mm2014&&e.saves!==""]]),Q(c("div",go,[c("span",ko,d(e.$t("monster.skills")),1),k(" "+d(e.skills),1)],512),[[ee,e.skills!==""]]),Q(c("div",yo,[c("span",$o,d(e.$t("monster.gear")),1),t[3]||(t[3]=k("\xA0 ")),c("span",{innerHTML:e.inventory},null,8,ho)],512),[[ee,e.blockStyle.mm2024&&e.monster.inventory!==""&&e.monster.inventory!=="<br>"]]),Q(c("div",Co,[c("span",So,d(e.blockStyle.mm2024?e.$t("monster.resistances"):e.$t("monster.resistances2014")),1),k(" "+d(e.resistances),1)],512),[[ee,e.monster.resistances&&e.monster.resistances.length>0]]),Q(c("div",wo,[c("span",Ao,d(e.blockStyle.mm2024?e.$t("monster.immunities"):e.$t("monster.immunities2014")),1),k(" "+d(e.blockStyle.mm2024?e.immunitiesAndConditions:e.immunities),1)],512),[[ee,e.monster.immunities&&e.monster.immunities.length+(e.blockStyle.mm2024?e.monster.conditions.length:0)>0]]),Q(c("div",Vo,[c("span",To,d(e.blockStyle.mm2024?e.$t("monster.vulnerabilities"):e.$t("monster.vulnerabilities2014")),1),k(" "+d(e.vulnerabilities),1)],512),[[ee,e.monster.vulnerabilities&&e.monster.vulnerabilities.length>0]]),Q(c("div",qo,[c("span",Uo,d(e.$t("monster.conditionImmunities")),1),k(" "+d(e.conditions),1)],512),[[ee,e.blockStyle.mm2014&&e.monster.conditions&&e.monster.conditions.length>0]]),c("div",Do,[c("span",Oo,d(e.$t("monster.senses")),1),k(" "+d(e.senses),1)]),c("div",Lo,[c("span",Po,d(e.$t("monster.languages")),1),k(" "+d(e.monster.languages!==""?e.monster.languages:"\u2014"),1)]),c("div",No,[t[5]||(t[5]=c("span",{class:"name"},"Challenge",-1)),k(" "+d(e.cr)+" ",1),e.blockStyle.mm2014?(p(),y("span",Eo,[t[4]||(t[4]=c("b",null,"Proficiency Bonus",-1)),k(" +"+d(e.monster.proficiency),1)])):Z("",!0)]),t[9]||(t[9]=c("hr",null,null,-1)),e.blockStyle.mm2024&&e.traits.length>0?(p(),y("h3",Mo,d(e.$t("editor.traits.label")),1)):Z("",!0),c("div",Ro,[(p(!0),y(D,null,P(e.traits,(s,a)=>(p(),y("div",{key:a,class:"trait",innerHTML:s},null,8,Bo))),128)),e.monster.mythicActions.actions.length>0?(p(),y("div",{key:0,class:"trait",innerHTML:e.mythicTrait},null,8,Io)):Z("",!0)]),c("h3",Ho,d(e.$t("editor.action.label")),1),e.monster.multiattacks.length>0?(p(),y("div",{key:3,class:"multiattack",innerHTML:e.multiattacks},null,8,zo)):Z("",!0),(p(!0),y(D,null,P(e.attacks,(s,a)=>(p(),y("div",{key:a,class:"attack",innerHTML:s},null,8,Fo))),128)),(p(!0),y(D,null,P(e.actions,(s,a)=>(p(),y("div",{key:a,class:"action",innerHTML:s},null,8,jo))),128)),e.monster.spellcasting.atWill.length>0?(p(),y("div",Ko,[c("div",{innerHTML:e.sanitizedInnateSpellcastingPreamble},null,8,Qo),c("div",Wo,[(p(!0),y(D,null,P(e.innateSpellcastingLists,s=>(p(),y("div",{key:s.id,class:"spell-row"},[c("span",Xo,d(s.renderedLabel)+": ",1),c("span",Go,d(s.renderedSpells),1)]))),128))])])):Z("",!0),e.monster.spellcasting.standard.length>0?(p(),y("div",Yo,[c("div",{innerHTML:e.sanitizedClassSpellcastingPreamble},null,8,Jo),c("div",Zo,[e.monster.knownSpellsOfLevel(0).length>0?(p(),y("div",_o,[c("span",xo,d(e.$t("editor.spellcasting.slot.cantripLabel"))+": ",1),c("span",ea,d(e.monster.knownSpellsOfLevel(0).join(", ")),1)])):Z("",!0),e.monster.spellcasting.class==="Warlock"?(p(),y("div",ta,[c("div",la,[c("span",oa,d(e.classSpellcastingWarlockLabel)+": ",1),c("span",aa,d(e.monster.spellcasting.standard.join(", ")),1)])])):(p(!0),y(D,{key:2},P(e.classSpellcastingSlots,s=>(p(),y("div",{key:s.level,class:"spell-row"},[c("span",na,d(s.renderedLabel),1),c("span",sa,d(s.renderedSpells),1)]))),128))])])):Z("",!0),e.bonusActions.length>0?(p(),y("div",ia,[c("h3",ra,d(e.$t("monster.bonusActions")),1),(p(!0),y(D,null,P(e.bonusActions,(s,a)=>(p(),y("div",{key:a,class:"action",innerHTML:s},null,8,da))),128))])):Z("",!0),e.monster.legendaryActions.count>0?(p(),y("div",ua,[c("h3",ca,d(e.$t("editor.legendary.label")),1),c("div",{class:"preamble",innerHTML:e.legendaryPreamble},null,8,ma),(p(!0),y(D,null,P(e.legendaryActions,(s,a)=>(p(),y("div",{key:a,class:"action legendary",innerHTML:s},null,8,pa))),128))])):Z("",!0),e.monster.mythicActions.actions.length>0?(p(),y("div",fa,[c("h3",ba,d(e.$t("editor.mythic.label")),1),c("div",{class:"preamble",innerHTML:e.mythicPreamble},null,8,va),(p(!0),y(D,null,P(e.mythicActions,(s,a)=>(p(),y("div",{key:a,class:"action legendary",innerHTML:s},null,8,ga))),128))])):Z("",!0),e.monster.reactions.length>0?(p(),y("div",ka,[c("h3",ya,d(e.$t("editor.reaction.label")),1),(p(!0),y(D,null,P(e.reactions,(s,a)=>(p(),y("div",{key:a,class:"action reaction",innerHTML:s},null,8,$a))),128))])):Z("",!0),e.monster.lairActions.length>0?(p(),y("div",ha,[c("h3",Ca,d(e.$t("editor.lair.label")),1),c("div",{class:"preamble",innerHTML:e.lairActionPreamble},null,8,Sa),c("ul",null,[(p(!0),y(D,null,P(e.lairActions,(s,a)=>(p(),y("li",{key:a,class:"action lair",innerHTML:s},null,8,wa))),128))])])):Z("",!0),e.monster.regionalEffects.length>0?(p(),y("div",Aa,[c("h3",Va,d(e.$t("editor.regional.label")),1),c("div",{class:"preamble",innerHTML:e.regionalEffectPreamble},null,8,Ta),c("ul",null,[(p(!0),y(D,null,P(e.regionalEffects,(s,a)=>(p(),y("li",{key:a,class:"action regional",innerHTML:s},null,8,qa))),128))])])):Z("",!0),e.blockStyle.mm2014&&e.monster.inventory!==""?(p(),y("div",Ua,[c("h3",Da,d(e.$t("editor.inventory.label")),1),c("div",{innerHTML:e.inventory},null,8,Oa)])):Z("",!0)],6)}var Pa=G(Cl,[["render",La],["__scopeId","data-v-392b9549"]]);const Na=X({name:"SavesEditor",setup(){const e=J();return{monster:e,saves:v(()=>e.saves),saveModifierForStat:Zt,validateNumber:re}}});function Ea(e,t,n,u,f,b){return p(),V(W,{"expand-separator":"",icon:"fa-solid fa-helmet-safety",label:e.$t("editor.saves.label"),caption:e.$t("editor.saves.caption")},{default:o(()=>[l(z,{class:"row"},{default:o(()=>[(p(!0),y(D,null,P(e.saves,(s,a)=>(p(),V(h,{key:a,type:"number","model-value":e.saveModifierForStat(e.monster,a),class:"col-sm-12 col-md-4 q-pa-sm",label:e.$t(`monster.stat.${a}`),disable:!(s!=null&&s.override),"onUpdate:modelValue":m=>e.monster.saves[a].overrideValue=e.validateNumber(m,0)},{after:o(()=>[l(Se,{push:""},{default:o(()=>[l(S,{push:"",color:e.saves[a].proficient?"positive":"dark",icon:"keyboard_arrow_up",onClick:m=>e.saves[a].proficient=!e.saves[a].proficient},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.proficient")),1)]),_:1})]),_:2},1032,["color","onClick"]),l(S,{push:"",color:e.saves[a].override?"warning":"dark",icon:"handyman",onClick:m=>e.saves[a].override=!e.saves[a].override},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.override")),1)]),_:1})]),_:2},1032,["color","onClick"])]),_:2},1024)]),_:2},1032,["model-value","label","disable","onUpdate:modelValue"]))),128))]),_:1})]),_:1},8,["label","caption"])}var Ma=G(Na,[["render",Ea]]);const Ra=["walk","fly","burrow","climb","swim"],Ba=X({name:"SpeedsEditor",setup(){const{t:e}=ie(),t=J(),n=v(()=>Ra.map(b=>e(`monster.movement.type.${b}`))),u=H(Array.from(n.value)),f=Ce(n,u);return{speeds:v(()=>t.speeds),addSpeed:t.addSpeed,deleteSpeed:t.deleteSpeed,movementFilter:f,filteredMovementOptions:u,validateNumber:re}}}),Ia={class:"row",style:{width:"100%"}};function Ha(e,t,n,u,f,b){return p(),V(W,{"expand-separator":"",icon:"speed",label:e.$t("editor.speeds.label"),caption:e.$t("editor.speeds.caption")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[(p(!0),y(D,null,P(e.speeds,s=>(p(),V(z,{key:s.id,flat:"",style:{width:"100%"}},{default:o(()=>[l(O,{horizontal:""},{default:o(()=>[c("div",Ia,[l(F,{modelValue:s.type,"onUpdate:modelValue":a=>s.type=a,options:e.filteredMovementOptions,"use-input":"","input-debounce":"0",label:e.$t("monster.movement.type.label"),class:"col-3 q-pa-sm","new-value-mode":"add-unique",onFilter:e.movementFilter},null,8,["modelValue","onUpdate:modelValue","options","label","onFilter"]),l(h,{"model-value":s.speed,type:"number",label:e.$t("monster.movement.speed"),suffix:"ft",min:"0",step:"5",class:"col-2 q-pa-sm","onUpdate:modelValue":a=>s.speed=e.validateNumber(a,0)},null,8,["model-value","label","onUpdate:modelValue"]),l(h,{modelValue:s.note,"onUpdate:modelValue":a=>s.note=a,label:e.$t("monster.movement.note"),class:"col q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","label"])]),l(oe,{vertical:"",class:"justify-around q-px-md"},{default:o(()=>[l(S,{icon:"delete",round:"",color:"negative",onClick:()=>e.deleteSpeed(s.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1}),l(oe,{align:"center"},{default:o(()=>[l(S,{class:"full-width",color:"positive",label:e.$t("editor.addSpeed"),onClick:e.addSpeed},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var za=G(Ba,[["render",Ha]]);const Fa=Object.keys($t);function ja(e){return Fa.reduce((t,n)=>{const u=e[n];return u!==void 0&&(t[n]=u),t},{})}var me=Te({name:"QBtnDropdown",props:{...$t,..._t,modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean,toggleAriaLabel:String},emits:["update:modelValue","click","beforeShow","show","beforeHide","hide"],setup(e,{slots:t,emit:n}){const{proxy:u}=Ee(),f=H(e.modelValue),b=H(null),s=bt(),a=v(()=>{const T={"aria-expanded":f.value===!0?"true":"false","aria-haspopup":"true","aria-controls":s.value,"aria-label":e.toggleAriaLabel||u.$q.lang.label[f.value===!0?"collapse":"expand"](e.label)};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(T["aria-disabled"]="true"),T}),m=v(()=>"q-btn-dropdown__arrow"+(f.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":"")),i=v(()=>xt(e)),r=v(()=>ja(e));pe(()=>e.modelValue,T=>{b.value!==null&&b.value[T?"show":"hide"]()}),pe(()=>e.split,_);function w(T){f.value=!0,n("beforeShow",T)}function C(T){n("show",T),n("update:modelValue",!0)}function N(T){f.value=!1,n("beforeHide",T)}function B(T){n("hide",T),n("update:modelValue",!1)}function A(T){n("click",T)}function L(T){Ct(T),_(),n("click",T)}function I(T){b.value!==null&&b.value.toggle(T)}function Y(T){b.value!==null&&b.value.show(T)}function _(T){b.value!==null&&b.value.hide(T)}return Object.assign(u,{show:Y,hide:_,toggle:I}),ht(()=>{e.modelValue===!0&&Y()}),()=>{const T=[U(Ne,{class:m.value,name:e.dropdownIcon||u.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&T.push(U(Nt,{ref:b,id:s.value,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,onBeforeShow:w,onShow:C,onBeforeHide:N,onHide:B},t.default)),e.split===!1?U(S,{class:"q-btn-dropdown q-btn-dropdown--simple",...r.value,...a.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:A},{default:()=>we(t.label,[]).concat(T),loading:t.loading}):U(Se,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",rounded:e.rounded,square:e.square,...i.value,glossy:e.glossy,stretch:e.stretch},()=>[U(S,{class:"q-btn-dropdown--current",...r.value,disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1,onClick:L},{default:t.label,loading:t.loading}),U(S,{class:"q-btn-dropdown__arrow-container q-anchor--skip",...a.value,...i.value,disable:e.disable===!0||e.disableDropdown===!0,rounded:e.rounded,color:e.color,textColor:e.textColor,dense:e.dense,size:e.size,padding:e.padding,ripple:e.ripple},()=>T)])}}});const Ka=X({name:"SkillsEditor",setup(){const e=J(),t=v(()=>Object.keys(rt).map(n=>({value:n,label:rt[n].label})).filter(n=>e.skills.find(u=>u.key===n.value)==null));return{monster:e,skills:v(()=>e.skills),addSkill:e.addSkill,deleteSkill:e.deleteSkill,availableSkills:t,bonusForSkill:el}}});function Qa(e,t,n,u,f,b){return p(),V(W,{"expand-separator":"",icon:"fa-solid fa-dice-d20",label:e.$t("editor.skills.label"),caption:e.$t("editor.skills.caption")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[(p(!0),y(D,null,P(e.skills,s=>(p(),V(h,{key:s.key,label:e.$t(`skill.${s.key}`),class:"col-6 q-pa-sm",type:"number","model-value":e.bonusForSkill(e.monster,s),disable:!s.override,"onUpdate:modelValue":a=>s.overrideValue=parseInt(`${a}`)},{after:o(()=>[l(Se,{push:""},{default:o(()=>[l(S,{push:"",color:s.proficient?"positive":"dark",icon:"keyboard_arrow_up",onClick:a=>s.proficient=!s.proficient},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.proficient")),1)]),_:1})]),_:2},1032,["color","onClick"]),l(S,{push:"",color:s.expertise?"positive":"dark",icon:"keyboard_double_arrow_up",onClick:a=>s.expertise=!s.expertise},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.expertise")),1)]),_:1})]),_:2},1032,["color","onClick"]),l(S,{push:"",color:s.override?"warning":"dark",icon:"handyman",onClick:a=>s.override=!s.override},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.override")),1)]),_:1})]),_:2},1032,["color","onClick"])]),_:2},1024),l(S,{round:"",color:"negative",icon:"delete",class:"q-mx-sm",onClick:()=>e.deleteSkill(s.key)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["label","model-value","disable","onUpdate:modelValue"]))),128))]),_:1}),l(oe,{align:"center"},{default:o(()=>[l(me,{color:"positive",class:"full-width","auto-close":"",label:e.$t("editor.addSkill")},{default:o(()=>[l(le,null,{default:o(()=>[(p(!0),y(D,null,P(e.availableSkills,s=>Q((p(),V(te,{key:s.value,clickable:"",onClick:()=>e.addSkill(s.value)},{default:o(()=>[l(R,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(s.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[ke]])),128))]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var Wa=G(Ka,[["render",Qa]]);const Xa=X({name:"SavesEditor",setup(){const e=J();return{monster:e,passivePerception:v(()=>e.passivePerception),senses:Object.entries(e.senses).map(([t,n])=>({sense:t,range:n})),validateNumber:re}}});function Ga(e,t,n,u,f,b){return p(),V(W,{"expand-separator":"",icon:"settings_input_antenna",label:e.$t("editor.senses.label"),caption:e.$t("editor.senses.caption")},{default:o(()=>[l(z,{class:"row"},{default:o(()=>{var s;return[(p(!0),y(D,null,P(e.monster.senses,(a,m)=>(p(),V(h,{key:m,"model-value":e.monster.senses[m],type:"number",label:e.$t(`monster.sense.${m}`),suffix:"ft",min:"0",step:"5",class:"col q-pa-sm","onUpdate:modelValue":i=>e.monster.senses[m]=e.validateNumber(i,0)},null,8,["model-value","label","onUpdate:modelValue"]))),128)),l(h,{type:"number","model-value":e.monster.computedPassivePerception,class:"col-3 q-pa-sm",label:e.$t("monster.passivePerception"),disable:!((s=e.passivePerception)!=null&&s.override),"onUpdate:modelValue":t[1]||(t[1]=a=>e.passivePerception.overrideValue=e.validateNumber(a,0))},{after:o(()=>[l(S,{push:"",color:e.passivePerception.override?"warning":"dark",icon:"handyman",onClick:t[0]||(t[0]=a=>e.passivePerception.override=!e.passivePerception.override)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.override")),1)]),_:1})]),_:1},8,["color"])]),_:1},8,["model-value","label","disable"]),l(h,{"model-value":e.monster.sensesNotes,label:e.$t("monster.sensesNotes"),class:"col-12 q-pa-sm","onUpdate:modelValue":t[2]||(t[2]=a=>e.monster.sensesNotes=`${a!=null?a:""}`)},null,8,["model-value","label"])]}),_:1})]),_:1},8,["label","caption"])}var Ya=G(Xa,[["render",Ga]]);function Ja(){const{t:e}=ie();return{conditionDefaults:v(()=>Object.keys(lt.condition).map(n=>e(`condition.${n}`)))}}function Za(){const{t:e}=ie();return{damageTypeDefaults:v(()=>Object.keys(lt.damageType).map(n=>e(`damageType.${n}`)))}}function _a(){const{t:e}=ie();return{attackTypeDefaults:v(()=>Object.keys(lt.attackType).map(n=>e(`attackType.${n}`)))}}const xa=X({name:"ResistancesEditor",setup(){const e=J(),{damageTypeDefaults:t}=Za(),n=H([]),u=Ce(t,n),f=H([]),b=Ce(t,f),s=H([]),a=Ce(t,s),{conditionDefaults:m}=Ja(),i=H([]),r=Ce(m,i);return{monster:e,resistanceOptions:n,resistanceFilter:u,immunityOptions:f,immunityFilter:b,vulnerabilityOptions:s,vulnerabilityFilter:a,conditionOptions:i,conditionFilter:r}}});function en(e,t,n,u,f,b){return p(),V(W,{"expand-separator":"",icon:"shield",label:e.$t("editor.resistances.label"),caption:e.$t("editor.resistances.caption")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[l(F,{modelValue:e.monster.resistances,"onUpdate:modelValue":t[0]||(t[0]=s=>e.monster.resistances=s),options:e.resistanceOptions,"use-chips":"",multiple:"",clearable:"","new-value-mode":"add-unique",class:"col-12 q-pa-sm q-mb-sm","use-input":"","input-debounce":"0",label:e.$t("monster.resistances"),"bottom-slots":"",onFilter:e.resistanceFilter,onClear:t[1]||(t[1]=s=>e.monster.resistances=[])},{hint:o(()=>[k(d(e.$t("editor.customAllowed")),1)]),_:1},8,["modelValue","options","label","onFilter"]),l(F,{modelValue:e.monster.immunities,"onUpdate:modelValue":t[2]||(t[2]=s=>e.monster.immunities=s),options:e.immunityOptions,"use-chips":"",multiple:"",clearable:"","new-value-mode":"add-unique",class:"col-12 q-pa-sm q-mb-sm","use-input":"","input-debounce":"0",label:e.$t("monster.immunities"),"bottom-slots":"",onFilter:e.immunityFilter,onClear:t[3]||(t[3]=s=>e.monster.immunities=[])},{hint:o(()=>[k(d(e.$t("editor.customAllowed")),1)]),_:1},8,["modelValue","options","label","onFilter"]),l(F,{modelValue:e.monster.vulnerabilities,"onUpdate:modelValue":t[4]||(t[4]=s=>e.monster.vulnerabilities=s),options:e.vulnerabilityOptions,"use-chips":"",multiple:"",clearable:"","new-value-mode":"add-unique",class:"col-12 q-pa-sm q-mb-sm","use-input":"","input-debounce":"0",label:e.$t("monster.vulnerabilities"),"bottom-slots":"",onFilter:e.vulnerabilityFilter,onClear:t[5]||(t[5]=s=>e.monster.vulnerabilities=[])},{hint:o(()=>[k(d(e.$t("editor.customAllowed")),1)]),_:1},8,["modelValue","options","label","onFilter"]),l(F,{modelValue:e.monster.conditions,"onUpdate:modelValue":t[6]||(t[6]=s=>e.monster.conditions=s),options:e.conditionOptions,"use-chips":"",multiple:"",clearable:"","new-value-mode":"add-unique",class:"col-12 q-pa-sm q-mb-sm","use-input":"","input-debounce":"0",label:e.$t("monster.conditionImmunities"),"bottom-slots":"",onFilter:e.conditionFilter,onClear:t[7]||(t[7]=s=>e.monster.conditions=[])},{hint:o(()=>[k(d(e.$t("editor.customAllowed")),1)]),_:1},8,["modelValue","options","label","onFilter"])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var tn=G(xa,[["render",en]]);function Tt(e,t){if(t&&e===t)return null;const n=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(n)===!0)return e;const u=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,f=u.display;return f==="block"||f==="table"?e:Tt(e.parentNode)}function Ye(e,t,n){return!e||e===document.body?!1:n===!0&&e===t||(t===document?document.body:t).contains(e.parentNode)}function qt(e,t,n){if(n||(n=document.createRange(),n.selectNode(e),n.setStart(e,0)),t.count===0)n.setEnd(e,t.count);else if(t.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<t.count?t.count-=e.textContent.length:(n.setEnd(e,t.count),t.count=0);else for(let u=0;t.count!==0&&u<e.childNodes.length;u++)n=qt(e.childNodes[u],t,n);return n}const ln=/^https?:\/\//;class on{constructor(t,n){this.el=t,this.eVm=n,this._range=null}get selection(){if(this.el){const t=document.getSelection();if(Ye(t.anchorNode,this.el,!0)&&Ye(t.focusNode,this.el,!0))return t}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const t=this.selection;return t!==null&&t.rangeCount?t.getRangeAt(0):this._range}get parent(){const t=this.range;if(t!==null){const n=t.startContainer;return n.nodeType===document.ELEMENT_NODE?n:n.parentNode}return null}get blockParent(){const t=this.parent;return t!==null?Tt(t,this.el):null}save(t=this.range){t!==null&&(this._range=t)}restore(t=this._range){const n=document.createRange(),u=document.getSelection();t!==null?(n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset),u.removeAllRanges(),u.addRange(n)):(u.selectAllChildren(this.el),u.collapseToEnd())}savePosition(){let t=-1,n;const u=document.getSelection(),f=this.el.parentNode;if(u.focusNode&&Ye(u.focusNode,f))for(n=u.focusNode,t=u.focusOffset;n&&n!==f;)n!==this.el&&n.previousSibling?(n=n.previousSibling,t+=n.textContent.length):n=n.parentNode;this.savedPos=t}restorePosition(t=0){if(this.savedPos>0&&this.savedPos<t){const n=window.getSelection(),u=qt(this.el,{count:this.savedPos});u&&(u.collapse(!1),n.removeAllRanges(),n.addRange(u))}}hasParent(t,n){const u=n?this.parent:this.blockParent;return u!==null?u.nodeName.toLowerCase()===t.toLowerCase():!1}hasParents(t,n,u=this.parent){return u===null?!1:t.includes(u.nodeName.toLowerCase())===!0?!0:n===!0?this.hasParents(t,n,u.parentNode):!1}is(t,n){if(this.selection===null)return!1;switch(t){case"formatBlock":return n==="DIV"&&this.parent===this.el||this.hasParent(n,n==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(t)===n;case"fontName":const u=document.queryCommandValue(t);return u===`"${n}"`||u===n;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const f=document.queryCommandState(t);return n!==void 0?f===n:f}}getParentAttribute(t){return this.parent!==null?this.parent.getAttribute(t):null}can(t){if(t==="outdent")return this.hasParents(["blockquote","li"],!0);if(t==="indent")return this.hasParents(["li"],!0);if(t==="link")return this.selection!==null||this.is("link")}apply(t,n,u=tl){if(t==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(n)&&this.is(t,n)&&(t="outdent",n=null),n==="PRE"&&this.is(t,"PRE")&&(n="P");else if(t==="print"){u();const f=window.open();f.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),f.print(),f.close();return}else if(t==="link"){const f=this.getParentAttribute("href");if(f===null){const b=this.selectWord(this.selection),s=b?b.toString():"";if(!s.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=ln.test(s)?s:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(b.getRangeAt(0))}else this.eVm.editLinkUrl.value=f,this.range.selectNodeContents(this.parent),this.save();return}else if(t==="fullscreen"){this.eVm.toggleFullscreen(),u();return}else if(t==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),u();return}document.execCommand(t,!1,n),u()}selectWord(t){if(t===null||t.isCollapsed!==!0||t.modify===void 0)return t;const n=document.createRange();n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset);const u=n.collapsed?["backward","forward"]:["forward","backward"];n.detach();const f=t.focusNode,b=t.focusOffset;return t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",u[0],"character"),t.modify("move",u[1],"word"),t.extend(f,b),t.modify("extend",u[1],"character"),t.modify("extend",u[0],"word"),t}}function Ut(e,t,n){t.handler?t.handler(e,n,n.caret):n.runCmd(t.cmd,t.param)}function ot(e){return U("div",{class:"q-editor__toolbar-group"},e)}function Dt(e,t,n,u=!1){const f=u||(t.type==="toggle"?t.toggled?t.toggled(e):t.cmd&&e.caret.is(t.cmd,t.param):!1),b=[];if(t.tip&&e.$q.platform.is.desktop){const s=t.key?U("div",[U("small",`(CTRL + ${String.fromCharCode(t.key)})`)]):null;b.push(U(j,{delay:1e3},()=>[U("div",{innerHTML:t.tip}),s]))}return U(S,{...e.buttonProps.value,icon:t.icon!==null?t.icon:void 0,color:f?t.toggleColor||e.props.toolbarToggleColor:t.color||e.props.toolbarColor,textColor:f&&!e.props.toolbarPush?null:t.textColor||e.props.toolbarTextColor,label:t.label,disable:t.disable?typeof t.disable=="function"?t.disable(e):!0:!1,size:"sm",onClick(s){n&&n(),Ut(s,t,e)}},()=>b)}function an(e,t){const n=t.list==="only-icons";let u=t.label,f=t.icon!==null?t.icon:void 0,b,s;function a(){i.component.proxy.hide()}if(n)s=t.options.map(r=>{const w=r.type===void 0?e.caret.is(r.cmd,r.param):!1;return w&&(u=r.tip,f=r.icon!==null?r.icon:void 0),Dt(e,r,a,w)}),b=e.toolbarBackgroundClass.value,s=[ot(s)];else{const r=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,w=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,C=t.list==="no-icons";s=t.options.map(N=>{const B=N.disable?N.disable(e):!1,A=N.type===void 0?e.caret.is(N.cmd,N.param):!1;A&&(u=N.tip,f=N.icon!==null?N.icon:void 0);const L=N.htmlTip;return U(te,{active:A,activeClass:r,clickable:!0,disable:B,dense:!0,onClick(I){a(),e.contentRef.value!==null&&e.contentRef.value.focus(),e.caret.restore(),Ut(I,N,e)}},()=>[C===!0?null:U(R,{class:A?r:w,side:!0},()=>U(Ne,{name:N.icon!==null?N.icon:void 0})),U(R,L?()=>U("div",{class:"text-no-wrap",innerHTML:N.htmlTip}):N.tip?()=>U("div",{class:"text-no-wrap"},N.tip):void 0)])}),b=[e.toolbarBackgroundClass.value,w]}const m=t.highlight&&u!==t.label,i=U(me,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:m?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:m&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:t.fixedLabel?t.label:u,icon:t.fixedIcon?t.icon!==null?t.icon:void 0:f,contentClass:b,onShow:r=>e.emit("dropdownShow",r),onHide:r=>e.emit("dropdownHide",r),onBeforeShow:r=>e.emit("dropdownBeforeShow",r),onBeforeHide:r=>e.emit("dropdownBeforeHide",r)},()=>s);return i}function nn(e){if(e.caret)return e.buttons.value.filter(t=>!e.isViewingSource.value||t.find(n=>n.cmd==="viewsource")).map(t=>ot(t.map(n=>e.isViewingSource.value&&n.cmd!=="viewsource"?!1:n.type==="slot"?we(e.slots[n.slot]):n.type==="dropdown"?an(e,n):Dt(e,n))))}function sn(e,t,n,u={}){const f=Object.keys(u);if(f.length===0)return{};const b={default_font:{cmd:"fontName",param:e,icon:n,tip:t}};return f.forEach(s=>{const a=u[s];b[s]={cmd:"fontName",param:a,icon:n,tip:a,htmlTip:`<font face="${a}">${a}</font>`}}),b}function rn(e){if(e.caret){const t=e.props.toolbarColor||e.props.toolbarTextColor;let n=e.editLinkUrl.value;const u=()=>{e.caret.restore(),n!==e.editLinkUrl.value&&document.execCommand("createLink",!1,n===""?" ":n),e.editLinkUrl.value=null};return[U("div",{class:`q-mx-xs text-${t}`},`${e.$q.lang.editor.url}: `),U("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:n,onInput:f=>{Ct(f),n=f.target.value},onKeydown:f=>{if(St(f)!==!0)switch(f.keyCode){case 13:return dt(f),u();case 27:dt(f),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),ot([U(S,{key:"qedt_btm_rem",tabindex:-1,...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),U(S,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:u})])]}}const dn=Object.prototype.toString,Je=Object.prototype.hasOwnProperty,un=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function mt(e){if(e!==Object(e)||un.has(dn.call(e))===!0||e.constructor&&Je.call(e,"constructor")===!1&&Je.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let t;for(t in e);return t===void 0||Je.call(e,t)}function Ot(){let e,t,n,u,f,b,s=arguments[0]||{},a=1,m=!1;const i=arguments.length;for(typeof s=="boolean"&&(m=s,s=arguments[1]||{},a=2),Object(s)!==s&&typeof s!="function"&&(s={}),i===a&&(s=this,a--);a<i;a++)if((e=arguments[a])!==null)for(t in e)n=s[t],u=e[t],s!==u&&(m===!0&&u&&((f=Array.isArray(u))||mt(u)===!0)?(f===!0?b=Array.isArray(n)===!0?n:[]:b=mt(n)===!0?n:{},s[t]=Ot(m,b,u)):u!==void 0&&(s[t]=u));return s}var cn=Te({name:"QEditor",props:{...Ze,...dl,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(t=>t.length),default:()=>[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...ul,"update:modelValue","keydown","click","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:t,emit:n}){const{proxy:u}=Ee(),{$q:f}=u,b=_e(e,f),{inFullscreen:s,toggleFullscreen:a}=cl(),m=ll(),i=H(null),r=H(null),w=H(null),C=H(!1),N=v(()=>!e.readonly&&!e.disable);let B,A,L=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),B=window.getComputedStyle(document.body).fontFamily;const I=v(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),Y=v(()=>{const g=e.toolbarOutline!==!0&&e.toolbarPush!==!0;return{type:"a",flat:g,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!N.value,size:"sm"}}),_=v(()=>{const g=f.lang.editor,$=f.iconSet.editor;return{bold:{cmd:"bold",icon:$.bold,tip:g.bold,key:66},italic:{cmd:"italic",icon:$.italic,tip:g.italic,key:73},strike:{cmd:"strikeThrough",icon:$.strikethrough,tip:g.strikethrough,key:83},underline:{cmd:"underline",icon:$.underline,tip:g.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:$.unorderedList,tip:g.unorderedList},ordered:{cmd:"insertOrderedList",icon:$.orderedList,tip:g.orderedList},subscript:{cmd:"subscript",icon:$.subscript,tip:g.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:$.superscript,tip:g.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:K=>K.caret&&!K.caret.can("link"),icon:$.hyperlink,tip:g.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:$.toggleFullscreen,tip:g.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:$.viewSource,tip:g.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:$.quote,tip:g.quote,key:81},left:{cmd:"justifyLeft",icon:$.left,tip:g.left},center:{cmd:"justifyCenter",icon:$.center,tip:g.center},right:{cmd:"justifyRight",icon:$.right,tip:g.right},justify:{cmd:"justifyFull",icon:$.justify,tip:g.justify},print:{type:"no-state",cmd:"print",icon:$.print,tip:g.print,key:80},outdent:{type:"no-state",disable:K=>K.caret&&!K.caret.can("outdent"),cmd:"outdent",icon:$.outdent,tip:g.outdent},indent:{type:"no-state",disable:K=>K.caret&&!K.caret.can("indent"),cmd:"indent",icon:$.indent,tip:g.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:$.removeFormat,tip:g.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:$.hr,tip:g.hr},undo:{type:"no-state",cmd:"undo",icon:$.undo,tip:g.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:$.redo,tip:g.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:$.heading1||$.heading,tip:g.heading1,htmlTip:`<h1 class="q-ma-none">${g.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:$.heading2||$.heading,tip:g.heading2,htmlTip:`<h2 class="q-ma-none">${g.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:$.heading3||$.heading,tip:g.heading3,htmlTip:`<h3 class="q-ma-none">${g.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:$.heading4||$.heading,tip:g.heading4,htmlTip:`<h4 class="q-ma-none">${g.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:$.heading5||$.heading,tip:g.heading5,htmlTip:`<h5 class="q-ma-none">${g.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:$.heading6||$.heading,tip:g.heading6,htmlTip:`<h6 class="q-ma-none">${g.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:$.heading,tip:g.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:$.code,htmlTip:`<code>${g.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:$.size1||$.size,tip:g.size1,htmlTip:`<font size="1">${g.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:$.size2||$.size,tip:g.size2,htmlTip:`<font size="2">${g.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:$.size3||$.size,tip:g.size3,htmlTip:`<font size="3">${g.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:$.size4||$.size,tip:g.size4,htmlTip:`<font size="4">${g.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:$.size5||$.size,tip:g.size5,htmlTip:`<font size="5">${g.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:$.size6||$.size,tip:g.size6,htmlTip:`<font size="6">${g.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:$.size7||$.size,tip:g.size7,htmlTip:`<font size="7">${g.size7}</font>`}}}),T=v(()=>{const g=e.definitions||{},$=e.definitions||e.fonts?Ot(!0,{},_.value,g,sn(B,f.lang.editor.defaultFont,f.iconSet.editor.font,e.fonts)):_.value;return e.toolbar.map(K=>K.map(ae=>{if(ae.options)return{type:"dropdown",icon:ae.icon,label:ae.label,size:"sm",dense:!0,fixedLabel:ae.fixedLabel,fixedIcon:ae.fixedIcon,highlight:ae.highlight,list:ae.list,options:ae.options.map(Pt=>$[Pt])};const fe=$[ae];return fe?fe.type==="no-state"||g[ae]&&(fe.cmd===void 0||_.value[fe.cmd]&&_.value[fe.cmd].type==="no-state")?fe:Object.assign({type:"toggle"},fe):{type:"slot",slot:ae}}))}),E={$q:f,props:e,slots:t,emit:n,inFullscreen:s,toggleFullscreen:a,runCmd:We,isViewingSource:C,editLinkUrl:w,toolbarBackgroundClass:I,buttonProps:Y,contentRef:r,buttons:T,setContent:Qe};pe(()=>e.modelValue,g=>{L!==g&&(L=g,Qe(g,!0))}),pe(w,g=>{n(`link${g?"Show":"Hide"}`)});const ne=v(()=>e.toolbar&&e.toolbar.length!==0),ue=v(()=>{const g={},$=K=>{K.key&&(g[K.key]={cmd:K.cmd,param:K.param})};return T.value.forEach(K=>{K.forEach(ae=>{ae.options?ae.options.forEach($):$(ae)})}),g}),ve=v(()=>s.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),Ve=v(()=>`q-editor q-editor--${C.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(s.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(b.value===!0?" q-editor--dark q-dark":"")),x=v(()=>[e.contentClass,"q-editor__content",{col:s.value,"overflow-auto":s.value||e.maxHeight}]),Le=v(()=>e.disable===!0?{"aria-disabled":"true"}:{});function He(){if(r.value!==null){const g=`inner${C.value===!0?"Text":"HTML"}`,$=r.value[g];$!==e.modelValue&&(L=$,n("update:modelValue",$))}}function ze(g){if(n("keydown",g),g.ctrlKey!==!0||St(g)===!0){ge();return}const $=g.keyCode,K=ue.value[$];if(K!==void 0){const{cmd:ae,param:fe}=K;vt(g),We(ae,fe,!1)}}function Fe(g){ge(),n("click",g)}function je(g){if(r.value!==null){const{scrollTop:$,scrollHeight:K}=r.value;A=K-$}E.caret.save(),n("blur",g)}function Ke(g){pt(()=>{r.value!==null&&A!==void 0&&(r.value.scrollTop=r.value.scrollHeight-A)}),n("focus",g)}function M(g){const $=i.value;if($!==null&&$.contains(g.target)===!0&&(g.relatedTarget===null||$.contains(g.relatedTarget)!==!0)){const K=`inner${C.value===!0?"Text":"HTML"}`;E.caret.restorePosition(r.value[K].length),ge()}}function ce(g){const $=i.value;$!==null&&$.contains(g.target)===!0&&(g.relatedTarget===null||$.contains(g.relatedTarget)!==!0)&&(E.caret.savePosition(),ge())}function $e(){A=void 0}function Pe(g){E.caret.save()}function Qe(g,$){if(r.value!==null){$===!0&&E.caret.savePosition();const K=`inner${C.value===!0?"Text":"HTML"}`;r.value[K]=g,$===!0&&(E.caret.restorePosition(r.value[K].length),ge())}}function We(g,$,K=!0){Xe(),E.caret.restore(),E.caret.apply(g,$,()=>{Xe(),E.caret.save(),K&&ge()})}function ge(){setTimeout(()=>{w.value=null,u.$forceUpdate()},1)}function Xe(){ol(()=>{r.value!==null&&r.value.focus({preventScroll:!0})})}function Lt(){return r.value}return ht(()=>{E.caret=u.caret=new on(r.value,E),Qe(e.modelValue),ge(),document.addEventListener("selectionchange",Pe)}),xe(()=>{document.removeEventListener("selectionchange",Pe)}),Object.assign(u,{runCmd:We,refreshToolbar:ge,focus:Xe,getContentEl:Lt}),()=>{let g;if(ne.value){const $=[U("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+I.value},nn(E))];w.value!==null&&$.push(U("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+I.value},rn(E))),g=U("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},$)}return U("div",{ref:i,class:Ve.value,style:{height:s.value===!0?"100%":null},...Le.value,onFocusin:M,onFocusout:ce},[g,U("div",{ref:r,style:ve.value,class:x.value,contenteditable:N.value,placeholder:e.placeholder,...m.listeners.value,onInput:He,onKeydown:ze,onClick:Fe,onBlur:je,onFocus:Ke,onMousedown:$e,onTouchstartPassive:$e})])}}});function mn(){const{t:e}=ie(),t=v(()=>[{label:e("monster.stat.STR"),token:"{DC:STR}"},{label:e("monster.stat.DEX"),token:"{DC:DEX}"},{label:e("monster.stat.CON"),token:"{DC:CON}"},{label:e("monster.stat.INT"),token:"{DC:INT}"},{label:e("monster.stat.WIS"),token:"{DC:WIS}"},{label:e("monster.stat.CHA"),token:"{DC:CHA}"}]),n=v(()=>[{label:e("monster.stat.STR"),token:"{A:STR}"},{label:e("monster.stat.DEX"),token:"{A:DEX}"},{label:e("monster.stat.CON"),token:"{A:CON}"},{label:e("monster.stat.INT"),token:"{A:INT}"},{label:e("monster.stat.WIS"),token:"{A:WIS}"},{label:e("monster.stat.CHA"),token:"{A:CHA}"}]),u=v(()=>[{label:e("monster.name"),token:"{monster.name}"},{label:e("monster.proficiencyBonus"),token:"{monster.proficiency}"},{label:e("monster.ac"),token:"{monster.AC}"},{label:e("monster.hp.label"),token:"{monster.hp}"}]),f=v(()=>[{label:e("monster.trait.name"),token:"{trait.name}"},{label:e("monster.trait.limitedUse.label"),token:"{trait.limitedUse}"},{label:e("monster.trait.limitedUse.count"),token:"{trait.limitedUse.count}"},{label:e("monster.trait.limitedUse.rate"),token:"{trait.limitedUse.rate}"}]),b=v(()=>[{label:e("monster.spellcasting.level"),token:"{spellcasting.level}"},{label:e("editor.spellcasting.slot.levelOrdinal"),token:"{spellcasting.ordinal}"},{label:e("monster.spellcasting.class"),token:"{spellcasting.class}"},{label:e("monster.spellcasting.ability"),token:"{spellcasting.stat}"},{label:e("monster.spellcasting.save"),token:"{spellcasting.save}"},{label:e("monster.spellcasting.attack"),token:"{spellcasting.attack}"},{label:e("monster.spellcasting.modifier"),token:"{spellcasting.modifier}"}]),s=v(()=>[{label:e("editor.attack.primary"),token:"{attack.damage}"},{label:e("editor.attack.distanceLabel"),token:"{attack.distance}"},{label:e("monster.attack.bonus"),token:"{attack.modifier}"},{label:e("monster.attack.targets"),token:"{attack.targets}"},{label:e("editor.attack.additional"),token:"{attack.additionalDamage}"},{label:e("editor.attack.conditional"),token:"{attack.conditionalDamage}"}]),a=v(()=>[{label:e("monster.trait.name"),token:"{action.name}"},{label:e("monster.trait.limitedUse.label"),token:"{action.limitedUse}"},{label:e("monster.trait.limitedUse.count"),token:"{action.limitedUse.count}"},{label:e("monster.trait.limitedUse.rate"),token:"{action.limitedUse.rate}"},{label:e("monster.action.recharge"),token:"{action.recharge}"}]),m=v(()=>[{label:e("editor.legendary.actionCount"),token:"{legendaryActions.count"},{label:e("editor.legendary.count"),token:"{legendaryActions.actions}"}]);return{attackTokens:n,saveTokens:t,monsterTokens:u,traitTokens:f,spellTokens:b,attackDamageTokens:s,actionTokens:a,legendaryTokens:m}}const pn=X({name:"MonsterTextEditor",props:{field:{required:!0,type:String},tokenCategory:{type:String,default:"none"},i18nLabelKey:{required:!0,type:String},showReset:{type:Boolean,default:!1}},emits:["update:modelValue","reset"],setup(e,t){const{t:n}=ie(),u=H(null),f=H(null),b=H(null),s=H(null),a=H(null),m=mn(),i=H([["title"],["bold","italic","underline"],["undo","redo"],["saves","attacks","monster-tokens","context-tokens"]]);e.showReset&&i.value.push(["reset"]);const r=H({reset:{tip:n("editor.resetTip"),icon:"restart_alt",handler:()=>t.emit("reset")}}),w=al.throttle(A=>{t.emit("update:modelValue",A)},500),C=A=>{var I,Y,_,T;const L=u.value;(I=f.value)==null||I.hide(),(Y=s.value)==null||Y.hide(),(_=b.value)==null||_.hide(),(T=a.value)==null||T.hide(),L.caret.restore(),L.runCmd("insertHTML",`${A}`),L.focus()},N=v(()=>e.tokenCategory==="trait"?m.traitTokens.value:e.tokenCategory==="spell"?m.spellTokens.value:e.tokenCategory==="attack"?m.attackDamageTokens.value:e.tokenCategory==="action"?m.actionTokens.value:e.tokenCategory==="legendary"?m.legendaryTokens.value:null),B=v(()=>e.tokenCategory==="trait"?"editor.trait":e.tokenCategory==="spell"?"editor.spellcasting.label":e.tokenCategory==="attack"?"editor.attack.customRenderer":e.tokenCategory==="action"?"editor.action.tokenLabel":e.tokenCategory==="legendary"?"editor.legendary.label":"");return{monsterTokenRef:f,attackTokenRef:b,saveTokenRef:s,contextTokenRef:a,editorRef:u,add:C,...m,contextTokens:N,contextTokenLabel:B,throttledUpdate:w,toolbarOptions:i,toolbarDefinitions:r}}}),fn={class:"text-subtitle2",style:{display:"flex","align-items":"center",height:"100%"}};function bn(e,t,n,u,f,b){return p(),V(cn,{ref:"editorRef","model-value":e.$props.field,toolbar:e.toolbarOptions,definitions:e.toolbarDefinitions,class:"full-width q-ma-sm","onUpdate:modelValue":t[0]||(t[0]=s=>e.throttledUpdate(s))},{title:o(()=>[c("div",fn,d(e.$t(e.$props.i18nLabelKey)),1)]),saves:o(()=>[l(me,{ref:"saveTokenRef",dense:"","no-caps":"","no-wrap":"",unelevated:"",label:e.$t("editor.statSave"),size:"sm"},{default:o(()=>[l(le,{dense:""},{default:o(()=>[(p(!0),y(D,null,P(e.saveTokens,s=>(p(),V(te,{key:s.token,clickable:"",onClick:a=>e.add(s.token)},{default:o(()=>[l(R,null,{default:o(()=>[k(d(s.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["label"])]),attacks:o(()=>[l(me,{ref:"attackTokenRef",dense:"","no-caps":"","no-wrap":"",unelevated:"",label:e.$t("editor.attackMod"),size:"sm"},{default:o(()=>[l(le,{dense:""},{default:o(()=>[(p(!0),y(D,null,P(e.attackTokens,s=>(p(),V(te,{key:s.token,clickable:"",onClick:a=>e.add(s.token)},{default:o(()=>[l(R,null,{default:o(()=>[k(d(s.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["label"])]),"monster-tokens":o(()=>[l(me,{ref:"monsterTokenRef",dense:"","no-caps":"","no-wrap":"",unelevated:"",label:e.$t("editor.monsterToken"),size:"sm"},{default:o(()=>[l(le,{dense:""},{default:o(()=>[(p(!0),y(D,null,P(e.monsterTokens,s=>(p(),V(te,{key:s.token,clickable:"",onClick:a=>e.add(s.token)},{default:o(()=>[l(R,null,{default:o(()=>[k(d(s.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["label"])]),"context-tokens":o(()=>[e.contextTokens!=null?(p(),V(me,{key:0,ref:"contextTokenRef",dense:"","no-caps":"","no-wrap":"",unelevated:"",label:e.$t(e.contextTokenLabel),size:"sm"},{default:o(()=>[l(le,{dense:""},{default:o(()=>[(p(!0),y(D,null,P(e.contextTokens,s=>(p(),V(te,{key:s.token,clickable:"",onClick:a=>e.add(s.token)},{default:o(()=>[l(R,null,{default:o(()=>[k(d(s.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1},8,["label"])):Z("",!0)]),_:1},8,["model-value","toolbar","definitions"])}var de=G(pn,[["render",bn]]);const vn=X({name:"CrAnnotationCard",components:{LockToggleButton:Oe},props:{field:{required:!0,type:String},index:{required:!0,type:Number}},setup(e){return{crData:J()[e.field][e.index],validateNumber:re,...Re()}}}),gn={class:"full-width"},kn={class:"col"},yn={class:"text-overline text-uppercase"},$n={class:"text-subtitle"},hn={class:"col-2",style:{display:"flex","justify-content":"flex-end","justify-items":"flex-end","align-items":"center","align-content":"flex-end"}},Cn={class:"row"};function Sn(e,t,n,u,f,b){const s=q("lock-toggle-button");return p(),y("div",gn,[l(z,{flat:"",bordered:""},{default:o(()=>[l(O,{class:"bg-indigo-10 row"},{default:o(()=>[c("div",kn,[c("div",yn,d(e.$t("editor.crAnnotation.title")),1),c("div",$n,d(e.printCrSummary(e.crData.crAnnotation)),1)]),c("div",hn,[l(Se,{push:""},{default:o(()=>[l(s,{locked:e.crData.crAnnotation.automatic,"lock-tooltip":e.$t("editor.crAnnotation.automatic"),"unlock-tooltip":e.$t("editor.crAnnotation.manual"),onClick:t[0]||(t[0]=()=>{e.crData.crAnnotation.automatic=!e.crData.crAnnotation.automatic,e.crData.crAnnotation.automatic&&e.autoUpdateCr(e.crData.description,e.crData.crAnnotation)})},null,8,["locked","lock-tooltip","unlock-tooltip"]),l(S,{push:"",icon:e.crData.crAnnotation.include?"code":"code_off",color:e.crData.crAnnotation.include?"positive":"dark",size:"md",onClick:t[1]||(t[1]=a=>e.crData.crAnnotation.include=!e.crData.crAnnotation.include)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.crData.crAnnotation.include?e.$t("editor.crAnnotation.include"):e.$t("editor.crAnnotation.exclude")),1)]),_:1})]),_:1},8,["icon","color"])]),_:1})])]),_:1}),l(be,null,{default:o(()=>[Q(c("div",null,[l(ye),l(O,null,{default:o(()=>[c("div",Cn,[l(h,{"model-value":e.crData.crAnnotation.maxDamage,type:"number",disable:e.crData.crAnnotation.automatic,label:e.$t("editor.crAnnotation.maxDamage"),min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[3]||(t[3]=a=>e.crData.crAnnotation.maxDamage=e.validateNumber(a,0))},{after:o(()=>[l(S,{push:"",icon:e.crData.crAnnotation.multitarget?"groups":"person",color:"primary",onClick:t[2]||(t[2]=a=>e.crData.crAnnotation.multitarget=!e.crData.crAnnotation.multitarget)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.crData.crAnnotation.multitarget?e.$t("editor.crAnnotation.multitarget"):e.$t("editor.crAnnotation.singletarget")),1)]),_:1})]),_:1},8,["icon"])]),_:1},8,["model-value","disable","label"]),l(h,{"model-value":e.crData.crAnnotation.maxSave,type:"number",label:e.$t("editor.crAnnotation.maxSave"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[4]||(t[4]=a=>e.crData.crAnnotation.maxSave=e.validateNumber(a,0))},null,8,["model-value","label","disable"]),l(h,{"model-value":e.crData.crAnnotation.maxModifier,type:"number",label:e.$t("editor.crAnnotation.maxModifier"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[5]||(t[5]=a=>e.crData.crAnnotation.maxModifier=e.validateNumber(a,0))},null,8,["model-value","label","disable"]),l(h,{"model-value":e.crData.crAnnotation.ehpModifier,type:"number",label:e.$t("editor.crAnnotation.ehpModifier"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[6]||(t[6]=a=>e.crData.crAnnotation.ehpModifier=e.validateNumber(a,0))},null,8,["model-value","label","disable"]),l(h,{"model-value":e.crData.crAnnotation.ehpMultiplier,type:"number",label:e.$t("editor.crAnnotation.ehpMultiplier"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[7]||(t[7]=a=>e.crData.crAnnotation.ehpMultiplier=e.validateNumber(a,1))},null,8,["model-value","label","disable"]),l(h,{"model-value":e.crData.crAnnotation.acModifier,type:"number",label:e.$t("editor.crAnnotation.acModifier"),disable:e.crData.crAnnotation.automatic,min:"0",class:"col-12 col-sm-6 col-md-3 col-lg-2 q-pa-sm","onUpdate:modelValue":t[8]||(t[8]=a=>e.crData.crAnnotation.acModifier=e.validateNumber(a,0))},null,8,["model-value","label","disable"])])]),_:1})],512),[[ee,!e.crData.crAnnotation.automatic]])]),_:1})]),_:1})])}var at=G(vn,[["render",Sn]]);const wn=X({name:"NewTemplateDialog",props:{targetName:{type:String,default:""}},emits:[...st.emits],setup(e){const{dialogRef:t,onDialogHide:n,onDialogOK:u,onDialogCancel:f}=st(),b=De(),{t:s}=ie(),a=H(""),m=H(e.targetName),i=H(!1),r=H(null),w=v(()=>{var C;return i.value?((C=r.value)==null||C.resetValidation(),[]):[N=>!(N in b.allTemplates)||s("editor.template.nameValidator")]});return{dialogRef:t,onDialogHide:n,onOKClick(){u({name:m.value,icon:a.value})},onCancelClick:f,icon:a,name:m,nameInput:r,override:i,templateStore:b,rules:w}}}),An={class:"text-h6"},Vn={class:"col-12 q-pa-sm text-subtitle1"},Tn={href:"https://quasar.dev/vue-components/icon#webfont-usage",target:"_blank"},qn={href:"https://fonts.google.com/icons?selected=Material+Icons&icon.style=Filled",target:"_blank"},Un={href:"https://materialdesignicons.com/",target:"_blank"},Dn={href:"https://fontawesome.com/search?m=free",target:"_blank"},On={class:"col-12 q-pa-sm"};function Ln(e,t,n,u,f,b){const s=q("i18n-t");return p(),V(sl,{ref:"dialogRef",onHide:e.onDialogHide},{default:o(()=>[l(z,{class:"q-dialog-plugin new-spell-dialog"},{default:o(()=>[l(O,null,{default:o(()=>[c("div",An,d(e.$t("editor.template.create",[e.targetName])),1)]),_:1}),l(ye),l(O,{class:"row"},{default:o(()=>[l(h,{ref:"nameInput",modelValue:e.name,"onUpdate:modelValue":t[0]||(t[0]=a=>e.name=a),label:e.$t("editor.template.name"),class:"col-12 q-pa-sm","reactive-rules":"",rules:e.rules,"bottom-slots":""},{hint:o(()=>[k(d(e.$t("editor.template.nameHint")),1)]),_:1},8,["modelValue","label","rules"]),l(h,{modelValue:e.icon,"onUpdate:modelValue":t[1]||(t[1]=a=>e.icon=a),class:"col-12 q-pa-sm",label:e.$t("editor.template.icon")},null,8,["modelValue","label"]),c("div",Vn,[l(s,{keypath:"editor.template.availableIcons"},{default:o(()=>[c("a",Tn,d(e.$t("editor.template.link0")),1),c("a",qn,d(e.$t("editor.template.link1")),1),c("a",Un,d(e.$t("editor.template.link2")),1),c("a",Dn,d(e.$t("editor.template.link3")),1)]),_:1})]),c("div",On,[l(nl,{modelValue:e.override,"onUpdate:modelValue":t[2]||(t[2]=a=>e.override=a),label:e.$t("editor.template.override")},null,8,["modelValue","label"])])]),_:1}),l(oe,{align:"right"},{default:o(()=>{var a;return[l(S,{color:"green",label:e.$t("editor.save"),disabled:!e.override&&(!((a=e.nameInput)!=null&&a.validate())||e.name.length===0),onClick:e.onOKClick},null,8,["label","disabled","onClick"]),l(S,{color:"primary",label:e.$t("editor.cancel"),onClick:e.onCancelClick},null,8,["label","onClick"])]}),_:1})]),_:1})]),_:1},8,["onHide"])}var Ie=G(wn,[["render",Ln]]);const Pn=X({name:"SwapButtons",props:{idx:{type:Number,required:!0},field:{type:String,required:!0}},setup(e){const t=J(),n=v(()=>t[e.field].length);return{monster:t,itemCount:n}}});function Nn(e,t,n,u,f,b){return p(),V(Se,{push:""},{default:o(()=>[l(S,{disabled:e.idx===0,push:"",ripple:!1,icon:"move_up",color:"primary",onClick:t[0]||(t[0]=s=>{s.stopPropagation(),e.monster.moveItemUp(e.field,e.idx)})},null,8,["disabled"]),l(S,{disabled:e.idx===e.itemCount-1,push:"",ripple:!1,icon:"move_down",color:"primary",onClick:t[1]||(t[1]=s=>{s.stopPropagation(),e.monster.moveItemDown(e.field,e.idx)})},null,8,["disabled"])]),_:1})}var Ae=G(Pn,[["render",Nn]]);const En=X({name:"TraitsEditor",components:{MonsterTextEditor:de,CrAnnotationCard:at,SwapButtons:Ae},setup(){const e=J(),{rechargeTimeOptions:t}=Ue(),{autoUpdateCr:n,printCrSummary:u}=Re(),f=qe(),{t:b}=ie(),s=De(),a=m=>{f.dialog({component:Ie,componentProps:{targetName:m.name}}).onOk(({name:i,icon:r})=>{s.addCustomTrait(m,i,r),f.notify({message:b("editor.template.added",[i]),type:"positive"})})};return{monster:e,traits:v(()=>e.traits),rechargeTimeOptions:t,autoUpdateCr:n,printCrSummary:u,addTemplate:a,validateNumber:re}}});function Mn(e,t,n,u,f,b){const s=q("swap-buttons"),a=q("monster-text-editor"),m=q("cr-annotation-card");return p(),V(W,{"expand-separator":"",icon:"fa-solid fa-dna",label:e.$t("editor.traits.label"),caption:e.$t("editor.traits.caption")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[l(le,{bordered:"",separator:"",class:"rounded-borders bg-teal-10 full-width"},{default:o(()=>[(p(!0),y(D,null,P(e.traits,(i,r)=>(p(),V(W,{key:i.id,label:i.name,"expand-separator":""},{header:o(()=>[l(R,null,{default:o(()=>[k(d(i.name),1)]),_:2},1024),e.monster.alphaTraits?Z("",!0):(p(),V(R,{key:0,side:""},{default:o(()=>[l(s,{field:"traits",idx:r},null,8,["idx"])]),_:2},1024))]),default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[l(h,{modelValue:i.name,"onUpdate:modelValue":w=>i.name=w,label:e.$t("monster.trait.name"),class:"col-7 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","label"]),l(h,{"model-value":i.limitedUse.count,type:"number",min:"0",class:"col-2 q-pa-sm",label:e.$t("monster.trait.limitedUse.count"),"onUpdate:modelValue":w=>i.limitedUse.count=e.validateNumber(w,0)},null,8,["model-value","label","onUpdate:modelValue"]),l(F,{modelValue:i.limitedUse.rate,"onUpdate:modelValue":w=>i.limitedUse.rate=w,"display-value":e.$t(`recharge.${i.limitedUse.rate}`),options:e.rechargeTimeOptions,"emit-value":"",label:e.$t("monster.trait.limitedUse.rate"),class:"col-3 q-pa-sm"},{after:o(()=>[l(S,{round:"",icon:"save",color:"primary",onClick:w=>e.addTemplate(i)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("monster.trait.save")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","display-value","options","label"]),l(a,{field:i.description,"i18n-label-key":"monster.trait.description","token-category":"trait","onUpdate:modelValue":w=>{i.description=w,e.autoUpdateCr(i.description,i.crAnnotation)}},null,8,["field","onUpdate:modelValue"]),l(m,{field:"traits",index:r},null,8,["index"])]),_:2},1024),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"negative",class:"full-width",label:e.$t("editor.deleteTrait"),onClick:()=>e.monster.deleteTrait(i.id)},null,8,["label","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})]),_:1}),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"positive",class:"full-width",label:e.$t("editor.addTrait"),onClick:e.monster.addTrait},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var Rn=G(En,[["render",Mn]]);const Bn=X({name:"ClassCastingEditor",components:{MonsterTextEditor:de},setup(){const e=H(!1),t=H(!1),n=J(),u=Me(),{rechargeTimeOptions:f}=Ue(),b=et(),s=v(()=>t.value?u.allSpellOptions.filter(B=>B.class.find(A=>{var L;return A.toLowerCase()===((L=n.spellcasting.class)==null?void 0:L.toLowerCase())})):u.allSpellOptions),a=H([]),m=tt(s,a),{ordinalSpellLevels:i}=Vt(),r=i,w=v(()=>n.spellcasting.class==null?"":n.spellcasting.class in b.SrdClass.value?b.SrdClass.value[n.spellcasting.class]:n.spellcasting.class);return{monster:n,rechargeTimeOptions:f,updateSpellcastingClass:B=>{var A;if(B!=null&&B in b.ClassCastingStat){const L=B,I=b.ClassSpellSlots[L];n.spellcasting.class=L,n.spellcasting.stat=(A=b.ClassCastingStat[L])!=null?A:n.spellcasting.stat,n.spellcasting.slots=I!=null?I[n.spellcasting.level-1]:[0,0,0,0,0,0,0,0,0]}else n.spellcasting.class=B},updateSpellcastingSlots:B=>{if(n.spellcasting.class&&n.spellcasting.class in b.ClassCastingStat){const A=n.spellcasting.class,L=b.ClassSpellSlots[A];n.spellcasting.slots=L!=null?L[B-1]:[0,0,0,0,0,0,0,0,0]}},classDisplayValue:w,spellOptions:a,spellFilter:m,showSlots:e,classFilter:t,spellLevels:r,spellOptionsByLevel:u.spellOptionsByLevel,validateNumber:re,...b}}}),In={class:"row"},Hn={class:"col-12 q-mt-md"},zn={class:"row"},Fn={class:"col-1 flex flex-center"},jn={key:0,class:"col-1 text-capitalize flex flex-center"};function Kn(e,t,n,u,f,b){const s=q("monster-text-editor");return p(),V(W,{"expand-separator":"",label:e.$t("editor.spellcasting.class.label"),caption:e.$t("editor.spellcasting.class.caption"),"header-class":"bg-purple-10"},{default:o(()=>[l(z,null,{default:o(()=>[l(O,null,{default:o(()=>[c("div",In,[l(F,{label:e.$t("monster.spellcasting.class"),"model-value":e.monster.spellcasting.class,"display-value":e.classDisplayValue,options:e.SrdCastingClassOptions,"new-value-mode":"add-unique","use-input":"","emit-value":"",class:"col-2 q-pa-sm","onUpdate:modelValue":e.updateSpellcastingClass},null,8,["label","model-value","display-value","options","onUpdate:modelValue"]),l(h,{"model-value":e.monster.spellcasting.level,label:e.$t("monster.spellcasting.level"),type:"number",min:"1",max:"20",class:"col-2 q-pa-sm","onUpdate:modelValue":t[0]||(t[0]=a=>{e.monster.spellcasting.level=e.validateNumber(a,1),e.updateSpellcastingSlots(e.monster.spellcasting.level)})},null,8,["model-value","label"]),l(h,{modelValue:e.monster.spellcasting.notes,"onUpdate:modelValue":t[2]||(t[2]=a=>e.monster.spellcasting.notes=a),label:e.$t("monster.spellcasting.notes"),class:"col q-pa-sm","bottom-slots":""},{hint:o(()=>[k(d(e.$t("editor.plainTextNote")),1)]),after:o(()=>[l(S,{push:"",icon:e.monster.spellcasting.useCustomClassPreamble?"edit":"edit_off",color:e.monster.spellcasting.useCustomClassPreamble?"warning":"dark",size:"md",onClick:t[1]||(t[1]=a=>e.monster.spellcasting.useCustomClassPreamble=!e.monster.spellcasting.useCustomClassPreamble)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.monster.spellcasting.useCustomClassPreamble?e.$t("editor.spellcasting.slot.useCustomPreamble"):e.$t("editor.spellcasting.slot.useDefaultPreamble")),1)]),_:1})]),_:1},8,["icon","color"])]),_:1},8,["modelValue","label"]),l(be,null,{default:o(()=>[Q(c("div",Hn,[l(s,{field:e.monster.spellcasting.customClassPreamble,"i18n-label-key":"editor.spellcasting.slot.preamble","token-category":"spell","show-reset":!0,"onUpdate:modelValue":t[3]||(t[3]=a=>e.monster.spellcasting.customClassPreamble=a),onReset:t[4]||(t[4]=a=>e.monster.spellcasting.customClassPreamble=e.$t("presets.classSpellcasting"))},null,8,["field"])],512),[[ee,e.monster.spellcasting.useCustomClassPreamble]])]),_:1}),l(F,{modelValue:e.monster.spellcasting.standard,"onUpdate:modelValue":t[7]||(t[7]=a=>e.monster.spellcasting.standard=a),label:e.$t("editor.spellcasting.slot.all"),options:e.spellOptions,"use-chips":"",multiple:"","use-input":"",clearable:"","emit-value":"","input-debounce":"0",class:"col-12 q-pa-sm",onFilter:e.spellFilter,onClear:t[8]||(t[8]=a=>e.monster.spellcasting.standard=[])},{after:o(()=>[l(S,{class:"q-mr-sm",color:e.classFilter?"positive":"dark",onClick:t[5]||(t[5]=a=>e.classFilter=!e.classFilter)},{default:o(()=>[k(d(e.classFilter?e.$t("editor.spellcasting.slot.classOnlyOn"):e.$t("editor.spellcasting.slot.classOnlyOff")),1)]),_:1},8,["color"]),l(S,{color:"primary",onClick:t[6]||(t[6]=a=>e.showSlots=!e.showSlots)},{default:o(()=>[k(d(e.showSlots?e.$t("editor.spellcasting.slot.hideSlots"):e.$t("editor.spellcasting.slot.showSlots")),1)]),_:1})]),option:o(a=>[l(te,wt(At(a.itemProps)),{default:o(()=>[l(R,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(a.opt.label),1)]),_:2},1024),l(se,{caption:""},{default:o(()=>[k(d(a.opt.classDisplay),1)]),_:2},1024)]),_:2},1024),l(R,{side:"",top:""},{default:o(()=>[l(Be,{color:"purple-8",label:a.opt.level===0?e.$t("editor.spellcasting.slot.cantrip"):e.$t("editor.spellcasting.slot.level",{ordinal:e.spellLevels[a.opt.level]})},null,8,["label"])]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","label","options","onFilter"])])]),_:1}),l(be,null,{default:o(()=>[Q(c("div",null,[l(ye),l(O,null,{default:o(()=>[c("div",zn,[(p(!0),y(D,null,P(e.spellLevels,(a,m)=>(p(),y(D,{key:m},[c("div",Fn,d(m===0?e.$t("editor.spellcasting.slot.cantrip"):e.$t("editor.spellcasting.slot.level",{ordinal:a})),1),m===0?(p(),y("div",jn,d(e.$t("recharge.AT_WILL")),1)):(p(),V(h,{key:1,"model-value":e.monster.spellcasting.slots[m-1],type:"number",class:"col-1 q-pa-sm",min:"0",label:e.$t("editor.spellcasting.slot.slots"),"onUpdate:modelValue":i=>e.monster.spellcasting.slots[m-1]=e.validateNumber(i,0)},null,8,["model-value","label","onUpdate:modelValue"])),l(F,{"model-value":e.monster.knownSpellsOfLevel(m),label:m===0?e.$t("editor.spellcasting.slot.cantrips"):e.$t("editor.spellcasting.slot.knownAtLevel",{ordinal:a}),options:e.spellOptionsByLevel(m,e.classFilter?e.monster.spellcasting.class:void 0),"use-chips":"",multiple:"","emit-value":"","input-debounce":"0",class:"col-10 q-pa-sm","onUpdate:modelValue":i=>e.monster.updateSpellsAtLevel(m,i)},{option:o(i=>[l(te,il({ref_for:!0},i.itemProps),{default:o(()=>[l(R,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(i.opt.label),1)]),_:2},1024),l(se,{caption:""},{default:o(()=>[k(d(i.opt.classDisplay),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:2},1032,["model-value","label","options","onUpdate:modelValue"])],64))),128))])]),_:1})],512),[[ee,e.showSlots]])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var Qn=G(Bn,[["render",Kn]]);const Wn=X({name:"SearchableSpellSelect",props:{modelValue:{type:Object,required:!0},label:{type:String,required:!0}},emits:["update:model-value","clear"],setup(){const e=Me(),t=v(()=>e.allSpellOptions),n=H([]),u=tt(t,n),{ordinalSpellLevels:f}=Vt();return{spellOptions:n,spellFilter:u,spellLevels:f}}});function Xn(e,t,n,u,f,b){return p(),V(F,{"model-value":e.$props.modelValue,label:e.$props.label,options:e.spellOptions,"use-chips":"",multiple:"","use-input":"",clearable:"","emit-value":"","input-debounce":"0",onFilter:e.spellFilter,"onUpdate:modelValue":t[0]||(t[0]=s=>e.$emit("update:model-value",s)),onClear:t[1]||(t[1]=s=>e.$emit("clear"))},{option:o(s=>[l(te,wt(At(s.itemProps)),{default:o(()=>[l(R,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(s.opt.label),1)]),_:2},1024),l(se,{caption:""},{default:o(()=>[k(d(s.opt.classDisplay),1)]),_:2},1024)]),_:2},1024),l(R,{side:"",top:""},{default:o(()=>[l(Be,{color:"purple-8",label:s.opt.level===0?e.$t("editor.spellcasting.slot.cantrip"):e.$t("editor.spellcasting.slot.level",{ordinal:e.spellLevels[s.opt.level]})},null,8,["label"])]),_:2},1024)]),_:2},1040)]),after:o(()=>[rl(e.$slots,"after")]),_:3},8,["model-value","label","options","onFilter"])}var Gn=G(Wn,[["render",Xn]]);const Yn=X({name:"AtWillCastingEditor",components:{MonsterTextEditor:de,SearchableSpellSelect:Gn},setup(){const e=H(!1),t=H(!1),n=J(),u=Me(),{rechargeTimeOptions:f}=Ue(),b=et(),s=v(()=>t.value?u.allSpellOptions.filter(i=>i.class.find(r=>{var w;return r.toLowerCase()===((w=n.spellcasting.class)==null?void 0:w.toLowerCase())})):u.allSpellOptions),a=H([]),m=tt(s,a);return{monster:n,rechargeTimeOptions:f,spellOptions:a,spellFilter:m,showSlots:e,classFilter:t,spellOptionsByLevel:u.spellOptionsByLevel,validateNumber:re,...b}}}),Jn={class:"row"},Zn={class:"col-12 q-mt-md"},_n={class:"col-12 q-py-md q-px-sm"};function xn(e,t,n,u,f,b){const s=q("monster-text-editor"),a=q("searchable-spell-select");return p(),V(W,{"expand-separator":"",label:e.$t("editor.spellcasting.innate.label"),caption:e.$t("editor.spellcasting.innate.caption"),"header-class":"bg-purple-10"},{default:o(()=>[l(z,null,{default:o(()=>[l(O,null,{default:o(()=>[c("div",Jn,[l(h,{modelValue:e.monster.spellcasting.atWillNotes,"onUpdate:modelValue":t[1]||(t[1]=m=>e.monster.spellcasting.atWillNotes=m),class:"col-12 q-pa-sm q-mb-sm","bottom-slots":"",label:e.$t("monster.spellcasting.atWillNotes")},{hint:o(()=>[k(d(e.$t("editor.plainTextNote")),1)]),after:o(()=>[l(S,{push:"",icon:e.monster.spellcasting.useCustomInnatePreamble?"edit":"edit_off",color:e.monster.spellcasting.useCustomInnatePreamble?"warning":"dark",size:"md",onClick:t[0]||(t[0]=m=>e.monster.spellcasting.useCustomInnatePreamble=!e.monster.spellcasting.useCustomInnatePreamble)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.monster.spellcasting.useCustomInnatePreamble?e.$t("editor.spellcasting.slot.useCustomPreamble"):e.$t("editor.spellcasting.slot.useDefaultPreamble")),1)]),_:1})]),_:1},8,["icon","color"])]),_:1},8,["modelValue","label"]),l(be,null,{default:o(()=>[Q(c("div",Zn,[l(s,{field:e.monster.spellcasting.customInnatePreamble,"i18n-label-key":"editor.spellcasting.innate.preamble","token-category":"spell","show-reset":!0,"onUpdate:modelValue":t[2]||(t[2]=m=>e.monster.spellcasting.customInnatePreamble=m),onReset:t[3]||(t[3]=m=>e.monster.spellcasting.customInnatePreamble=e.$t("presets.innateSpellcasting"))},null,8,["field"])],512),[[ee,e.monster.spellcasting.useCustomInnatePreamble]])]),_:1}),(p(!0),y(D,null,P(e.monster.spellcasting.atWill,m=>(p(),y(D,{key:m.id},[l(h,{"model-value":m.count,label:e.$t("editor.spellcasting.innate.casts"),type:"number",class:"col-2 q-pa-sm","onUpdate:modelValue":i=>m.count=e.validateNumber(i,0)},null,8,["model-value","label","onUpdate:modelValue"]),l(F,{modelValue:m.rate,"onUpdate:modelValue":i=>m.rate=i,"display-value":e.$t(`recharge.${m.rate}`),options:e.rechargeTimeOptions,"emit-value":"",label:e.$t("editor.spellcasting.innate.recharge"),class:"col-3 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","display-value","options","label"]),l(a,{"model-value":m.spells,label:e.$t("editor.spellcasting.innate.list"),class:"col-7 q-pa-sm",onClear:i=>m.spells=[],"onUpdate:modelValue":i=>m.spells=i},{after:o(()=>[l(S,{round:"",color:"negative",icon:"delete",onClick:i=>e.monster.deleteInnateSpellList(m.id)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.spellcasting.innate.delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["model-value","label","onClear","onUpdate:modelValue"])],64))),128)),c("div",_n,[l(S,{class:"full-width",color:"positive",onClick:e.monster.addInnateSpellList},{default:o(()=>[k(d(e.$t("editor.spellcasting.innate.addNew")),1)]),_:1},8,["onClick"])])])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var es=G(Yn,[["render",xn]]);function nt(){const{t:e}=ie();return{statOptions:v(()=>({STR:e("statFull.STR"),DEX:e("statFull.DEX"),CON:e("statFull.CON"),INT:e("statFull.INT"),WIS:e("statFull.WIS"),CHA:e("statFull.CHA")})),statOptionsShort:["STR","CON","DEX","INT","WIS","CHA"]}}const ts=X({name:"SpellcastingEditor",components:{LockToggleButton:Oe,ClassCastingEditor:Qn,AtWillCastingEditor:es},setup(){const e=J(),t=Me(),n=et(),{statOptionsShort:u}=nt(),f=qe(),b=v(()=>e.spellcasting.class==null?"":e.spellcasting.class in n.SrdClass.value?n.SrdClass.value[e.spellcasting.class]:e.spellcasting.class),s=v(()=>e.spellcasting.save.override?e.spellcasting.save.overrideValue:e.defaultSpellSave(e.spellcasting.stat)),a=v(()=>e.spellcasting.attack.override?e.spellcasting.attack.overrideValue:e.defaultSpellAttackModifier(e.spellcasting.stat)),m=v(()=>e.spellcasting.modifier.override?e.spellcasting.modifier.overrideValue:e.defaultSpellModifier(e.spellcasting.stat)),i=()=>{f.dialog({component:pl})};return{monster:e,statOptions:u,spellSaveValue:s,spellAttackValue:a,spellModifierValue:m,classDisplayValue:b,spellOptionsByLevel:v(()=>t.spellOptionsByLevel),addSpell:i,...n}}}),ls={class:"row"},os={class:"q-pa-sm full-width"};function as(e,t,n,u,f,b){const s=q("lock-toggle-button"),a=q("class-casting-editor"),m=q("at-will-casting-editor");return p(),V(W,{"expand-separator":"",icon:"fa-solid fa-wand-sparkles",label:e.$t("editor.spellcasting.label"),caption:e.$t("editor.spellcasting.caption")},{default:o(()=>[l(z,null,{default:o(()=>[c("div",ls,[l(F,{modelValue:e.monster.spellcasting.stat,"onUpdate:modelValue":t[0]||(t[0]=i=>e.monster.spellcasting.stat=i),options:e.statOptions,label:e.$t("monster.spellcasting.ability"),class:"col-2 q-pa-sm"},null,8,["modelValue","options","label"]),l(h,{"model-value":e.spellSaveValue,label:e.$t("monster.spellcasting.save"),type:"number",disable:!e.monster.spellcasting.save.override,class:"col q-pa-sm","onUpdate:modelValue":t[2]||(t[2]=i=>e.monster.spellcasting.save.overrideValue=parseInt(`${i}`))},{after:o(()=>[l(s,{locked:!e.monster.spellcasting.save.override,"lock-tooltip":e.$t("monster.spellcasting.lockSave"),"unlock-tooltip":e.$t("monster.spellcasting.unlockSave"),onClick:t[1]||(t[1]=i=>e.monster.spellcasting.save.override=!e.monster.spellcasting.save.override)},null,8,["locked","lock-tooltip","unlock-tooltip"])]),_:1},8,["model-value","label","disable"]),l(h,{"model-value":e.spellAttackValue,label:e.$t("monster.spellcasting.attack"),type:"number",disable:!e.monster.spellcasting.attack.override,class:"col q-pa-sm","onUpdate:modelValue":t[4]||(t[4]=i=>e.monster.spellcasting.attack.overrideValue=parseInt(`${i}`))},{after:o(()=>[l(s,{locked:!e.monster.spellcasting.attack.override,"lock-tooltip":e.$t("monster.spellcasting.lockAttack"),"unlock-tooltip":e.$t("monster.spellcasting.unlockAttack"),onClick:t[3]||(t[3]=i=>e.monster.spellcasting.attack.override=!e.monster.spellcasting.attack.override)},null,8,["locked","lock-tooltip","unlock-tooltip"])]),_:1},8,["model-value","label","disable"]),l(h,{"model-value":e.spellModifierValue,label:e.$t("monster.spellcasting.modifier"),type:"number",disable:!e.monster.spellcasting.modifier.override,class:"col q-pa-sm","onUpdate:modelValue":t[6]||(t[6]=i=>e.monster.spellcasting.modifier.overrideValue=parseInt(`${i}`))},{after:o(()=>[l(s,{locked:!e.monster.spellcasting.modifier.override,"lock-tooltip":e.$t("monster.spellcasting.lockModifier"),"unlock-tooltip":e.$t("monster.spellcasting.unlockModifier"),onClick:t[5]||(t[5]=i=>e.monster.spellcasting.modifier.override=!e.monster.spellcasting.modifier.override)},null,8,["locked","lock-tooltip","unlock-tooltip"]),l(S,{icon:"add",round:"",color:"primary",class:"q-ml-md",onClick:e.addSpell},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.spellcasting.custom.create")),1)]),_:1})]),_:1},8,["onClick"])]),_:1},8,["model-value","label","disable"])]),c("div",os,[l(le,{bordered:"",separator:"",class:"rounded-borders"},{default:o(()=>[l(a),l(m)]),_:1})])]),_:1})]),_:1},8,["label","caption"])}var ns=G(ts,[["render",as]]);function ss(){const{t:e}=ie(),t=v(()=>({MELEE:e("range.MELEE"),RANGED:e("range.RANGED"),BOTH:e("range.BOTH")})),n=v(()=>({WEAPON:e("kind.WEAPON"),SPELL:e("kind.SPELL")})),u=v(()=>Object.entries(t.value).map(([b,s])=>({value:b,label:s}))),f=v(()=>Object.entries(n.value).map(([b,s])=>({value:b,label:s})));return{range:t,kind:n,rangeOptions:u,kindOptions:f}}const is=X({name:"AttackPanel",components:{LockToggleButton:Oe,MonsterTextEditor:de,SwapButtons:Ae},props:{id:{type:String,required:!0},idx:{type:Number,required:!0}},setup(e){const{t}=ie(),n=J(),u=v(()=>n.attacks.find(T=>T.id===e.id)),{statOptionsShort:f}=nt(),{rangeOptions:b,kindOptions:s}=ss(),{attackTypeDefaults:a}=_a(),m=gt,i=kt,r=v(()=>n.attackModifier(e.id)),w=v(()=>n.attackDamageModifier(e.id)),C=v(()=>n.conditionalDamageModifier(e.id)),N=()=>n.addAdditionalDamage(e.id),B=T=>n.deleteAdditionalDamage(e.id,T),A=()=>{n.deleteAttack(e.id)},L=v(()=>{const T=n.expectedAttackDamage(u.value);return t("editor.attack.estimatedAttackDamage",[T])}),I=qe(),Y=De(),_=T=>{I.dialog({component:Ie,componentProps:{targetName:T.name}}).onOk(({name:E,icon:ne})=>{Y.addCustomAttack(T,E,ne),I.notify({message:t("editor.template.added",[E]),type:"positive"})})};return{attack:u,attackModifier:r,deleteAttack:A,statOptions:f,rangeOptions:b,kindOptions:s,diceOptions:m,diceLookup:i,attackTypeDefaults:a,attackDamageModifier:w,addAdditionalDamage:N,deleteAdditionalDamage:B,conditionalDamageModifier:C,conditionalModifierLocked:v(()=>!u.value.alternateDamage.active||!u.value.alternateDamage.modifier.override),estimatedAttackDamage:L,addTemplate:_,validateNumber:re}}}),rs={class:"row"},ds={class:"row"},us={class:"col-12 q-mt-md"};function cs(e,t,n,u,f,b){const s=q("swap-buttons"),a=q("lock-toggle-button"),m=q("monster-text-editor");return p(),V(W,{label:e.attack.name,"expand-separator":"",caption:e.estimatedAttackDamage},{header:o(()=>[l(R,null,{default:o(()=>[k(d(e.attack.name),1)]),_:1}),l(R,{side:""},{default:o(()=>[l(s,{field:"attacks",idx:e.idx},null,8,["idx"])]),_:1})]),default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[l(h,{modelValue:e.attack.name,"onUpdate:modelValue":t[0]||(t[0]=i=>e.attack.name=i),label:e.$t("monster.attack.name"),class:"col-7 q-pa-sm"},null,8,["modelValue","label"]),l(h,{"model-value":e.attack.targets,label:e.$t("monster.attack.targets"),class:"col-1 q-pa-sm",type:"number","onUpdate:modelValue":t[1]||(t[1]=i=>e.attack.targets=e.validateNumber(i,1))},null,8,["model-value","label"]),l(h,{"model-value":e.attackModifier,label:e.$t("monster.attack.bonus"),type:"number",class:"col-4 q-pa-sm",disable:!e.attack.modifier.override,"onUpdate:modelValue":t[5]||(t[5]=i=>e.attack.modifier.overrideValue=e.validateNumber(i,0))},{after:o(()=>[l(Se,{push:""},{default:o(()=>[l(S,{push:"",color:e.attack.modifier.proficient?"positive":"dark",icon:"keyboard_arrow_up",onClick:t[2]||(t[2]=i=>e.attack.modifier.proficient=!e.attack.modifier.proficient)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.proficient")),1)]),_:1})]),_:1},8,["color"]),l(S,{push:"",color:e.attack.modifier.override?"warning":"dark",icon:"handyman",onClick:t[3]||(t[3]=i=>e.attack.modifier.override=!e.attack.modifier.override)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.override")),1)]),_:1})]),_:1},8,["color"])]),_:1}),l(S,{round:"",icon:"save",color:"primary",class:"q-ml-sm",onClick:t[4]||(t[4]=i=>e.addTemplate(e.attack))},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.attack.save")),1)]),_:1})]),_:1})]),_:1},8,["model-value","label","disable"]),l(F,{modelValue:e.attack.modifier.stat,"onUpdate:modelValue":t[6]||(t[6]=i=>e.attack.modifier.stat=i),options:e.statOptions,label:e.$t("monster.attack.stat"),class:"col-2 q-pa-sm"},null,8,["modelValue","options","label"]),l(F,{modelValue:e.attack.distance,"onUpdate:modelValue":t[7]||(t[7]=i=>e.attack.distance=i),label:e.$t("monster.attack.range"),"display-value":e.$t(`range.${e.attack.distance}`),options:e.rangeOptions,"emit-value":"",class:"col-4 q-pa-sm"},null,8,["modelValue","label","display-value","options"]),l(F,{modelValue:e.attack.kind,"onUpdate:modelValue":t[8]||(t[8]=i=>e.attack.kind=i),label:e.$t("monster.attack.kind"),"display-value":e.$t(`kind.${e.attack.kind}`),options:e.kindOptions,"emit-value":"",class:"col-2 q-pa-sm"},null,8,["modelValue","label","display-value","options"]),Q(l(h,{"model-value":e.attack.range.reach,label:e.$t("monster.attack.reach"),type:"number",min:"0",step:"5",suffix:"ft",class:"col-1 q-pa-sm","onUpdate:modelValue":t[9]||(t[9]=i=>e.attack.range.reach=e.validateNumber(i,0))},null,8,["model-value","label"]),[[ee,e.attack.distance==="MELEE"||e.attack.distance==="BOTH"]]),Q(l(h,{"model-value":e.attack.range.standard,label:e.$t("monster.attack.close"),type:"number",min:"0",step:"5",suffix:"ft",class:"col-1 q-pa-sm","onUpdate:modelValue":t[10]||(t[10]=i=>e.attack.range.standard=e.validateNumber(i,0))},null,8,["model-value","label"]),[[ee,e.attack.distance==="RANGED"||e.attack.distance==="BOTH"]]),Q(l(h,{"model-value":e.attack.range.long,label:e.$t("monster.attack.long"),type:"number",min:"0",step:"5",suffix:"ft",class:"col-1 q-pa-sm","onUpdate:modelValue":t[11]||(t[11]=i=>e.attack.range.long=e.validateNumber(i,0))},null,8,["model-value","label"]),[[ee,e.attack.distance==="RANGED"||e.attack.distance==="BOTH"]]),l(h,{"model-value":e.attack.save,label:e.$t("monster.attack.effectDc"),type:"number",class:"col-1 q-pa-sm","onUpdate:modelValue":t[12]||(t[12]=i=>e.attack.save=e.validateNumber(i,0))},null,8,["model-value","label"])]),_:1}),l(O,null,{default:o(()=>[l(le,{bordered:"",separator:"",class:"rounded-borders bg-pink-10 full-width"},{default:o(()=>[l(W,{"expand-separator":"","default-opened":"",label:e.$t("editor.attack.primary")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,null,{default:o(()=>[c("div",rs,[l(h,{"model-value":e.attack.damage.count,label:e.$t("monster.attack.count"),type:"number",min:"0",class:"col-2 q-pa-sm","onUpdate:modelValue":t[13]||(t[13]=i=>e.attack.damage.count=e.validateNumber(i,0))},null,8,["model-value","label"]),l(F,{modelValue:e.attack.damage.dice,"onUpdate:modelValue":t[14]||(t[14]=i=>e.attack.damage.dice=i),options:e.diceOptions,"emit-value":"","display-value":e.diceLookup[e.attack.damage.dice],label:e.$t("monster.attack.dieType"),class:"col-2 q-pa-sm"},null,8,["modelValue","options","display-value","label"]),l(F,{modelValue:e.attack.damage.type,"onUpdate:modelValue":t[15]||(t[15]=i=>e.attack.damage.type=i),label:e.$t("monster.attack.damageType"),options:e.attackTypeDefaults,"use-input":"","new-value-mode":"add-unique",class:"col-4 q-pa-sm"},null,8,["modelValue","label","options"]),l(h,{"model-value":e.attackDamageModifier,type:"number",label:e.$t("monster.attack.damageBonus"),disable:!e.attack.damage.modifier.override,class:"col-2 q-pa-sm","onUpdate:modelValue":t[17]||(t[17]=i=>e.attack.damage.modifier.overrideValue=e.validateNumber(i,0))},{after:o(()=>[l(a,{locked:!e.attack.damage.modifier.override,"lock-tooltip":e.$t("editor.attack.lockedToStats"),"unlock-tooltip":e.$t("editor.attack.unlockedFromStats"),onClick:t[16]||(t[16]=i=>e.attack.damage.modifier.override=!e.attack.damage.modifier.override)},null,8,["locked","lock-tooltip","unlock-tooltip"])]),_:1},8,["model-value","label","disable"]),l(F,{modelValue:e.attack.damage.modifier.stat,"onUpdate:modelValue":t[18]||(t[18]=i=>e.attack.damage.modifier.stat=i),label:e.$t("monster.attack.stat"),class:"col-2 q-pa-sm",options:e.statOptions},null,8,["modelValue","label","options"])])]),_:1})]),_:1})]),_:1},8,["label"]),l(W,{"expand-separator":"",label:e.$t("editor.attack.additional"),caption:e.$t("editor.attack.additionalCaption")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,null,{default:o(()=>[(p(!0),y(D,null,P(e.attack.additionalDamage,i=>(p(),y("div",{key:i.id,class:"row"},[l(h,{"model-value":i.count,label:e.$t("monster.attack.count"),type:"number",class:"col-2 q-pa-sm","onUpdate:modelValue":r=>i.count=e.validateNumber(r,0)},null,8,["model-value","label","onUpdate:modelValue"]),l(F,{modelValue:i.dice,"onUpdate:modelValue":r=>i.dice=r,options:e.diceOptions,"emit-value":"","display-value":e.diceLookup[i.dice],label:e.$t("monster.attack.dieType"),class:"col-2 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","options","display-value","label"]),l(F,{modelValue:i.type,"onUpdate:modelValue":r=>i.type=r,label:e.$t("monster.attack.damageType"),options:e.attackTypeDefaults,"use-input":"","new-value-mode":"add-unique",class:"col-4 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","label","options"]),l(h,{modelValue:i.note,"onUpdate:modelValue":r=>i.note=r,label:e.$t("editor.attack.additionalNote"),class:"col-4 q-pa-sm"},{after:o(()=>[l(S,{round:"",color:"negative",icon:"delete",onClick:()=>e.deleteAdditionalDamage(i.id)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"])]))),128))]),_:1}),l(oe,null,{default:o(()=>[l(S,{color:"positive",onClick:e.addAdditionalDamage},{default:o(()=>[k(d(e.$t("editor.attack.addAdditional")),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["label","caption"]),l(W,{"expand-separator":"",label:e.$t("editor.attack.conditional"),caption:e.$t("editor.attack.conditionalCaption")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,null,{default:o(()=>[c("div",ds,[l(h,{modelValue:e.attack.alternateDamage.condition,"onUpdate:modelValue":t[20]||(t[20]=i=>e.attack.alternateDamage.condition=i),disable:!e.attack.alternateDamage.active,label:e.$t("editor.attack.condition"),class:"col-12"},{before:o(()=>[l(S,{push:"",color:e.attack.alternateDamage.active?"primary":"dark",onClick:t[19]||(t[19]=i=>e.attack.alternateDamage.active=!e.attack.alternateDamage.active)},{default:o(()=>[k(d(e.attack.alternateDamage.active?e.$t("editor.attack.enableConditional"):e.$t("editor.attack.disableConditional")),1)]),_:1},8,["color"])]),_:1},8,["modelValue","disable","label"]),l(h,{"model-value":e.attack.alternateDamage.count,disable:!e.attack.alternateDamage.active,label:e.$t("monster.attack.count"),type:"number",class:"col-2 q-pa-sm","onUpdate:modelValue":t[21]||(t[21]=i=>e.attack.alternateDamage.count=e.validateNumber(i,0))},null,8,["model-value","disable","label"]),l(F,{modelValue:e.attack.alternateDamage.dice,"onUpdate:modelValue":t[22]||(t[22]=i=>e.attack.alternateDamage.dice=i),disable:!e.attack.alternateDamage.active,options:e.diceOptions,"emit-value":"","display-value":e.diceLookup[e.attack.alternateDamage.dice],label:e.$t("monster.attack.dieType"),class:"col-2 q-pa-sm"},null,8,["modelValue","disable","options","display-value","label"]),l(F,{modelValue:e.attack.alternateDamage.type,"onUpdate:modelValue":t[23]||(t[23]=i=>e.attack.alternateDamage.type=i),disable:!e.attack.alternateDamage.active,label:e.$t("monster.attack.damageType"),options:e.attackTypeDefaults,"use-input":"","new-value-mode":"add-unique",class:"col-4 q-pa-sm"},null,8,["modelValue","disable","label","options"]),l(h,{"model-value":e.conditionalDamageModifier,type:"number",label:e.$t("monster.attack.damageBonus"),disable:e.conditionalModifierLocked,class:"col-2 q-pa-sm","onUpdate:modelValue":t[25]||(t[25]=i=>e.attack.alternateDamage.modifier.overrideValue=e.validateNumber(i,0))},{after:o(()=>[l(a,{locked:!e.attack.alternateDamage.modifier.override,"lock-tooltip":e.$t("editor.attack.lockedToStats"),"unlock-tooltip":e.$t("editor.attack.unlockedFromStats"),onClick:t[24]||(t[24]=i=>e.attack.alternateDamage.modifier.override=!e.attack.alternateDamage.modifier.override)},null,8,["locked","lock-tooltip","unlock-tooltip"])]),_:1},8,["model-value","label","disable"]),l(F,{modelValue:e.attack.alternateDamage.modifier.stat,"onUpdate:modelValue":t[26]||(t[26]=i=>e.attack.alternateDamage.modifier.stat=i),disable:!e.attack.alternateDamage.active,label:e.$t("monster.attack.stat"),class:"col-2 q-pa-sm",options:e.statOptions},null,8,["modelValue","disable","label","options"])])]),_:1})]),_:1})]),_:1},8,["label","caption"])]),_:1})]),_:1}),l(O,{class:"row"},{default:o(()=>[l(h,{modelValue:e.attack.description,"onUpdate:modelValue":t[28]||(t[28]=i=>e.attack.description=i),label:e.$t("editor.attack.description"),class:"col-12"},{after:o(()=>[l(S,{push:"",icon:e.attack.useCustomRenderer?"edit":"edit_off",color:e.attack.useCustomRenderer?"warning":"dark",size:"md",onClick:t[27]||(t[27]=i=>e.attack.useCustomRenderer=!e.attack.useCustomRenderer)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.attack.useCustomRenderer?e.$t("editor.attack.useCustomRenderer"):e.$t("editor.attack.useDefaultRenderer")),1)]),_:1})]),_:1},8,["icon","color"])]),_:1},8,["modelValue","label"]),l(be,null,{default:o(()=>[Q(c("div",us,[l(m,{field:e.attack.customRenderer,"i18n-label-key":"editor.attack.customRenderer","token-category":"attack","show-reset":!0,"onUpdate:modelValue":t[29]||(t[29]=i=>e.attack.customRenderer=i),onReset:t[30]||(t[30]=i=>e.attack.customRenderer=e.$t("presets.attack"))},null,8,["field"])],512),[[ee,e.attack.useCustomRenderer]])]),_:1})]),_:1}),l(oe,null,{default:o(()=>[l(S,{class:"full-width",color:"negative",label:e.$t("editor.attack.delete"),onClick:e.deleteAttack},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var ms=G(is,[["render",cs]]);const ps=X({name:"AttacksEditor",components:{AttackPanel:ms},setup(){return{monster:J()}}});function fs(e,t,n,u,f,b){const s=q("attack-panel");return p(),V(W,{"expand-separator":"",icon:"mdi-sword",label:e.$t("editor.attack.label")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[l(le,{bordered:"",separator:"",class:"rounded-borders bg-red-10 full-width"},{default:o(()=>[(p(!0),y(D,null,P(e.monster.attacks,(a,m)=>(p(),V(s,{id:a.id,key:a.id,idx:m},null,8,["id","idx"]))),128))]),_:1})]),_:1}),l(oe,null,{default:o(()=>[l(S,{color:"positive",class:"full-width",label:e.$t("editor.attack.add"),onClick:t[0]||(t[0]=a=>e.monster.addNewAttack())},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["label"])}var bs=G(ps,[["render",fs]]);const vs=X({name:"MultiattackEditor",components:{MonsterTextEditor:de},setup(){const e=J(),{t}=ie(),n=`<b><i>${t("editor.multiattack.label")}.</i></b> {multiattack.all}. {multiattack.postscript}`;return{monster:e,multiattacks:v(()=>e.multiattacks),defaultCustomText:n}}}),gs={class:"text-overline text-uppercase"},ks={class:"text-caption"},ys={class:"flex items-center",style:{"flex-wrap":"nowrap",gap:"10px"}},$s={class:"flex justify-start items-center"},hs={class:"full-width",style:{"flex-shrink":"1"}},Cs={class:"flex justify-end items-center"},Ss={class:"full-width flex items-center justify-center text-h6"},ws={class:"col-12 q-mt-md"},As={class:"text-caption full-width"};function Vs(e,t,n,u,f,b){const s=q("monster-text-editor");return p(),V(W,{"expand-separator":"",icon:"mdi-sword-cross",label:e.$t("editor.multiattack.label")},{default:o(()=>[l(z,null,{default:o(()=>[Q(l(O,null,{default:o(()=>[(p(!0),y(D,null,P(e.multiattacks,(a,m)=>(p(),V(z,{key:a.id,bordered:""},{default:o(()=>[l(O,{class:"bg-red-10"},{default:o(()=>[c("div",gs,d(e.$t("editor.multiattack.group",[m+1])),1),c("div",ks,d(e.$t("editor.multiattack.estimatedDamage",[e.monster.expectedMultiattackDamage(a.id)])),1)]),_:2},1024),l(O,null,{default:o(()=>[c("div",ys,[c("div",$s,[l(me,{color:"positive",rounded:"",icon:"add"},{default:o(()=>[l(le,null,{default:o(()=>[e.monster.attacks.length>0?(p(),y(D,{key:0},[l(te,{class:"bg-blue-10"},{default:o(()=>[l(R,{class:"text-overline text-uppercase"},{default:o(()=>[k(d(e.$t("editor.multiattack.attackHeader")),1)]),_:1})]),_:1}),l(ye),(p(!0),y(D,null,P(e.monster.attacks,i=>Q((p(),V(te,{key:i.id,clickable:"",onClick:r=>e.monster.addMultiattackAttack(a.id,i.id)},{default:o(()=>[l(R,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(i.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[ke]])),128))],64)):Z("",!0),e.monster.actions.length>0?(p(),y(D,{key:1},[l(ye),l(te,{class:"bg-blue-10"},{default:o(()=>[l(R,{class:"text-overline text-uppercase"},{default:o(()=>[k(d(e.$t("editor.multiattack.actionHeader")),1)]),_:1})]),_:1}),l(ye),(p(!0),y(D,null,P(e.monster.actions,i=>Q((p(),V(te,{key:i.id,clickable:"",onClick:r=>e.monster.addMultiattackAction(a.id,i.id)},{default:o(()=>[l(R,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(i.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[ke]])),128))],64)):Z("",!0)]),_:2},1024)]),_:2},1024)]),c("div",hs,[(p(!0),y(D,null,P(a.attacks,(i,r)=>(p(),V(it,{key:r,color:"primary",removable:"",onRemove:w=>e.monster.removeMultiattackAttack(a.id,i)},{default:o(()=>[k(d(e.monster.attackName(i)),1)]),_:2},1032,["onRemove"]))),128)),(p(!0),y(D,null,P(a.actions,(i,r)=>(p(),V(it,{key:r,color:"primary",removable:"",onRemove:w=>e.monster.removeMultiattackAction(a.id,i)},{default:o(()=>[k(d(e.monster.actionName(i)),1)]),_:2},1032,["onRemove"]))),128))]),c("div",Cs,[l(S,{round:"",color:"negative",icon:"delete",onClick:i=>e.monster.deleteMultiattack(a.id)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.delete")),1)]),_:1})]),_:2},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),_:1},512),[[ee,e.multiattacks.length>0]]),Q(l(O,null,{default:o(()=>[l(z,{bordered:""},{default:o(()=>[l(O,null,{default:o(()=>[c("div",Ss,d(e.$t("editor.multiattack.none")),1)]),_:1})]),_:1})]),_:1},512),[[ee,e.multiattacks.length===0]]),l(O,{class:"row"},{default:o(()=>[l(h,{modelValue:e.monster.multiattackOptions.postscript,"onUpdate:modelValue":t[1]||(t[1]=a=>e.monster.multiattackOptions.postscript=a),label:e.$t("editor.multiattack.postscript"),class:"col-12"},{after:o(()=>[l(S,{push:"",icon:e.monster.multiattackOptions.useCustomRenderer?"edit":"edit_off",color:e.monster.multiattackOptions.useCustomRenderer?"warning":"dark",size:"md",onClick:t[0]||(t[0]=()=>{e.monster.multiattackOptions.useCustomRenderer=!e.monster.multiattackOptions.useCustomRenderer,e.monster.multiattackOptions.customMultiattackRenderer===""&&(e.monster.multiattackOptions.customMultiattackRenderer=e.defaultCustomText)})},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.monster.multiattackOptions.useCustomRenderer?e.$t("editor.attack.useCustomRenderer"):e.$t("editor.attack.useDefaultRenderer")),1)]),_:1})]),_:1},8,["icon","color"])]),_:1},8,["modelValue","label"]),l(be,null,{default:o(()=>[Q(c("div",ws,[l(s,{field:e.monster.multiattackOptions.customMultiattackRenderer,"i18n-label-key":"editor.multiattack.label","show-reset":!0,"onUpdate:modelValue":t[2]||(t[2]=a=>e.monster.multiattackOptions.customMultiattackRenderer=a),onReset:t[3]||(t[3]=a=>e.monster.multiattackOptions.customMultiattackRenderer=e.defaultCustomText)},null,8,["field"]),c("div",As,d(e.$t("editor.multiattack.help")),1)],512),[[ee,e.monster.multiattackOptions.useCustomRenderer]])]),_:1})]),_:1}),l(oe,null,{default:o(()=>[l(S,{color:"positive",class:"full-width",label:e.$t("editor.multiattack.add"),onClick:e.monster.addMultiattack},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label"])}var Ts=G(vs,[["render",Vs]]);const qs=X({name:"ActionsEditor",components:{MonsterTextEditor:de,CrAnnotationCard:at,SwapButtons:Ae,LockToggleButton:Oe},setup(){const e=J(),{statOptionsShort:t}=nt(),{rechargeTimeOptions:n}=Ue(),{autoUpdateCr:u,printCrSummary:f}=Re(),b=qe(),{t:s}=ie(),a=De(),m=r=>{b.dialog({component:Ie,componentProps:{targetName:r.name}}).onOk(({name:w,icon:C})=>{a.addCustomAction(r,w,C),b.notify({message:s("editor.template.added",[w]),type:"positive"})})},i=r=>r.stat!=="none"?r.save.override?r.save.overrideValue:e.defaultSpellSave(r.stat):0;return{monster:e,actions:v(()=>e.actions),rechargeTimeOptions:n,autoUpdateCr:u,printCrSummary:f,addTemplate:m,statOptions:["none",...t],validateNumber:re,saveThrowValueForAction:i}}}),Us={class:"text-overline text-uppercase"},Ds={class:"text-caption"};function Os(e,t,n,u,f,b){const s=q("swap-buttons"),a=q("lock-toggle-button"),m=q("monster-text-editor"),i=q("cr-annotation-card");return p(),V(W,{"expand-separator":"",icon:"mdi-movie-open",label:e.$t("editor.action.label")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[l(le,{bordered:"",separator:"",class:"rounded-borders bg-amber-10 full-width"},{default:o(()=>[(p(!0),y(D,null,P(e.actions,(r,w)=>(p(),V(W,{key:r.id,label:r.name,"expand-separator":""},{header:o(()=>[l(R,null,{default:o(()=>[k(d(r.name),1)]),_:2},1024),l(R,{side:""},{default:o(()=>[l(s,{field:"actions",idx:w},null,8,["idx"])]),_:2},1024)]),default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[l(h,{modelValue:r.name,"onUpdate:modelValue":C=>r.name=C,label:e.$t("monster.trait.name"),class:"col-12 q-pa-sm"},{after:o(()=>[l(Se,{push:"",class:"q-mr-sm"},{default:o(()=>[l(S,{push:"",color:r.legendaryOnly?"positive":"dark",icon:"fa-solid fa-dragon",label:r.legendaryOnly?e.$t("editor.action.legendaryOnly"):e.$t("editor.action.regular"),onClick:C=>r.legendaryOnly=!r.legendaryOnly},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.action.legendaryExplanation")),1)]),_:1})]),_:2},1032,["color","label","onClick"]),l(S,{push:"",color:r.bonusAction?"positive":"dark",label:r.bonusAction?e.$t("editor.action.bonusAction"):e.$t("editor.action.fullAction"),onClick:C=>r.bonusAction=!r.bonusAction},null,8,["color","label","onClick"])]),_:2},1024),l(S,{round:"",icon:"save",color:"primary",onClick:C=>e.addTemplate(r)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.action.save")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"]),l(h,{modelValue:r.recharge,"onUpdate:modelValue":C=>r.recharge=C,class:"col-4 q-pa-sm",label:e.$t("monster.action.recharge")},null,8,["modelValue","onUpdate:modelValue","label"]),l(h,{"model-value":r.limitedUse.count,type:"number",min:"0",class:"col-4 q-pa-sm",label:e.$t("monster.trait.limitedUse.count"),"onUpdate:modelValue":C=>r.limitedUse.count=e.validateNumber(C,0)},null,8,["model-value","label","onUpdate:modelValue"]),l(F,{modelValue:r.limitedUse.rate,"onUpdate:modelValue":C=>r.limitedUse.rate=C,"display-value":e.$t(`recharge.${r.limitedUse.rate}`),options:e.rechargeTimeOptions,"emit-value":"",label:e.$t("monster.trait.limitedUse.rate"),class:"col-4 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","display-value","options","label"]),l(F,{modelValue:r.stat,"onUpdate:modelValue":[C=>r.stat=C,C=>{r.stat=C,e.autoUpdateCr(r.description,r.crAnnotation,r)}],options:e.statOptions,label:e.$t("monster.action.savingThrowStat"),class:"col-2 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","options","label"]),l(h,{"model-value":e.saveThrowValueForAction(r),label:e.$t("monster.action.saveDc"),type:"number",disable:!r.save.override,class:"col-2 q-pa-sm","onUpdate:modelValue":C=>{r.save.overrideValue=parseInt(`${C}`),e.autoUpdateCr(r.description,r.crAnnotation,r)}},{after:o(()=>[l(a,{locked:!r.save.override,"lock-tooltip":e.$t("monster.action.lockSave"),"unlock-tooltip":e.$t("monster.action.unlockSave"),onClick:()=>{r.save.override=!r.save.override,e.autoUpdateCr(r.description,r.crAnnotation,r)}},null,8,["locked","lock-tooltip","unlock-tooltip","onClick"])]),_:2},1032,["model-value","label","disable","onUpdate:modelValue"]),l(h,{modelValue:r.range,"onUpdate:modelValue":C=>r.range=C,class:"col-8 q-pa-sm",label:e.$t("monster.action.range")},{after:o(()=>[l(me,{label:e.$t("editor.action.addEffect"),color:"green",disable:r.stat==="none"},{default:o(()=>[l(le,null,{default:o(()=>[Q((p(),V(te,{clickable:"",onClick:C=>r.effects.push({case:e.$t("editor.action.effectCase.failure"),effect:""})},{default:o(()=>[l(R,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(e.$t("editor.action.effectCase.failure")),1)]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[ke]]),Q((p(),V(te,{clickable:"",onClick:C=>r.effects.push({case:e.$t("editor.action.effectCase.failByFive"),effect:""})},{default:o(()=>[l(R,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(e.$t("editor.action.effectCase.failByFive")),1)]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[ke]]),Q((p(),V(te,{clickable:"",onClick:C=>r.effects.push({case:e.$t("editor.action.effectCase.success"),effect:e.$t("editor.action.effectTemplate.halfDamage")})},{default:o(()=>[l(R,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(e.$t("editor.action.effectCase.success"))+": "+d(e.$t("editor.action.effectTemplate.halfDamage")),1)]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[ke]])]),_:2},1024)]),_:2},1032,["label","disable"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"]),r.stat!=="none"?(p(),V(z,{key:0,bordered:"",class:"row q-ma-sm full-width"},{default:o(()=>[l(O,{class:"bg-orange-10 full-width"},{default:o(()=>[c("div",Us,d(e.$t("editor.action.saveDescription")),1),c("div",Ds,d(e.$t("editor.action.saveHelp")),1)]),_:1}),l(O,{class:"row full-width"},{default:o(()=>[(p(!0),y(D,null,P(r.effects,(C,N)=>(p(),y(D,{key:N},[l(h,{modelValue:C.case,"onUpdate:modelValue":B=>C.case=B,label:e.$t("editor.action.condition"),class:"col-3 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","label"]),l(h,{modelValue:C.effect,"onUpdate:modelValue":[B=>C.effect=B,B=>{C.effect=`${B}`,e.autoUpdateCr(r.description,r.crAnnotation,r)}],label:e.$t("editor.action.effect"),class:"col-9 q-pa-sm"},{after:o(()=>[l(S,{round:"",color:"negative",icon:"delete",class:"q-mx-sm",onClick:()=>{r.effects.splice(w,1),e.autoUpdateCr(r.description,r.crAnnotation,r)}},null,8,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"])],64))),128))]),_:2},1024)]),_:2},1024)):Z("",!0),l(m,{field:r.description,"i18n-label-key":"monster.trait.description","token-category":"action","onUpdate:modelValue":C=>{r.description=C,e.autoUpdateCr(r.description,r.crAnnotation,r)}},null,8,["field","onUpdate:modelValue"]),l(i,{field:"actions",index:w},null,8,["index"])]),_:2},1024),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"negative",class:"full-width",label:e.$t("editor.action.delete"),onClick:()=>e.monster.deleteAction(r.id)},null,8,["label","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})]),_:1}),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"positive",class:"full-width",label:e.$t("editor.action.add"),onClick:e.monster.addAction},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label"])}var Ls=G(qs,[["render",Os]]);const Ps=X({name:"LegendaryActionsEditor",components:{MonsterTextEditor:de},setup(){const e=J(),{t}=ie(),n=f=>{e.addLegendaryAction(f)},u=v(()=>e.attacksAndActions(t).filter(s=>e.legendaryActions.actions.find(a=>a.actionId===s.id)==null));return{monster:e,filteredActions:u,addLegendary:n,validateNumber:re}}}),Ns={class:"col-9 q-pa-sm flex items-center"},Es={class:"col-12 q-mt-md"},Ms={class:"col-8 text-h6 flex items-center"},Rs={class:"col-4"};function Bs(e,t,n,u,f,b){const s=q("monster-text-editor");return p(),V(W,{"expand-separator":"",icon:"fa-solid fa-dragon",label:e.$t("editor.legendary.label"),caption:e.$t("editor.legendary.caption")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[l(h,{"model-value":e.monster.legendaryActions.count,type:"number",min:"0",label:e.$t("editor.legendary.count"),class:"col-3 q-pa-sm","onUpdate:modelValue":t[1]||(t[1]=a=>e.monster.legendaryActions.count=e.validateNumber(a,0))},{after:o(()=>[l(S,{push:"",icon:e.monster.legendaryActions.useCustomPreamble?"edit":"edit_off",color:e.monster.legendaryActions.useCustomPreamble?"warning":"dark",size:"md",onClick:t[0]||(t[0]=a=>e.monster.legendaryActions.useCustomPreamble=!e.monster.legendaryActions.useCustomPreamble)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.monster.legendaryActions.useCustomPreamble?e.$t("editor.legendary.useCustomPreamble"):e.$t("editor.legendary.useDefaultPreamble")),1)]),_:1})]),_:1},8,["icon","color"])]),_:1},8,["model-value","label"]),c("div",Ns,[l(me,{color:e.filteredActions.length===0?"dark":"positive",label:e.filteredActions.length===0?e.$t("editor.legendary.none"):e.$t("editor.legendary.add"),disable:e.filteredActions.length===0,class:"full-width"},{default:o(()=>[l(le,null,{default:o(()=>[(p(!0),y(D,null,P(e.filteredActions,a=>Q((p(),V(te,{key:a.id,clickable:"",onClick:m=>e.addLegendary(a.id)},{default:o(()=>[l(R,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(a.name),1)]),_:2},1024)]),_:2},1024),l(R,{side:"",top:""},{default:o(()=>[l(Be,{color:a.typeInternal==="attack"?"red-10":"amber-10",label:a.type},null,8,["color","label"])]),_:2},1024)]),_:2},1032,["onClick"])),[[ke]])),128))]),_:1})]),_:1},8,["color","label","disable"])]),l(be,null,{default:o(()=>[Q(c("div",Es,[l(s,{field:e.monster.legendaryActions.customPreamble,"i18n-label-key":"editor.legendary.preamble","show-reset":!0,"token-category":"legendary","onUpdate:modelValue":t[2]||(t[2]=a=>e.monster.legendaryActions.customPreamble=a),onReset:t[3]||(t[3]=a=>e.monster.legendaryActions.customPreamble=e.$t("presets.legendaryActions"))},null,8,["field"])],512),[[ee,e.monster.legendaryActions.useCustomPreamble]])]),_:1})]),_:1}),l(O,{class:"row"},{default:o(()=>[(p(!0),y(D,null,P(e.monster.legendaryActions.actions,a=>(p(),y(D,{key:a.actionId},[c("div",Ms,d(e.monster.legendaryActionName(a.actionId)),1),c("div",Rs,[l(h,{"model-value":a.cost,type:"number",min:"1",label:e.$t("editor.legendary.cost"),"onUpdate:modelValue":m=>a.cost=e.validateNumber(m,1)},{after:o(()=>[l(S,{push:"",color:"negative",icon:"delete",onClick:()=>e.monster.deleteLegendaryAction(a.actionId)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["model-value","label","onUpdate:modelValue"])])],64))),128))]),_:1})]),_:1})]),_:1},8,["label","caption"])}var Is=G(Ps,[["render",Bs]]);const Hs=X({name:"MythicActionsEditor",components:{MonsterTextEditor:de},setup(){const e=J(),{t}=ie(),n=v(()=>e.attacksAndActions(t).filter(b=>e.mythicActions.actions.find(s=>s.actionId===b.id)==null));return{monster:e,filteredActions:n,validateNumber:re}}}),zs={class:"col-12 q-pa-sm"},Fs={class:"col-12 q-pa-sm"},js={class:"col-12 q-pa-sm flex items-center"},Ks={class:"col-8 text-h6 flex items-center"},Qs={class:"col-4"};function Ws(e,t,n,u,f,b){const s=q("monster-text-editor");return p(),V(W,{"expand-separator":"",icon:"fa-solid fa-building-columns",label:e.$t("editor.mythic.label"),caption:e.$t("editor.mythic.caption")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[l(h,{modelValue:e.monster.mythicActions.triggerName,"onUpdate:modelValue":t[0]||(t[0]=a=>e.monster.mythicActions.triggerName=a),label:e.$t("editor.mythic.traitName"),class:"col-6 q-pa-sm"},null,8,["modelValue","label"]),l(h,{modelValue:e.monster.mythicActions.triggerRecharge,"onUpdate:modelValue":t[1]||(t[1]=a=>e.monster.mythicActions.triggerRecharge=a),label:e.$t("editor.mythic.recharge"),class:"col-6 q-pa-sm"},null,8,["modelValue","label"]),c("div",zs,[l(s,{field:e.monster.mythicActions.triggerDescription,"i18n-label-key":"editor.mythic.description","show-reset":!0,"onUpdate:modelValue":t[2]||(t[2]=a=>e.monster.mythicActions.triggerDescription=a),onReset:t[3]||(t[3]=a=>e.monster.mythicActions.triggerDescription=e.$t("presets.mythicDescription"))},null,8,["field"])]),c("div",Fs,[l(s,{field:e.monster.mythicActions.preamble,"i18n-label-key":"editor.mythic.preamble","show-reset":!0,"onUpdate:modelValue":t[4]||(t[4]=a=>e.monster.mythicActions.preamble=a),onReset:t[5]||(t[5]=a=>e.monster.mythicActions.preamble=e.$t("presets.mythicPreamble"))},null,8,["field"])])]),_:1}),l(O,{class:"row"},{default:o(()=>[c("div",js,[l(me,{color:e.filteredActions.length===0?"dark":"positive",label:e.filteredActions.length===0?e.$t("editor.legendary.none"):e.$t("editor.mythic.add"),disable:e.filteredActions.length===0,class:"full-width"},{default:o(()=>[l(le,null,{default:o(()=>[(p(!0),y(D,null,P(e.filteredActions,a=>Q((p(),V(te,{key:a.id,clickable:"",onClick:m=>e.monster.addMythicAction(a.id)},{default:o(()=>[l(R,null,{default:o(()=>[l(se,null,{default:o(()=>[k(d(a.name),1)]),_:2},1024)]),_:2},1024),l(R,{side:"",top:""},{default:o(()=>[l(Be,{color:a.typeInternal==="attack"?"red-10":"amber-10",label:a.type},null,8,["color","label"])]),_:2},1024)]),_:2},1032,["onClick"])),[[ke]])),128))]),_:1})]),_:1},8,["color","label","disable"])]),(p(!0),y(D,null,P(e.monster.mythicActions.actions,a=>(p(),y(D,{key:a.actionId},[c("div",Ks,d(e.monster.legendaryActionName(a.actionId)),1),c("div",Qs,[l(h,{"model-value":a.cost,type:"number",min:"1",label:e.$t("editor.legendary.cost"),"onUpdate:modelValue":m=>a.cost=e.validateNumber(m,1)},{after:o(()=>[l(S,{push:"",color:"negative",icon:"delete",onClick:()=>e.monster.deleteMythicAction(a.actionId)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["model-value","label","onUpdate:modelValue"])])],64))),128))]),_:1})]),_:1})]),_:1},8,["label","caption"])}var Xs=G(Hs,[["render",Ws]]);const Gs=X({name:"ReactionsEditor",components:{MonsterTextEditor:de,SwapButtons:Ae},setup(){const e=J(),t=qe(),{t:n}=ie(),{rechargeTimeOptions:u}=Ue(),f=De();return{monster:e,addTemplate:s=>{t.dialog({component:Ie,componentProps:{targetName:s.name}}).onOk(({name:a,icon:m})=>{f.addCustomReaction(s,a,m),t.notify({message:n("editor.template.added",[a]),type:"positive"})})},validateNumber:re,rechargeTimeOptions:u}}});function Ys(e,t,n,u,f,b){const s=q("swap-buttons"),a=q("monster-text-editor");return p(),V(W,{"expand-separator":"",icon:"mdi-account-reactivate",label:e.$t("editor.reaction.label")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[l(le,{bordered:"",separator:"",class:"rounded-borders bg-blue-10 full-width"},{default:o(()=>[(p(!0),y(D,null,P(e.monster.reactions,(m,i)=>(p(),V(W,{key:m.id,label:m.name,"expand-separator":""},{header:o(()=>[l(R,null,{default:o(()=>[k(d(m.name),1)]),_:2},1024),l(R,{side:""},{default:o(()=>[l(s,{field:"reactions",idx:i},null,8,["idx"])]),_:2},1024)]),default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[l(h,{modelValue:m.name,"onUpdate:modelValue":r=>m.name=r,label:e.$t("monster.trait.name"),class:"col-12 q-pa-sm"},{after:o(()=>[l(S,{round:"",icon:"save",color:"primary",onClick:r=>e.addTemplate(m)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.$t("editor.reaction.save")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","label"]),l(h,{modelValue:m.limitedUse.count,"onUpdate:modelValue":[r=>m.limitedUse.count=r,r=>m.limitedUse.count=e.validateNumber(r,0)],type:"number",min:"0",class:"col-2 q-pa-sm",label:e.$t("monster.trait.limitedUse.count")},null,8,["modelValue","onUpdate:modelValue","label"]),l(F,{modelValue:m.limitedUse.rate,"onUpdate:modelValue":r=>m.limitedUse.rate=r,"display-value":e.$t(`recharge.${m.limitedUse.rate}`),options:e.rechargeTimeOptions,"emit-value":"",label:e.$t("monster.trait.limitedUse.rate"),class:"col-2 q-pa-sm"},null,8,["modelValue","onUpdate:modelValue","display-value","options","label"]),l(h,{modelValue:m.trigger,"onUpdate:modelValue":r=>m.trigger=r,class:"col-8 q-pa-sm",label:e.$t("monster.reaction.trigger")},null,8,["modelValue","onUpdate:modelValue","label"]),l(a,{field:m.description,"i18n-label-key":"monster.reaction.response","onUpdate:modelValue":r=>{m.description=r}},null,8,["field","onUpdate:modelValue"])]),_:2},1024),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"negative",class:"full-width",label:e.$t("editor.reaction.delete"),onClick:()=>e.monster.deleteReaction(m.id)},null,8,["label","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})]),_:1}),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"positive",class:"full-width",label:e.$t("editor.reaction.add"),onClick:e.monster.addReaction},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label"])}var Js=G(Gs,[["render",Ys]]);const Zs=X({name:"LairActionsEditor",components:{MonsterTextEditor:de,CrAnnotationCard:at,SwapButtons:Ae},setup(){const e=J(),{autoUpdateCr:t}=Re();return{monster:e,autoUpdateCr:t}}}),_s={class:"col flex justify-start items-center"},xs={class:"col-2 flex justify-end items-center"},ei={class:"col-12 q-pa-sm"},ti={class:"col-12"};function li(e,t,n,u,f,b){const s=q("monster-text-editor"),a=q("swap-buttons"),m=q("cr-annotation-card");return p(),V(W,{"expand-separator":"",icon:"home",label:e.$t("editor.lair.label"),caption:e.$t("editor.lair.caption")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[c("div",_s,d(e.$t("editor.lair.help")),1),c("div",xs,[l(S,{push:"",icon:e.monster.useCustomLairActionPreamble?"edit":"edit_off",color:e.monster.useCustomLairActionPreamble?"warning":"dark",size:"md",onClick:t[0]||(t[0]=i=>e.monster.useCustomLairActionPreamble=!e.monster.useCustomLairActionPreamble)},{default:o(()=>[l(j,{class:"text-body2"},{default:o(()=>[k(d(e.monster.useCustomLairActionPreamble?e.$t("editor.lair.useCustom"):e.$t("editor.lair.useDefault")),1)]),_:1})]),_:1},8,["icon","color"])]),l(be,null,{default:o(()=>[Q(c("div",ei,[l(s,{field:e.monster.lairActionPreamble,"i18n-label-key":"editor.lair.preamble","show-reset":!0,"onUpdate:modelValue":t[1]||(t[1]=i=>e.monster.lairActionPreamble=i),onReset:t[2]||(t[2]=i=>e.monster.lairActionPreamble=e.$t("presets.lair"))},null,8,["field"])],512),[[ee,e.monster.useCustomLairActionPreamble]])]),_:1})]),_:1}),l(O,{class:"row"},{default:o(()=>[c("div",ti,[l(le,{bordered:"",separator:"",class:"rounded-borders bg-blue-10 full-width"},{default:o(()=>[(p(!0),y(D,null,P(e.monster.lairActions,(i,r)=>(p(),V(W,{key:i.id,label:e.$t("editor.lair.actionItem",[r+1]),"expand-separator":""},{header:o(()=>[l(R,null,{default:o(()=>[k(d(e.$t("editor.lair.actionItem",[r+1])),1)]),_:2},1024),l(R,{side:""},{default:o(()=>[l(a,{field:"lairActions",idx:r},null,8,["idx"])]),_:2},1024)]),default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[l(s,{field:i.description,"i18n-label-key":"monster.trait.description","onUpdate:modelValue":w=>{i.description=w,e.autoUpdateCr(i.description,i.crAnnotation)}},null,8,["field","onUpdate:modelValue"]),l(m,{field:"lairActions",index:r},null,8,["index"])]),_:2},1024),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"negative",class:"full-width",label:e.$t("editor.lair.delete"),onClick:()=>e.monster.deleteLairAction(i.id)},null,8,["label","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})])]),_:1}),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"positive",class:"full-width",label:e.$t("editor.lair.add"),onClick:e.monster.addLairAction},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label","caption"])}var oi=G(Zs,[["render",li]]);const ai=X({name:"RegionalEffectsEditor",components:{MonsterTextEditor:de,SwapButtons:Ae},setup(){return{monster:J()}}}),ni={class:"col-12 flex justify-start items-center"},si={class:"col-12 q-pa-sm"},ii={class:"col-12"};function ri(e,t,n,u,f,b){const s=q("monster-text-editor"),a=q("swap-buttons");return p(),V(W,{"expand-separator":"",icon:"public",label:e.$t("editor.regional.label")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[c("div",ni,d(e.$t("editor.regional.help")),1),c("div",si,[l(s,{field:e.monster.regionalEffectDescription,"i18n-label-key":"editor.regional.preamble","show-reset":!0,"onUpdate:modelValue":t[0]||(t[0]=m=>e.monster.regionalEffectDescription=m),onReset:t[1]||(t[1]=m=>e.monster.regionalEffectDescription=e.$t("presets.regional"))},null,8,["field"])])]),_:1}),l(O,{class:"row"},{default:o(()=>[c("div",ii,[l(le,{bordered:"",separator:"",class:"rounded-borders bg-blue-10 full-width"},{default:o(()=>[(p(!0),y(D,null,P(e.monster.regionalEffects,(m,i)=>(p(),V(W,{key:m.id,label:e.$t("editor.regional.effectItem",[i+1]),"expand-separator":""},{header:o(()=>[l(R,null,{default:o(()=>[k(d(e.$t("editor.regional.effectItem",[i+1])),1)]),_:2},1024),l(R,{side:""},{default:o(()=>[l(a,{field:"regionalEffects",idx:i},null,8,["idx"])]),_:2},1024)]),default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[l(s,{field:m.description,"i18n-label-key":"monster.trait.description","onUpdate:modelValue":r=>{m.description=r}},null,8,["field","onUpdate:modelValue"])]),_:2},1024),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"negative",class:"full-width",label:e.$t("editor.regional.delete"),onClick:()=>e.monster.deleteRegionalEffect(m.id)},null,8,["label","onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["label"]))),128))]),_:1})])]),_:1}),l(oe,{align:"center"},{default:o(()=>[l(S,{color:"positive",class:"full-width",label:e.$t("editor.regional.add"),onClick:e.monster.addRegionalEffect},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["label"])}var di=G(ai,[["render",ri]]);const ui={class:"col-12 flex justify-start items-center"},ci={class:"col-12 q-pa-sm"},mi=X({__name:"InventoryEditor",setup(e){const t=J();return(n,u)=>(p(),V(W,{"expand-separator":"",icon:"luggage",label:n.$t("editor.inventory.label")},{default:o(()=>[l(z,null,{default:o(()=>[l(O,{class:"row"},{default:o(()=>[c("div",ui,d(n.$t("editor.inventory.help")),1),c("div",ci,[l(de,{field:Ge(t).inventory,"i18n-label-key":"editor.inventory.label","show-reset":!0,"onUpdate:modelValue":u[0]||(u[0]=f=>Ge(t).inventory=f),onReset:u[1]||(u[1]=f=>Ge(t).inventory="")},null,8,["field"])])]),_:1})]),_:1})]),_:1},8,["label"]))}}),pi=X({name:"MonsterBuilder",components:{BasicsEditor:hl,WebRenderer:Pa,SavesEditor:Ma,SpeedsEditor:za,SkillsEditor:Wa,SensesEditor:Ya,ResistancesEditor:tn,TraitsEditor:Rn,SpellcastingEditor:ns,AttacksEditor:bs,MultiattackEditor:Ts,ActionsEditor:Ls,LegendaryActionsEditor:Is,MythicActionsEditor:Xs,ReactionsEditor:Js,LairActionsEditor:oi,RegionalEffectsEditor:di,InventoryEditor:mi},setup(){const e=J(),t=yt(),n=H(t.statBlockColumns===1?500:800);return pe(()=>t.statBlockColumns,(u,f)=>{u!==f&&(u===1?n.value=500:n.value=800)}),{splitterModel:n,monster:e}}}),fi={id:"editor",class:"q-pa-md",style:{width:"100%"}},bi={class:"q-pa-md"};function vi(e,t,n,u,f,b){const s=q("basics-editor"),a=q("inventory-editor"),m=q("saves-editor"),i=q("speeds-editor"),r=q("skills-editor"),w=q("senses-editor"),C=q("resistances-editor"),N=q("traits-editor"),B=q("spellcasting-editor"),A=q("attacks-editor"),L=q("actions-editor"),I=q("multiattack-editor"),Y=q("reactions-editor"),_=q("legendary-actions-editor"),T=q("mythic-actions-editor"),E=q("lair-actions-editor"),ne=q("regional-effects-editor"),ue=q("web-renderer");return p(),V(ml,{class:"row items-start"},{default:o(()=>[l(fl,{id:"splitter",modelValue:e.splitterModel,"onUpdate:modelValue":t[0]||(t[0]=ve=>e.splitterModel=ve),reverse:"",unit:"px",style:{height:"calc(100vh - 177px)",width:"100%"}},{before:o(()=>[c("div",fi,[l(le,{bordered:"",separator:"",class:"rounded-borders"},{default:o(()=>[l(s),l(a),l(m),l(i),l(r),l(w),l(C),l(N),l(B),l(A),l(L),l(I),l(Y),l(_),l(T),l(E),l(ne)]),_:1})])]),after:o(()=>[c("div",bi,[l(ue,{id:"renderer"})])]),_:1},8,["modelValue"])]),_:1})}var Vi=G(pi,[["render",vi]]);export{Vi as default};
